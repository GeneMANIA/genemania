!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=K.type(e);return"function"===n||K.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(K.isFunction(t))return K.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return K.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return K.filter(t,e,n);t=K.filter(t,e)}return K.grep(e,function(e){return H.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=fe[e]={};return K.each(e.match(pe)||[],function(e,n){t[n]=!0}),t}function a(){Q.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),K.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=K.expando+Math.random()}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(we,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:be.test(n)?K.parseJSON(n):n}catch(i){}me.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function h(){try{return Q.activeElement}catch(e){}}function d(e,t){return K.nodeName(e,"table")&&K.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Le.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)ye.set(e[n],"globalEval",!t||ye.get(t[n],"globalEval"))}function v(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(ye.hasData(e)&&(o=ye.access(e),a=ye.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)K.event.add(t,i,l[i][n])}me.hasData(e)&&(s=me.access(e),u=K.extend({},s),me.set(t,u))}}function y(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&K.nodeName(e,t)?K.merge([e],n):n}function m(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ke.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var r,i=K(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:K.css(i[0],"display");return i.detach(),o}function w(e){var t=Q,n=Fe[e];return n||(n=b(e,t),"none"!==n&&n||(qe=(qe||K("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qe[0].contentDocument,t.write(),t.close(),n=b(e,t),qe.detach()),Fe[e]=n),n}function x(e,t,n){var r,i,o,a,s=e.style;return n=n||ze(e),n&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||K.contains(e.ownerDocument,e)||(a=K.style(e,t)),Ge.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=We.length;i--;)if(t=We[i]+n,t in e)return t;return r}function k(e,t,n){var r=Ve.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function S(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=K.css(e,n+_e[o],!0,i)),r?("content"===n&&(a-=K.css(e,"padding"+_e[o],!0,i)),"margin"!==n&&(a-=K.css(e,"border"+_e[o]+"Width",!0,i))):(a+=K.css(e,"padding"+_e[o],!0,i),"padding"!==n&&(a+=K.css(e,"border"+_e[o]+"Width",!0,i)));return a}function T(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=ze(e),a="border-box"===K.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=x(e,t,o),(0>i||null==i)&&(i=e.style[t]),Ge.test(i))return i;r=a&&(Z.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+S(e,t,n||(a?"border":"content"),r,o)+"px"}function C(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=ye.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Ee(r)&&(o[a]=ye.access(r,"olddisplay",w(r.nodeName)))):(i=Ee(r),"none"===n&&i||ye.set(r,"olddisplay",i?n:K.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function N(e,t,n,r,i){return new N.prototype.init(e,t,n,r,i)}function A(){return setTimeout(function(){Ze=void 0}),Ze=K.now()}function P(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=_e[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function D(e,t,n){for(var r,i=(nt[t]||[]).concat(nt["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function $(e,t,n){var r,i,o,a,s,u,l,c,h=this,d={},p=e.style,f=e.nodeType&&Ee(e),g=ye.get(e,"fxshow");n.queue||(s=K._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,K.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=K.css(e,"display"),c="none"===l?ye.get(e,"olddisplay")||w(e.nodeName):l,"inline"===c&&"none"===K.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Je.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;f=!0}d[r]=g&&g[r]||K.style(e,r)}else l=void 0;if(K.isEmptyObject(d))"inline"===("none"===l?w(e.nodeName):l)&&(p.display=l);else{g?"hidden"in g&&(f=g.hidden):g=ye.access(e,"fxshow",{}),o&&(g.hidden=!f),f?K(e).show():h.done(function(){K(e).hide()}),h.done(function(){var t;ye.remove(e,"fxshow");for(t in d)K.style(e,t,d[t])});for(r in d)a=D(f?g[r]:0,r,h),r in g||(g[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function M(e,t){var n,r,i,o,a;for(n in e)if(r=K.camelCase(n),i=t[r],o=e[n],K.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=K.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function I(e,t,n){var r,i,o=0,a=tt.length,s=K.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Ze||A(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:K.extend({},t),opts:K.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ze||A(),duration:n.duration,tweens:[],createTween:function(t,n){var r=K.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(M(c,l.opts.specialEasing);a>o;o++)if(r=tt[o].call(l,e,c,l.opts))return r;return K.map(c,D,l),K.isFunction(l.opts.start)&&l.opts.start.call(e,l),K.fx.timer(K.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function O(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(pe)||[];if(K.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function L(e,t,n,r){function i(s){var u;return o[s]=!0,K.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=e===xt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function j(e,t){var n,r,i=K.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&K.extend(!0,e,r),e}function R(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function q(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function F(e,t,n,r){var i;if(K.isArray(t))K.each(t,function(t,i){n||St.test(e)?r(e,i):F(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==K.type(t))r(e,t);else for(i in t)F(e+"["+i+"]",t[i],n,r)}function B(e){return K.isWindow(e)?e:9===e.nodeType&&e.defaultView}var G=[],z=G.slice,U=G.concat,V=G.push,H=G.indexOf,Y={},X=Y.toString,W=Y.hasOwnProperty,Z={},Q=e.document,J="2.1.1",K=function(e,t){return new K.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};K.fn=K.prototype={jquery:J,constructor:K,selector:"",length:0,toArray:function(){return z.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:z.call(this)},pushStack:function(e){var t=K.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return K.each(this,e,t)},map:function(e){return this.pushStack(K.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:G.sort,splice:G.splice},K.extend=K.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||K.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(l&&r&&(K.isPlainObject(r)||(i=K.isArray(r)))?(i?(i=!1,o=n&&K.isArray(n)?n:[]):o=n&&K.isPlainObject(n)?n:{},a[t]=K.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},K.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===K.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!K.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==K.type(e)||e.nodeType||K.isWindow(e)?!1:e.constructor&&!W.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Y[X.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=K.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?K.merge(r,"string"==typeof e?[e]:e):V.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:H.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),u=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return U.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),K.isFunction(e)?(r=z.call(arguments,2),i=function(){return e.apply(t||this,r.concat(z.call(arguments)))},i.guid=e.guid=e.guid||K.guid++,i):void 0},now:Date.now,support:Z}),K.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,r){var i,o,a,s,u,l,h,p,f,g;if((t?t.ownerDocument||t:F)!==$&&D(t),t=t||$,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(I&&!r){if(i=me.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&R(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&x.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(a)),n}if(x.qsa&&(!O||!O.test(e))){if(p=h=q,f=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=S(e),(h=t.getAttribute("id"))?p=h.replace(we,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",u=l.length;u--;)l[u]=p+d(l[u]);f=be.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return K.apply(n,f.querySelectorAll(g)),n}catch(v){}finally{h||t.removeAttribute("id")}}}return C(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[q]=!0,e}function i(e){var t=$.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)_.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&typeof e.getElementsByTagName!==Y&&e}function h(){}function d(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=G++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l=[B,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[q]||(t[q]={}),(s=u[r])&&s[0]===B&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function f(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function v(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function y(e,t,n,i,o,a){return i&&!i[q]&&(i=y(i)),o&&!o[q]&&(o=y(o,a)),r(function(r,a,s,u){var l,c,h,d=[],p=[],f=a.length,y=r||g(t||"*",s.nodeType?[s]:s,[]),m=!e||!r&&t?y:v(y,d,e,s,u),b=n?o||(r?e:f||i)?[]:a:m;if(n&&n(m,b,s,u),i)for(l=v(b,p),i(l,[],s,u),c=l.length;c--;)(h=l[c])&&(b[p[c]]=!(m[p[c]]=h));if(r){if(o||e){if(o){for(l=[],c=b.length;c--;)(h=b[c])&&l.push(m[c]=h);o(null,b=[],l,u)}for(c=b.length;c--;)(h=b[c])&&(l=o?te.call(r,h):d[c])>-1&&(r[l]=!(a[l]=h))}}else b=v(b===a?b.splice(f,b.length):b),o?o(null,a,b,u):K.apply(a,b)})}function m(e){for(var t,n,r,i=e.length,o=_.relative[e[0].type],a=o||_.relative[" "],s=o?1:0,u=p(function(e){return e===t},a,!0),l=p(function(e){return te.call(t,e)>-1},a,!0),c=[function(e,n,r){return!o&&(r||n!==N)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];i>s;s++)if(n=_.relative[e[s].type])c=[p(f(c),n)];else{if(n=_.filter[e[s].type].apply(null,e[s].matches),n[q]){for(r=++s;i>r&&!_.relative[e[r].type];r++);return y(s>1&&f(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ue,"$1"),n,r>s&&m(e.slice(s,r)),i>r&&m(e=e.slice(r)),i>r&&d(e))}c.push(n)}return f(c)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,l){var c,h,d,p=0,f="0",g=r&&[],y=[],m=N,b=r||o&&_.find.TAG("*",l),w=B+=null==m?1:Math.random()||.1,x=b.length;for(l&&(N=a!==$&&a);f!==x&&null!=(c=b[f]);f++){if(o&&c){for(h=0;d=e[h++];)if(d(c,a,s)){u.push(c);break}l&&(B=w)}i&&((c=!d&&c)&&p--,r&&g.push(c))}if(p+=f,i&&f!==p){for(h=0;d=n[h++];)d(g,y,a,s);if(r){if(p>0)for(;f--;)g[f]||y[f]||(y[f]=Q.call(u));y=v(y)}K.apply(u,y),l&&!r&&y.length>0&&p+n.length>1&&t.uniqueSort(u)}return l&&(B=w,N=m),g};return i?r(a):a}var w,x,_,E,k,S,T,C,N,A,P,D,$,M,I,O,L,j,R,q="sizzle"+-new Date,F=e.document,B=0,G=0,z=n(),U=n(),V=n(),H=function(e,t){return e===t&&(P=!0),0},Y="undefined",X=1<<31,W={}.hasOwnProperty,Z=[],Q=Z.pop,J=Z.push,K=Z.push,ee=Z.slice,te=Z.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),ae="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+re+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",ue=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),le=new RegExp("^"+re+"*,"+re+"*"),ce=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),he=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),de=new RegExp(se),pe=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),_e=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{K.apply(Z=ee.call(F.childNodes),F.childNodes),Z[F.childNodes.length].nodeType}catch(Ee){K={apply:Z.length?function(e,t){J.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}x=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:F,r=n.defaultView;return n!==$&&9===n.nodeType&&n.documentElement?($=n,M=n.documentElement,I=!k(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){D()},!1):r.attachEvent&&r.attachEvent("onunload",function(){D()})),x.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ye.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),x.getById=i(function(e){return M.appendChild(e).id=q,!n.getElementsByName||!n.getElementsByName(q).length}),x.getById?(_.find.ID=function(e,t){if(typeof t.getElementById!==Y&&I){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(e){var t=e.replace(xe,_e);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(xe,_e);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=x.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},_.find.CLASS=x.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&I?t.getElementsByClassName(e):void 0},L=[],O=[],(x.qsa=ye.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&O.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+re+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||O.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(x.matchesSelector=ye.test(j=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(e){x.disconnectedMatch=j.call(e,"div"),j.call(e,"[s!='']:x"),L.push("!=",se)}),O=O.length&&new RegExp(O.join("|")),L=L.length&&new RegExp(L.join("|")),t=ye.test(M.compareDocumentPosition),R=t||ye.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},H=t?function(e,t){if(e===t)return P=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!x.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===F&&R(F,e)?-1:t===n||t.ownerDocument===F&&R(F,t)?1:A?te.call(A,e)-te.call(A,t):0:4&r?-1:1)}:function(e,t){if(e===t)return P=!0,0;var r,i=0,o=e.parentNode,s=t.parentNode,u=[e],l=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:A?te.call(A,e)-te.call(A,t):0;if(o===s)return a(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;u[i]===l[i];)i++;return i?a(u[i],l[i]):u[i]===F?-1:l[i]===F?1:0},n):$},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==$&&D(e),n=n.replace(he,"='$1']"),!(!x.matchesSelector||!I||L&&L.test(n)||O&&O.test(n)))try{var r=j.call(e,n);if(r||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,$,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==$&&D(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==$&&D(e);var n=_.attrHandle[t.toLowerCase()],r=n&&W.call(_.attrHandle,t.toLowerCase())?n(e,t,!I):void 0;return void 0!==r?r:x.attributes||!I?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(P=!x.detectDuplicates,A=!x.sortStable&&e.slice(0),e.sort(H),P){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return A=null,e},E=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=E(t);return n},_=t.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,h,d,p,f,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),m=!u&&!s;if(v){if(o){for(;g;){for(h=t;h=h[g];)if(s?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?v.firstChild:v.lastChild],a&&m){for(c=v[q]||(v[q]={}),l=c[e]||[],p=l[0]===B&&l[1],d=l[0]===B&&l[2],h=p&&v.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===t){c[e]=[B,p,d];break}}else if(m&&(l=(t[q]||(t[q]={}))[e])&&l[0]===B)d=l[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++d||(m&&((h[q]||(h[q]={}))[e]=[B,d]),h!==t)););return d-=i,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,n){var i,o=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[q]?o(n):o.length>1?(i=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=te.call(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=T(e.replace(ue,"$1"));return i[q]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,_e).toLowerCase(),function(t){var n;do if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=u(w);return h.prototype=_.filters=_.pseudos,_.setFilters=new h,S=t.tokenize=function(e,n){var r,i,o,a,s,u,l,c=U[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=_.preFilter;s;){(!r||(i=le.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),s=s.slice(r.length));for(a in _.filter)!(i=fe[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):U(e,u).slice(0)},T=t.compile=function(e,t){var n,r=[],i=[],o=V[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=m(t[n]),o[q]?r.push(o):i.push(o);o=V(e,b(i,r)),o.selector=e}return o},C=t.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,h=!r&&S(e=l.selector||e);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===t.nodeType&&I&&_.relative[o[1].type]){if(t=(_.find.ID(a.matches[0].replace(xe,_e),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=fe.needsContext.test(e)?0:o.length;i--&&(a=o[i],!_.relative[s=a.type]);)if((u=_.find[s])&&(r=u(a.matches[0].replace(xe,_e),be.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&d(o),!e)return K.apply(n,r),n;break}}return(l||T(e,h))(r,t,!I,n,be.test(e)&&c(t.parentNode)||t),n},x.sortStable=q.split("").sort(H).join("")===q,x.detectDuplicates=!!P,D(),x.sortDetached=i(function(e){return 1&e.compareDocumentPosition($.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);K.find=ie,K.expr=ie.selectors,K.expr[":"]=K.expr.pseudos,K.unique=ie.uniqueSort,K.text=ie.getText,K.isXMLDoc=ie.isXML,K.contains=ie.contains;var oe=K.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;K.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?K.find.matchesSelector(r,e)?[r]:[]:K.find.matches(e,K.grep(t,function(e){return 1===e.nodeType}))},K.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(K(e).filter(function(){
for(t=0;n>t;t++)if(K.contains(i[t],this))return!0}));for(t=0;n>t;t++)K.find(e,i[t],r);return r=this.pushStack(n>1?K.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&oe.test(e)?K(e):e||[],!1).length}});var ue,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=K.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ue).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof K?t[0]:t,K.merge(this,K.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),ae.test(n[1])&&K.isPlainObject(t))for(n in t)K.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=Q.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):K.isFunction(e)?"undefined"!=typeof ue.ready?ue.ready(e):e(K):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),K.makeArray(e,this))};ce.prototype=K.fn,ue=K(Q);var he=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};K.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&K(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),K.fn.extend({has:function(e){var t=K(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(K.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=oe.test(e)||"string"!=typeof e?K(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&K.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?K.unique(o):o)},index:function(e){return e?"string"==typeof e?H.call(K(e),this[0]):H.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(K.unique(K.merge(this.get(),K(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),K.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return K.dir(e,"parentNode")},parentsUntil:function(e,t,n){return K.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return K.dir(e,"nextSibling")},prevAll:function(e){return K.dir(e,"previousSibling")},nextUntil:function(e,t,n){return K.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return K.dir(e,"previousSibling",n)},siblings:function(e){return K.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return K.sibling(e.firstChild)},contents:function(e){return e.contentDocument||K.merge([],e.childNodes)}},function(e,t){K.fn[e]=function(n,r){var i=K.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=K.filter(r,i)),this.length>1&&(de[e]||K.unique(i),he.test(e)&&i.reverse()),this.pushStack(i)}});var pe=/\S+/g,fe={};K.Callbacks=function(e){e="string"==typeof e?fe[e]||o(e):K.extend({},e);var t,n,r,i,a,s,u=[],l=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,s=i||0,i=0,a=u.length,r=!0;u&&a>s;s++)if(u[s].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:h.disable())},h={add:function(){if(u){var n=u.length;!function o(t){K.each(t,function(t,n){var r=K.type(n);"function"===r?e.unique&&h.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?a=u.length:t&&(i=n,c(t))}return this},remove:function(){return u&&K.each(arguments,function(e,t){for(var n;(n=K.inArray(t,u,n))>-1;)u.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(e){return e?K.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},K.extend({Deferred:function(e){var t=[["resolve","done",K.Callbacks("once memory"),"resolved"],["reject","fail",K.Callbacks("once memory"),"rejected"],["notify","progress",K.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return K.Deferred(function(n){K.each(t,function(t,o){var a=K.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&K.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?K.extend(e,r):r}},i={};return r.pipe=r.then,K.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=z.call(arguments),a=o.length,s=1!==a||e&&K.isFunction(e.promise)?a:0,u=1===s?e:K.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?z.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&K.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--s;return s||u.resolveWith(r,o),u.promise()}});var ge;K.fn.ready=function(e){return K.ready.promise().done(e),this},K.extend({isReady:!1,readyWait:1,holdReady:function(e){e?K.readyWait++:K.ready(!0)},ready:function(e){(e===!0?--K.readyWait:K.isReady)||(K.isReady=!0,e!==!0&&--K.readyWait>0||(ge.resolveWith(Q,[K]),K.fn.triggerHandler&&(K(Q).triggerHandler("ready"),K(Q).off("ready"))))}}),K.ready.promise=function(t){return ge||(ge=K.Deferred(),"complete"===Q.readyState?setTimeout(K.ready):(Q.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),ge.promise(t)},K.ready.promise();var ve=K.access=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===K.type(n)){i=!0;for(s in n)K.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,K.isFunction(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(K(e),n)})),t))for(;u>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o};K.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=K.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,K.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(K.isEmptyObject(o))K.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,K.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),a=this.cache[o];if(void 0===t)this.cache[o]={};else{K.isArray(t)?r=t.concat(t.map(K.camelCase)):(i=K.camelCase(t),t in a?r=[t,i]:(r=i,r=r in a?[r]:r.match(pe)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!K.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ye=new s,me=new s,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;K.extend({hasData:function(e){return me.hasData(e)||ye.hasData(e)},data:function(e,t,n){return me.access(e,t,n)},removeData:function(e,t){me.remove(e,t)},_data:function(e,t,n){return ye.access(e,t,n)},_removeData:function(e,t){ye.remove(e,t)}}),K.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=me.get(o),1===o.nodeType&&!ye.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=K.camelCase(r.slice(5)),u(o,r,i[r])));ye.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){me.set(this,e)}):ve(this,function(t){var n,r=K.camelCase(e);if(o&&void 0===t){if(n=me.get(o,e),void 0!==n)return n;if(n=me.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=me.get(this,r);me.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&me.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){me.remove(this,e)})}}),K.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ye.get(e,t),n&&(!r||K.isArray(n)?r=ye.access(e,t,K.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=K.queue(e,t),r=n.length,i=n.shift(),o=K._queueHooks(e,t),a=function(){K.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ye.get(e,n)||ye.access(e,n,{empty:K.Callbacks("once memory").add(function(){ye.remove(e,[t+"queue",n])})})}}),K.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?K.queue(this[0],e):void 0===t?this:this.each(function(){var n=K.queue(this,e,t);K._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&K.dequeue(this,e)})},dequeue:function(e){return this.each(function(){K.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=K.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ye.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=["Top","Right","Bottom","Left"],Ee=function(e,t){return e=t||e,"none"===K.css(e,"display")||!K.contains(e.ownerDocument,e)},ke=/^(?:checkbox|radio)$/i;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Z.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Se="undefined";Z.focusinBubbles="onfocusin"in e;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu)|click/,Ne=/^(?:focusinfocus|focusoutblur)$/,Ae=/^([^.]*)(?:\.(.+)|)$/;K.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,h,d,p,f,g,v=ye.get(e);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=K.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof K!==Se&&K.event.triggered!==t.type?K.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],l=t.length;l--;)s=Ae.exec(t[l])||[],p=g=s[1],f=(s[2]||"").split(".").sort(),p&&(h=K.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=K.event.special[p]||{},c=K.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&K.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=u[p])||(d=u[p]=[],d.delegateCount=0,h.setup&&h.setup.call(e,r,f,a)!==!1||e.addEventListener&&e.addEventListener(p,a,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),K.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,h,d,p,f,g,v=ye.hasData(e)&&ye.get(e);if(v&&(u=v.events)){for(t=(t||"").match(pe)||[""],l=t.length;l--;)if(s=Ae.exec(t[l])||[],p=g=s[1],f=(s[2]||"").split(".").sort(),p){for(h=K.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,d=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));a&&!d.length&&(h.teardown&&h.teardown.call(e,f,v.handle)!==!1||K.removeEvent(e,p,v.handle),delete u[p])}else for(p in u)K.event.remove(e,p+t[l],n,r,!0);K.isEmptyObject(u)&&(delete v.handle,ye.remove(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,u,l,c,h,d=[r||Q],p=W.call(t,"type")?t.type:t,f=W.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||Q,3!==r.nodeType&&8!==r.nodeType&&!Ne.test(p+K.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,t=t[K.expando]?t:new K.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:K.makeArray(n,[t]),h=K.event.special[p]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!K.isWindow(r)){for(u=h.delegateType||p,Ne.test(u+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(r.ownerDocument||Q)&&d.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=d[o++])&&!t.isPropagationStopped();)t.type=o>1?u:h.bindType||p,c=(ye.get(a,"events")||{})[t.type]&&ye.get(a,"handle"),c&&c.apply(a,n),c=l&&a[l],c&&c.apply&&K.acceptData(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!K.acceptData(r)||l&&K.isFunction(r[p])&&!K.isWindow(r)&&(s=r[l],s&&(r[l]=null),K.event.triggered=p,r[p](),K.event.triggered=void 0,s&&(r[l]=s)),t.result}},dispatch:function(e){e=K.event.fix(e);var t,n,r,i,o,a=[],s=z.call(arguments),u=(ye.get(this,"events")||{})[e.type]||[],l=K.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=K.event.handlers.call(this,e,u),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((K.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;s>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?K(i,this).index(u)>=0:K.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Q,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[K.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Ce.test(i)?this.mouseHooks:Te.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new K.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&K.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return K.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=K.extend(new K.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?K.event.trigger(i,null,t):K.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},K.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},K.Event=function(e,t){return this instanceof K.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&K.extend(this,t),this.timeStamp=e&&e.timeStamp||K.now(),void(this[K.expando]=!0)):new K.Event(e,t)},K.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},K.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){K.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!K.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Z.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){K.event.simulate(t,e.target,K.event.fix(e),!0)};K.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ye.access(r,t);i||r.addEventListener(e,n,!0),ye.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ye.access(r,t)-1;i?ye.access(r,t,i):(r.removeEventListener(e,n,!0),ye.remove(r,t))}}}),K.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return K().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=K.guid++)),this.each(function(){K.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,K(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){K.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){K.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?K.event.trigger(e,t,n,!0):void 0}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,De=/<([\w:]+)/,$e=/<|&#?\w+;/,Me=/<(?:script|style|link)/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^$|\/(?:java|ecma)script/i,Le=/^true\/(.*)/,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td,K.extend({clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=K.contains(e.ownerDocument,e);if(!(Z.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||K.isXMLDoc(e)))for(a=y(s),o=y(e),r=0,i=o.length;i>r;r++)m(o[r],a[r]);if(t)if(n)for(o=o||y(e),a=a||y(s),r=0,i=o.length;i>r;r++)v(o[r],a[r]);else v(e,s);return a=y(s,"script"),a.length>0&&g(a,!u&&y(e,"script")),s},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c=t.createDocumentFragment(),h=[],d=0,p=e.length;p>d;d++)if(i=e[d],i||0===i)if("object"===K.type(i))K.merge(h,i.nodeType?[i]:i);else if($e.test(i)){for(o=o||c.appendChild(t.createElement("div")),a=(De.exec(i)||["",""])[1].toLowerCase(),s=Re[a]||Re._default,o.innerHTML=s[1]+i.replace(Pe,"<$1></$2>")+s[2],l=s[0];l--;)o=o.lastChild;K.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(i));for(c.textContent="",d=0;i=h[d++];)if((!r||-1===K.inArray(i,r))&&(u=K.contains(i.ownerDocument,i),o=y(c.appendChild(i),"script"),u&&g(o),n))for(l=0;i=o[l++];)Oe.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=K.event.special,a=0;void 0!==(n=e[a]);a++){if(K.acceptData(n)&&(i=n[ye.expando],i&&(t=ye.cache[i]))){if(t.events)for(r in t.events)o[r]?K.event.remove(n,r):K.removeEvent(n,r,t.handle);ye.cache[i]&&delete ye.cache[i]}delete me.cache[n[me.expando]]}}}),K.fn.extend({text:function(e){return ve(this,function(e){return void 0===e?K.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?K.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||K.cleanData(y(n)),n.parentNode&&(t&&K.contains(n.ownerDocument,n)&&g(y(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(K.cleanData(y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return K.clone(this,e,t)})},html:function(e){return ve(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Me.test(e)&&!Re[(De.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Pe,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(K.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,K.cleanData(y(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=U.apply([],e);var n,r,i,o,a,s,u=0,l=this.length,c=this,h=l-1,d=e[0],g=K.isFunction(d);if(g||l>1&&"string"==typeof d&&!Z.checkClone&&Ie.test(d))return this.each(function(n){var r=c.eq(n);g&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=K.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=K.map(y(n,"script"),p),o=i.length;l>u;u++)a=n,u!==h&&(a=K.clone(a,!0,!0),o&&K.merge(i,y(a,"script"))),t.call(this[u],a,u);if(o)for(s=i[i.length-1].ownerDocument,K.map(i,f),u=0;o>u;u++)a=i[u],Oe.test(a.type||"")&&!ye.access(a,"globalEval")&&K.contains(s,a)&&(a.src?K._evalUrl&&K._evalUrl(a.src):K.globalEval(a.textContent.replace(je,"")))}return this}}),K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){K.fn[e]=function(e){for(var n,r=[],i=K(e),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),K(i[a])[t](n),V.apply(r,n.get());return this.pushStack(r)}});var qe,Fe={},Be=/^margin/,Ge=new RegExp("^("+xe+")(?!px)[a-z%]+$","i"),ze=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(a,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=Q.documentElement,o=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),e.getComputedStyle&&K.extend(Z,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=a.appendChild(Q.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),t}}))}(),K.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var Ue=/^(none|table(?!-c[ea]).+)/,Ve=new RegExp("^("+xe+")(.*)$","i"),He=new RegExp("^([+-])=("+xe+")","i"),Ye={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},We=["Webkit","O","Moz","ms"];K.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=K.camelCase(t),u=e.style;return t=K.cssProps[s]||(K.cssProps[s]=E(u,s)),a=K.cssHooks[t]||K.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=He.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(K.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||K.cssNumber[s]||(n+="px"),Z.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,a,s=K.camelCase(t);return t=K.cssProps[s]||(K.cssProps[s]=E(e.style,s)),a=K.cssHooks[t]||K.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=x(e,t,r)),"normal"===i&&t in Xe&&(i=Xe[t]),""===n||n?(o=parseFloat(i),n===!0||K.isNumeric(o)?o||0:i):i}}),K.each(["height","width"],function(e,t){K.cssHooks[t]={get:function(e,n,r){return n?Ue.test(K.css(e,"display"))&&0===e.offsetWidth?K.swap(e,Ye,function(){return T(e,t,r)}):T(e,t,r):void 0},set:function(e,n,r){var i=r&&ze(e);return k(e,n,r?S(e,t,r,"border-box"===K.css(e,"boxSizing",!1,i),i):0)}}}),K.cssHooks.marginRight=_(Z.reliableMarginRight,function(e,t){return t?K.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),K.each({margin:"",padding:"",border:"Width"},function(e,t){K.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+_e[r]+t]=o[r]||o[r-2]||o[0];return i}},Be.test(e)||(K.cssHooks[e+t].set=k)}),K.fn.extend({css:function(e,t){return ve(this,function(e,t,n){var r,i,o={},a=0;if(K.isArray(t)){for(r=ze(e),i=t.length;i>a;a++)o[t[a]]=K.css(e,t[a],!1,r);return o}return void 0!==n?K.style(e,t,n):K.css(e,t)},e,t,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ee(this)?K(this).show():K(this).hide()})}}),K.Tween=N,N.prototype={constructor:N,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(K.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.pos=t=this.options.duration?K.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=K.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){K.fx.step[e.prop]?K.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[K.cssProps[e.prop]]||K.cssHooks[e.prop])?K.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},K.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},K.fx=N.prototype.init,K.fx.step={};var Ze,Qe,Je=/^(?:toggle|show|hide)$/,Ke=new RegExp("^(?:([+-])=|)("+xe+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[$],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ke.exec(t),o=i&&i[3]||(K.cssNumber[e]?"":"px"),a=(K.cssNumber[e]||"px"!==o&&+r)&&Ke.exec(K.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,K.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};K.Animation=K.extend(I,{tweener:function(e,t){K.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),K.speed=function(e,t,n){var r=e&&"object"==typeof e?K.extend({},e):{complete:n||!n&&t||K.isFunction(e)&&e,duration:e,easing:n&&t||t&&!K.isFunction(t)&&t};return r.duration=K.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in K.fx.speeds?K.fx.speeds[r.duration]:K.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){K.isFunction(r.old)&&r.old.call(this),r.queue&&K.dequeue(this,r.queue)},r},K.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ee).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=K.isEmptyObject(e),o=K.speed(t,n,r),a=function(){var t=I(this,K.extend({},e),o);(i||ye.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=K.timers,a=ye.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&et.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&K.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ye.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=K.timers,a=r?r.length:0;for(n.finish=!0,K.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);

delete n.finish})}}),K.each(["toggle","show","hide"],function(e,t){var n=K.fn[t];K.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(P(t,!0),e,r,i)}}),K.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){K.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),K.timers=[],K.fx.tick=function(){var e,t=0,n=K.timers;for(Ze=K.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||K.fx.stop(),Ze=void 0},K.fx.timer=function(e){K.timers.push(e),e()?K.fx.start():K.timers.pop()},K.fx.interval=13,K.fx.start=function(){Qe||(Qe=setInterval(K.fx.tick,K.fx.interval))},K.fx.stop=function(){clearInterval(Qe),Qe=null},K.fx.speeds={slow:600,fast:200,_default:400},K.fn.delay=function(e,t){return e=K.fx?K.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),n=t.appendChild(Q.createElement("option"));e.type="checkbox",Z.checkOn=""!==e.value,Z.optSelected=n.selected,t.disabled=!0,Z.optDisabled=!n.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",Z.radioValue="t"===e.value}();var rt,it,ot=K.expr.attrHandle;K.fn.extend({attr:function(e,t){return ve(this,K.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){K.removeAttr(this,e)})}}),K.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Se?K.prop(e,t,n):(1===o&&K.isXMLDoc(e)||(t=t.toLowerCase(),r=K.attrHooks[t]||(K.expr.match.bool.test(t)?it:rt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=K.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void K.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(pe);if(o&&1===e.nodeType)for(;n=o[i++];)r=K.propFix[n]||n,K.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Z.radioValue&&"radio"===t&&K.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),it={set:function(e,t,n){return t===!1?K.removeAttr(e,n):e.setAttribute(n,n),n}},K.each(K.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||K.find.attr;ot[t]=function(e,t,r){var i,o;return r||(o=ot[t],ot[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,ot[t]=o),i}});var at=/^(?:input|select|textarea|button)$/i;K.fn.extend({prop:function(e,t){return ve(this,K.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[K.propFix[e]||e]})}}),K.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!K.isXMLDoc(e),o&&(t=K.propFix[t]||t,i=K.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||at.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Z.optSelected||(K.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),K.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){K.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;K.fn.extend({addClass:function(e){var t,n,r,i,o,a,s="string"==typeof e&&e,u=0,l=this.length;if(K.isFunction(e))return this.each(function(t){K(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(pe)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=K.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(K.isFunction(e))return this.each(function(t){K(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(pe)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?K.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(K.isFunction(e)?function(n){K(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=K(this),o=e.match(pe)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Se||"boolean"===n)&&(this.className&&ye.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ye.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var ut=/\r/g;K.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=K.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,K(this).val()):e,null==i?i="":"number"==typeof i?i+="":K.isArray(i)&&(i=K.map(i,function(e){return null==e?"":e+""})),t=K.valHooks[this.type]||K.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=K.valHooks[i.type]||K.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ut,""):null==n?"":n)}}}),K.extend({valHooks:{option:{get:function(e){var t=K.find.attr(e,"value");return null!=t?t:K.trim(K.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(Z.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&K.nodeName(n.parentNode,"optgroup"))){if(t=K(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=K.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=K.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]={set:function(e,t){return K.isArray(t)?e.checked=K.inArray(K(e).val(),t)>=0:void 0}},Z.checkOn||(K.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){K.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),K.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var lt=K.now(),ct=/\?/;K.parseJSON=function(e){return JSON.parse(e+"")},K.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&K.error("Invalid XML: "+e),t};var ht,dt,pt=/#.*$/,ft=/([?&])_=[^&]*/,gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,vt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,yt=/^(?:GET|HEAD)$/,mt=/^\/\//,bt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wt={},xt={},_t="*/".concat("*");try{dt=location.href}catch(Et){dt=Q.createElement("a"),dt.href="",dt=dt.href}ht=bt.exec(dt.toLowerCase())||[],K.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dt,type:"GET",isLocal:vt.test(ht[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?j(j(e,K.ajaxSettings),t):j(K.ajaxSettings,e)},ajaxPrefilter:O(wt),ajaxTransport:O(xt),ajax:function(e,t){function n(e,t,n,a){var u,c,y,m,w,_=t;2!==b&&(b=2,s&&clearTimeout(s),r=void 0,o=a||"",x.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(m=R(h,x,n)),m=q(h,m,x,u),u?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(K.lastModified[i]=w),w=x.getResponseHeader("etag"),w&&(K.etag[i]=w)),204===e||"HEAD"===h.type?_="nocontent":304===e?_="notmodified":(_=m.state,c=m.data,y=m.error,u=!y)):(y=_,(e||!_)&&(_="error",0>e&&(e=0))),x.status=e,x.statusText=(t||_)+"",u?f.resolveWith(d,[c,_,x]):f.rejectWith(d,[x,_,y]),x.statusCode(v),v=void 0,l&&p.trigger(u?"ajaxSuccess":"ajaxError",[x,h,u?c:y]),g.fireWith(d,[x,_]),l&&(p.trigger("ajaxComplete",[x,h]),--K.active||K.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,u,l,c,h=K.ajaxSetup({},t),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?K(d):K.event,f=K.Deferred(),g=K.Callbacks("once memory"),v=h.statusCode||{},y={},m={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=gt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=m[n]=m[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),n(0,t),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||dt)+"").replace(pt,"").replace(mt,ht[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=K.trim(h.dataType||"*").toLowerCase().match(pe)||[""],null==h.crossDomain&&(u=bt.exec(h.url.toLowerCase()),h.crossDomain=!(!u||u[1]===ht[1]&&u[2]===ht[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(ht[3]||("http:"===ht[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=K.param(h.data,h.traditional)),L(wt,h,t,x),2===b)return x;l=h.global,l&&0===K.active++&&K.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!yt.test(h.type),i=h.url,h.hasContent||(h.data&&(i=h.url+=(ct.test(i)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=ft.test(i)?i.replace(ft,"$1_="+lt++):i+(ct.test(i)?"&":"?")+"_="+lt++)),h.ifModified&&(K.lastModified[i]&&x.setRequestHeader("If-Modified-Since",K.lastModified[i]),K.etag[i]&&x.setRequestHeader("If-None-Match",K.etag[i])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+_t+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)x.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(h.beforeSend.call(d,x,h)===!1||2===b))return x.abort();w="abort";for(c in{success:1,error:1,complete:1})x[c](h[c]);if(r=L(xt,h,t,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,r.send(y,n)}catch(_){if(!(2>b))throw _;n(-1,_)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return K.get(e,t,n,"json")},getScript:function(e,t){return K.get(e,void 0,t,"script")}}),K.each(["get","post"],function(e,t){K[t]=function(e,n,r,i){return K.isFunction(n)&&(i=i||r,r=n,n=void 0),K.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),K.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){K.fn[t]=function(e){return this.on(t,e)}}),K._evalUrl=function(e){return K.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},K.fn.extend({wrapAll:function(e){var t;return K.isFunction(e)?this.each(function(t){K(this).wrapAll(e.call(this,t))}):(this[0]&&(t=K(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(K.isFunction(e)?function(t){K(this).wrapInner(e.call(this,t))}:function(){var t=K(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=K.isFunction(e);return this.each(function(n){K(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()}}),K.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},K.expr.filters.visible=function(e){return!K.expr.filters.hidden(e)};var kt=/%20/g,St=/\[\]$/,Tt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;K.param=function(e,t){var n,r=[],i=function(e,t){t=K.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=K.ajaxSettings&&K.ajaxSettings.traditional),K.isArray(e)||e.jquery&&!K.isPlainObject(e))K.each(e,function(){i(this.name,this.value)});else for(n in e)F(n,e[n],t,i);return r.join("&").replace(kt,"+")},K.fn.extend({serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=K.prop(this,"elements");return e?K.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!K(this).is(":disabled")&&Nt.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!ke.test(e))}).map(function(e,t){var n=K(this).val();return null==n?null:K.isArray(n)?K.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}}),K.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var At=0,Pt={},Dt={0:200,1223:204},$t=K.ajaxSettings.xhr();e.ActiveXObject&&K(e).on("unload",function(){for(var e in Pt)Pt[e]()}),Z.cors=!!$t&&"withCredentials"in $t,Z.ajax=$t=!!$t,K.ajaxTransport(function(e){var t;return Z.cors||$t&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),a=++At;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Pt[a],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Dt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Pt[a]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return K.globalEval(e),e}}}),K.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),K.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=K("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Mt=[],It=/(=)\?(?=&|$)|\?\?/;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mt.pop()||K.expando+"_"+lt++;return this[e]=!0,e}}),K.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(It.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=K.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(It,"$1"+i):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||K.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Mt.push(i)),a&&K.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),K.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Q;var r=ae.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=K.buildFragment([e],t,i),i&&i.length&&K(i).remove(),K.merge([],r.childNodes))};var Ot=K.fn.load;K.fn.load=function(e,t,n){if("string"!=typeof e&&Ot)return Ot.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=K.trim(e.slice(s)),e=e.slice(0,s)),K.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&K.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?K("<div>").append(K.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},K.expr.filters.animated=function(e){return K.grep(K.timers,function(t){return e===t.elem}).length};var Lt=e.document.documentElement;K.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=K.css(e,"position"),h=K(e),d={};"static"===c&&(e.style.position="relative"),s=h.offset(),o=K.css(e,"top"),u=K.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=h.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),K.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):h.css(d)}},K.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){K.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,K.contains(t,r)?(typeof r.getBoundingClientRect!==Se&&(i=r.getBoundingClientRect()),n=B(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===K.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),K.nodeName(e[0],"html")||(r=e.offset()),r.top+=K.css(e[0],"borderTopWidth",!0),r.left+=K.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-K.css(n,"marginTop",!0),left:t.left-r.left-K.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Lt;e&&!K.nodeName(e,"html")&&"static"===K.css(e,"position");)e=e.offsetParent;return e||Lt})}}),K.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;K.fn[t]=function(i){return ve(this,function(t,i,o){var a=B(t);return void 0===o?a?a[n]:t[i]:void(a?a.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),K.each(["top","left"],function(e,t){K.cssHooks[t]=_(Z.pixelPosition,function(e,n){return n?(n=x(e,t),Ge.test(n)?K(e).position()[t]+"px":n):void 0})}),K.each({Height:"height",Width:"width"},function(e,t){K.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){K.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return ve(this,function(t,n,r){var i;return K.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?K.css(t,n,a):K.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),K.fn.size=function(){return this.length},K.fn.andSelf=K.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return K});var jt=e.jQuery,Rt=e.$;return K.noConflict=function(t){return e.$===K&&(e.$=Rt),t&&e.jQuery===K&&(e.jQuery=jt),K},typeof t===Se&&(e.jQuery=e.$=K),K}),function(){"use strict";function e(t,r){function i(e,t){return function(){return e.apply(t,arguments)}}var o;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=t,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,u=0,l=a.length;l>u;u++)s[a[u]]=i(s[a[u]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,r){var i=Node.prototype.removeEventListener;"click"===e?i.call(t,e,n.hijacked||n,r):i.call(t,e,n,r)},t.addEventListener=function(e,n,r){var i=Node.prototype.addEventListener;"click"===e?i.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(t,e,n,r)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,i=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=r&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(r&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;r&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],r){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,u,l,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(l=e.changedTouches[0],c=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=c.tagName.toLowerCase(),"label"===s){if(t=this.findControl(c)){if(this.focus(c),n)return!1;c=t}}else if(this.needsFocus(c))return e.timeStamp-a>100||r&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,e),r&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return r&&!i&&(u=c.fastClickScrollParent,u&&u.fastClickLastScrollTop!==u.scrollTop)?!0:(this.needsClick(c)||(e.preventDefault(),this.sendClick(c,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,r,i,o;if("undefined"==typeof window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(r>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(e,t,n){"use strict";function r(e){return function(){var t,n,r=arguments[0],i="["+(e?e+":":"")+r+"] ",o=arguments[1],a=arguments,s=function(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e};for(t=i+o.replace(/\{\d+\}/g,function(e){var t,n=+e.slice(1,-1);return n+2<a.length?(t=a[n+2],"function"==typeof t?t.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?G(t):t):e}),t=t+"\nhttp://errors.angularjs.org/1.2.28/"+(e?e+"/":"")+r,n=2;n<arguments.length;n++)t=t+(2==n?"?":"&")+"p"+(n-2)+"="+encodeURIComponent(s(arguments[n]));return new Error(t)}}function i(e){if(null==e||S(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:w(e)||Dn(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,n){var r;if(e)if(E(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r);else if(Dn(e)||i(e))for(r=0;r<e.length;r++)t.call(n,e[r],r);else if(e.forEach&&e.forEach!==o)e.forEach(t,n);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r);return e}function a(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function s(e,t,n){for(var r=a(e),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function u(e){return function(t,n){e(n,t)}}function l(){for(var e,t=Pn.length;t;){if(t--,e=Pn[t].charCodeAt(0),57==e)return Pn[t]="A",Pn.join("");if(90!=e)return Pn[t]=String.fromCharCode(e+1),Pn.join("");Pn[t]="0"}return Pn.unshift("0"),Pn.join("")}function c(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function h(e){var t=e.$$hashKey;return o(arguments,function(t){t!==e&&o(t,function(t,n){e[n]=t})}),c(e,t),e}function d(e){return parseInt(e,10)}function p(e,t){return h(new(h(function(){},{prototype:e})),t)}function f(){}function g(e){return e}function v(e){return function(){return e}}function y(e){return"undefined"==typeof e}function m(e){return"undefined"!=typeof e}function b(e){return null!=e&&"object"==typeof e}function w(e){return"string"==typeof e}function x(e){return"number"==typeof e}function _(e){return"[object Date]"===Cn.call(e)}function E(e){return"function"==typeof e}function k(e){return"[object RegExp]"===Cn.call(e)}function S(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function T(e){return e&&e.$evalAsync&&e.$watch}function C(e){return"[object File]"===Cn.call(e)}function N(e){return"[object Blob]"===Cn.call(e)}function A(e){return e&&E(e.then)}function P(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function D(e,t,n){var r=[];return o(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r}function $(e,t){return-1!=M(e,t)}function M(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function I(e,t){var n=M(e,t);return n>=0&&e.splice(n,1),t}function O(e,t,n,r){if(S(e)||T(e))throw Nn("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw Nn("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],b(e)){var i=M(n,e);if(-1!==i)return r[i];n.push(e),r.push(t)}var a;if(Dn(e)){t.length=0;for(var s=0;s<e.length;s++)a=O(e[s],null,n,r),b(e[s])&&(n.push(e[s]),r.push(a)),t.push(a)}else{var u=t.$$hashKey;Dn(t)?t.length=0:o(t,function(e,n){delete t[n]});for(var l in e)a=O(e[l],null,n,r),b(e[l])&&(n.push(e[l]),r.push(a)),t[l]=a;c(t,u)}}else t=e,e&&(Dn(e)?t=O(e,[],n,r):_(e)?t=new Date(e.getTime()):k(e)?(t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex):b(e)&&(t=O(e,{},n,r)));return t}function L(e,t){if(Dn(e)){t=t||[];for(var n=0;n<e.length;n++)t[n]=e[n]}else if(b(e)){t=t||{};for(var r in e)!vn.call(e,r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r])}return t||e}function j(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,i,o,a=typeof e,s=typeof t;if(a==s&&"object"==a){if(!Dn(e)){if(_(e))return _(t)?isNaN(e.getTime())&&isNaN(t.getTime())||e.getTime()===t.getTime():!1;if(k(e)&&k(t))return e.toString()==t.toString();if(T(e)||T(t)||S(e)||S(t)||Dn(t))return!1;o={};for(i in e)if("$"!==i.charAt(0)&&!E(e[i])){
if(!j(e[i],t[i]))return!1;o[i]=!0}for(i in t)if(!o.hasOwnProperty(i)&&"$"!==i.charAt(0)&&t[i]!==n&&!E(t[i]))return!1;return!0}if(!Dn(t))return!1;if((r=e.length)==t.length){for(i=0;r>i;i++)if(!j(e[i],t[i]))return!1;return!0}}return!1}function R(e,t,n){return e.concat(Sn.call(t,n))}function q(e,t){return Sn.call(e,t||0)}function F(e,t){var n=arguments.length>2?q(arguments,2):[];return!E(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat(Sn.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function B(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)?i=n:S(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":T(r)&&(i="$SCOPE"),i}function G(e,t){return"undefined"==typeof e?n:JSON.stringify(e,B,t?"  ":null)}function z(e){return w(e)?JSON.parse(e):e}function U(e){if("function"==typeof e)e=!0;else if(e&&0!==e.length){var t=gn(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function V(e){e=xn(e).clone();try{e.empty()}catch(t){}var n=3,r=xn("<div>").append(e).html();try{return e[0].nodeType===n?gn(r):r.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+gn(t)})}catch(t){return gn(r)}}function H(e){try{return decodeURIComponent(e)}catch(t){}}function Y(e){var t,n,r={};return o((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=H(t[0]),m(n))){var i=m(t[1])?H(t[1]):!0;vn.call(r,n)?Dn(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function X(e){var t=[];return o(e,function(e,n){Dn(e)?o(e,function(e){t.push(Z(n,!0)+(e===!0?"":"="+Z(e,!0)))}):t.push(Z(n,!0)+(e===!0?"":"="+Z(e,!0)))}),t.length?t.join("&"):""}function W(e){return Z(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Z(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function Q(e,n){function r(e){e&&s.push(e)}var i,a,s=[e],u=["ng:app","ng-app","x-ng-app","data-ng-app"],l=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;o(u,function(n){u[n]=!0,r(t.getElementById(n)),n=n.replace(":","\\:"),e.querySelectorAll&&(o(e.querySelectorAll("."+n),r),o(e.querySelectorAll("."+n+"\\:"),r),o(e.querySelectorAll("["+n+"]"),r))}),o(s,function(e){if(!i){var t=" "+e.className+" ",n=l.exec(t);n?(i=e,a=(n[2]||"").replace(/\s+/g,",")):o(e.attributes,function(t){!i&&u[t.name]&&(i=e,a=t.value)})}}),i&&n(i,a?[a]:[])}function J(n,r){var i=function(){if(n=xn(n),n.injector()){var e=n[0]===t?"document":V(n);throw Nn("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.unshift("ng");var i=Me(r);return i.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(e,t,n,r,i){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),i},a=/^NG_DEFER_BOOTSTRAP!/;return e&&!a.test(e.name)?i():(e.name=e.name.replace(a,""),void(An.resumeBootstrap=function(e){o(e,function(e){r.push(e)}),i()}))}function K(e,t){return t=t||"_",e.replace(In,function(e,n){return(n?t:"")+e.toLowerCase()})}function ee(){_n=e.jQuery,_n&&_n.fn.on?(xn=_n,h(_n.fn,{scope:Xn.scope,isolateScope:Xn.isolateScope,controller:Xn.controller,injector:Xn.injector,inheritedData:Xn.inheritedData}),ce("remove",!0,!0,!1),ce("empty",!1,!1,!1),ce("html",!1,!1,!0)):xn=fe,An.element=xn}function te(e,t,n){if(!e)throw Nn("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ne(e,t,n){return n&&Dn(e)&&(e=e[e.length-1]),te(E(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function re(e,t){if("hasOwnProperty"===e)throw Nn("badname","hasOwnProperty is not a valid {0} name",t)}function ie(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;a>s;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&E(e)?F(o,e):e}function oe(e){var t=e[0],n=e[e.length-1];if(t===n)return xn(t);var r=t,i=[r];do{if(r=r.nextSibling,!r)break;i.push(r)}while(r!==n);return xn(i)}function ae(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||r,t(o,"module",function(){var e={};return function(r,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(r,"module"),o&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,n,r){return function(){return t[r||"push"]([e,n,arguments]),u}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],s=e("$injector","invoke"),u={_invokeQueue:t,_runBlocks:i,requires:o,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:s,run:function(e){return i.push(e),this}};return a&&s(a),u})}})}function se(t){h(t,{bootstrap:J,copy:O,extend:h,equals:j,element:xn,forEach:o,injector:Me,noop:f,bind:F,toJson:G,fromJson:z,identity:g,isUndefined:y,isDefined:m,isString:w,isFunction:E,isObject:b,isNumber:x,isElement:P,isArray:Dn,version:On,isDate:_,lowercase:gn,uppercase:yn,callbacks:{counter:0},$$minErr:r,$$csp:Mn}),En=ae(e);try{En("ngLocale")}catch(n){En("ngLocale",[]).provider("$locale",nt)}En("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Pt}),e.provider("$compile",Fe).directive({a:$r,input:zr,textarea:zr,form:Lr,script:Si,select:Ni,style:Pi,option:Ai,ngBind:ti,ngBindHtml:ri,ngBindTemplate:ni,ngClass:ii,ngClassEven:ai,ngClassOdd:oi,ngCloak:si,ngController:ui,ngForm:jr,ngHide:bi,ngIf:hi,ngInclude:di,ngInit:fi,ngNonBindable:gi,ngPluralize:vi,ngRepeat:yi,ngShow:mi,ngStyle:wi,ngSwitch:xi,ngSwitchWhen:_i,ngSwitchDefault:Ei,ngOptions:Ci,ngTransclude:ki,ngModel:Wr,ngList:Jr,ngChange:Zr,required:Qr,ngRequired:Qr,ngValue:ei}).directive({ngInclude:pi}).directive(Mr).directive(li),e.provider({$anchorScroll:Ie,$animate:rr,$browser:je,$cacheFactory:Re,$controller:ze,$document:Ue,$exceptionHandler:Ve,$filter:Bt,$interpolate:et,$interval:tt,$http:Ze,$httpBackend:Je,$location:gt,$log:vt,$parse:St,$rootScope:At,$q:Tt,$sce:Ot,$sceDelegate:It,$sniffer:Lt,$templateCache:qe,$timeout:jt,$window:Ft,$$rAF:Nt,$$asyncCallback:Oe})}])}function ue(){return++jn}function le(e){return e.replace(Fn,function(e,t,n,r){return r?n.toUpperCase():n}).replace(Bn,"Moz$1")}function ce(e,t,n,r){function i(e){var i,a,s,u,l,c,h,d=n&&e?[this.filter(e)]:[this],p=t;if(!r||null!=e)for(;d.length;)for(i=d.shift(),a=0,s=i.length;s>a;a++)for(u=xn(i[a]),p?u.triggerHandler("$destroy"):p=!p,l=0,c=(h=u.children()).length;c>l;l++)d.push(_n(h[l]));return o.apply(this,arguments)}var o=_n.fn[e];o=o.$original||o,i.$original=o,_n.fn[e]=i}function he(e){return!Un.test(e)}function de(e,t){var n,r,i,o,a,s,u=t.createDocumentFragment(),l=[];if(he(e))l.push(t.createTextNode(e));else{for(n=u.appendChild(t.createElement("div")),r=(Vn.exec(e)||["",""])[1].toLowerCase(),i=Yn[r]||Yn._default,n.innerHTML="<div>&#160;</div>"+i[1]+e.replace(Hn,"<$1></$2>")+i[2],n.removeChild(n.firstChild),o=i[0];o--;)n=n.lastChild;for(a=0,s=n.childNodes.length;s>a;++a)l.push(n.childNodes[a]);n=u.firstChild,n.textContent=""}return u.textContent="",u.innerHTML="",l}function pe(e,n){n=n||t;var r;return(r=zn.exec(e))?[n.createElement(r[1])]:de(e,n)}function fe(e){if(e instanceof fe)return e;if(w(e)&&(e=$n(e)),!(this instanceof fe)){if(w(e)&&"<"!=e.charAt(0))throw Gn("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new fe(e)}if(w(e)){ke(this,pe(e));var n=xn(t.createDocumentFragment());n.append(this)}else ke(this,e)}function ge(e){return e.cloneNode(!0)}function ve(e){me(e);for(var t=0,n=e.childNodes||[];t<n.length;t++)ve(n[t])}function ye(e,t,n,r){if(m(r))throw Gn("offargs","jqLite#off() does not support the `selector` argument");var i=be(e,"events"),a=be(e,"handle");a&&(y(t)?o(i,function(t,n){qn(e,n,t),delete i[n]}):o(t.split(" "),function(t){y(n)?(qn(e,t,i[t]),delete i[t]):I(i[t]||[],n)}))}function me(e,t){var r=e.ng339,i=Ln[r];if(i){if(t)return void delete Ln[r].data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),ye(e)),delete Ln[r],e.ng339=n}}function be(e,t,n){var r=e.ng339,i=Ln[r||-1];return m(n)?(i||(e.ng339=r=ue(),i=Ln[r]={}),void(i[t]=n)):i&&i[t]}function we(e,t,n){var r=be(e,"data"),i=m(n),o=!i&&m(t),a=o&&!b(t);if(r||a||be(e,"data",r={}),i)r[t]=n;else{if(!o)return r;if(a)return r&&r[t];h(r,t)}}function xe(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function _e(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",$n((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+$n(t)+" "," ")))})}function Ee(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=$n(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",$n(n))}}function ke(e,t){if(t){t=t.nodeName||!m(t.length)||S(t)?[t]:t;for(var n=0;n<t.length;n++)e.push(t[n])}}function Se(e,t){return Te(e,"$"+(t||"ngController")+"Controller")}function Te(e,t,r){9==e.nodeType&&(e=e.documentElement);for(var i=Dn(t)?t:[t];e;){for(var o=0,a=i.length;a>o;o++)if((r=xn.data(e,i[o]))!==n)return r;e=e.parentNode||11===e.nodeType&&e.host}}function Ce(e){for(var t=0,n=e.childNodes;t<n.length;t++)ve(n[t]);for(;e.firstChild;)e.removeChild(e.firstChild)}function Ne(e,t){var n=Wn[t.toLowerCase()];return n&&Zn[e.nodeName]&&n}function Ae(e,n){var r=function(r,i){if(r.preventDefault||(r.preventDefault=function(){r.returnValue=!1}),r.stopPropagation||(r.stopPropagation=function(){r.cancelBubble=!0}),r.target||(r.target=r.srcElement||t),y(r.defaultPrevented)){var a=r.preventDefault;r.preventDefault=function(){r.defaultPrevented=!0,a.call(r)},r.defaultPrevented=!1}r.isDefaultPrevented=function(){return r.defaultPrevented||r.returnValue===!1};var s=L(n[i||r.type]||[]);o(s,function(t){t.call(e,r)}),8>=wn?(r.preventDefault=null,r.stopPropagation=null,r.isDefaultPrevented=null):(delete r.preventDefault,delete r.stopPropagation,delete r.isDefaultPrevented)};return r.elem=e,r}function Pe(e,t){var r,i=typeof e;return"function"==i||"object"==i&&null!==e?"function"==typeof(r=e.$$hashKey)?r=e.$$hashKey():r===n&&(r=e.$$hashKey=(t||l)()):r=e,i+":"+r}function De(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function $e(e){var t,n,r,i;return"function"==typeof e?(t=e.$inject)||(t=[],e.length&&(n=e.toString().replace(er,""),r=n.match(Qn),o(r[1].split(Jn),function(e){e.replace(Kn,function(e,n,r){t.push(r)})})),e.$inject=t):Dn(e)?(i=e.length-1,ne(e[i],"fn"),t=e.slice(0,i)):ne(e,"fn",!0),t}function Me(e){function t(e){return function(t,n){return b(t)?void o(t,u(e)):e(t,n)}}function n(e,t){if(re(e,"service"),(E(t)||Dn(t))&&(t=x.instantiate(t)),!t.$get)throw tr("pget","Provider '{0}' must define $get factory method.",e);return m[e+p]=t}function r(e,t){return n(e,{$get:t})}function i(e,t){return r(e,["$injector",function(e){return e.instantiate(t)}])}function a(e,t){return r(e,v(t))}function s(e,t){re(e,"constant"),m[e]=t,_[e]=t}function l(e,t){var n=x.get(e+p),r=n.$get;n.$get=function(){var e=k.invoke(r,n);return k.invoke(t,null,{$delegate:e})}}function c(e){var t,n,r,i,a=[];return o(e,function(e){if(!y.get(e)){y.put(e,!0);try{if(w(e))for(t=En(e),a=a.concat(c(t.requires)).concat(t._runBlocks),n=t._invokeQueue,r=0,i=n.length;i>r;r++){var o=n[r],s=x.get(o[0]);s[o[1]].apply(s,o[2])}else E(e)?a.push(x.invoke(e)):Dn(e)?a.push(x.invoke(e)):ne(e,"module")}catch(u){throw Dn(e)&&(e=e[e.length-1]),u.message&&u.stack&&-1==u.stack.indexOf(u.message)&&(u=u.message+"\n"+u.stack),tr("modulerr","Failed to instantiate module {0} due to:\n{1}",e,u.stack||u.message||u)}}}),a}function h(e,t){function n(n){if(e.hasOwnProperty(n)){if(e[n]===d)throw tr("cdep","Circular dependency found: {0}",n+" <- "+g.join(" <- "));return e[n]}try{return g.unshift(n),e[n]=d,e[n]=t(n)}catch(r){throw e[n]===d&&delete e[n],r}finally{g.shift()}}function r(e,t,r){var i,o,a,s=[],u=$e(e);for(o=0,i=u.length;i>o;o++){if(a=u[o],"string"!=typeof a)throw tr("itkn","Incorrect injection token! Expected service name as string, got {0}",a);s.push(r&&r.hasOwnProperty(a)?r[a]:n(a))}return Dn(e)&&(e=e[i]),e.apply(t,s)}function i(e,t){var n,i,o=function(){};return o.prototype=(Dn(e)?e[e.length-1]:e).prototype,n=new o,i=r(e,n,t),b(i)||E(i)?i:n}return{invoke:r,instantiate:i,get:n,annotate:$e,has:function(t){return m.hasOwnProperty(t+p)||e.hasOwnProperty(t)}}}var d={},p="Provider",g=[],y=new De([],!0),m={$provide:{provider:t(n),factory:t(r),service:t(i),value:t(a),constant:t(s),decorator:l}},x=m.$injector=h(m,function(){throw tr("unpr","Unknown provider: {0}",g.join(" <- "))}),_={},k=_.$injector=h(_,function(e){var t=x.get(e+p);return k.invoke(t.$get,t)});return o(c(e),function(e){k.invoke(e||f)}),k}function Ie(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return o(e,function(e){t||"a"!==gn(e.nodeName)||(t=e)}),t}function a(){var e,r=n.hash();r?(e=s.getElementById(r))?e.scrollIntoView():(e=i(s.getElementsByName(r)))?e.scrollIntoView():"top"===r&&t.scrollTo(0,0):t.scrollTo(0,0)}var s=t.document;return e&&r.$watch(function(){return n.hash()},function(){r.$evalAsync(a)}),a}]}function Oe(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Le(e,t,r,i){function a(e){try{e.apply(null,q(arguments,1))}finally{if(m--,0===m)for(;b.length;)try{b.pop()()}catch(t){r.error(t)}}}function s(e,t){!function n(){o(_,function(e){e()}),x=t(n,e)}()}function u(){E!=l.url()&&(E=l.url(),o(T,function(e){e(l.url())}))}var l=this,c=t[0],h=e.location,d=e.history,p=e.setTimeout,g=e.clearTimeout,v={};l.isMock=!1;var m=0,b=[];l.$$completeOutstandingRequest=a,l.$$incOutstandingRequestCount=function(){m++},l.notifyWhenNoOutstandingRequests=function(e){o(_,function(e){e()}),0===m?e():b.push(e)};var x,_=[];l.addPollFn=function(e){return y(x)&&s(100,p),_.push(e),e};var E=h.href,k=t.find("base"),S=null;l.url=function(t,n){if(h!==e.location&&(h=e.location),d!==e.history&&(d=e.history),t){if(E==t)return;var r=E&&st(E)===st(t);return E=t,!r&&i.history?n?d.replaceState(null,"",t):(d.pushState(null,"",t),k.attr("href",k.attr("href"))):(r||(S=t),n?h.replace(t):h.href=t),l}return S||h.href.replace(/%27/g,"'")};var T=[],C=!1;l.onUrlChange=function(t){return C||(i.history&&xn(e).on("popstate",u),i.hashchange?xn(e).on("hashchange",u):l.addPollFn(u),C=!0),T.push(t),t},l.$$checkUrlChange=u,l.baseHref=function(){var e=k.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var N={},A="",P=l.baseHref();l.cookies=function(e,t){var i,o,a,s,u;if(!e){if(c.cookie!==A)for(A=c.cookie,o=A.split("; "),N={},s=0;s<o.length;s++)a=o[s],u=a.indexOf("="),u>0&&(e=unescape(a.substring(0,u)),N[e]===n&&(N[e]=unescape(a.substring(u+1))));return N}t===n?c.cookie=escape(e)+"=;path="+P+";expires=Thu, 01 Jan 1970 00:00:00 GMT":w(t)&&(i=(c.cookie=escape(e)+"="+escape(t)+";path="+P).length+1,i>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},l.defer=function(e,t){var n;return m++,n=p(function(){delete v[n],a(e)},t||0),v[n]=!0,n},l.defer.cancel=function(e){return v[e]?(delete v[e],g(e),a(f),!0):!1}}function je(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new Le(e,r,t,n)}]}function Re(){this.$get=function(){function e(e,n){function i(e){e!=d&&(p?p==e&&(p=e.n):p=e,o(e.n,e.p),o(e,d),d=e,d.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=h({},n,{id:e}),u={},l=n&&n.capacity||Number.MAX_VALUE,c={},d=null,p=null;return t[e]={put:function(e,t){if(l<Number.MAX_VALUE){var n=c[e]||(c[e]={key:e});i(n)}if(!y(t))return e in u||a++,u[e]=t,a>l&&this.remove(p.key),t},get:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;i(t)}return u[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;t==d&&(d=t.p),t==p&&(p=t.n),o(t.n,t.p),delete c[e]}delete u[e],a--},removeAll:function(){u={},a=0,c={},d=p=null},destroy:function(){u=null,s=null,c=null,delete t[e]},info:function(){return h({},s,{size:a})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function qe(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Fe(e,r){var i={},a="Directive",s=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,l=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,c=/^(on[a-z]+|formaction)$/;this.directive=function d(t,n){return re(t,"directive"),w(t)?(te(n,"directiveFactory"),i.hasOwnProperty(t)||(i[t]=[],e.factory(t+a,["$injector","$exceptionHandler",function(e,n){var r=[];return o(i[t],function(i,o){try{var a=e.invoke(i);E(a)?a={compile:v(a)}:!a.compile&&a.link&&(a.compile=v(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||t,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"A",r.push(a)}catch(s){n(s)}}),r}])),i[t].push(n)):o(t,u(d)),this},this.aHrefSanitizationWhitelist=function(e){return m(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return m(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,u,d,f,v,y,m,x,_,k,S){function T(e,t,n,r,i){e instanceof xn||(e=xn(e)),o(e,function(t,n){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(e[n]=t=xn(t).wrap("<span></span>").parent()[0])});var a=N(e,t,e,n,r,i);return C(e,"ng-scope"),function(t,n,r,i){te(t,"scope");var s=n?Xn.clone.call(e):e;o(r,function(e,t){s.data("$"+t+"Controller",e)});for(var u=0,l=s.length;l>u;u++){var c=s[u],h=c.nodeType;(1===h||9===h)&&s.eq(u).data("$scope",t)}return n&&n(s,t),a&&a(t,s,s,i),s}}function C(e,t){try{e.addClass(t)}catch(n){}}function N(e,t,r,i,o,a){function s(e,r,i,o){var a,s,u,l,c,h,d,p,g=r.length,v=new Array(g);for(c=0;g>c;c++)v[c]=r[c];for(c=0,d=0,h=f.length;h>c;d++)u=v[d],a=f[c++],s=f[c++],a?(a.scope?(l=e.$new(),xn.data(u,"$scope",l)):l=e,p=a.transcludeOnThisElement?A(e,a.transclude,o):!a.templateOnThisElement&&o?o:!o&&t?A(e,t):null,a(s,l,u,i,p)):s&&s(e,u.childNodes,n,o)}for(var u,l,c,h,d,p,f=[],g=0;g<e.length;g++)u=new W,l=P(e[g],[],u,0===g?i:n,o),c=l.length?M(l,e[g],u,t,r,null,[],[],a):null,c&&c.scope&&C(u.$$element,"ng-scope"),d=c&&c.terminal||!(h=e[g].childNodes)||!h.length?null:N(h,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),f.push(c,d),p=p||c||d,a=null;return p?s:null}function A(e,t,n){var r=function(r,i,o){var a=!1;r||(r=e.$new(),r.$$transcluded=!0,a=!0);var s=t(r,i,o,n);return a&&s.on("$destroy",function(){r.$destroy()}),s};return r}function P(e,t,n,r,i){var o,a,u=e.nodeType,c=n.$attr;switch(u){case 1:O(t,Be(kn(e).toLowerCase()),"E",r,i);for(var h,d,p,f,g,v,y=e.attributes,m=0,b=y&&y.length;b>m;m++){var x=!1,_=!1;if(h=y[m],!wn||wn>=8||h.specified){d=h.name,g=$n(h.value),f=Be(d),(v=ee.test(f))&&(d=K(f.substr(6),"-"));var E=f.replace(/(Start|End)$/,"");f===E+"Start"&&(x=d,_=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),p=Be(d.toLowerCase()),c[p]=d,(v||!n.hasOwnProperty(p))&&(n[p]=g,Ne(e,p)&&(n[p]=!0)),H(e,t,g,p),O(t,p,"A",r,i,x,_)}}if(a=e.className,w(a)&&""!==a)for(;o=l.exec(a);)p=Be(o[2]),O(t,p,"C",r,i)&&(n[p]=$n(o[3])),a=a.substr(o.index+o[0].length);break;case 3:z(t,e.nodeValue);break;case 8:try{o=s.exec(e.nodeValue),o&&(p=Be(o[1]),O(t,p,"M",r,i)&&(n[p]=$n(o[2])))}catch(k){}}return t.sort(B),t}function D(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw ir("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1==e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return xn(r)}function $(e,t,n){return function(r,i,o,a,s){return i=D(i[0],t,n),e(r,i,o,a,s)}}function M(e,i,a,s,l,c,h,d,p){function f(e,t,n,r){e&&(n&&(e=$(e,n,r)),e.require=_.require,e.directiveName=k,(B===_||_.$$isolateScope)&&(e=X(e,{isolateScope:!0})),h.push(e)),t&&(n&&(t=$(t,n,r)),t.require=_.require,t.directiveName=k,(B===_||_.$$isolateScope)&&(t=X(t,{isolateScope:!0})),d.push(t))}function g(e,t,n,r){var i,a="data",s=!1;if(w(t)){for(;"^"==(i=t.charAt(0))||"?"==i;)t=t.substr(1),"^"==i&&(a="inheritedData"),s=s||"?"==i;if(i=null,r&&"data"===a&&(i=r[t]),i=i||n[a]("$"+t+"Controller"),!i&&!s)throw ir("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i}return Dn(t)&&(i=[],o(t,function(t){i.push(g(e,t,n,r))})),i}function m(e,t,s,l,c){function p(e,t){var r;return arguments.length<2&&(t=e,e=n),Q&&(r=S),c(e,t,r)}var f,m,b,w,x,_,E,k,S={};if(f=i===s?a:L(a,new W(xn(s),a.$attr)),m=f.$$element,B){var T=/^\s*([@=&])(\??)\s*(\w*)\s*$/;E=t.$new(!0),!z||z!==B&&z!==B.$$originalDirective?m.data("$isolateScopeNoTemplate",E):m.data("$isolateScope",E),C(m,"ng-isolate-scope"),o(B.scope,function(e,n){var i,o,a,s,u=e.match(T)||[],l=u[3]||n,c="?"==u[2],h=u[1];switch(E.$$isolateBindings[n]=h+l,h){case"@":f.$observe(l,function(e){E[n]=e}),f.$$observers[l].$$scope=t,f[l]&&(E[n]=r(f[l])(t));break;case"=":if(c&&!f[l])return;o=v(f[l]),s=o.literal?j:function(e,t){return e===t||e!==e&&t!==t},a=o.assign||function(){throw i=E[n]=o(t),ir("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",f[l],B.name)},i=E[n]=o(t),E.$watch(function(){var e=o(t);return s(e,E[n])||(s(e,i)?a(t,e=E[n]):E[n]=e),i=e},null,o.literal);break;case"&":o=v(f[l]),E[n]=function(e){return o(t,e)};break;default:throw ir("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",B.name,n,e)}})}for(k=c&&p,O&&o(O,function(e){var n,r={$scope:e===B||e.$$isolateScope?E:t,$element:m,$attrs:f,$transclude:k};_=e.controller,"@"==_&&(_=f[e.name]),n=y(_,r),S[e.name]=n,Q||m.data("$"+e.name+"Controller",n),e.controllerAs&&(r.$scope[e.controllerAs]=n)}),b=0,w=h.length;w>b;b++)try{x=h[b],x(x.isolateScope?E:t,m,f,x.require&&g(x.directiveName,x.require,m,S),k)}catch(N){u(N,V(m))}var A=t;for(B&&(B.template||null===B.templateUrl)&&(A=E),e&&e(A,s.childNodes,n,c),b=d.length-1;b>=0;b--)try{x=d[b],x(x.isolateScope?E:t,m,f,x.require&&g(x.directiveName,x.require,m,S),k)}catch(N){u(N,V(m))}}p=p||{};for(var x,_,k,S,N,A,M=-Number.MAX_VALUE,O=p.controllerDirectives,B=p.newIsolateScopeDirective,z=p.templateDirective,U=p.nonTlbTranscludeDirective,H=!1,Z=!1,Q=p.hasElementTranscludeDirective,K=a.$$element=xn(i),ee=c,te=s,ne=0,re=e.length;re>ne;ne++){_=e[ne];var ie=_.$$start,oe=_.$$end;if(ie&&(K=D(i,ie,oe)),S=n,M>_.priority)break;if((A=_.scope)&&(x=x||_,_.templateUrl||(G("new/isolated scope",B,_,K),b(A)&&(B=_))),k=_.name,!_.templateUrl&&_.controller&&(A=_.controller,O=O||{},G("'"+k+"' controller",O[k],_,K),O[k]=_),(A=_.transclude)&&(H=!0,_.$$tlb||(G("transclusion",U,_,K),U=_),"element"==A?(Q=!0,M=_.priority,S=K,K=a.$$element=xn(t.createComment(" "+k+": "+a[k]+" ")),i=K[0],Y(l,q(S),i),te=T(S,s,M,ee&&ee.name,{nonTlbTranscludeDirective:U})):(S=xn(ge(i)).contents(),K.empty(),te=T(S,s))),_.template)if(Z=!0,G("template",z,_,K),z=_,A=E(_.template)?_.template(K,a):_.template,A=J(A),_.replace){if(ee=_,S=he(A)?[]:xn($n(A)),i=S[0],1!=S.length||1!==i.nodeType)throw ir("tplrt","Template for directive '{0}' must have exactly one root element. {1}",k,"");Y(l,K,i);var ae={$attr:{}},se=P(i,[],ae),ue=e.splice(ne+1,e.length-(ne+1));B&&I(se),e=e.concat(se).concat(ue),R(a,ae),re=e.length}else K.html(A);if(_.templateUrl)Z=!0,G("template",z,_,K),z=_,_.replace&&(ee=_),m=F(e.splice(ne,e.length-ne),K,a,l,H&&te,h,d,{controllerDirectives:O,newIsolateScopeDirective:B,templateDirective:z,nonTlbTranscludeDirective:U}),re=e.length;else if(_.compile)try{N=_.compile(K,a,te),E(N)?f(null,N,ie,oe):N&&f(N.pre,N.post,ie,oe)}catch(le){u(le,V(K))}_.terminal&&(m.terminal=!0,M=Math.max(M,_.priority))}return m.scope=x&&x.scope===!0,m.transcludeOnThisElement=H,m.templateOnThisElement=Z,m.transclude=te,p.hasElementTranscludeDirective=Q,m}function I(e){for(var t=0,n=e.length;n>t;t++)e[t]=p(e[t],{$$isolateScope:!0})}function O(t,r,o,s,l,c,h){if(r===l)return null;var d=null;if(i.hasOwnProperty(r))for(var f,g=e.get(r+a),v=0,y=g.length;y>v;v++)try{f=g[v],(s===n||s>f.priority)&&-1!=f.restrict.indexOf(o)&&(c&&(f=p(f,{$$start:c,$$end:h})),t.push(f),d=f)}catch(m){u(m)}return d}function R(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;o(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),o(t,function(t,o){"class"==o?(C(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==o?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,r[o]=n[o])})}function F(e,t,n,r,i,a,s,u){var l,c,p=[],g=t[0],v=e.shift(),y=h({},v,{templateUrl:null,transclude:null,replace:null,$$originalDirective:v}),m=E(v.templateUrl)?v.templateUrl(t,n):v.templateUrl;return t.empty(),d.get(_.getTrustedResourceUrl(m),{cache:f}).success(function(h){var d,f,w,x;if(h=J(h),v.replace){if(w=he(h)?[]:xn($n(h)),d=w[0],1!=w.length||1!==d.nodeType)throw ir("tplrt","Template for directive '{0}' must have exactly one root element. {1}",v.name,m);f={$attr:{}},Y(r,t,d);var _=P(d,[],f);b(v.scope)&&I(_),e=_.concat(e),R(n,f)}else d=g,t.html(h);for(e.unshift(y),l=M(e,d,n,i,t,v,a,s,u),o(r,function(e,n){e==d&&(r[n]=t[0])}),c=N(t[0].childNodes,i);p.length;){var E=p.shift(),k=p.shift(),S=p.shift(),T=p.shift(),D=t[0];if(k!==g){var $=k.className;u.hasElementTranscludeDirective&&v.replace||(D=ge(d)),Y(S,xn(k),D),C(xn(D),$)}x=l.transcludeOnThisElement?A(E,l.transclude,T):T,l(c,E,D,r,x)}p=null}).error(function(e,t,n,r){throw ir("tpload","Failed to load template: {0}",r.url)}),function(e,t,n,r,i){var o=i;p?(p.push(t),p.push(n),p.push(r),p.push(o)):(l.transcludeOnThisElement&&(o=A(t,l.transclude,i)),l(c,t,n,r,o))}}function B(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function G(e,t,n,r){if(t)throw ir("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,V(r))}function z(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=t.length;return r&&C(e.parent(),"ng-binding"),function(e,t){var i=t.parent(),o=i.data("$binding")||[];o.push(n),i.data("$binding",o),r||C(i,"ng-binding"),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function U(e,t){if("srcdoc"==t)return _.HTML;var n=kn(e);return"xlinkHref"==t||"FORM"==n&&"action"==t||"IMG"!=n&&("src"==t||"ngSrc"==t)?_.RESOURCE_URL:void 0}function H(e,t,n,i){var o=r(n,!0);if(o){if("multiple"===i&&"SELECT"===kn(e))throw ir("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",V(e));t.push({priority:100,compile:function(){return{pre:function(t,n,a){var s=a.$$observers||(a.$$observers={});if(c.test(i))throw ir("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");o=r(a[i],!0,U(e,i)),o&&(a[i]=o(t),(s[i]||(s[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||t).$watch(o,function(e,t){"class"===i&&e!=t?a.$updateClass(e,t):a.$set(i,e)}))}}}})}}function Y(e,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(e)for(i=0,o=e.length;o>i;i++)if(e[i]==a){e[i++]=r;for(var l=i,c=l+s-1,h=e.length;h>l;l++,c++)h>c?e[l]=e[c]:delete e[l];e.length-=s-1;break}u&&u.replaceChild(r,a);var d=t.createDocumentFragment();d.appendChild(a),r[xn.expando]=a[xn.expando];for(var p=1,f=n.length;f>p;p++){var g=n[p];xn(g).remove(),d.appendChild(g),delete n[p]}n[0]=r,n.length=1}function X(e,t){return h(function(){return e.apply(null,arguments)},e,t)}var W=function(e,t){this.$$element=e,this.$attr=t||{}};W.prototype={$normalize:Be,$addClass:function(e){e&&e.length>0&&k.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&k.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ge(e,t),r=Ge(t,e);0===n.length?k.removeClass(this.$$element,r):0===r.length?k.addClass(this.$$element,n):k.setClass(this.$$element,n,r)},$set:function(e,t,r,i){var a,s=Ne(this.$$element[0],e);s&&(this.$$element.prop(e,t),i=s),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e],i||(this.$attr[e]=i=K(e,"-"))),a=kn(this.$$element),("A"===a&&"href"===e||"IMG"===a&&"src"===e)&&(this[e]=t=S(t,"src"===e)),r!==!1&&(null===t||t===n?this.$$element.removeAttr(i):this.$$element.attr(i,t));var l=this.$$observers;l&&o(l[e],function(e){try{e(t)}catch(n){u(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers={}),i=r[e]||(r[e]=[]);return i.push(t),m.$evalAsync(function(){i.$$inter||t(n[e])}),t}};var Z=r.startSymbol(),Q=r.endSymbol(),J="{{"==Z||"}}"==Q?g:function(e){return e.replace(/\{\{/g,Z).replace(/}}/g,Q)},ee=/^ngAttr[A-Z]/;return T}]}function Be(e){return le(e.replace(or,""))}function Ge(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function ze(){var e={},t=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){re(t,"controller"),b(t)?h(e,t):e[t]=n},this.$get=["$injector","$window",function(n,i){return function(o,a){var s,u,l,c;if(w(o)&&(u=o.match(t),l=u[1],c=u[3],o=e.hasOwnProperty(l)?e[l]:ie(a.$scope,l,!0)||ie(i,l,!0),ne(o,l,!0)),s=n.instantiate(o,a),c){if(!a||"object"!=typeof a.$scope)throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",l||o.name,c);a.$scope[c]=s}return s}}]}function Ue(){this.$get=["$window",function(e){return xn(e.document)}]}function Ve(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function He(e){var t,n,r,i={};return e?(o(e.split("\n"),function(e){r=e.indexOf(":"),t=gn($n(e.substr(0,r))),n=$n(e.substr(r+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}function Ye(e){var t=b(e)?e:n;return function(n){return t||(t=He(e)),n?t[gn(n)]||null:t}}function Xe(e,t,n){return E(n)?n(e,t):(o(n,function(n){e=n(e,t)}),e)}function We(e){return e>=200&&300>e}function Ze(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,r=/^\)\]\}',?\n/,i={"Content-Type":"application/json;charset=utf-8"},a=this.defaults={transformResponse:[function(n){return w(n)&&(n=n.replace(r,""),e.test(n)&&t.test(n)&&(n=z(n))),n}],transformRequest:[function(e){return!b(e)||C(e)||N(e)?e:G(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(i),put:L(i),patch:L(i)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},u=this.interceptors=[],l=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,r,i,c,d){function p(e){function t(e){var t=h({},e,{data:Xe(e.data,e.headers,i.transformResponse)});return We(e.status)?t:c.reject(t)}function r(e){function t(e){var t;o(e,function(n,r){E(n)&&(t=n(),null!=t?e[r]=t:delete e[r])})}var n,r,i,s=a.headers,u=h({},e.headers);s=h({},s.common,s[gn(e.method)]);e:for(n in s){r=gn(n);for(i in u)if(gn(i)===r)continue e;u[n]=s[n]}return t(u),u}var i={method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},s=r(e);h(i,e),i.headers=s,i.method=yn(i.method);var u=function(e){s=e.headers;var n=Xe(e.data,Ye(s),e.transformRequest);return y(n)&&o(s,function(e,t){"content-type"===gn(t)&&delete s[t]}),y(e.withCredentials)&&!y(a.withCredentials)&&(e.withCredentials=a.withCredentials),v(e,n,s).then(t,t)},l=[u,n],d=c.when(i);for(o(S,function(e){
(e.request||e.requestError)&&l.unshift(e.request,e.requestError),(e.response||e.responseError)&&l.push(e.response,e.responseError)});l.length;){var p=l.shift(),f=l.shift();d=d.then(p,f)}return d.success=function(e){return d.then(function(t){e(t.data,t.status,t.headers,i)}),d},d.error=function(e){return d.then(null,function(t){e(t.data,t.status,t.headers,i)}),d},d}function f(e){o(arguments,function(e){p[e]=function(t,n){return p(h(n||{},{method:e,url:t}))}})}function g(e){o(arguments,function(e){p[e]=function(t,n,r){return p(h(r||{},{method:e,url:t,data:n}))}})}function v(r,o,s){function u(e,t,n,r){d&&(We(e)?d.put(w,[e,t,He(n),r]):d.remove(w)),l(t,e,n,r),i.$$phase||i.$apply()}function l(e,t,n,i){t=Math.max(t,0),(We(t)?g.resolve:g.reject)({data:e,status:t,headers:Ye(n),config:r,statusText:i})}function h(){var e=M(p.pendingRequests,r);-1!==e&&p.pendingRequests.splice(e,1)}var d,f,g=c.defer(),v=g.promise,w=x(r.url,r.params);if(p.pendingRequests.push(r),v.then(h,h),!r.cache&&!a.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(d=b(r.cache)?r.cache:b(a.cache)?a.cache:k),d)if(f=d.get(w),m(f)){if(A(f))return f.then(h,h),f;Dn(f)?l(f[1],f[0],L(f[2]),f[3]):l(f,200,{},"OK")}else d.put(w,v);if(y(f)){var _=qt(r.url)?t.cookies()[r.xsrfCookieName||a.xsrfCookieName]:n;_&&(s[r.xsrfHeaderName||a.xsrfHeaderName]=_),e(r.method,w,o,u,s,r.timeout,r.withCredentials,r.responseType)}return v}function x(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||y(e)||(Dn(e)||(e=[e]),o(e,function(e){b(e)&&(e=_(e)?e.toISOString():G(e)),n.push(Z(t)+"="+Z(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var k=r("$http"),S=[];return o(u,function(e){S.unshift(w(e)?d.get(e):d.invoke(e))}),o(l,function(e,t){var n=w(e)?d.get(e):d.invoke(e);S.splice(t,0,{response:function(e){return n(c.when(e))},responseError:function(e){return n(c.reject(e))}})}),p.pendingRequests=[],f("get","delete","head","jsonp"),g("post","put","patch"),p.defaults=a,p}]}function Qe(t){if(8>=wn&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!e.XMLHttpRequest))return new e.ActiveXObject("Microsoft.XMLHTTP");if(e.XMLHttpRequest)return new e.XMLHttpRequest;throw r("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function Je(){this.$get=["$browser","$window","$document",function(e,t,n){return Ke(e,Qe,e.defer,t.angular.callbacks,n[0])}]}function Ke(e,t,n,r,i){function a(e,t,n){var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){qn(o,"load",a),qn(o,"error",a),i.body.removeChild(o),o=null;var s=-1,u="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},Rn(o,"load",a),Rn(o,"error",a),8>=wn&&(o.onreadystatechange=function(){w(o.readyState)&&/loaded|complete/.test(o.readyState)&&(o.onreadystatechange=null,a({type:"load"}))}),i.body.appendChild(o),a}var s=-1;return function(i,u,l,c,h,d,p,g){function v(){b=s,x&&x(),_&&_.abort()}function y(t,r,i,o,a){k&&n.cancel(k),x=_=null,0===r&&(r=i?200:"file"==Rt(u).protocol?404:0),r=1223===r?204:r,a=a||"",t(r,i,o,a),e.$$completeOutstandingRequest(f)}var b;if(e.$$incOutstandingRequestCount(),u=u||e.url(),"jsonp"==gn(i)){var w="_"+(r.counter++).toString(36);r[w]=function(e){r[w].data=e,r[w].called=!0};var x=a(u.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(e,t){y(c,e,r[w].data,"",t),r[w]=f})}else{var _=t(i);if(_.open(i,u,!0),o(h,function(e,t){m(e)&&_.setRequestHeader(t,e)}),_.onreadystatechange=function(){if(_&&4==_.readyState){var e=null,t=null,n="";b!==s&&(e=_.getAllResponseHeaders(),t="response"in _?_.response:_.responseText),b===s&&10>wn||(n=_.statusText),y(c,b||_.status,t,e,n)}},p&&(_.withCredentials=!0),g)try{_.responseType=g}catch(E){if("json"!==g)throw E}_.send(l||null)}if(d>0)var k=n(v,d);else A(d)&&d.then(v)}}function et(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(o,u,l){for(var c,h,d,p,f=0,g=[],v=o.length,y=!1,m=[];v>f;)-1!=(c=o.indexOf(e,f))&&-1!=(h=o.indexOf(t,c+a))?(f!=c&&g.push(o.substring(f,c)),g.push(d=n(p=o.substring(c+a,h))),d.exp=p,f=h+s,y=!0):(f!=v&&g.push(o.substring(f)),f=v);if((v=g.length)||(g.push(""),v=1),l&&g.length>1)throw ar("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);return!u||y?(m.length=v,d=function(e){try{for(var t,n=0,a=v;a>n;n++){if("function"==typeof(t=g[n]))if(t=t(e),t=l?i.getTrusted(l,t):i.valueOf(t),null==t)t="";else switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=G(t)}m[n]=t}return m.join("")}catch(s){var u=ar("interr","Can't interpolate: {0}\n{1}",o,s.toString());r(u)}},d.exp=o,d.parts=g,d):void 0}var a=e.length,s=t.length;return o.startSymbol=function(){return e},o.endSymbol=function(){return t},o}]}function tt(){this.$get=["$rootScope","$window","$q",function(e,t,n){function r(r,o,a,s){var u=t.setInterval,l=t.clearInterval,c=n.defer(),h=c.promise,d=0,p=m(s)&&!s;return a=m(a)?a:0,h.then(null,null,r),h.$$intervalId=u(function(){c.notify(d++),a>0&&d>=a&&(c.resolve(d),l(h.$$intervalId),delete i[h.$$intervalId]),p||e.$apply()},o),i[h.$$intervalId]=c,h}var i={};return r.cancel=function(e){return e&&e.$$intervalId in i?(i[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete i[e.$$intervalId],!0):!1},r}]}function nt(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function rt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=W(t[n]);return t.join("/")}function it(e,t,n){var r=Rt(e,n);t.$$protocol=r.protocol,t.$$host=r.hostname,t.$$port=d(r.port)||ur[r.protocol]||null}function ot(e,t,n){var r="/"!==e.charAt(0);r&&(e="/"+e);var i=Rt(e,n);t.$$path=decodeURIComponent(r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=Y(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function at(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function st(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function ut(e){return e.substr(0,st(e).lastIndexOf("/")+1)}function lt(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function ct(e,t){this.$$html5=!0,t=t||"";var r=ut(e);it(e,this,e),this.$$parse=function(t){var n=at(r,t);if(!w(n))throw lr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,r);ot(n,this,e),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=X(this.$$search),t=this.$$hash?"#"+W(this.$$hash):"";this.$$url=rt(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){var a,s,u;return(a=at(e,i))!==n?(s=a,u=(a=at(t,a))!==n?r+(at("/",a)||a):e+s):(a=at(r,i))!==n?u=r+a:r==i+"/"&&(u=r),u&&this.$$parse(u),!!u}}function ht(e,t){var n=ut(e);it(e,this,e),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o=at(e,r)||at(n,r),a="#"==o.charAt(0)?at(t,o):this.$$html5?o:"";if(!w(a))throw lr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',r,t);ot(a,this,e),this.$$path=i(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var n=X(this.$$search),r=this.$$hash?"#"+W(this.$$hash):"";this.$$url=rt(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return st(e)==st(t)?(this.$$parse(t),!0):!1}}function dt(e,t){this.$$html5=!0,ht.apply(this,arguments);var n=ut(e);this.$$parseLinkUrl=function(r,i){var o,a;return e==st(r)?o=r:(a=at(n,r))?o=e+t+a:n===r+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=X(this.$$search),r=this.$$hash?"#"+W(this.$$hash):"";this.$$url=rt(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+t+this.$$url}}function pt(e){return function(){return this[e]}}function ft(e,t){return function(n){return y(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function gt(){var t="",n=!1;this.hashPrefix=function(e){return m(e)?(t=e,this):t},this.html5Mode=function(e){return m(e)?(n=e,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(r,i,o,a){function s(e){r.$broadcast("$locationChangeSuccess",u.absUrl(),e)}var u,l,c,h=i.baseHref(),d=i.url();n?(c=lt(d)+(h||"/"),l=o.history?ct:dt):(c=st(d),l=ht),u=new l(c,"#"+t),u.$$parseLinkUrl(d,d);var p=/^\s*(javascript|mailto):/i;a.on("click",function(t){if(!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var n=xn(t.target);"a"!==gn(n[0].nodeName);)if(n[0]===a[0]||!(n=n.parent())[0])return;var o=n.prop("href"),s=n.attr("href")||n.attr("xlink:href");b(o)&&"[object SVGAnimatedString]"===o.toString()&&(o=Rt(o.animVal).href),p.test(o)||!o||n.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(o,s)&&(t.preventDefault(),u.absUrl()!=i.url()&&(r.$apply(),e.angular["ff-684208-preventDefault"]=!0))}}),u.absUrl()!=d&&i.url(u.absUrl(),!0),i.onUrlChange(function(e){u.absUrl()!=e&&(r.$evalAsync(function(){var t=u.absUrl();u.$$parse(e),r.$broadcast("$locationChangeStart",e,t).defaultPrevented?(u.$$parse(t),i.url(t)):s(t)}),r.$$phase||r.$digest())});var f=0;return r.$watch(function(){var e=i.url(),t=u.$$replace;return f&&e==u.absUrl()||(f++,r.$evalAsync(function(){r.$broadcast("$locationChangeStart",u.absUrl(),e).defaultPrevented?u.$$parse(e):(i.url(u.absUrl(),t),s(e))})),u.$$replace=!1,f}),u}]}function vt(){var e=!0,t=this;this.debugEnabled=function(t){return m(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||f,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var e=[];return o(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function yt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw hr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function mt(e,t){if(e){if(e.constructor===e)throw hr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.document&&e.location&&e.alert&&e.setInterval)throw hr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw hr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw hr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function bt(e,t){if(e){if(e.constructor===e)throw hr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===pr||e===fr||gr&&e===gr)throw hr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function wt(e,t,r,i,o){mt(e,i),o=o||{};for(var a,s=t.split("."),u=0;s.length>1;u++){a=yt(s.shift(),i);var l=mt(e[a],i);l||(l={},e[a]=l),e=l,e.then&&o.unwrapPromises&&(cr(i),"$$v"in e||!function(e){e.then(function(t){e.$$v=t})}(e),e.$$v===n&&(e.$$v={}),e=e.$$v)}return a=yt(s.shift(),i),mt(e[a],i),e[a]=r,r}function xt(e){return"constructor"==e}function _t(e,t,r,i,o,a,s){yt(e,a),yt(t,a),yt(r,a),yt(i,a),yt(o,a);var u=function(e){return mt(e,a)},l=s.expensiveChecks,c=l||xt(e)?u:g,h=l||xt(t)?u:g,d=l||xt(r)?u:g,p=l||xt(i)?u:g,f=l||xt(o)?u:g;return s.unwrapPromises?function(s,u){var l,g=u&&u.hasOwnProperty(e)?u:s;return null==g?g:(g=c(g[e]),g&&g.then&&(cr(a),"$$v"in g||(l=g,l.$$v=n,l.then(function(e){l.$$v=c(e)})),g=c(g.$$v)),t?null==g?n:(g=h(g[t]),g&&g.then&&(cr(a),"$$v"in g||(l=g,l.$$v=n,l.then(function(e){l.$$v=h(e)})),g=h(g.$$v)),r?null==g?n:(g=d(g[r]),g&&g.then&&(cr(a),"$$v"in g||(l=g,l.$$v=n,l.then(function(e){l.$$v=d(e)})),g=d(g.$$v)),i?null==g?n:(g=p(g[i]),g&&g.then&&(cr(a),"$$v"in g||(l=g,l.$$v=n,l.then(function(e){l.$$v=p(e)})),g=p(g.$$v)),o?null==g?n:(g=f(g[o]),g&&g.then&&(cr(a),"$$v"in g||(l=g,l.$$v=n,l.then(function(e){l.$$v=f(e)})),g=f(g.$$v)),g):g):g):g):g)}:function(a,s){var u=s&&s.hasOwnProperty(e)?s:a;return null==u?u:(u=c(u[e]),t?null==u?n:(u=h(u[t]),r?null==u?n:(u=d(u[r]),i?null==u?n:(u=p(u[i]),o?null==u?n:u=f(u[o]):u):u):u):u)}}function Et(e,t){return function(n,r){return e(n,r,cr,mt,t)}}function kt(e,t,r){var i=t.expensiveChecks,a=i?xr:wr;if(a.hasOwnProperty(e))return a[e];var s,u=e.split("."),l=u.length;if(t.csp)s=6>l?_t(u[0],u[1],u[2],u[3],u[4],r,t):function(e,i){var o,a=0;do o=_t(u[a++],u[a++],u[a++],u[a++],u[a++],r,t)(e,i),i=n,e=o;while(l>a);return o};else{var c="var p;\n";i&&(c+="s = eso(s, fe);\nl = eso(l, fe);\n");var h=i;o(u,function(e,n){yt(e,r);var o=(n?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+'["'+e+'"]',a=i||xt(e);a&&(o="eso("+o+", fe)",h=!0),c+="if(s == null) return undefined;\ns="+o+";\n",t.unwrapPromises&&(c+='if (s && s.then) {\n pw("'+r.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(a?"eso(v)":"v")+";});\n}\n s="+(a?"eso(s.$$v)":"s.$$v")+"\n}\n")}),c+="return s;";var d=new Function("s","l","pw","eso","fe",c);d.toString=v(c),(h||t.unwrapPromises)&&(d=Et(d,r)),s=d}return"hasOwnProperty"!==e&&(a[e]=s),s}function St(){var e={},t={},n={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,expensiveChecks:!1};this.unwrapPromises=function(e){return m(e)?(n.unwrapPromises=!!e,this):n.unwrapPromises},this.logPromiseWarnings=function(e){return m(e)?(n.logPromiseWarnings=e,this):n.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(r,i,o){n.csp=i.csp;var a={csp:n.csp,unwrapPromises:n.unwrapPromises,logPromiseWarnings:n.logPromiseWarnings,expensiveChecks:!0};return cr=function(e){n.logPromiseWarnings&&!dr.hasOwnProperty(e)&&(dr[e]=!0,o.warn("[$parse] Promise found in the expression `"+e+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(i,o){var s;switch(typeof i){case"string":var u=o?t:e;if(u.hasOwnProperty(i))return u[i];var l=o?a:n,c=new mr(l),h=new br(c,r,l);return s=h.parse(i),"hasOwnProperty"!==i&&(u[i]=s),s;case"function":return i;default:return f}}}]}function Tt(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Ct(function(t){e.$evalAsync(t)},t)}]}function Ct(e,t){function r(e){return e}function i(e){return l(e)}function a(e){var t=s(),n=0,r=Dn(e)?[]:{};return o(e,function(e,i){n++,u(e).then(function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}var s=function(){var o,a,l=[];return a={resolve:function(t){if(l){var r=l;l=n,o=u(t),r.length&&e(function(){for(var e,t=0,n=r.length;n>t;t++)e=r[t],o.then(e[0],e[1],e[2])})}},reject:function(e){a.resolve(c(e))},notify:function(t){if(l){var n=l;l.length&&e(function(){for(var e,r=0,i=n.length;i>r;r++)e=n[r],e[2](t)})}},promise:{then:function(e,n,a){var u=s(),c=function(n){try{u.resolve((E(e)?e:r)(n))}catch(i){u.reject(i),t(i)}},h=function(e){try{u.resolve((E(n)?n:i)(e))}catch(r){u.reject(r),t(r)}},d=function(e){try{u.notify((E(a)?a:r)(e))}catch(n){t(n)}};return l?l.push([c,h,d]):o.then(c,h,d),u.promise},"catch":function(e){return this.then(null,e)},"finally":function(e){function t(e,t){var n=s();return t?n.resolve(e):n.reject(e),n.promise}function n(n,i){var o=null;try{o=(e||r)()}catch(a){return t(a,!1)}return A(o)?o.then(function(){return t(n,i)},function(e){return t(e,!1)}):t(n,i)}return this.then(function(e){return n(e,!0)},function(e){return n(e,!1)})}}}},u=function(t){return A(t)?t:{then:function(n){var r=s();return e(function(){r.resolve(n(t))}),r.promise}}},l=function(e){var t=s();return t.reject(e),t.promise},c=function(n){return{then:function(r,o){var a=s();return e(function(){try{a.resolve((E(o)?o:i)(n))}catch(e){a.reject(e),t(e)}}),a.promise}}},h=function(n,o,a,c){var h,d=s(),p=function(e){try{return(E(o)?o:r)(e)}catch(n){return t(n),l(n)}},f=function(e){try{return(E(a)?a:i)(e)}catch(n){return t(n),l(n)}},g=function(e){try{return(E(c)?c:r)(e)}catch(n){t(n)}};return e(function(){u(n).then(function(e){h||(h=!0,d.resolve(u(e).then(p,f,g)))},function(e){h||(h=!0,d.resolve(f(e)))},function(e){h||d.notify(g(e))})}),d.promise};return{defer:s,reject:l,when:h,all:a}}function Nt(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function At(){var e=10,t=r("$rootScope"),n=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,a,s,u){function c(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function h(e){if(y.$$phase)throw t("inprog","{0} already in progress",y.$$phase);y.$$phase=e}function d(){y.$$phase=null}function p(e,t){var n=s(e);return ne(n,t),n}function g(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function v(){}c.prototype={constructor:c,$new:function(e){var t;return e?(t=new c,t.$root=this.$root,t.$$asyncQueue=this.$$asyncQueue,t.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=l(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),t=new this.$$childScopeClass),t["this"]=t,t.$parent=this,t.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=t,this.$$childTail=t):this.$$childHead=this.$$childTail=t,t},$watch:function(e,t,r){var i=this,o=p(e,"watch"),a=i.$$watchers,s={fn:t,last:v,get:o,exp:e,eq:!!r};if(n=null,!E(t)){var u=p(t||f,"listener");s.fn=function(e,t,n){u(n)}}if("string"==typeof e&&o.constant){var l=s.fn;s.fn=function(e,t,n){l.call(this,e,t,n),I(a,s)}}return a||(a=i.$$watchers=[]),a.unshift(s),function(){I(a,s),n=null}},$watchCollection:function(e,t){function n(){o=d(l);var e,t,n;if(b(o))if(i(o)){a!==p&&(a=p,v=a.length=0,h++),e=o.length,v!==e&&(h++,a.length=v=e);for(var r=0;e>r;r++)n=a[r]!==a[r]&&o[r]!==o[r],n||a[r]===o[r]||(h++,a[r]=o[r])}else{a!==f&&(a=f={},v=0,h++),e=0;for(t in o)o.hasOwnProperty(t)&&(e++,a.hasOwnProperty(t)?(n=a[t]!==a[t]&&o[t]!==o[t],n||a[t]===o[t]||(h++,a[t]=o[t])):(v++,a[t]=o[t],h++));if(v>e){h++;for(t in a)a.hasOwnProperty(t)&&!o.hasOwnProperty(t)&&(v--,delete a[t])}}else a!==o&&(a=o,h++);return h}function r(){if(g?(g=!1,t(o,o,l)):t(o,u,l),c)if(b(o))if(i(o)){u=new Array(o.length);for(var e=0;e<o.length;e++)u[e]=o[e]}else{u={};for(var n in o)vn.call(o,n)&&(u[n]=o[n])}else u=o}var o,a,u,l=this,c=t.length>1,h=0,d=s(e),p=[],f={},g=!0,v=0;return this.$watch(n,r)},$digest:function(){var r,i,o,s,l,c,p,f,g,y,m,b=this.$$asyncQueue,w=this.$$postDigestQueue,x=e,_=this,k=[];h("$digest"),u.$$checkUrlChange(),n=null;do{for(c=!1,f=_;b.length;){try{m=b.shift(),m.scope.$eval(m.expression)}catch(S){d(),a(S)}n=null}e:do{if(s=f.$$watchers)for(l=s.length;l--;)try{if(r=s[l])if((i=r.get(f))===(o=r.last)||(r.eq?j(i,o):"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))){if(r===n){c=!1;break e}}else c=!0,n=r,r.last=r.eq?O(i,null):i,r.fn(i,o===v?i:o,f),5>x&&(g=4-x,k[g]||(k[g]=[]),y=E(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,y+="; newVal: "+G(i)+"; oldVal: "+G(o),k[g].push(y))}catch(S){d(),a(S)}if(!(p=f.$$childHead||f!==_&&f.$$nextSibling))for(;f!==_&&!(p=f.$$nextSibling);)f=f.$parent}while(f=p);if((c||b.length)&&!x--)throw d(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,G(k))}while(c||b.length);for(d();w.length;)try{w.shift()()}catch(S){a(S)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==y&&(o(this.$$listenerCount,F(null,g,this)),e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=f,this.$on=this.$watch=function(){return f})}},$eval:function(e,t){return s(e)(this,t)},$evalAsync:function(e){y.$$phase||y.$$asyncQueue.length||u.defer(function(){y.$$asyncQueue.length&&y.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return h("$apply"),this.$eval(e)}catch(t){a(t)}finally{d();try{y.$digest()}catch(t){throw a(t),t}}},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=M(n,t);-1!==r&&(n[r]=null,g(i,1,e))}},$emit:function(e,t){var n,r,i,o=[],s=this,u=!1,l={name:e,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=R([l],arguments,1);do{for(n=s.$$listeners[e]||o,l.currentScope=s,r=0,i=n.length;i>r;r++)if(n[r])try{n[r].apply(null,c)}catch(h){a(h)}else n.splice(r,1),r--,i--;if(u)return l;s=s.$parent}while(s);return l},$broadcast:function(e,t){for(var n,r,i,o=this,s=o,u=o,l={name:e,targetScope:o,preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=R([l],arguments,1);s=u;){for(l.currentScope=s,n=s.$$listeners[e]||[],r=0,i=n.length;i>r;r++)if(n[r])try{n[r].apply(null,c)}catch(h){a(h)}else n.splice(r,1),r--,i--;if(!(u=s.$$listenerCount[e]&&s.$$childHead||s!==o&&s.$$nextSibling))for(;s!==o&&!(u=s.$$nextSibling);)s=s.$parent}return l}};var y=new c;return y}]}function Pt(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return m(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return m(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return wn&&!(wn>=8)||(i=Rt(n).href,""===i||i.match(o))?n:"unsafe:"+i}}}function Dt(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function $t(e){if("self"===e)return e;if(w(e)){if(e.indexOf("***")>-1)throw _r("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Dt(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(k(e))return new RegExp("^"+e.source+"$");throw _r("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Mt(e){var t=[];return m(e)&&o(e,function(e){t.push($t(e))}),t}function It(){this.SCE_CONTEXTS=Er;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Mt(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Mt(e)),t},this.$get=["$injector",function(r){function i(e,t){return"self"===e?qt(t):!!e.exec(t.href)}function o(n){var r,o,a=Rt(n.toString()),s=!1;for(r=0,o=e.length;o>r;r++)if(i(e[r],a)){s=!0;break}if(s)for(r=0,o=t.length;o>r;r++)if(i(t[r],a)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var r=d.hasOwnProperty(e)?d[e]:null;if(!r)throw _r("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw _r("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function u(e){return e instanceof h?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||t===n||""===t)return t;var r=d.hasOwnProperty(e)?d[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===Er.RESOURCE_URL){if(o(t))return t;throw _r("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Er.HTML)return c(t);throw _r("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(e){throw _r("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(c=r.get("$sanitize"));var h=a(),d={};return d[Er.HTML]=a(h),d[Er.CSS]=a(h),d[Er.URL]=a(h),d[Er.JS]=a(h),d[Er.RESOURCE_URL]=a(d[Er.URL]),{trustAs:s,getTrusted:l,valueOf:u}}]}function Ot(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sniffer","$sceDelegate",function(t,n,r){if(e&&n.msie&&n.msieDocumentMode<8)throw _r("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=L(Er);i.isEnabled=function(){return e},i.trustAs=r.trustAs,i.getTrusted=r.getTrusted,i.valueOf=r.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=g),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:function(t,n){return i.getTrusted(e,r(t,n))}};var a=i.parseAs,s=i.getTrusted,u=i.trustAs;return o(Er,function(e,t){var n=gn(t);i[le("parse_as_"+n)]=function(t){return a(e,t)},i[le("get_trusted_"+n)]=function(t){return s(e,t)},i[le("trust_as_"+n)]=function(t){return u(e,t)}}),i}]}function Lt(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=d((/android (\d+)/.exec(gn((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=s.documentMode,l=/^(Moz|webkit|O|ms)(?=[A-Z])/,c=s.body&&s.body.style,h=!1,p=!1;if(c){for(var f in c)if(r=l.exec(f)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),h=!!("transition"in c||n+"Transition"in c),p=!!("animation"in c||n+"Animation"in c),!o||h&&p||(h=w(s.body.style.webkitTransition),p=w(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>o||a),hashchange:"onhashchange"in e&&(!u||u>7),hasEvent:function(e){if("input"==e&&9==wn)return!1;if(y(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:Mn(),vendorPrefix:n,transitions:h,animations:p,android:o,msie:wn,msieDocumentMode:u}}]}function jt(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(e,t,n,r){function i(i,a,s){var u,l=n.defer(),c=l.promise,h=m(s)&&!s;return u=t.defer(function(){try{l.resolve(i())}catch(t){l.reject(t),r(t)}finally{delete o[c.$$timeoutId]}h||e.$apply()},a),c.$$timeoutId=u,o[u]=l,c}var o={};return i.cancel=function(e){return e&&e.$$timeoutId in o?(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},i}]}function Rt(e,t){var n=e;return wn&&(kr.setAttribute("href",n),n=kr.href),kr.setAttribute("href",n),{href:kr.href,protocol:kr.protocol?kr.protocol.replace(/:$/,""):"",host:kr.host,search:kr.search?kr.search.replace(/^\?/,""):"",hash:kr.hash?kr.hash.replace(/^#/,""):"",hostname:kr.hostname,port:kr.port,pathname:"/"===kr.pathname.charAt(0)?kr.pathname:"/"+kr.pathname}}function qt(e){var t=w(e)?Rt(e):e;return t.protocol===Sr.protocol&&t.host===Sr.host}function Ft(){this.$get=v(e)}function Bt(e){function t(r,i){if(b(r)){var a={};return o(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",zt),t("date",Qt),t("filter",Gt),t("json",Jt),t("limitTo",Kt),t("lowercase",Pr),t("number",Ut),t("orderBy",en),t("uppercase",Dr)}function Gt(){return function(e,t,n){if(!Dn(e))return e;var r=typeof n,i=[];i.check=function(e){for(var t=0;t<i.length;t++)if(!i[t](e))return!1;return!0},"function"!==r&&(n="boolean"===r&&n?function(e,t){return An.equals(e,t)}:function(e,t){if(e&&t&&"object"==typeof e&&"object"==typeof t){for(var r in e)if("$"!==r.charAt(0)&&vn.call(e,r)&&n(e[r],t[r]))return!0;return!1}return t=(""+t).toLowerCase(),(""+e).toLowerCase().indexOf(t)>-1});var o=function(e,t){if("string"==typeof t&&"!"===t.charAt(0))return!o(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return n(e,t);case"object":switch(typeof t){case"object":return n(e,t);default:for(var r in e)if("$"!==r.charAt(0)&&o(e[r],t))return!0}return!1;case"array":for(var i=0;i<e.length;i++)if(o(e[i],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var a in t)!function(e){"undefined"!=typeof t[e]&&i.push(function(n){return o("$"==e?n:n&&n[e],t[e])})}(a);break;case"function":i.push(t);break;default:return e}for(var s=[],u=0;u<e.length;u++){var l=e[u];i.check(l)&&s.push(l)}return s}}function zt(e){var t=e.NUMBER_FORMATS;return function(e,n){return y(n)&&(n=t.CURRENCY_SYM),Vt(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function Ut(e){var t=e.NUMBER_FORMATS;return function(e,n){return Vt(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Vt(e,t,n,r,i){if(null==e||!isFinite(e)||b(e))return"";var o=0>e;e=Math.abs(e);var a=e+"",s="",u=[],l=!1;if(-1!==a.indexOf("e")){var c=a.match(/([\d\.]+)e(-?)(\d+)/);c&&"-"==c[2]&&c[3]>i+1?(a="0",e=0):(s=a,l=!0)}if(l)i>0&&e>-1&&1>e&&(s=e.toFixed(i));else{var h=(a.split(Tr)[1]||"").length;y(i)&&(i=Math.min(Math.max(t.minFrac,h),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i),0===e&&(o=!1);var d=(""+e).split(Tr),p=d[0];d=d[1]||"";var f,g=0,v=t.lgSize,m=t.gSize;if(p.length>=v+m)for(g=p.length-v,f=0;g>f;f++)(g-f)%m===0&&0!==f&&(s+=n),s+=p.charAt(f);for(f=g;f<p.length;f++)(p.length-f)%v===0&&0!==f&&(s+=n),s+=p.charAt(f);for(;d.length<i;)d+="0";i&&"0"!==i&&(s+=r+d.substr(0,i))}return u.push(o?t.negPre:t.posPre),u.push(s),u.push(o?t.negSuf:t.posSuf),u.join("")}function Ht(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function Yt(e,t,n,r){return n=n||0,function(i){var o=i["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),Ht(o,t,r)}}function Xt(e,t){return function(n,r){var i=n["get"+e](),o=yn(t?"SHORT"+e:e);return r[o][i]}}function Wt(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=Ht(Math[t>0?"floor":"ceil"](t/60),2)+Ht(Math.abs(t%60),2);

}function Zt(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Qt(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=d(t[9]+t[10]),o=d(t[9]+t[11])),a.call(r,d(t[1]),d(t[2])-1,d(t[3]));var u=d(t[4]||0)-i,l=d(t[5]||0)-o,c=d(t[6]||0),h=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,u,l,c,h),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r){var i,a,s="",u=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,w(n)&&(n=Ar.test(n)?d(n):t(n)),x(n)&&(n=new Date(n)),!_(n))return n;for(;r;)a=Nr.exec(r),a?(u=R(u,a,1),r=u.pop()):(u.push(r),r=null);return o(u,function(t){i=Cr[t],s+=i?i(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function Jt(){return function(e){return G(e,!0)}}function Kt(){return function(e,t){if(!Dn(e)&&!w(e))return e;if(t=Math.abs(Number(t))===1/0?Number(t):d(t),w(e))return t?t>=0?e.slice(0,t):e.slice(t,e.length):"";var n,r,i=[];for(t>e.length?t=e.length:t<-e.length&&(t=-e.length),t>0?(n=0,r=t):(n=e.length+t,r=e.length);r>n;n++)i.push(e[n]);return i}}function en(e){return function(t,n,r){function o(e,t){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(0!==i)return i}return 0}function a(e,t){return U(t)?function(t,n){return e(n,t)}:e}function s(e,t){var n=typeof e,r=typeof t;return n==r?(_(e)&&_(t)&&(e=e.valueOf(),t=t.valueOf()),"string"==n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):r>n?-1:1}return i(t)?(n=Dn(n)?n:[n],0===n.length&&(n=["+"]),n=D(n,function(t){var n=!1,r=t||g;if(w(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return a(function(e,t){return s(e,t)},n);if(r=e(t),r.constant){var i=r();return a(function(e,t){return s(e[i],t[i])},n)}}return a(function(e,t){return s(r(e),r(t))},n)}),Sn.call(t).sort(a(o,r))):t}}function tn(e){return E(e)&&(e={link:e}),e.restrict=e.restrict||"AC",v(e)}function nn(e,t,n,r){function i(t,n){n=n?"-"+K(n,"-"):"",r.setClass(e,(t?Ur:Vr)+n,(t?Vr:Ur)+n)}var a=this,s=e.parent().controller("form")||Ir,u=0,l=a.$error={},c=[];a.$name=t.name||t.ngForm,a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,s.$addControl(a),e.addClass(Hr),i(!0),a.$addControl=function(e){re(e.$name,"input"),c.push(e),e.$name&&(a[e.$name]=e)},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],o(l,function(t,n){a.$setValidity(n,!0,e)}),I(c,e)},a.$setValidity=function(e,t,n){var r=l[e];if(t)r&&(I(r,n),r.length||(u--,u||(i(t),a.$valid=!0,a.$invalid=!1),l[e]=!1,i(!0,e),s.$setValidity(e,!0,a)));else{if(u||i(t),r){if($(r,n))return}else l[e]=r=[],u++,i(!1,e),s.$setValidity(e,!1,a);r.push(n),a.$valid=!1,a.$invalid=!0}},a.$setDirty=function(){r.removeClass(e,Hr),r.addClass(e,Yr),a.$dirty=!0,a.$pristine=!1,s.$setDirty()},a.$setPristine=function(){r.removeClass(e,Yr),r.addClass(e,Hr),a.$dirty=!1,a.$pristine=!0,o(c,function(e){e.$setPristine()})}}function rn(e,t,r,i){return e.$setValidity(t,r),r?i:n}function on(e,t){var n,r;if(t)for(n=0;n<t.length;++n)if(r=t[n],e[r])return!0;return!1}function an(e,t,n,r,i){if(b(i)){e.$$hasNativeValidators=!0;var o=function(o){return e.$error[t]||on(i,r)||!on(i,n)?o:void e.$setValidity(t,!1)};e.$parsers.push(o)}}function sn(e,t,n,i,o,a){var s=t.prop(fn),u=t[0].placeholder,l={},c=gn(t[0].type);if(i.$$validityState=s,!o.android){var h=!1;t.on("compositionstart",function(e){h=!0}),t.on("compositionend",function(){h=!1,p()})}var p=function(r){if(!h){var o=t.val();if(wn&&"input"===(r||l).type&&t[0].placeholder!==u)return void(u=t[0].placeholder);"password"!==c&&U(n.ngTrim||"T")&&(o=$n(o));var a=s&&i.$$hasNativeValidators;(i.$viewValue!==o||""===o&&a)&&(e.$root.$$phase?i.$setViewValue(o):e.$apply(function(){i.$setViewValue(o)}))}};if(o.hasEvent("input"))t.on("input",p);else{var f,g=function(){f||(f=a.defer(function(){p(),f=null}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||g()}),o.hasEvent("paste")&&t.on("paste cut",g)}t.on("change",p),i.$render=function(){t.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)};var v,y,m=n.ngPattern;if(m){var b=function(e,t){return rn(i,"pattern",i.$isEmpty(t)||e.test(t),t)};y=m.match(/^\/(.*)\/([gim]*)$/),y?(m=new RegExp(y[1],y[2]),v=function(e){return b(m,e)}):v=function(n){var i=e.$eval(m);if(!i||!i.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",m,i,V(t));return b(i,n)},i.$formatters.push(v),i.$parsers.push(v)}if(n.ngMinlength){var w=d(n.ngMinlength),x=function(e){return rn(i,"minlength",i.$isEmpty(e)||e.length>=w,e)};i.$parsers.push(x),i.$formatters.push(x)}if(n.ngMaxlength){var _=d(n.ngMaxlength),E=function(e){return rn(i,"maxlength",i.$isEmpty(e)||e.length<=_,e)};i.$parsers.push(E),i.$formatters.push(E)}}function un(e,t,r,i,o,a){if(sn(e,t,r,i,o,a),i.$parsers.push(function(e){var t=i.$isEmpty(e);return t||Fr.test(e)?(i.$setValidity("number",!0),""===e?null:t?e:parseFloat(e)):(i.$setValidity("number",!1),n)}),an(i,"number",Gr,null,i.$$validityState),i.$formatters.push(function(e){return i.$isEmpty(e)?"":""+e}),r.min){var s=function(e){var t=parseFloat(r.min);return rn(i,"min",i.$isEmpty(e)||e>=t,e)};i.$parsers.push(s),i.$formatters.push(s)}if(r.max){var u=function(e){var t=parseFloat(r.max);return rn(i,"max",i.$isEmpty(e)||t>=e,e)};i.$parsers.push(u),i.$formatters.push(u)}i.$formatters.push(function(e){return rn(i,"number",i.$isEmpty(e)||x(e),e)})}function ln(e,t,n,r,i,o){sn(e,t,n,r,i,o);var a=function(e){return rn(r,"url",r.$isEmpty(e)||Rr.test(e),e)};r.$formatters.push(a),r.$parsers.push(a)}function cn(e,t,n,r,i,o){sn(e,t,n,r,i,o);var a=function(e){return rn(r,"email",r.$isEmpty(e)||qr.test(e),e)};r.$formatters.push(a),r.$parsers.push(a)}function hn(e,t,n,r){y(n.name)&&t.attr("name",l()),t.on("click",function(){t[0].checked&&e.$apply(function(){r.$setViewValue(n.value)})}),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function dn(e,t,n,r){var i=n.ngTrueValue,o=n.ngFalseValue;w(i)||(i=!0),w(o)||(o=!1),t.on("click",function(){e.$apply(function(){r.$setViewValue(t[0].checked)})}),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e!==i},r.$formatters.push(function(e){return e===i}),r.$parsers.push(function(e){return e?i:o})}function pn(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i==t[o])continue e;n.push(i)}return n}function i(e){if(Dn(e))return e;if(w(e))return e.split(" ");if(b(e)){var t=[];return o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(a,s,u){function l(e){var t=h(e,1);u.$addClass(t)}function c(e){var t=h(e,-1);u.$removeClass(t)}function h(e,t){var n=s.data("$classCounts")||{},r=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function d(e,t){var i=r(t,e),o=r(e,t);o=h(o,-1),i=h(i,1),0===i.length?n.removeClass(s,o):0===o.length?n.addClass(s,i):n.setClass(s,i,o)}function p(e){if(t===!0||a.$index%2===t){var n=i(e||[]);if(f){if(!j(e,f)){var r=i(f);d(r,n)}}else l(n)}f=L(e)}var f;a.$watch(u[e],p,!0),u.$observe("class",function(t){p(a.$eval(u[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(u[e]));o===t?l(s):c(s)}})}}}]}var fn="validity",gn=function(e){return w(e)?e.toLowerCase():e},vn=Object.prototype.hasOwnProperty,yn=function(e){return w(e)?e.toUpperCase():e},mn=function(e){return w(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},bn=function(e){return w(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(gn=mn,yn=bn);var wn,xn,_n,En,kn,Sn=[].slice,Tn=[].push,Cn=Object.prototype.toString,Nn=r("ng"),An=e.angular||(e.angular={}),Pn=["0","0","0"];wn=d((/msie (\d+)/.exec(gn(navigator.userAgent))||[])[1]),isNaN(wn)&&(wn=d((/trident\/.*; rv:(\d+)/.exec(gn(navigator.userAgent))||[])[1])),f.$inject=[],g.$inject=[];var Dn=function(){return E(Array.isArray)?Array.isArray:function(e){return"[object Array]"===Cn.call(e)}}(),$n=function(){return String.prototype.trim?function(e){return w(e)?e.trim():e}:function(e){return w(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();kn=9>wn?function(e){return e=e.nodeName?e:e[0],e.scopeName&&"HTML"!=e.scopeName?yn(e.scopeName+":"+e.nodeName):e.nodeName}:function(e){return e.nodeName?e.nodeName:e[0].nodeName};var Mn=function(){if(m(Mn.isActive_))return Mn.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return Mn.isActive_=e},In=/[A-Z]/g,On={full:"1.2.28",major:1,minor:2,dot:28,codeName:"finnish-disembarkation"};fe.expando="ng339";var Ln=fe.cache={},jn=1,Rn=e.document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},qn=e.document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},Fn=(fe._data=function(e){return this.cache[e[this.expando]]||{}},/([\:\-\_]+(.))/g),Bn=/^moz([A-Z])/,Gn=r("jqLite"),zn=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Un=/<|&#?\w+;/,Vn=/<([\w:]+)/,Hn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Yn={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Yn.optgroup=Yn.option,Yn.tbody=Yn.tfoot=Yn.colgroup=Yn.caption=Yn.thead,Yn.th=Yn.td;var Xn=fe.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),fe(e).on("load",r))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return xn(e>=0?this[e]:this[this.length+e])},length:0,push:Tn,sort:[].sort,splice:[].splice},Wn={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Wn[gn(e)]=e});var Zn={};o("input,select,option,textarea,button,form,details".split(","),function(e){Zn[yn(e)]=!0}),o({data:we,removeData:me},function(e,t){fe[t]=e}),o({data:we,inheritedData:Te,scope:function(e){return xn.data(e,"$scope")||Te(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return xn.data(e,"$isolateScope")||xn.data(e,"$isolateScopeNoTemplate")},controller:Se,injector:function(e){return Te(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:xe,css:function(e,t,r){if(t=le(t),!m(r)){var i;return 8>=wn&&(i=e.currentStyle&&e.currentStyle[t],""===i&&(i="auto")),i=i||e.style[t],8>=wn&&(i=""===i?n:i),i}e.style[t]=r},attr:function(e,t,r){var i=gn(t);if(Wn[i]){if(!m(r))return e[t]||(e.attributes.getNamedItem(t)||f).specified?i:n;r?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(m(r))e.setAttribute(t,r);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}},prop:function(e,t,n){return m(n)?void(e[t]=n):e[t]},text:function(){function e(e,n){var r=t[e.nodeType];return y(n)?r?e[r]:"":void(e[r]=n)}var t=[];return 9>wn?(t[1]="innerText",t[3]="nodeValue"):t[1]=t[3]="textContent",e.$dv="",e}(),val:function(e,t){if(y(t)){if("SELECT"===kn(e)&&e.multiple){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){if(y(t))return e.innerHTML;for(var n=0,r=e.childNodes;n<r.length;n++)ve(r[n]);e.innerHTML=t},empty:Ce},function(e,t){fe.prototype[t]=function(t,r){var i,o,a=this.length;if(e!==Ce&&(2==e.length&&e!==xe&&e!==Se?t:r)===n){if(b(t)){for(i=0;a>i;i++)if(e===we)e(this[i],t);else for(o in t)e(this[i],o,t[o]);return this}for(var s=e.$dv,u=s===n?Math.min(a,1):a,l=0;u>l;l++){var c=e(this[l],t,r);s=s?s+c:c}return s}for(i=0;a>i;i++)e(this[i],t,r);return this}}),o({removeData:me,dealoc:ve,on:function Di(e,n,r,i){if(m(i))throw Gn("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var a=be(e,"events"),s=be(e,"handle");a||be(e,"events",a={}),s||be(e,"handle",s=Ae(e,a)),o(n.split(" "),function(n){var i=a[n];if(!i){if("mouseenter"==n||"mouseleave"==n){var o=t.body.contains||t.body.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};a[n]=[];var u={mouseleave:"mouseout",mouseenter:"mouseover"};Di(e,u[n],function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!o(t,r))&&s(e,n)})}else Rn(e,n,s),a[n]=[];i=a[n]}i.push(r)})},off:ye,one:function(e,t,n){e=xn(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;ve(e),o(new fe(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){o(new fe(t),function(t){(1===e.nodeType||11===e.nodeType)&&e.appendChild(t)})},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;o(new fe(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=xn(t)[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:function(e){ve(e);var t=e.parentNode;t&&t.removeChild(e)},after:function(e,t){var n=e,r=e.parentNode;o(new fe(t),function(e){r.insertBefore(e,n.nextSibling),n=e})},addClass:Ee,removeClass:_e,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var r=n;y(r)&&(r=!xe(e,t)),(r?Ee:_e)(e,t)})},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;null!=t&&1!==t.nodeType;)t=t.nextSibling;return t},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:ge,triggerHandler:function(e,t,n){var r,i,a,s=t.type||t,u=(be(e,"events")||{})[s];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:f,type:s,target:e},t.type&&(r=h(r,t)),i=L(u),a=n?[r].concat(n):[r],o(i,function(t){t.apply(e,a)}))}},function(e,t){fe.prototype[t]=function(t,n,r){for(var i,o=0;o<this.length;o++)y(i)?(i=e(this[o],t,n,r),m(i)&&(i=xn(i))):ke(i,e(this[o],t,n,r));return m(i)?i:this},fe.prototype.bind=fe.prototype.on,fe.prototype.unbind=fe.prototype.off}),De.prototype={put:function(e,t){this[Pe(e,this.nextUid)]=t},get:function(e){return this[Pe(e,this.nextUid)]},remove:function(e){var t=this[e=Pe(e,this.nextUid)];return delete this[e],t}};var Qn=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Jn=/,/,Kn=/^\s*(_?)(\S+?)\1\s*$/,er=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,tr=r("$injector"),nr=r("$animate"),rr=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var r=t+"-animation";if(t&&"."!=t.charAt(0))throw nr("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=r,e.factory(r,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(e,t){function n(e){e&&t(e)}return{enter:function(e,t,r,i){r?r.after(e):(t&&t[0]||(t=r.parent()),t.append(e)),n(i)},leave:function(e,t){e.remove(),n(t)},move:function(e,t,n,r){this.enter(e,t,n,r)},addClass:function(e,t,r){t=w(t)?t:Dn(t)?t.join(" "):"",o(e,function(e){Ee(e,t)}),n(r)},removeClass:function(e,t,r){t=w(t)?t:Dn(t)?t.join(" "):"",o(e,function(e){_e(e,t)}),n(r)},setClass:function(e,t,r,i){o(e,function(e){Ee(e,t),_e(e,r)}),n(i)},enabled:f}}]}],ir=r("$compile");Fe.$inject=["$provide","$$sanitizeUriProvider"];var or=/^(x[\:\-_]|data[\:\-_])/i,ar=r("$interpolate"),sr=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ur={http:80,https:443,ftp:21},lr=r("$location");dt.prototype=ht.prototype=ct.prototype={$$html5:!1,$$replace:!1,absUrl:pt("$$absUrl"),url:function(e){if(y(e))return this.$$url;var t=sr.exec(e);return t[1]&&this.path(decodeURIComponent(t[1])),(t[2]||t[1])&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:pt("$$protocol"),host:pt("$$host"),port:pt("$$port"),path:ft("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(w(e)||x(e))e=e.toString(),this.$$search=Y(e);else{if(!b(e))throw lr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:y(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:ft("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};var cr,hr=r("$parse"),dr={},pr=Function.prototype.call,fr=Function.prototype.apply,gr=Function.prototype.bind,vr={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:f,"+":function(e,t,r,i){return r=r(e,t),i=i(e,t),m(r)?m(i)?r+i:r:m(i)?i:n},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),(m(n)?n:0)-(m(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"^":function(e,t,n,r){return n(e,t)^r(e,t)},"=":f,"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"&":function(e,t,n,r){return n(e,t)&r(e,t)},"|":function(e,t,n,r){return r(e,t)(e,t,n(e,t))},"!":function(e,t,n){return!n(e,t)}},yr={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},mr=function(e){this.options=e};mr.prototype={constructor:mr,lex:function(e){for(this.text=e,this.index=0,this.ch=n,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var t=this.ch+this.peek(),r=t+this.peek(2),i=vr[this.ch],o=vr[t],a=vr[r];a?(this.tokens.push({index:this.index,text:r,fn:a}),this.index+=3):o?(this.tokens.push({index:this.index,text:t,fn:o}),this.index+=2):i?(this.tokens.push({index:this.index,text:this.ch,fn:i}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(e){return-1!==e.indexOf(this.ch)},was:function(e){return-1!==e.indexOf(this.lastCh)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=m(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw hr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=gn(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}e=1*e,this.tokens.push({index:t,text:e,literal:!0,constant:!0,fn:function(){return e}})},readIdent:function(){for(var e,t,n,r,i=this,o="",a=this.index;this.index<this.text.length&&(r=this.text.charAt(this.index),"."===r||this.isIdent(r)||this.isNumber(r));)"."===r&&(e=this.index),o+=r,this.index++;if(e)for(t=this.index;t<this.text.length;){if(r=this.text.charAt(t),"("===r){n=o.substr(e-a+1),o=o.substr(0,e-a),this.index=t;break}if(!this.isWhitespace(r))break;t++}var s={index:a,text:o};if(vr.hasOwnProperty(o))s.fn=vr[o],s.literal=!0,s.constant=!0;else{var u=kt(o,this.options,this.text);s.fn=h(function(e,t){return u(e,t)},{assign:function(e,t){return wt(e,o,t,i.text,i.options)}})}this.tokens.push(s),n&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:n}))},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=yr[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,string:n,literal:!0,constant:!0,fn:function(){return n}});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var br=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};br.ZERO=h(function(){return 0},{constant:!0}),br.prototype={constructor:br,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var t=this.expect();e=t.fn,e||this.throwError("not a primary expression",t),e.literal=!!t.literal,e.constant=!!t.constant}for(var n,r;n=this.expect("(","[",".");)"("===n.text?(e=this.functionCall(e,r),r=null):"["===n.text?(r=e,e=this.objectIndex(e)):"."===n.text?(r=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw hr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw hr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){if(this.tokens.length>0){var i=this.tokens[0],o=i.text;if(o===e||o===t||o===n||o===r||!e&&!t&&!n&&!r)return i}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(e,t){return h(function(n,r){return e(n,r,t)},{constant:t.constant})},ternaryFn:function(e,t,n){return h(function(r,i){return e(r,i)?t(r,i):n(r,i)},{constant:e.constant&&t.constant&&n.constant})},binaryFn:function(e,t,n){return h(function(r,i){return t(r,i,e,n)},{constant:e.constant&&n.constant})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var r,i=0;i<e.length;i++){var o=e[i];o&&(r=o(t,n))}return r}},filterChain:function(){for(var e,t=this.expression();;){if(!(e=this.expect("|")))return t;t=this.binaryFn(t,e.fn,this.filter())}},filter:function(){for(var e=this.expect(),t=this.$filter(e.text),n=[];;){if(!(e=this.expect(":"))){var r=function(e,r,i){for(var o=[i],a=0;a<n.length;a++)o.push(n[a](e,r));return t.apply(e,o)};return function(){return r}}n.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),function(t,r){return n.assign(t,e(t,r),r)}):n},ternary:function(){var e,t,n=this.logicalOR();return(t=this.expect("?"))?(e=this.assignment(),(t=this.expect(":"))?this.ternaryFn(n,e,this.assignment()):void this.throwError("expected :",t)):n},logicalOR:function(){for(var e,t=this.logicalAND();;){if(!(e=this.expect("||")))return t;t=this.binaryFn(t,e.fn,this.logicalAND())}},logicalAND:function(){var e,t=this.equality();return(e=this.expect("&&"))&&(t=this.binaryFn(t,e.fn,this.logicalAND())),t},equality:function(){var e,t=this.relational();return(e=this.expect("==","!=","===","!=="))&&(t=this.binaryFn(t,e.fn,this.equality())),t},relational:function(){var e,t=this.additive();return(e=this.expect("<",">","<=",">="))&&(t=this.binaryFn(t,e.fn,this.relational())),t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.fn,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.fn,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(br.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(e){var t=this,n=this.expect().text,r=kt(n,this.options,this.text);return h(function(t,n,i){return r(i||e(t,n))},{assign:function(r,i,o){var a=e(r,o);return a||e.assign(r,a={}),wt(a,n,i,t.text,t.options)}})},objectIndex:function(e){var t=this,r=this.expression();return this.consume("]"),h(function(i,o){var a,s,u=e(i,o),l=r(i,o);return yt(l,t.text),u?(a=mt(u[l],t.text),a&&a.then&&t.options.unwrapPromises&&(s=a,"$$v"in a||(s.$$v=n,s.then(function(e){s.$$v=e})),a=a.$$v),a):n},{assign:function(n,i,o){var a=yt(r(n,o),t.text),s=mt(e(n,o),t.text);return s||e.assign(n,s={}),s[a]=i}})},functionCall:function(e,t){var n=[];if(")"!==this.peekToken().text)do n.push(this.expression());while(this.expect(","));this.consume(")");var r=this;return function(i,o){for(var a=[],s=t?t(i,o):i,u=0;u<n.length;u++)a.push(mt(n[u](i,o),r.text));var l=e(i,o,s)||f;mt(s,r.text),bt(l,r.text);var c=l.apply?l.apply(s,a):l(a[0],a[1],a[2],a[3],a[4]);return mt(c,r.text)}},arrayDeclaration:function(){var e=[],t=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var n=this.expression();e.push(n),n.constant||(t=!1)}while(this.expect(","));return this.consume("]"),h(function(t,n){for(var r=[],i=0;i<e.length;i++)r.push(e[i](t,n));return r},{literal:!0,constant:t})},object:function(){var e=[],t=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.expect(),r=n.string||n.text;this.consume(":");var i=this.expression();e.push({key:r,value:i}),i.constant||(t=!1)}while(this.expect(","));return this.consume("}"),h(function(t,n){for(var r={},i=0;i<e.length;i++){var o=e[i];r[o.key]=o.value(t,n)}return r},{literal:!0,constant:t})}};var wr={},xr={},_r=r("$sce"),Er={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},kr=t.createElement("a"),Sr=Rt(e.location.href,!0);Bt.$inject=["$provide"],zt.$inject=["$locale"],Ut.$inject=["$locale"];var Tr=".",Cr={yyyy:Yt("FullYear",4),yy:Yt("FullYear",2,0,!0),y:Yt("FullYear",1),MMMM:Xt("Month"),MMM:Xt("Month",!0),MM:Yt("Month",2,1),M:Yt("Month",1,1),dd:Yt("Date",2),d:Yt("Date",1),HH:Yt("Hours",2),H:Yt("Hours",1),hh:Yt("Hours",2,-12),h:Yt("Hours",1,-12),mm:Yt("Minutes",2),m:Yt("Minutes",1),ss:Yt("Seconds",2),s:Yt("Seconds",1),sss:Yt("Milliseconds",3),EEEE:Xt("Day"),EEE:Xt("Day",!0),a:Zt,Z:Wt},Nr=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Ar=/^\-?\d+$/;Qt.$inject=["$locale"];var Pr=v(gn),Dr=v(yn);en.$inject=["$parse"];var $r=v({restrict:"E",compile:function(e,n){return 8>=wn&&(n.href||n.name||n.$set("href",""),e.append(t.createComment("IE fix"))),n.href||n.xlinkHref||n.name?void 0:function(e,t){var n="[object SVGAnimatedString]"===Cn.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),Mr={};o(Wn,function(e,t){if("multiple"!=e){var n=Be("ng-"+t);Mr[n]=function(){return{priority:100,link:function(e,r,i){e.$watch(i[n],function(e){i.$set(t,!!e)})}}}}}),o(["src","srcset","href"],function(e){var t=Be("ng-"+e);Mr[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===Cn.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(wn&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var Ir={$addControl:f,$removeControl:f,$setValidity:f,$setDirty:f,$setPristine:f};nn.$inject=["$element","$attrs","$scope","$animate"];var Or=function(e){return["$timeout",function(t){var r={name:"form",restrict:e?"EAC":"E",controller:nn,compile:function(){return{pre:function(e,r,i,o){if(!i.action){var a=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1};Rn(r[0],"submit",a),r.on("$destroy",function(){t(function(){qn(r[0],"submit",a)},0,!1)})}var s=r.parent().controller("form"),u=i.name||i.ngForm;u&&wt(e,u,o,u),s&&r.on("$destroy",function(){s.$removeControl(o),u&&wt(e,u,n,u),h(o,Ir)})}}}};return r}]},Lr=Or(),jr=Or(!0),Rr=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,qr=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Fr=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Br={text:sn,number:un,url:ln,email:cn,radio:hn,checkbox:dn,hidden:f,button:f,submit:f,reset:f,file:f},Gr=["badInput"],zr=["$browser","$sniffer",function(e,t){return{restrict:"E",require:"?ngModel",link:function(n,r,i,o){o&&(Br[gn(i.type)]||Br.text)(n,r,i,o,t,e)}}}],Ur="ng-valid",Vr="ng-invalid",Hr="ng-pristine",Yr="ng-dirty",Xr=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(e,t,n,i,a,s){function u(e,t){t=t?"-"+K(t,"-"):"",s.removeClass(i,(e?Vr:Ur)+t),s.addClass(i,(e?Ur:Vr)+t)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=n.name;var l=a(n.ngModel),c=l.assign;if(!c)throw r("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,V(i));this.$render=f,this.$isEmpty=function(e){return y(e)||""===e||null===e||e!==e};var h=i.inheritedData("$formController")||Ir,d=0,p=this.$error={};i.addClass(Hr),u(!0),this.$setValidity=function(e,t){p[e]!==!t&&(t?(p[e]&&d--,d||(u(!0),this.$valid=!0,this.$invalid=!1)):(u(!1),this.$invalid=!0,this.$valid=!1,d++),p[e]=!t,u(t,e),h.$setValidity(e,t,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,s.removeClass(i,Yr),s.addClass(i,Hr)},this.$setViewValue=function(n){this.$viewValue=n,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,s.removeClass(i,Hr),s.addClass(i,Yr),h.$setDirty()),o(this.$parsers,function(e){n=e(n)}),this.$modelValue!==n&&(this.$modelValue=n,c(e,n),o(this.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}}))};var g=this;e.$watch(function(){var t=l(e);if(g.$modelValue!==t){var n=g.$formatters,r=n.length;for(g.$modelValue=t;r--;)t=n[r](t);g.$viewValue!==t&&(g.$viewValue=t,g.$render())}return t})}],Wr=function(){return{require:["ngModel","^?form"],controller:Xr,link:function(e,t,n,r){var i=r[0],o=r[1]||Ir;o.$addControl(i),e.$on("$destroy",function(){o.$removeControl(i)})}}},Zr=v({require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Qr=function(){return{require:"?ngModel",link:function(e,t,n,r){if(r){n.required=!0;var i=function(e){return n.required&&r.$isEmpty(e)?void r.$setValidity("required",!1):(r.$setValidity("required",!0),
e)};r.$formatters.push(i),r.$parsers.unshift(i),n.$observe("required",function(){i(r.$viewValue)})}}}},Jr=function(){return{require:"ngModel",link:function(e,t,r,i){var a=/\/(.*)\//.exec(r.ngList),s=a&&new RegExp(a[1])||r.ngList||",",u=function(e){if(!y(e)){var t=[];return e&&o(e.split(s),function(e){e&&t.push($n(e))}),t}};i.$parsers.push(u),i.$formatters.push(function(e){return Dn(e)?e.join(", "):n}),i.$isEmpty=function(e){return!e||!e.length}}}},Kr=/^(true|false|\d+)$/,ei=function(){return{priority:100,compile:function(e,t){return Kr.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},ti=tn({compile:function(e){return e.addClass("ng-binding"),function(e,t,r){t.data("$binding",r.ngBind),e.$watch(r.ngBind,function(e){t.text(e==n?"":e)})}}}),ni=["$interpolate",function(e){return function(t,n,r){var i=e(n.attr(r.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",i),r.$observe("ngBindTemplate",function(e){n.text(e)})}}],ri=["$sce","$parse",function(e,t){return{compile:function(n){return n.addClass("ng-binding"),function(n,r,i){function o(){return(a(n)||"").toString()}r.data("$binding",i.ngBindHtml);var a=t(i.ngBindHtml);n.$watch(o,function(t){r.html(e.getTrustedHtml(a(n))||"")})}}}}],ii=pn("",!0),oi=pn("Odd",0),ai=pn("Even",1),si=tn({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),ui=[function(){return{scope:!0,controller:"@",priority:500}}],li={},ci={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Be("ng-"+e);li[t]=["$parse","$rootScope",function(n,r){return{compile:function(i,o){var a=n(o[t],!0);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};ci[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var hi=["$animate",function(e){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,l;n.$watch(i.ngIf,function(o){U(o)?u||(u=n.$new(),a(u,function(n){n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)})):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=oe(s.clone),e.leave(l,function(){l=null}),s=null))})}}}],di=["$http","$templateCache","$anchorScroll","$animate","$sce",function(e,t,n,r,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:An.noop,compile:function(o,a){var s=a.ngInclude||a.src,u=a.onload||"",l=a.autoscroll;return function(o,a,c,h,d){var p,f,g,v=0,y=function(){f&&(f.remove(),f=null),p&&(p.$destroy(),p=null),g&&(r.leave(g,function(){f=null}),f=g,g=null)};o.$watch(i.parseAsResourceUrl(s),function(i){var s=function(){!m(l)||l&&!o.$eval(l)||n()},c=++v;i?(e.get(i,{cache:t}).success(function(e){if(c===v){var t=o.$new();h.template=e;var n=d(t,function(e){y(),r.enter(e,null,a,s)});p=t,g=n,p.$emit("$includeContentLoaded"),o.$eval(u)}}).error(function(){c===v&&y()}),o.$emit("$includeContentRequested")):(y(),h.template=null)})}}}}],pi=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,n,r,i){n.html(i.template),e(n.contents())(t)}}}],fi=tn({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),gi=tn({terminal:!0,priority:1e3}),vi=["$locale","$interpolate",function(e,t){var n=/{}/g;return{restrict:"EA",link:function(r,i,a){var s=a.count,u=a.$attr.when&&i.attr(a.$attr.when),l=a.offset||0,c=r.$eval(u)||{},h={},d=t.startSymbol(),p=t.endSymbol(),f=/^when(Minus)?(.+)$/;o(a,function(e,t){f.test(t)&&(c[gn(t.replace("when","").replace("Minus","-"))]=i.attr(a.$attr[t]))}),o(c,function(e,r){h[r]=t(e.replace(n,d+s+"-"+l+p))}),r.$watch(function(){var t=parseFloat(r.$eval(s));return isNaN(t)?"":(t in c||(t=e.pluralCat(t-l)),h[t](r,i,!0))},function(e){i.text(e)})}}}],yi=["$parse","$animate",function(e,n){function a(e){return e.clone[0]}function s(e){return e.clone[e.clone.length-1]}var u="$$NG_REMOVED",l=r("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(r,c,h,d,p){var f,g,v,y,m,b,w,x,_,E=h.ngRepeat,k=E.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),S={$id:Pe};if(!k)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",E);if(b=k[1],w=k[2],f=k[3],f?(g=e(f),v=function(e,t,n){return _&&(S[_]=e),S[x]=t,S.$index=n,g(r,S)}):(y=function(e,t){return Pe(t)},m=function(e){return e}),k=b.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!k)throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",b);x=k[3]||k[1],_=k[2];var T={};r.$watchCollection(w,function(e){var h,d,f,g,b,w,k,S,C,N,A,P,D=c[0],$={},M=[];if(i(e))N=e,C=v||y;else{C=v||m,N=[];for(w in e)e.hasOwnProperty(w)&&"$"!=w.charAt(0)&&N.push(w);N.sort()}for(g=N.length,d=M.length=N.length,h=0;d>h;h++)if(w=e===N?h:N[h],k=e[w],S=C(w,k,h),re(S,"`track by` id"),T.hasOwnProperty(S))A=T[S],delete T[S],$[S]=A,M[h]=A;else{if($.hasOwnProperty(S))throw o(M,function(e){e&&e.scope&&(T[e.id]=e)}),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",E,S,G(k));M[h]={id:S},$[S]=!1}for(w in T)T.hasOwnProperty(w)&&(A=T[w],P=oe(A.clone),n.leave(P),o(P,function(e){e[u]=!0}),A.scope.$destroy());for(h=0,d=N.length;d>h;h++){if(w=e===N?h:N[h],k=e[w],A=M[h],M[h-1]&&(D=s(M[h-1])),A.scope){b=A.scope,f=D;do f=f.nextSibling;while(f&&f[u]);a(A)!=f&&n.move(oe(A.clone),null,xn(D)),D=s(A)}else b=r.$new();b[x]=k,_&&(b[_]=w),b.$index=h,b.$first=0===h,b.$last=h===g-1,b.$middle=!(b.$first||b.$last),b.$odd=!(b.$even=0===(1&h)),A.scope||p(b,function(e){e[e.length++]=t.createComment(" end ngRepeat: "+E+" "),n.enter(e,null,xn(D)),D=e,A.scope=b,A.clone=e,$[A.id]=A})}T=$})}}}],mi=["$animate",function(e){return function(t,n,r){t.$watch(r.ngShow,function(t){e[U(t)?"removeClass":"addClass"](n,"ng-hide")})}}],bi=["$animate",function(e){return function(t,n,r){t.$watch(r.ngHide,function(t){e[U(t)?"addClass":"removeClass"](n,"ng-hide")})}}],wi=tn(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),xi=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,n,r,i){var a=r.ngSwitch||r.on,s=[],u=[],l=[],c=[];t.$watch(a,function(n){var a,h;for(a=0,h=l.length;h>a;++a)l[a].remove();for(l.length=0,a=0,h=c.length;h>a;++a){var d=u[a];c[a].$destroy(),l[a]=d,e.leave(d,function(){l.splice(a,1)})}u.length=0,c.length=0,(s=i.cases["!"+n]||i.cases["?"])&&(t.$eval(r.change),o(s,function(n){var r=t.$new();c.push(r),n.transclude(r,function(t){var r=n.element;u.push(t),e.enter(t,r.parent(),r)})}))})}}}],_i=tn({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),Ei=tn({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),ki=tn({link:function(e,t,n,i,o){if(!o)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",V(t));o(function(e){t.empty(),t.append(e)})}}),Si=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Ti=r("ngOptions"),Ci=v({terminal:!0}),Ni=["$compile","$parse",function(e,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:f};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r,i,o=this,a={},u=s;o.databound=n.ngModel,o.init=function(e,t,n){u=e,r=t,i=n},o.addOption=function(t){re(t,'"option value"'),a[t]=!0,u.$viewValue==t&&(e.val(t),i.parent()&&i.remove())},o.removeOption=function(e){this.hasOption(e)&&(delete a[e],u.$viewValue==e&&this.renderUnknownOption(e))},o.renderUnknownOption=function(t){var n="? "+Pe(t)+" ?";i.val(n),e.prepend(i),e.val(n),i.prop("selected",!0)},o.hasOption=function(e){return a.hasOwnProperty(e)},t.$on("$destroy",function(){o.renderUnknownOption=f})}],link:function(s,u,l,c){function h(e,t,n,r){n.$render=function(){var e=n.$viewValue;r.hasOption(e)?(k.parent()&&k.remove(),t.val(e),""===e&&f.prop("selected",!0)):y(e)&&f?t.val(""):r.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){k.parent()&&k.remove(),n.$setViewValue(t.val())})})}function d(e,t,n){var r;n.$render=function(){var e=new De(n.$viewValue);o(t.find("option"),function(t){t.selected=m(e.get(t.value))})},e.$watch(function(){j(r,n.$viewValue)||(r=L(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];o(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function p(t,o,s){function u(){var e=!1;if(b){var n=s.$modelValue;if(S&&Dn(n)){e=new De([]);for(var r={},i=0;i<n.length;i++)r[d]=n[i],e.put(S(t,r),n[i])}else e=new De(n)}return e}function l(){var e,n,r,i,l,c,w,k,C,N,A,P,D,$,M,I={"":[]},O=[""],L=s.$modelValue,j=y(t)||[],R=p?a(j):j,q={},F=u();for(A=0;C=R.length,C>A;A++){if(w=A,p){if(w=R[A],"$"===w.charAt(0))continue;q[p]=w}if(q[d]=j[w],e=f(t,q)||"",(n=I[e])||(n=I[e]=[],O.push(e)),b)P=m(F.remove(S?S(t,q):v(t,q)));else{if(S){var B={};B[d]=L,P=S(t,B)===S(t,q)}else P=L===v(t,q);F=F||P}M=h(t,q),M=m(M)?M:"",n.push({id:S?S(t,q):p?R[A]:A,label:M,selected:P})}for(b||(x||null===L?I[""].unshift({id:"",label:"",selected:!F}):F||I[""].unshift({id:"?",label:"",selected:!0})),N=0,k=O.length;k>N;N++){for(e=O[N],n=I[e],T.length<=N?(i={element:E.clone().attr("label",e),label:n.label},l=[i],T.push(l),o.append(i.element)):(l=T[N],i=l[0],i.label!=e&&i.element.attr("label",i.label=e)),D=null,A=0,C=n.length;C>A;A++)r=n[A],(c=l[A+1])?(D=c.element,c.label!==r.label&&(D.text(c.label=r.label),D.prop("label",c.label)),c.id!==r.id&&D.val(c.id=r.id),D[0].selected!==r.selected&&(D.prop("selected",c.selected=r.selected),wn&&D.prop("selected",c.selected))):(""===r.id&&x?$=x:($=_.clone()).val(r.id).prop("selected",r.selected).attr("selected",r.selected).prop("label",r.label).text(r.label),l.push(c={element:$,label:r.label,id:r.id,selected:r.selected}),g.addOption(r.label,$),D?D.after($):i.element.append($),D=$);for(A++;l.length>A;)r=l.pop(),g.removeOption(r.label),r.element.remove()}for(;T.length>N;)T.pop()[0].element.remove()}var c;if(!(c=w.match(i)))throw Ti("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",w,V(o));var h=r(c[2]||c[1]),d=c[4]||c[6],p=c[5],f=r(c[3]||""),v=r(c[2]?c[1]:d),y=r(c[7]),k=c[8],S=k?r(c[8]):null,T=[[{element:o,label:""}]];x&&(e(x)(t),x.removeClass("ng-scope"),x.remove()),o.empty(),o.on("change",function(){t.$apply(function(){var e,r,i,a,u,c,h,f,g,m=y(t)||[],w={};if(b){for(i=[],c=0,f=T.length;f>c;c++)for(e=T[c],u=1,h=e.length;h>u;u++)if((a=e[u].element)[0].selected){if(r=a.val(),p&&(w[p]=r),S)for(g=0;g<m.length&&(w[d]=m[g],S(t,w)!=r);g++);else w[d]=m[r];i.push(v(t,w))}}else if(r=o.val(),"?"==r)i=n;else if(""===r)i=null;else if(S){for(g=0;g<m.length;g++)if(w[d]=m[g],S(t,w)==r){i=v(t,w);break}}else w[d]=m[r],p&&(w[p]=r),i=v(t,w);s.$setViewValue(i),l()})}),s.$render=l,t.$watchCollection(y,l),t.$watchCollection(function(){var e={},n=y(t);if(n){for(var r=new Array(n.length),i=0,o=n.length;o>i;i++)e[d]=n[i],r[i]=h(t,e);return r}},l),b&&t.$watchCollection(function(){return s.$modelValue},l)}if(c[1]){for(var f,g=c[0],v=c[1],b=l.multiple,w=l.ngOptions,x=!1,_=xn(t.createElement("option")),E=xn(t.createElement("optgroup")),k=_.clone(),S=0,T=u.children(),C=T.length;C>S;S++)if(""===T[S].value){f=x=T.eq(S);break}g.init(v,x,k),b&&(v.$isEmpty=function(e){return!e||0===e.length}),w?p(s,u,v):b?d(s,u,v):h(s,u,v,g)}}}}],Ai=["$interpolate",function(e){var t={addOption:f,removeOption:f};return{restrict:"E",priority:100,compile:function(n,r){if(y(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.databound?n.prop("selected",!1):s=t,i?e.$watch(i,function(e,t){r.$set("value",e),e!==t&&s.removeOption(t),s.addOption(e)}):s.addOption(r.value),n.on("$destroy",function(){s.removeOption(r.value)})}}}}],Pi=v({restrict:"E",terminal:!0});return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(ee(),se(An),void xn(t).ready(function(){Q(t,J)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/attribute-details-dyn.html",'<p>\n  <span>{{rAttr.resultAttributeGroup.attributeGroup.name}} : {{rAttr.attribute.name}}</span> <a ng-if="rAttr.links" target="_blank" href="{{rAttr.links[0].url}}"><span class="fa fa-external-link"></span></a>\n</p>\n\n<p>\n  <span class="fa fa-file-o"></span>\n  <span>{{rAttr.resultAttributeGroup.attributeGroup.publicationName}}</span>\n  <a target="_blank" href="{{rAttr.resultAttributeGroup.attributeGroup.publicationUrl}}"><span class="fa fa-external-link"></span></a>\n</p>\n\n<p>\n  <span class="fa fa-share-alt"></span>\n  <span>{{rAttr.resultAttributeGroup.attributeGroup.description}}</span>\n</p>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/attribute-details.html",'<p>\n  <span bo-text="attr.name"></span> <a bo-if="rNet.links" target="_blank" bo-href="rNet.links[0].url"><span class="fa fa-external-link"></span></a>\n</p>\n\n<p>\n  <span class="fa fa-file-o"></span>\n  <span bo-text="rGr.attributeGroup.publicationName"></span>\n  <a target="_blank" bo-href="rGr.attributeGroup.publicationUrl"><span class="fa fa-external-link"></span></a>\n</p>\n\n<p>\n  <span class="fa fa-share-alt"></span>\n  <span bo-text="rGr.attributeGroup.description"></span>\n</p>')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/attribute-group-details.html",'<p>\n  <span class="query-network-comment">\n    <span class="fa fa-info-circle"></span>\n    <span bo-text="attrGr.description"></span>\n  </span>\n</p>\n\n<p>\n  <span class="fa fa-file-o"></span>\n  <span class="query-network-publication" bo-text="attrGr.publicationName"></span>\n  <a target="_blank" bo-href="attrGr.publicationUrl"><span class="fa fa-external-link"></span></a>\n</p>')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/functions.html",'<div ng-controller="FunctionsCtrl">\n\n  <div id="functions-add" class="functions-add activatable graph-button"><i class="fa fa-plus-square"></i></div>\n\n  <div id="functions" class="functions">\n\n    <div class="function-coloring-list">\n      <div class="function-coloring-functions">\n        <div class="function-coloring-function" ng-repeat="fn in addedFunctions">\n          <span class="function-coloring-color activatable-relative" on-tap="result.toggleFunctionColoring( fn )"><i class="fa fa-times function-remove-icon"></i> <i class="fa fa-square" ng-style="{ \'color\': fn.color }"></i></span>\n          <span class="function-coloring-name">{{fn.ontologyCategory.description}}</span>\n        </div>\n        <div class="function-coloring-function">\n          <span class="function-coloring-color"><i class="fa fa-times function-remove-icon invisible"></i> <span class="fa-stack"><i class="fa fa-square fa-stack-1x"></i><i class="fa fa-bars fa-stack-1x fa-rotate-315 function-stripe-icon"></i></span></span>\n          <span class="function-coloring-name">search genes</span>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n  <qtip qtip-target="functions-add" qtip-position-my="bottom center" qtip-position-at="top center" qtip-id="functions-add-list" qtip-adjust-resize="false" qtip-class="qtip-no-padding qtip-functions-add-list">\n    <div id="functions-add-list" class="functions-add-list scrollable">\n      <table class="functions-add-table">\n        <tr class="function-header">\n          <td class="function-name">Function</td>\n          <td class="function-fdr">FDR</td>\n          <td class="function-coverage">Coverage</td>\n        </tr>\n        <tr class="function" ng-class="{ \'activatable-bg\': result.functionColors.length !== 0 || fn.colored }" bindonce="fn" ng-repeat="fn in functions" on-tap="result.toggleFunctionColoring( fn )">\n          <td class="function-name">\n            <span ng-if="fn.colored" class="fa-stack function-list-remove-icon">\n              <i class="fa fa-square fa-stack-1x" ng-style="{ \'color\': fn.color }"></i>\n            </span>\n            <span ng-if="!fn.colored" ng-class="{ \'disabled\': result.functionColors.length === 0 }" class="fa-stack function-list-add-icon">\n              <i class="fa fa-square-o fa-stack-1x"></i>\n            </span>\n            <!-- {{fn.ontologyCategory.description}} -->\n            <span bindonce bo-text="fn.ontologyCategory.description"></span>\n          </td>\n          <td class="function-fdr" bindonce bo-text="fn.qValueFormatted"></td>\n          <td class="function-coverage"><span bindonce bo-text="fn.coverageFormatted"></span></td>\n        </tr>\n      </table>\n    </div>\n  </qtip>\n\n</div>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/gene-details-dyn.html",'<p class="gene-descr" bindonce="rGene">\n  {{rGene.gene.node.geneData.description}}\n\n  <span ng-if="rGene.links.length > 0" class="gene-link">\n    <a href="{{rGene.links[0].url}}" target="_blank"><span class="fa fa-external-link"></span></a>\n  </span>\n</p>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/gene-details.html",'<p class="gene-descr" bindonce="rGene">\n  <span bo-text="rGene.gene.node.geneData.description"></span>\n\n  <span ng-if="rGene.links.length > 0" class="gene-link">\n    <a bo-href="rGene.links[0].url" target="_blank"><span class="fa fa-external-link"></span></a>\n  </span>\n</p>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/gene-list.html",'<div ng-controller="GenesCtrl">\n\n  <div class="gene-list-expander activatable gene-list-expanded-{{result.genesExpanded ? true : false}}" on-tap="result.toggleGenesExpansion()">\n    <span class="gene-list-expander-icon bio-helix"></span>\n    <span class="gene-list-expander-arrow fa fa-angle-right" ng-show="!result.genesExpanded"></span>\n    <span class="gene-list-expander-arrow fa fa-angle-left" ng-show="result.genesExpanded"></span>\n  </div>\n\n  <div id="gene-list" class="gene-list genes scrollable scrollable-y genes-query-history-expanded-{{query.historyExpanded ? true : false}} gene-list-expanded-{{result.genesExpanded ? true : false}}">\n\n    <div class="gene-list-title">\n      Genes\n    </div>\n\n    <div bindonce="result" ng-repeat="rGene in result.resultGenes">\n\n      <div class="gene">\n        <span class="gene-expander"><span class="fa" ng-class="{ \'fa-caret-right\': !rGene.expanded, \'fa-caret-down\': rGene.expanded }"></span></span>\n        <span class="gene-name activatable-relative" on-tap="result.toggleGeneExpansion(rGene)">\n          <span bo-text="rGene.gene.symbol"></span>\n          <span class="gene-name-descr-preview" bo-text="rGene.gene.node.geneData.description"></span>\n        </span>\n\n        <div class="gene-info result-gene-info result-gene-info-expanded-{{rGene.expanded ? true : false}}">\n          <div ng-include="\'templates/gene-details.html\'"></div>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n\n</div>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/graph-buttons.html",'<div ng-controller="ResultCtrl">\n\n  <div class="graph-button activatable graph-button-row-1" on-tap="result.circleLayout()"><i class="fa fa-dot-circle-o"></i></div>\n  <div class="graph-button activatable graph-button-row-2" on-tap="result.linearLayout()"><i class="fa fa-long-arrow-down"></i><i class="fa fa-long-arrow-down"></i></div>\n  <div class="graph-button activatable graph-button-row-3" on-tap="result.forceLayout()"><i class="fa fa-random"></i></div>\n  <div class="graph-button activatable graph-button-row-4" on-tap="result.forceLayout({ randomize: false })"><i class="fa fa-refresh"></i></div>\n  <div class="graph-button activatable graph-button-row-5" on-tap="result.fitGraph()"><i class="fa fa-arrows-h fa-rotate-45"></i></div>\n\n  <div id="graph-button-save" class="graph-button activatable graph-button-row-7"><i class="fa fa-save"></i></div>\n\n  <qtip\n    qtip-target="graph-button-save"\n    qtip-id="save-data"\n    qtip-adjust-method="shift"\n    qtip-adjust-resize="false"\n    qtip-pos-my="left center" qtip-pos-at="right center"\n  >\n    <div class="save-data-option activatable-relative" on-tap="result.report()">\n      <i class="fa fa-file-pdf-o"></i> Report\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveImage()">\n      <i class="fa fa-file-image-o"></i> Network image\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveText()">\n      <i class="fa fa-file-text-o"></i> Network\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveNetworks()">\n      <i class="fa fa-file-text-o"></i> Networks data\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveAttributes()">\n      <i class="fa fa-file-text-o"></i> Attributes data\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveGenes()">\n      <i class="fa fa-file-text-o"></i> Genes data\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveFunctions()">\n      <i class="fa fa-file-text-o"></i> Functions data\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveInteractions()">\n      <i class="fa fa-file-text-o"></i> Interactions data\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveParamsText()">\n      <i class="fa fa-file-text-o"></i> Search parameters as text\n    </div>\n\n    <div class="save-data-option activatable-relative" on-tap="result.saveParamsJson()">\n      <i class="fa fa-file-code-o"></i> Search parameters as JSON\n    </div>\n\n  </qtip>\n\n</div>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/interaction-details-dyn.html",'<p>\n  {{rNet.resultNetworkGroup.networkGroup.name}} : {{rNet.network.name}}\n</p>\n\n<p>Absolute weight:</p>\n<span class="interaction-bar interaction-bar-abs">\n  <span class="interaction-color" ng-style="{ \'width\': rIntn.absoluteWeight * 100 + \'%\', \'background-color\': rNet.color }"></span>\n</span>\n<span class="interaction-percent">{{rIntn.absoluteDisplayWeight}}</span>\n\n<p>Weight relative to network category:</p>\n<span class="interaction-bar interaction-bar-rel" ng-style="{ \'border-color\': rNet.color }">\n  <span class="interaction-color" ng-style="{ \'width\': rIntn.weight * 100 + \'%\', \'background-color\': rNet.color }"></span>\n</span>\n<span class="interaction-percent">{{rIntn.displayWeight}}</span>\n\n<div class="interaction-network-details">\n  <div ng-include="\'templates/network-details-dyn.html\'"></div>\n</div>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/network-details-dyn.html",'<p ng-if="net.metadata.title">\n  <span class="fa fa-file-o"></span>\n  <span class="query-network-title">{{net.metadata.title}}</span>\n  <span class="query-network-authors">{{net.metadata.shortAuthors}}</span>\n  <span class="query-network-year">({{net.metadata.yearPublished}})</span>.\n  <span class="query-network-publication">{{net.metadata.publicationName}}</span>\n  <a target="_blank" href="{{net.metadata.url}}"><span class="fa fa-external-link"></span></a>\n</p>\n\n<p>\n  <span class="query-network-source">\n    <span class="fa fa-share-alt"></span>\n    <span>{{net.metadata.networkType}}</span>\n    <a target="_blank" href="http://pages.genemania.org/help/#GeneMANIA_network_categories"><spam class="fa fa-info-circle"></span></a>\n    with {{net.metadata.interactionCountFormatted}} interactions from\n    <span>{{net.metadata.sourceName}}</span> <a target="_blank" href="{{net.metadata.sourceUrl}}"><span class="fa fa-external-link"></span></a>\n  </span>\n</p>\n\n<p ng-if="net.metadata.comment">\n  <span class="query-network-comment">\n    <span class="fa fa-info-circle"></span>\n    <span>{{net.metadata.comment}}</span>\n  </span>\n</p>\n\n<p>\n  <span class="query-network-tag" ng-repeat="tag in net.tags"><span class="fa fa-tag"></span>&nbsp;{{tag.nameFormatted}}</span>\n</p>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/network-details.html",'<p bo-if="net.metadata.title">\n  <span class="fa fa-file-o"></span>\n  <span class="query-network-title" bo-text="net.metadata.title"></span>\n  <span class="query-network-authors" bo-text="net.metadata.shortAuthors"></span>\n  <span class="query-network-year">(<span bo-text="net.metadata.yearPublished"></span>)</span>.\n  <span class="query-network-publication" bo-text="net.metadata.publicationName"></span>\n  <a target="_blank" bo-href="net.metadata.url"><span class="fa fa-external-link"></span></a>\n</p>\n\n<p>\n  <span class="query-network-source">\n    <span class="fa fa-share-alt"></span>\n    <span bo-text="net.metadata.networkType"></span>\n    <a target="_blank" href="http://pages.genemania.org/help/#GeneMANIA_network_categories"><spam class="fa fa-info-circle"></span></a>\n    with <span bo-text="net.metadata.interactionCountFormatted"></span> interactions from\n    <span bo-text="net.metadata.sourceName"></span> <a target="_blank" bo-href="net.metadata.sourceUrl"><span class="fa fa-external-link"></span></a>\n  </span>\n</p>\n\n<p bo-if="net.metadata.comment">\n  <span class="query-network-comment">\n    <span class="fa fa-info-circle"></span>\n    <span bo-text="net.metadata.comment"></span>\n  </span>\n</p>\n\n<p bo-if="net.metadata.invalidInteractions">\n  <span class="query-network-invalid-interactions">\n    <span class="fa fa-warning"></span> Invalid gene symbols:\n\n    <span ng-repeat="intn in net.metadata.invalidInteractions" bindonce>\n      <span bo-text="intn"></span>;\n    </span>\n  </span>\n</p>\n\n<p>\n  <span class="query-network-tag" bindonce ng-repeat="tag in net.tags"><span class="fa fa-tag"></span>&nbsp;<span bo-text="tag.nameFormatted"></span></span>\n</p>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/network-list.html",'<div ng-controller="NetworksCtrl">\n\n  <div class="network-list-expander activatable network-list-expanded-{{result.networksExpanded ? true : false}}" on-tap="result.toggleNetworksExpansion()">\n    <span class="network-list-expander-icon fa fa-navicon"></span>\n    <span class="network-list-expander-arrow fa fa-angle-left" ng-show="!result.networksExpanded"></span>\n    <span class="network-list-expander-arrow fa fa-angle-right" ng-show="result.networksExpanded"></span>\n  </div>\n\n  <div id="network-list" class="network-list networks scrollable scrollable-y networks-query-history-expanded-{{query.historyExpanded ? true : false}} network-list-expanded-{{result.networksExpanded ? true : false}}">\n\n    <div class="network-list-title">\n      <span class="network-list-mod-icon network-list-mod-icon-left activatable" on-tap="result.toggleNetworkListEnables()" ng-show="!result.showNetworkListExpands">\n        <i class="fa" ng-class="{ \'fa-check\': !result.showNetworkListEnables, \'fa-times\': result.showNetworkListEnables }"></i>\n      </span>\n      <span class="network-list-mod-icon network-list-mod-icon-right activatable" on-tap="result.toggleNetworkListExpands()" ng-show="!result.showNetworkListEnables">\n        <i class="fa" ng-class="{ \'fa-caret-down\': !result.showNetworkListExpands, \'fa-times\': result.showNetworkListExpands }"></i>\n      </span>\n      <span class="network-list-title-text" ng-show="!result.showNetworkListEnables && !result.showNetworkListExpands">\n        Networks\n      </span>\n\n      <span class="network-list-mod-items" ng-show="result.showNetworkListEnables">\n        <i class="fa fa-check"></i> Enable:\n        <a class="network-list-mod-item plain-link" on-tap="result.enableNetworksByEnum(\'all\')">all</a>\n        <a class="network-list-mod-item plain-link" on-tap="result.enableNetworksByEnum(\'none\')">none</a>\n      </span>\n\n      <span class="network-list-mod-items" ng-show="result.showNetworkListExpands">\n        <i class="fa fa-caret-down"></i> Expand:\n        <a class="network-list-mod-item plain-link" on-tap="result.expandNetworksByEnum(\'all\')">all</a>\n        <a class="network-list-mod-item plain-link" on-tap="result.expandNetworksByEnum(\'top\')">top</a>\n        <a class="network-list-mod-item plain-link" on-tap="result.expandNetworksByEnum(\'none\')">none</a>\n      </span>\n    </div>\n\n    <div class="network-list-loading" ng-if="query.result != null && query.result.searchPromise != null">\n      <i class="fa fa-refresh fa-spin"></i>\n    </div>\n\n    <div bindonce="result" ng-repeat="rGr in result.resultAllGroups" ng-show="query.result != null && query.result.searchPromise == null">\n\n      <div class="network-group">\n        <span class="network-group-check activatable-relative" on-tap="result.toggleNetworkGroup(rGr)"><span class="check check-{{rGr.enabled}}"></span></span>\n        <span class="network-group-expander"><span class="fa" ng-class="{ \'fa-caret-right\': !rGr.expanded, \'fa-caret-down\': rGr.expanded }"></span></span>\n        <span class="network-group-name activatable-relative network-group-name-highlighted-{{rGr.highlighted ? true : false}}"\n          on-tap="result.toggleNetworkGroupExpansion(rGr)"\n          on-hoverover="result.rateLimitedHighlight(rGr.isResultAttributeGroup ? { attributeGroups: [ rGr.attributeGroup.id ] } : { networkGroups: [ rGr.networkGroup.id ] })"\n          on-hoverout="result.rateLimitedUnhighlight(rGr.isResultAttributeGroup ? { attributeGroups: \'*\' } : { networkGroups: \'*\' })"\n        >\n          <span bo-if="rGr.isResultNetworkGroup" bo-text="rGr.networkGroup.name"></span>\n          <span bo-if="rGr.isResultAttributeGroup" bo-text="rGr.attributeGroup.name"></span>\n        </span>\n        <span class="network-group-bar">\n          <span class="network-group-color" bo-style="{ \'width\': rGr.weight * 100 + \'%\', \'background-color\': rGr.color }"></span>\n        </span>\n        <span class="network-group-percent" bo-text="rGr.displayWeight"></span>\n\n        <div class="network-group-networks network-group-networks-expanded-{{rGr.expanded ? true : false}}">\n          <div class="network" ng-if="rGr.isResultNetworkGroup" ng-repeat="rNet in rGr.resultNetworks">\n            <div ng-include="\'templates/result-network.html\'"></div>\n          </div>\n\n          <div class="network" ng-if="rGr.isResultAttributeGroup" ng-repeat="rNet in rGr.resultAttributes">\n            <div ng-include="\'templates/result-network.html\'"></div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n\n</div>\n');

}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/popover.html",'<div class="popover {{class}}">\n\n  <div class="arrow">\n    <div class="arrow-before"></div>\n    <div class="arrow-after"></div>\n  </div>\n\n  <div class="popover-content" ng-transclude>\n  </div>\n</div>')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/qtip.html",'<div class="qtip-content-holder" ng-transclude>\n	\n</div>')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/query-history.html",'<div ng-controller="QueryHistoryCtrl">\n\n  <div class="query-history-expander activatable query-history-expanded-{{query.historyExpanded ? true : false}}" on-tap="query.toggleHistoryExpansion()">\n    <span class="query-history-expander-icon fa fa-history"></span>\n    <span class="query-history-expander-arrow fa fa-angle-up" ng-show="!query.historyExpanded"></span>\n    <span class="query-history-expander-arrow fa fa-angle-down" ng-show="query.historyExpanded"></span>\n  </div>\n\n  <div id="query-history" class="query-history scrollable scrollable-x query-history-splashed-{{query.splashed ? true : false}} query-history-expanded-{{query.historyExpanded ? true : false}}">\n    <div class="query-history-delete activatable animated-very-slow fadeIn" on-tap="query.clearHistory()" ng-if="history && history.length > 0">\n      <span class="query-history-delete-icon"><i class="fa fa-times"></i></span>\n      <span class="query-history-delete-label">Clear all history</span>\n    </div>\n\n    <div class="query-history-entry-wrapper" ng-repeat="entry in history track by entry.timestamp" bindonce="entry">\n      <div class="query-history-entry activatable animated-very-slow fadeIn" on-tap="query.succeed( entry )">\n        <span class="query-history-organism-icon" bo-class="entry.organismIcon"></span>\n        <span class="query-history-image" bo-style="{ \'background-image\': \'url(\' + entry.image + \')\' }"></span>\n        <span class="query-history-label">\n          <span bo-text="entry.genes[0]"></span>\n          <span bo-if="entry.genes.length > 1">\n            +<span bo-text="entry.genes.length - 1"></span><span class="bio-helix"></span>\n          </span>\n        </span>\n        <span class="query-history-number" bo-text="history.length - $index"></span>\n      </div>\n      <span\n        class="query-history-delete-entry activatable animated-very-slow fadeIn"\n        on-tap="query.clearHistoryEntry( entry )"\n      >\n        <i class="query-history-delete-entry-icon fa fa-times"></i>\n      </span>\n    </div>\n\n    <div class="query-history-empty" ng-show=" (!history || history.length === 0) && query.historyInitLoaded ">\n      <span class="fa fa-info-circle"></span> Your search history is currently empty\n    </div>\n\n    <div class="query-history-loading" ng-show="!query.historyInitLoaded">\n      <span class="fa fa-refresh fa-spin"></span> Loading search history...\n    </div>\n\n    <!-- <div class="query-history-ender"></div> -->\n  </div>\n\n</div>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/query.html",'<div ng-controller="QueryCtrl">\n\n  <div id="query" class="query query-expanded-{{query.expanded ? true : false}} query-ready-{{query.ready ? true : false}} query-app-ready-{{query.appReady ? true : false}} query-splashed-{{query.splashed ? true : false}} query-searching-{{query.result && query.result.searchPromise ? true : false}}">\n    <div class="query-progress">\n      <div class="query-progress-value" style="width: {{query.$$search.progress}}%"></div>\n    </div>\n\n    <div class="query-item query-button query-expander activatable" on-tap="query.toggleExpand()"><span class="query-expander-icon fa fa-chevron-right"></span></div>\n\n    <div class="query-item query-expander-content">\n      <div id="query-organism" class="query-item query-button query-organism activatable">\n        <span class="query-organism-icon {{query.organism.icon}}"></span>\n      </div>\n      <qtip qtip-target="query-organism" qtip-viewport-target="query-qtip-viewport" qtip-id="query-organism" qtip-adjust-method="shift" qtip-adjust-resize="false" qtip-class="qtip-no-padding qtip-query-aligned qtip-top-pointing-fix">\n        <div id="query-organism-select" class="query-organism-select scrollable">\n          <div class="query-organism-select-item clearfix activatable-bg" ng-repeat="org in query.organisms track by org.id" on-tap="query.setOrganism( org )">\n            <span class="query-organism-select-radio radio radio-{{query.organism === org}}"></span>\n            <span class="query-organism-select-icon" bindonce bo-class="org.icon"></span>\n            <span class="query-organism-select-name" bindonce bo-bind="org.alias"></span>\n          </div>\n        </div>\n      </qtip>\n\n      <div class="query-item query-genes">\n        <a class="query-genes-example ng-animate-fade plain-link" ng-show="!query.validatingGenes && !query.genesExpanded || !query.genesText" on-tap="query.setExampleGenes(); query.openGenesArea();">e.g.</a>\n        <span class="query-genes-loader" ng-show="query.validatingGenes"><span class="fa fa-refresh fa-spin"></span></span>\n        <span class="query-genes-invalid-count ng-animate-fade" ng-show="!query.validatingGenes && query.genesExpanded && query.genesText && query.invalidGenesCount !== 0">\n          <span class="query-genes-invalid-count-number">\n            <span ng-bind="query.invalidGenesCount"></span>\n          </span>\n        </span>\n\n        <div class="query-genes-expander scrollable" on-self-tap-prevent-default ng-class="{ \'query-genes-expander-expanded\': query.genesExpanded }">\n          <div id="query-genes-validation" class="query-genes-validation" ng-class="{ \'query-genes-validation-loading\': query.validatingGenes || query.settingGenes }">\n            <div class="query-genes-validation-entry" ng-repeat="vEntry in query.geneValidations">\n              <span class="fa fa-check query-gene-valid-icon" ng-if="vEntry.type === \'VALID\'"></span>\n              <span class="fa query-gene-invalid-icon" ng-if="vEntry.type === \'INVALID\'"></span>\n              <span class="fa fa-minus query-gene-empty-icon" ng-if="vEntry.type === \'EMPTY\'"></span>\n              <span class="fa fa-tag query-gene-tag-icon" ng-if="vEntry.type === \'TAG\'"></span>\n              <span class="fa fa-check query-gene-duplicate-icon" ng-if="vEntry.type === \'DUPLICATE\'"></span>\n            </div>\n          </div>\n          <div id="query-genes-spellchecks" class="query-genes-spellchecks" ng-class="{ \'query-genes-validation-loading\': query.validatingGenes || query.settingGenes }" ng-bind="query.geneSpellchecks">\n          </div>\n          <textarea\n            id="query-genes-textarea" wrap="off" class="query-genes-textarea" spellcheck="false"\n            ng-model="query.genesText" ng-trim="false" ng-change="query.setGenesFromText()"\n            ng-focus="query.expandGenes()" ng-blur="query.collapseGenes()"\n            ng-jquery-plugin="{ autosize: { callback: respRestyle } }"\n            on-ctrl-enter-blur-and="query.search()"\n            on-line-select="query.describeGeneLine( $lineIndex )"\n            on-esc-blur\n            on-shortcut-focus="/"\n          ></textarea>\n        </div>\n\n        <popover id="query-genes-expander-instr" class="query-genes-expander-instr bottom popover-help ng-animate-fade" ng-show="query.genesExpanded">\n          <span ng-if="!query.geneLineDescr || query.geneLineDescr.type === \'EMPTY\'">\n            <span class="fa fa-info-circle"></span> Enter one gene per line\n          </span>\n          <span ng-if="query.geneLineDescr">\n            <span ng-if="query.geneLineDescr.type === \'VALID\' || query.geneLineDescr.type === \'DUPLICATE\'">\n              <span class="bio-helix"></span> {{query.geneLineDescr.name}} <br />\n              <span class="query-genes-expander-descr">{{query.geneLineDescr.description}}</span>\n            </span>\n            <span ng-if="query.geneLineDescr.type === \'INVALID\'">\n              <span class="fa fa-question-circle"></span> {{query.geneLineDescr.name}} <br />\n              <span class="query-genes-expander-descr query-genes-expander-descr-invalid">unrecognised gene</span>\n            </span>\n          </span>\n        </popover>\n\n      </div>\n\n      <div id="query-more" class="query-item query-button query-more activatable"><span class="fa fa-ellipsis-v"></span></div>\n      <qtip qtip-target="query-more" qtip-id="query-more" qtip-adjust-method="shift" qtip-adjust-resize="false" qtip-viewport-target="query-qtip-viewport" class="query-more-content" qtip-class="qtip-no-padding qtip-query-aligned qtip-top-pointing-fix" qtip-scope-id="queryMore" qtip-digest-on-show="true">\n\n        <div ng-show="!query.editingAdvanced" class="query-network-groups-header">\n\n          <span class="query-network-groups-master-checker" ng-hide="query.showingNetworkSortOptions">\n            <span class="query-network-groups-master-checker-icon activatable-relative" on-tap="query.toggleNetworkCheckOptions()">\n              <span ng-if="!query.showingNetworkCheckOptions"><span class="fa fa-check"></span></span>\n              <span ng-if="query.showingNetworkCheckOptions"><span class="fa fa-times"></span></span>\n            </span>\n\n            <span class="query-network-groups-master-checker-options" ng-show="query.showingNetworkCheckOptions">\n              <span class="fa fa-check"></span> Enable:\n              <a class="query-network-groups-master-checker-option" ng-repeat="opt in query.setNetworkOptions track by $index" bindonce bo-text="opt.name" on-tap="query.setNetworks( opt.name )"></a>\n            </span>\n          </span>\n\n          <span class="query-network-groups-title" ng-show="!query.showingNetworkSortOptions && !query.showingNetworkCheckOptions">\n            Networks\n          </span>\n\n          <span class="query-network-groups-sorter" ng-hide="query.showingNetworkCheckOptions">\n            <span class="query-network-groups-sorter-options" ng-show="query.showingNetworkSortOptions">\n              <span class="fa fa-sort"></span> Sort by:\n              <a class="query-network-groups-sorter-option" ng-repeat="factor in query.networkSortFactors track by $index" bindonce bo-text="factor.name" on-tap="query.sortNetworksBy(factor)" ng-class="{ \'query-network-groups-sorter-option-selected\': query.selectedNetworkSortFactor.name === factor.name }"></a>\n            </span>\n\n            <span class="query-network-groups-sorter-icon activatable-relative" on-tap="query.toggleNetworkSortOptions()">\n              <span ng-if="!query.showingNetworkSortOptions"><span class="fa fa-sort"></span></span>\n              <span ng-if="query.showingNetworkSortOptions"><span class="fa fa-times"></span></span>\n            </span>\n          </span>\n\n        </div>\n\n        <div ng-show="!query.editingAdvanced" class="query-network-groups scrollable scrollable-y" id="query-network-groups">\n          <div class="query-network-organism" bindonce ng-repeat="org in query.organisms track by org.id" ng-show="query.organism === org">\n            <div class="query-network-group">\n              <span class="query-network-group-check activatable-relative" on-tap="query.toggleAttributeGroupsSelection()"><span class="check check-{{query.attributeGroupsSelected}}"></span></span>\n              <span class="query-network-group-expander fa" ng-class="{ \'fa-caret-right\': !query.attributeGroupsExpanded, \'fa-caret-down\': query.attributeGroupsExpanded }"></span>\n              <span class="query-network-group-name activatable-relative" on-tap-scroll-parent="#query-network-groups" on-tap="query.toggleAttributeGroupsExpansion()">Attributes</span>\n              <span class="query-network-group-count">\n                <span ng-bind="query.selectedAttributeGroupCount"></span>\n                /\n                <span ng-bind="(query.attributeGroups.length || 0)"></span>\n              </span>\n\n              <div class="query-networks" ng-if="query.attributeGroupsExpanded">\n                <div class="query-network" bindonce ng-repeat="attrGr in query.attributeGroups track by attrGr.id">\n                  <span class="query-network-check activatable-relative" on-tap="query.toggleAttributeGroupSelection( attrGr )"><span class="check check-{{attrGr.selected}}"></span></span>\n                  <span class="query-network-expander fa" ng-class="{ \'fa-caret-right\': !attrGr.expanded, \'fa-caret-down\': attrGr.expanded }"></span>\n                  <span class="query-network-name activatable-relative" bo-text="attrGr.name" on-tap-scroll-parent="#query-network-groups" on-tap="query.toggleAttributeGroupExpansion( attrGr )"></span>\n\n                  <div class="query-network-info" ng-if="attrGr.expanded">\n                    <div ng-include="\'templates/attribute-group-details.html\'"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class="query-network-group" bindonce ng-repeat="netGr in org.networkGroups track by netGr.id" bo-attr bo-attr-data-code="netGr.code">\n              <span class="query-network-group-check" ng-class="{ \'activatable-relative\': netGr.interactionNetworks.length > 0 }" on-tap="query.toggleNetworkGroupSelection( netGr )"><span class="check check-{{netGr.selected}}"></span></span>\n              <span class="query-network-group-expander fa" ng-class="{ \'fa-caret-right\': !netGr.expanded, \'fa-caret-down\': netGr.expanded }"></span>\n              <span class="query-network-group-name activatable-relative" bo-text="netGr.name" on-tap-scroll-parent="#query-network-groups" on-tap="query.toggleNetworkGroupExpansion( netGr )"></span>\n              <span class="query-network-group-count">\n                <span ng-bind="netGr.selectedCount"></span>\n                /\n                <span ng-bind="(netGr.interactionNetworks.length || 0)"></span>\n              </span>\n\n              <div class="query-networks" ng-if="netGr.expanded">\n                <div class="query-network" bindonce ng-repeat="net in netGr.interactionNetworks track by net.id">\n                  <span class="query-network-check activatable-relative" on-tap="query.toggleNetworkSelection( net )"><span class="check check-{{net.selected}}"></span></span>\n                  <span class="query-network-expander fa" ng-class="{ \'fa-caret-right\': !net.expanded, \'fa-caret-down\': net.expanded }"></span>\n                  <span class="query-network-name activatable-relative" bo-text="net.name" on-tap-scroll-parent="#query-network-groups" on-tap="query.toggleNetworkExpansion( net )"></span>\n\n                  <span class="query-network-delete activatable" bo-if="net.uploaded" on-tap="net.removing ? false : query.removeNetwork( net )">\n                    <i ng-show="!net.removing" class="fa fa-times"></i>\n                    <i ng-show="net.removing" class="fa fa-refresh fa-spin"></i>\n                  </span>\n\n                  <div class="query-network-info" on-tap="query.removeNetwork( net )" ng-if="net.expanded">\n                    <div ng-include="\'templates/network-details.html\'"></div>\n                  </div>\n                </div>\n              </div>\n\n              <div class="query-network-upload" ng-if="netGr.expanded && netGr.code === \'uploaded\'">\n                <span class="query-network-upload-text">\n                  <a class="query-network-upload-link plain-link" ng-show="!query.addingNetwork">\n                    <i class="fa fa-plus"></i>\n                    Upload a network\n                  </a>\n\n                  <span ng-show="query.addingNetwork">\n                    <i class="fa fa-refresh fa-spin"></i>\n                    Uploading network\n                  </span>\n\n                  <div class="query-upload-input-area activatable query-upload-adding-network-{{query.addingNetwork ? true : false}}">\n                    <div class="query-upload-input-area-wrapper">\n                      <input type="file" class="query-upload-input" on-select-file="query.addNetwork( $file )" />\n                    </div>\n                  </div>\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div id="query-adv-opts" class="query-adv-opts scrollable" ng-show="query.editingAdvanced">\n          <div class="query-adv-opt-name">Max resultant genes: {{query.maxGenes}}</div>\n          <div class="query-slider-container">\n            <input class="query-slider" type="range" ng-model="query.maxGenes" min="0" max="100" ng-jquery-plugin="{ rangeslider: { polyfill: false } }" change-on-ready />\n          </div>\n\n          <div class="query-adv-opt-name">Max resultant attributes: {{query.maxAttrs}}</div>\n          <div class="query-slider-container">\n            <input class="query-slider" type="range" ng-model="query.maxAttrs" min="0" max="100" ng-jquery-plugin="{ rangeslider: { polyfill: false } }" change-on-ready />\n          </div>\n\n          <div class="query-adv-opt-name">Network weighting</div>\n          <div class="query-weighting-group" ng-repeat="wgGr in query.weightingGroups track by $index">\n            <div class="query-weighting-group-name" bindonce bo-text="wgGr.name"></div>\n\n            <div class="query-weighting activatable-bg" ng-repeat="wg in wgGr.weightings track by $index" on-tap="query.setWeighting(wg)">\n              <span class="query-weighting-radio radio radio-{{wg.value === query.weighting.value}}"></span>\n              <span class="query-weighting-name" bindonce bo-text="wg.name"></span>\n            </div>\n          </div>\n        </div>\n\n        <div class="query-adv-footer activatable-bg" on-tap="query.toggleEditAdvanced()">\n          <span ng-show="!query.editingAdvanced" class="query-weightings-edit-link"><span class="fa fa-wrench"></span> Customise advanced options</span>\n          <span ng-show="query.editingAdvanced" class="query-weightings-edit-link"><span class="fa fa-arrow-left"></span> Back to networks</span>\n        </div>\n\n      </qtip>\n\n      <div class="query-item query-button query-submit activatable" on-tap="query.searchOrCancel()">\n        <span class="query-search-icon spiral-white fa"></span>\n        <span class="query-submit-icon fa fa-search" ng-show="!query.result || !query.result.searchPromise"></span>\n      <!--\n        <span ng-show="query.result && query.result.searchPromise" class="fa fa-circle-o-notch fa-spin"></span>\n        <span ng-show="!query.result || !query.result.searchPromise" class="fa fa-search"></span>\n      -->\n      </div>\n    </div>\n  </div>\n\n  <div id="query-qtip-viewport" class="query-qtip-viewport query-qtip-viewport-splashed-{{query.splashed ? true : false}}"></div>\n\n  <div class="query-overlay" ng-class="{ \'query-overlay-shown\': query.result != null && query.result.searchPromise != null }"></div>\n\n  <div class="query-overlay" ng-class="{ \'query-overlay-shown\': query.result != null && query.result.error }">\n\n    <div class="query-overlay-notification">\n      <div class="query-overlay-notification-icon">\n        <i class="fa fa-warning"></i>\n      </div>\n\n      <div class="query-overlay-notification-text">\n        Your search could not be completed as specified.  Please revise your search and try again.\n      </div>\n    </div>\n\n  </div>\n\n</div>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/result-network.html",'<span class="network-check activatable-relative" on-tap="result.toggleNetwork(rNet)"><span class="check check-{{rNet.enabled}}"></span></span>\n<span class="network-expander"><span class="fa" ng-class="{ \'fa-caret-right\': !rNet.expanded, \'fa-caret-down\': rNet.expanded }"></span></span>\n<span class="network-name activatable-relative network-name-highlighted-{{rNet.highlighted ? true : false}}"\n  on-tap="result.toggleNetworkExpansion(rNet)"\n  on-hoverover="result.rateLimitedHighlight(rNet.isResultAttribute ? { attrs: [ rNet.attribute.id ] } : { networks: [ rNet.network.id ] })"\n  on-hoverout="result.rateLimitedUnhighlight(rNet.isResultAttribute ? { attrs: \'*\' } : { networks: \'*\' })"\n>\n  <span bo-if="rGr.isResultNetworkGroup" bo-text="rNet.network.name"></span>\n  <span bo-if="rGr.isResultAttributeGroup" bo-text="rNet.attribute.name"></span>\n</span>\n<span class="network-bar">\n  <span class="network-color" bo-style="{ \'width\': rNet.weight * 100 + \'%\', \'background-color\': rNet.color }"></span>\n</span>\n<span class="network-percent" bo-text="rNet.displayWeight"></span>\n\n<div class="network-info result-network-info result-network-info-expanded-{{rNet.expanded ? true : false}}">\n  <div ng-if="rGr.isResultNetworkGroup" ng-init="net = rNet.network">\n    <div ng-include="\'templates/network-details.html\'"></div>\n  </div>\n\n  <div ng-if="rGr.isResultAttributeGroup" ng-init="attr = rNet.attribute">\n    <div ng-include="\'templates/attribute-details.html\'"></div>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/selected-info-close.html",'<div class="selected-info-close activatable" on-tap="result.closeSelectedInfo()">\n  <i class="fa fa-times"></i>\n</div>\n')}])}(),function(e){try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}e.run(["$templateCache",function(e){e.put("templates/selected-info.html",'<div ng-controller="SelectedInfoCtrl">\n  <div ng-show="query.result != null && query.result.searchPromise == null" class="selected-info selected-info-open-{{result.selectedInfoOpen ? true : false}} selected-info-highlighted-{{ result.highlights.genes.length > 0 || result.highlights.interactions.length > 0 || result.highlights.attrs.length > 0 }}">\n\n    <div ng-if="rGene" on-hoverover="result.rateLimitedHighlight({ genes: [ rGene.gene.id ] })" on-hoverout="result.rateLimitedUnhighlight({ genes: [ rGene.gene.id ] })">\n      <div ng-include="\'templates/selected-info-close.html\'"></div>\n      <div class="selected-info-title">\n        {{rGene.gene.symbol}}\n      </div>\n      <div class="selected-info-details">\n        <div ng-include="\'templates/gene-details-dyn.html\'"></div>\n      </div>\n      <div class="selected-info-commands">\n        <span class="activatable selected-info-command" ng-class="{ \'disabled\': rGene.queryGene }" on-tap="query.addGenes(rGene.name); query.search();">\n          <sup><i class="fa fa-plus"></i></sup><i class="fa fa-search"></i>\n        </span>\n\n        <span class="activatable selected-info-command" ng-class="{ \'disabled\': !rGene.queryGene }" on-tap="query.removeGenes(rGene.name); query.search();">\n          <sup><i class="fa fa-minus"></i></sup><i class="fa fa-search"></i>\n        </span>\n\n        <span class="activatable selected-info-command"  on-tap="query.setGenes(rGene.name); query.search();">\n          <sup><i class="fa fa-circle"></i></sup><i class="fa fa-search"></i>\n        </span>\n      </div>\n    </div>\n\n    <div ng-if="rAttr" on-hoverover="result.rateLimitedHighlight({ attrs: [ rAttr.attribute.id ] })" on-hoverout="result.rateLimitedUnhighlight({ attrs: [ rAttr.attribute.id ] })">\n      <div ng-include="\'templates/selected-info-close.html\'"></div>\n      <div class="selected-info-title">\n        {{rAttr.attribute.name}}\n      </div>\n      <div class="selected-info-details">\n        <div ng-include="\'templates/attribute-details-dyn.html\'"></div>\n      </div>\n    </div>\n\n    <div ng-if="rIntn" on-hoverover="result.rateLimitedHighlight({ interactions: [ rIntn.id ] })" on-hoverout="result.rateLimitedUnhighlight({ interactions: [ rIntn.id ] })">\n      <div ng-include="\'templates/selected-info-close.html\'"></div>\n      <div class="selected-info-title">\n        {{rIntn.fromGene.name}} - {{rIntn.toGene.name}}\n      </div>\n      <div class="selected-info-details">\n        <div ng-include="\'templates/interaction-details-dyn.html\'"></div>\n      </div>\n    </div>\n\n  </div>\n</div>\n')}])}();var cytoscape;!function(e){"use strict";var t=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};t.version="snapshot-6e8867a9b9-1441035223814",t.init=function(e){return void 0===e&&(e={}),t.is.plainObject(e)?new t.Core(e):t.is.string(e)?t.extension.apply(t.extension,arguments):void 0},t.fn={},"undefined"!=typeof module&&module.exports&&(module.exports=cytoscape),"undefined"!=typeof define&&define.amd&&define("cytoscape",function(){return cytoscape}),e&&(e.cytoscape=cytoscape)}("undefined"==typeof window?null:window),this.cytoscape=cytoscape,function(e){"use strict";var t=0,n=1,r=2,i=function(e){return this instanceof i?(this.id="Thenable/1.0.7",this.state=t,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new i(e)};i.prototype={fulfill:function(e){return o(this,n,"fulfillValue",e)},reject:function(e){return o(this,r,"rejectReason",e)},then:function(e,t){var n=this,r=new i;return n.onFulfilled.push(u(e,r,"fulfill")),n.onRejected.push(u(t,r,"reject")),a(n),r.proxy}};var o=function(e,n,r,i){return e.state===t&&(e.state=n,e[r]=i,a(e)),e},a=function(e){e.state===n?s(e,"onFulfilled",e.fulfillValue):e.state===r&&s(e,"onRejected",e.rejectReason)},s=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(i):"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},u=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(o){return void t.reject(o)}l(t,i)}}},l=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(r){return void e.reject(r)}if("function"!=typeof n)e.fulfill(t);else{var i=!1;try{n.call(t,function(n){i||(i=!0,n===t?e.reject(new TypeError("circular thenable chain")):l(e,n))},function(t){i||(i=!0,e.reject(t))})}catch(r){i||e.reject(r)}}};e.Promise="undefined"==typeof Promise?i:Promise,e.Promise.all=e.Promise.all||function(t){return new e.Promise(function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,i++,i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e],i=null!=r.then;if(i)r.then(function(t){o(e,t)},function(e){n(e)});else{var a=r;o(e,a)}}(a)})}}(cytoscape),function(e,t){"use strict";var n="string",r=typeof{},i="function";e.is={defined:function(e){return null!=e},string:function(e){return null!=e&&typeof e==n},fn:function(e){return null!=e&&typeof e===i},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(t){return null!=t&&typeof t===r&&!e.is.array(t)&&t.constructor===Object},object:function(e){return null!=e&&typeof e===r},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return null!=e&&"string"==typeof e&&""!==$.Color(e).toString()},bool:function(e){return null!=e&&typeof e==typeof!0},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},thread:function(t){return t instanceof e.Thread},fabric:function(t){return t instanceof e.Fabric},emptyString:function(t){return t?e.is.string(t)&&(""===t||t.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(t){return t&&e.is.string(t)&&""!==t&&!t.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement},boundingBox:function(t){return e.is.plainObject(t)&&e.is.number(t.x1)&&e.is.number(t.x2)&&e.is.number(t.y1)&&e.is.number(t.y2)},promise:function(t){return e.is.object(t)&&e.is.fn(t.then)},touch:function(){return t&&("ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return navigator.vendor.match(/kde/i)},khtmlEtc:function(){return e.is.khtml()||e.is.webkit()||e.is.chromium()},trident:function(){return"undefined"!=typeof ActiveXObject||!1},windows:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Win/i)},mac:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Mac/i)},linux:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Linux/i)},unix:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/X11/i)}}}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";e.util={falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},extend:function(){var t,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||e.is.fn(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(t=arguments[u]))for(n in t)r=s[n],i=t[n],s!==i&&(c&&i&&(e.is.plainObject(i)||(o=e.is.array(i)))?(o?(o=!1,a=r&&e.is.array(r)?r:[]):a=r&&e.is.plainObject(r)?r:{},s[n]=e.util.extend(c,a,i)):void 0!==i&&(s[n]=i));return s},require:function(n,r,i){var o;i=e.util.extend({msgIfNotFound:!0},i);var a=!1,s=function(e){a=!0,r(e)},u=function(e){t&&(o=t[n]),void 0!==o&&s(o),e&&e()},l=function(){a||c(h)},c=function(e){if("undefined"!=typeof module&&module.exports&&require)try{o=require(n)}catch(t){}void 0!==o&&s(o),e&&e()},h=function(){a||d(p)},d=function(e){"undefined"!=typeof define&&define.amd&&require&&require([n],function(t){o=t,void 0!==o&&s(o),e&&e()},function(t){e&&e()})},p=function(){!a&&i.msgIfNotFound&&e.util.error("Cytoscape.js tried to pull in dependency `"+n+"` but no module (i.e. CommonJS, AMD, or window) was found")};u(l)},requires:function(t,n){for(var r=[],i=[],o=function(){for(var e=0;e<t.length;e++)if(!i[e])return;n.apply(n,r)},a=0;a<t.length;a++)!function(){var n=t[a],s=a;e.util.require(n,function(e){r[s]=e,i[s]=!0,o()})}()},throttle:function(t,n,r){var i=!0,o=!0;return r===!1?i=!1:e.is.plainObject(r)&&(i="leading"in r?r.leading:i,o="trailing"in r?r.trailing:o),r=r||{},r.leading=i,r.maxWait=n,r.trailing=o,e.util.debounce(t,n,r)},now:function(){return+new Date},debounce:function(t,n,r){var i,o,a,s,u,l,c,h=0,d=!1,p=!0;if(e.is.fn(t)){if(n=Math.max(0,n)||0,r===!0){var f=!0;p=!1}else e.is.plainObject(r)&&(f=r.leading,d="maxWait"in r&&(Math.max(n,r.maxWait)||0),p="trailing"in r?r.trailing:p);var g=function(){var r=n-(e.util.now()-s);if(0>=r){o&&clearTimeout(o);var d=c;o=l=c=void 0,d&&(h=e.util.now(),a=t.apply(u,i),l||o||(i=u=null))}else l=setTimeout(g,r)},v=function(){l&&clearTimeout(l),o=l=c=void 0,(p||d!==n)&&(h=e.util.now(),a=t.apply(u,i),l||o||(i=u=null))};return function(){if(i=arguments,s=e.util.now(),u=this,c=p&&(l||!f),
d===!1)var r=f&&!l;else{o||f||(h=s);var y=d-(s-h),m=0>=y;m?(o&&(o=clearTimeout(o)),h=s,a=t.apply(u,i)):o||(o=setTimeout(v,y))}return m&&l?l=clearTimeout(l):l||n===d||(l=setTimeout(g,n)),r&&(m=!0,a=t.apply(u,i)),!m||l||o||(i=u=null),a}}},error:function(e){if(!console)throw e;if(console.error)console.error.apply(console,arguments);else{if(!console.log)throw e;console.log.apply(console,arguments)}},clone:function(e){var t={};for(var n in e)t[n]=e[n];return t},copy:function(t){return null==t?t:e.is.array(t)?t.slice():e.is.plainObject(t)?e.util.clone(t):t},mapEmpty:function(e){var t=!0;if(null!=e)for(var n in e){t=!1;break}return t},pushMap:function(t){var n=e.util.getMap(t);null==n?e.util.setMap($.extend({},t,{value:[t.value]})):n.push(t.value)},setMap:function(t){for(var n,r=t.map,i=t.keys,o=i.length,a=0;o>a;a++){var n=i[a];e.is.plainObject(n)&&e.util.error("Tried to set map with object key"),a<i.length-1?(null==r[n]&&(r[n]={}),r=r[n]):r[n]=t.value}},getMap:function(t){for(var n=t.map,r=t.keys,i=r.length,o=0;i>o;o++){var a=r[o];if(e.is.plainObject(a)&&e.util.error("Tried to get map with object key"),n=n[a],null==n)return n}return n},deleteMap:function(t){for(var n=t.map,r=t.keys,i=r.length,o=t.keepChildren,a=0;i>a;a++){var s=r[a];e.is.plainObject(s)&&e.util.error("Tried to delete map with object key");var u=a===t.keys.length-1;if(u)if(o)for(var l in n)o[l]||(n[l]=void 0);else n[s]=void 0;else n=n[s]}},capitalize:function(t){return e.is.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},trim:function(e){var t,n;for(t=0;t<e.length&&" "===e[t];t++);for(n=e.length-1;n>t&&" "===e[n];n--);return e.substring(t,n+1)},hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,r,i=4===e.length,o=16;return i?(t=parseInt(e[1]+e[1],o),n=parseInt(e[2]+e[2],o),r=parseInt(e[3]+e[3],o)):(t=parseInt(e[1]+e[2],o),n=parseInt(e[3]+e[4],o),r=parseInt(e[5]+e[6],o)),[t,n,r]}},hsl2tuple:function(t){function n(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e}var r,i,o,a,s,u,l,c,h=new RegExp("^"+e.util.regex.hsla+"$").exec(t);if(h){if(i=parseInt(h[1]),0>i?i=(360- -1*i%360)%360:i>360&&(i%=360),i/=360,o=parseFloat(h[2]),0>o||o>100)return;if(o/=100,a=parseFloat(h[3]),0>a||a>100)return;if(a/=100,s=h[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===o)u=l=c=Math.round(255*a);else{var d=.5>a?a*(1+o):a+o-a*o,p=2*a-d;u=Math.round(255*n(p,d,i+1/3)),l=Math.round(255*n(p,d,i)),c=Math.round(255*n(p,d,i-1/3))}r=[u,l,c,s]}return r},rgb2tuple:function(t){var n,r=new RegExp("^"+e.util.regex.rgba+"$").exec(t);if(r){n=[];for(var i=[],o=1;3>=o;o++){var a=r[o];if("%"===a[a.length-1]&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),0>a||a>255)return;n.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=r[4];if(void 0!==l){if(l=parseFloat(l),0>l||l>1)return;n.push(l)}}return n},colorname2tuple:function(t){return e.util.colors[t.toLowerCase()]},color2tuple:function(t){return(e.is.array(t)?t:null)||e.util.colorname2tuple(t)||e.util.hex2tuple(t)||e.util.rgb2tuple(t)||e.util.hsl2tuple(t)},tuple2hex:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}var n=e[0],r=e[1],i=e[2];return"#"+t(n)+t(r)+t(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},memoize:function(e,t){var n=this,r={};return t||(t=function(){if(1===arguments.length)return arguments[0];for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")}),function(){var i,o=arguments,a=t.apply(n,o);return(i=r[a])||(i=r[a]=e.apply(n,o)),i}}},e.util._staticEmptyObject={},e.util.staticEmptyObject=function(){return e.util._staticEmptyObject},e.util.camel2dash=e.util.memoize(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.toLowerCase(),o=r!==i;o?(t.push("-"),t.push(i)):t.push(r)}var a=t.length===e.length;return a?e:t.join("")}),e.util.dash2camel=e.util.memoize(function(e){for(var t=[],n=!1,r=0;r<e.length;r++){var i=e[r],o="-"===i;o?n=!0:(t.push(n?i.toUpperCase():i),n=!1)}return t.join("")}),e.util.regex={},e.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",e.util.regex.rgba="rgb[a]?\\(("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hsla="hsl[a]?\\(("+e.util.regex.number+")\\s*,\\s*("+e.util.regex.number+"[%])\\s*,\\s*("+e.util.regex.number+"[%])(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+e.util.regex.number+")\\s*,\\s*(?:"+e.util.regex.number+"[%])\\s*,\\s*(?:"+e.util.regex.number+"[%])(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hex3="\\#[0-9a-fA-F]{3}",e.util.regex.hex6="\\#[0-9a-fA-F]{6}";var n=t?t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame:null;n=n||function(e){e&&setTimeout(e,1e3/60)},e.util.requestAnimationFrame=function(e){n(e)};var r=performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};e.util.performanceNow=r}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";var t=e.math={};t.signum=function(e){return e>0?1:0>e?-1:0},t.distance=function(e,n){return Math.sqrt(t.sqDistance(e,n))},t.sqDistance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},t.qbezierAt=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},t.qbezierPtAt=function(e,n,r,i){return{x:t.qbezierAt(e.x,n.x,r.x,i),y:t.qbezierAt(e.y,n.y,r.y,i)}},t.makeBoundingBox=function(e){if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},t.boundingBoxesIntersect=function(e,t){return e.x1>t.x2?!1:t.x1>e.x2?!1:e.x2<t.x1?!1:t.x2<e.x1?!1:e.y2<t.y1?!1:t.y2<e.y1?!1:e.y1>t.y2?!1:t.y1>e.y2?!1:!0},t.inBoundingBox=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},t.pointInBoundingBox=function(e,t){return this.inBoundingBox(e,t.x,t.y)},t.roundRectangleIntersectLine=function(e,t,n,r,i,o,a){var s,u=this.getRoundRectangleRadius(i,o),l=i/2,c=o/2,h=n-l+u-a,d=r-c-a,p=n+l-u+a,f=d;if(s=this.finiteLinesIntersect(e,t,n,r,h,d,p,f,!1),s.length>0)return s;var g=n+l+a,v=r-c+u-a,y=g,m=r+c-u+a;if(s=this.finiteLinesIntersect(e,t,n,r,g,v,y,m,!1),s.length>0)return s;var b=n-l+u-a,w=r+c+a,x=n+l-u+a,_=w;if(s=this.finiteLinesIntersect(e,t,n,r,b,w,x,_,!1),s.length>0)return s;var E=n-l-a,k=r-c+u-a,S=E,T=r+c-u+a;if(s=this.finiteLinesIntersect(e,t,n,r,E,k,S,T,!1),s.length>0)return s;var C,N=n-l+u,A=r-c+u;if(C=this.intersectLineCircle(e,t,n,r,N,A,u+a),C.length>0&&C[0]<=N&&C[1]<=A)return[C[0],C[1]];var P=n+l-u,D=r-c+u;if(C=this.intersectLineCircle(e,t,n,r,P,D,u+a),C.length>0&&C[0]>=P&&C[1]<=D)return[C[0],C[1]];var $=n+l-u,M=r+c-u;if(C=this.intersectLineCircle(e,t,n,r,$,M,u+a),C.length>0&&C[0]>=$&&C[1]>=M)return[C[0],C[1]];var I=n-l+u,O=r+c-u;return C=this.intersectLineCircle(e,t,n,r,I,O,u+a),C.length>0&&C[0]<=I&&C[1]>=O?[C[0],C[1]]:[]},t.boxInBezierVicinity=function(e,t,n,r,i,o,a,s,u,l,c){var h=.25*i+.5*a+.25*u,d=.25*o+.5*s+.25*l,p=Math.min(e,n)-c,f=Math.min(t,r)-c,g=Math.max(e,n)+c,v=Math.max(t,r)+c;if(i>=p&&g>=i&&o>=f&&v>=o)return 1;if(u>=p&&g>=u&&l>=f&&v>=l)return 1;if(h>=p&&g>=h&&d>=f&&v>=d)return 1;if(a>=p&&g>=a&&s>=f&&v>=s)return 1;var y=Math.min(i,h,u),m=Math.min(o,d,l),b=Math.max(i,h,u),w=Math.max(o,d,l);return y>g||p>b||m>v||f>w?0:1},t.checkBezierInBox=function(e,n,r,i,o,a,s,u,l,c,h){function d(h){var d=t.qbezierAt(o,s,l,h),p=t.qbezierAt(a,u,c,h);return d>=e&&r>=d&&p>=n&&i>=p}for(var p=0;1>=p;p+=.25)if(!d(p))return!1;return!0},t.checkStraightEdgeInBox=function(e,t,n,r,i,o,a,s,u){return i>=e&&n>=i&&a>=e&&n>=a&&o>=t&&r>=o&&s>=t&&r>=s},t.inLineVicinity=function(e,t,n,r,i,o,a){var s=a,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return e>=u-s&&l+s>=e&&t>=c-s&&h+s>=t},t.inBezierVicinity=function(e,t,n,r,i,o,a,s,u){var l={x1:Math.min(n,a,i),x2:Math.max(n,a,i),y1:Math.min(r,s,o),y2:Math.max(r,s,o)};return e<l.x1||e>l.x2||t<l.y1||t>l.y2?!1:!0},t.solveCubic=function(e,t,n,r,i){t/=e,n/=e,r/=e;var o,a,s,u,l,c,h,d;return a=(3*n-t*t)/9,s=-(27*r)+t*(9*n-2*t*t),s/=54,o=a*a*a+s*s,i[1]=0,h=t/3,o>0?(l=s+Math.sqrt(o),l=0>l?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(o),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+l+c,h+=(l+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+l)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(d=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*d,void(i[4]=i[2]=-(d+h))):(a=-a,u=a*a*a,u=Math.acos(s/Math.sqrt(u)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(u/3),i[2]=-h+d*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((u+4*Math.PI)/3))))},t.sqDistanceToQuadraticBezier=function(e,t,n,r,i,o,a,s){var u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,l=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*e+2*i*i+2*i*e-a*e+3*r*r-6*r*o+r*s-r*t+2*o*o+2*o*t-s*t,h=1*n*i-n*n+n*e-i*e+r*o-r*r+r*t-o*t,d=[];this.solveCubic(u,l,c,h,d);for(var p=1e-7,f=[],g=0;6>g;g+=2)Math.abs(d[g+1])<p&&d[g]>=0&&d[g]<=1&&f.push(d[g]);f.push(1),f.push(0);for(var v,y,m,b,w=-1,x=0;x<f.length;x++)y=Math.pow(1-f[x],2)*n+2*(1-f[x])*f[x]*i+f[x]*f[x]*a,m=Math.pow(1-f[x],2)*r+2*(1-f[x])*f[x]*o+f[x]*f[x]*s,b=Math.pow(y-e,2)+Math.pow(m-t,2),w>=0?w>b&&(w=b,v=f[x]):(w=b,v=f[x]);return w},t.sqDistanceToFiniteLine=function(e,t,n,r,i,o){var a=[e-n,t-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return 0>c?l:h>u?(e-i)*(e-i)+(t-o)*(t-o):l-h},t.pointInsidePolygonPoints=function(e,t,n){for(var r,i,o,a,s,u=0,l=0,c=0;c<n.length/2;c++)if(r=n[2*c],i=n[2*c+1],c+1<n.length/2?(o=n[2*(c+1)],a=n[2*(c+1)+1]):(o=n[2*(c+1-n.length/2)],a=n[2*(c+1-n.length/2)+1]),r==e&&o==e);else{if(!(r>=e&&e>=o||e>=r&&o>=e))continue;s=(e-r)/(o-r)*(a-i)+i,s>t&&u++,t>s&&l++}return u%2===0?!1:!0},t.pointInsidePolygon=function(e,n,r,i,o,a,s,u,l){var c=new Array(r.length),h=Math.atan(u[1]/u[0]);u[0]<0?h+=Math.PI/2:h=-h-Math.PI/2;for(var d=Math.cos(-h),p=Math.sin(-h),f=0;f<c.length/2;f++)c[2*f]=a/2*(r[2*f]*d-r[2*f+1]*p),c[2*f+1]=s/2*(r[2*f+1]*d+r[2*f]*p),c[2*f]+=i,c[2*f+1]+=o;var g;if(l>0){var v=this.expandPolygon(c,-l);g=this.joinLines(v)}else g=c;return t.pointInsidePolygonPoints(e,n,g)},t.joinLines=function(e){for(var t,n,r,i,o,a,s,u,l=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(o=e[4*(c+1)],a=e[4*(c+1)+1],s=e[4*(c+1)+2],u=e[4*(c+1)+3]):(o=e[0],a=e[1],s=e[2],u=e[3]);var h=this.finiteLinesIntersect(t,n,r,i,o,a,s,u,!0);l[2*c]=h[0],l[2*c+1]=h[1]}return l},t.expandPolygon=function(e,t){for(var n,r,i,o,a=new Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],o=e[2*(s+1)+1]):(i=e[0],o=e[1]);var u=o-r,l=-(i-n),c=Math.sqrt(u*u+l*l),h=u/c,d=l/c;a[4*s]=n+h*t,a[4*s+1]=r+d*t,a[4*s+2]=i+h*t,a[4*s+3]=o+d*t}return a},t.intersectLineEllipse=function(e,t,n,r,i,o){var a=n-e,s=r-t;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(0>l)return[];var c=l/u;return[(n-e)*c+e,(r-t)*c+t]},t.intersectLineCircle=function(e,t,n,r,i,o,a){var s=[n-e,r-t],u=[i,o],l=[e-i,t-o],c=s[0]*s[0]+s[1]*s[1],h=2*(l[0]*s[0]+l[1]*s[1]),u=l[0]*l[0]+l[1]*l[1]-a*a,d=h*h-4*c*u;if(0>d)return[];var p=(-h+Math.sqrt(d))/(2*c),f=(-h-Math.sqrt(d))/(2*c),g=Math.min(p,f),v=Math.max(p,f),y=[];if(g>=0&&1>=g&&y.push(g),v>=0&&1>=v&&y.push(v),0===y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,b];var w=y[1]*s[0]+e,x=y[1]*s[1]+t;return[m,b,w,x]}return[m,b]},t.findCircleNearPoint=function(e,t,n,r,i){var o=r-e,a=i-t,s=Math.sqrt(o*o+a*a),u=o/s,l=a/s;return[e+u*n,t+l*n]},t.findMaxSqDistanceToOrigin=function(e){for(var t,n=1e-6,r=0;r<e.length/2;r++)t=e[2*r]*e[2*r]+e[2*r+1]*e[2*r+1],t>n&&(n=t);return n},t.finiteLinesIntersect=function(e,t,n,r,i,o,a,s,u){var l=(a-i)*(t-o)-(s-o)*(e-i),c=(n-e)*(t-o)-(r-t)*(e-i),h=(s-o)*(n-e)-(a-i)*(r-t);if(0!==h){var d=l/h,p=c/h;return d>=0&&1>=d&&p>=0&&1>=p?[e+d*(n-e),t+d*(r-t)]:u?[e+d*(n-e),t+d*(r-t)]:[]}return 0===l||0===c?[e,n,a].sort()[1]===a?[a,s]:[e,n,i].sort()[1]===i?[i,o]:[i,a,n].sort()[1]===n?[n,r]:[]:[]},t.polygonIntersectLine=function(e,n,r,i,o,a,s,u){for(var l,c=[],h=new Array(r.length),d=0;d<h.length/2;d++)h[2*d]=r[2*d]*a+i,h[2*d+1]=r[2*d+1]*s+o;var p;if(u>0){var f=t.expandPolygon(h,-u);p=t.joinLines(f)}else p=h;for(var g,v,y,m,d=0;d<p.length/2;d++)g=p[2*d],v=p[2*d+1],d<p.length/2-1?(y=p[2*(d+1)],m=p[2*(d+1)+1]):(y=p[0],m=p[1]),l=this.finiteLinesIntersect(e,n,i,o,g,v,y,m),0!==l.length&&c.push(l[0],l[1]);return c},t.shortenIntersection=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return 0>o&&(o=1e-5),[t[0]+o*r[0],t[1]+o*r[1]]},t.generateUnitNgonPointsFitToSquare=function(e,n){var r=t.generateUnitNgonPoints(e,n);return r=t.fitPolygonToSquare(r)},t.fitPolygonToSquare=function(e){for(var t,n,r=e.length/2,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=0;r>u;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);for(var l=2/(a-i),c=2/(s-o),u=0;r>u;u++)t=e[2*u]=e[2*u]*l,n=e[2*u+1]=e[2*u+1]*c,i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);if(-1>o)for(var u=0;r>u;u++)n=e[2*u+1]=e[2*u+1]+(-1-o);return e},t.generateUnitNgonPoints=function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i,o,a,s=new Array(2*e),u=0;e>u;u++)i=u*n+r,o=s[2*u]=Math.cos(i),a=s[2*u+1]=Math.sin(-i);return s},t.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)}}(cytoscape),function(e){"use strict";function t(t,n,r){var i={};switch(i[n]=r,t){case"core":case"collection":e.fn[t](i)}if("layout"===t){for(var a=r.prototype,s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this}),a.stop||(a.stop=function(){var e=this.options;return e&&e.animate&&e.eles.stop(),this}),a.destroy||(a.destroy=function(){return this}),a.on=e.define.on({layout:!0}),a.one=e.define.on({layout:!0,unbindSelfOnTrigger:!0}),a.once=e.define.on({layout:!0,unbindAllBindersOnTrigger:!0}),a.off=e.define.off({layout:!0}),a.trigger=e.define.trigger({layout:!0}),e.define.eventAliasesOn(a)}return e.util.setMap({map:o,keys:[t,n],value:r})}function n(t,n){return e.util.getMap({map:o,keys:[t,n]})}function r(t,n,r,i,o){return e.util.setMap({map:a,keys:[t,n,r,i],value:o})}function i(t,n,r,i){return e.util.getMap({map:a,keys:[t,n,r,i]})}var o={};e.extensions=o;var a={};e.modules=a,e.extension=function(){return 2==arguments.length?n.apply(this,arguments):3==arguments.length?t.apply(this,arguments):4==arguments.length?i.apply(this,arguments):5==arguments.length?r.apply(this,arguments):void e.util.error("Invalid extension access syntax")}}(cytoscape),function(e,t){"use strict";var n=function(e){var t=e[0]._cyreg=e[0]._cyreg||{};return t};t.registerJquery=function(e){e&&(e.fn.cytoscape||(e.fn.cytoscape=function(r){var i=e(this);if("get"===r)return n(i).cy;if(t.is.fn(r)){var o=r,a=n(i).cy;if(a&&a.isReady())a.trigger("ready",[],o);else{var s=n(i),u=s.readies=s.readies||[];u.push(o)}}else if(t.is.plainObject(r))return i.each(function(){var t=e.extend({},r,{container:e(this)[0]});cytoscape(t)})},e.cytoscape=cytoscape,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape)))},t.registerJquery(e),t.util.require("jquery",function(e){t.registerJquery(e)})}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(e){"use strict";function t(){return!1}function n(){return!0}e.Event=function(r,i){return this instanceof e.Event?(r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented?n:t):this.type=r,i&&(this.type=void 0!==i.type?i.type:this.type,this.cy=i.cy,this.cyTarget=i.cyTarget,this.cyPosition=i.cyPosition,this.cyRenderedPosition=i.cyRenderedPosition,this.namespace=i.namespace,this.layout=i.layout,this.data=i.data,this.message=i.message),void(this.timeStamp=r&&r.timeStamp||+new Date)):new e.Event(r,i)},e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=n;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n,this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}}(cytoscape),function(e){"use strict";e.define={data:function(t){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(e){},canSet:function(e){return!0}};return t=e.util.extend({},n,t),function(n,r){var i=t,o=this,a=void 0!==o.length,s=a?o:[o],u=a?o[0]:o;if(e.is.string(n)){if(i.allowGetting&&void 0===r){var l;return u&&(l=u._private[i.field][n]),l}if(i.allowSetting&&void 0!==r){var c=!i.immutableKeys[n];if(c){for(var h=0,d=s.length;d>h;h++)i.canSet(s[h])&&(s[h]._private[i.field][n]=r);i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&e.is.plainObject(n)){var p,f,g=n;for(p in g){f=g[p];var c=!i.immutableKeys[p];if(c)for(var h=0,d=s.length;d>h;h++)i.canSet(s[h])&&(s[h]._private[i.field][p]=f)}i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&e.is.fn(n)){var v=n;o.bind(i.bindingEvent,v)}else if(i.allowGetting&&void 0===n){var l;return u&&(l=u._private[i.field]),l}return o}},removeData:function(t){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=e.util.extend({},n,t),function(n){var r=t,i=this,o=void 0!==i.length,a=o?i:[i];if(e.is.string(n)){for(var s=n.split(/\s+/),u=s.length,l=0;u>l;l++){var c=s[l];if(!e.is.emptyString(c)){var h=!r.immutableKeys[c];if(h)for(var d=0,p=a.length;p>d;d++)a[d]._private[r.field][c]=void 0}}r.triggerEvent&&i[r.triggerFnName](r.event)}else if(void 0===n){for(var d=0,p=a.length;p>d;d++){var f=a[d]._private[r.field];for(var c in f){var g=!r.immutableKeys[c];g&&(f[c]=void 0)}}r.triggerEvent&&i[r.triggerFnName](r.event)}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(t){var n={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=e.util.extend({},n,t),function(n,r,i,o){var a=this,s=void 0!==a.length,u=s?a:[a],l=e.is.string(n),c=t;if(e.is.plainObject(r)?(o=i,i=r,r=void 0):(e.is.fn(r)||r===!1)&&(o=r,i=void 0,r=void 0),(e.is.fn(i)||i===!1)&&(o=i,i=void 0),!e.is.fn(o)&&o!==!1&&l)return a;if(l){var h={};h[n]=o,n=h}for(var d in n)if(o=n[d],o===!1&&(o=e.define.event.falseCallback),e.is.fn(o)){d=d.split(/\s+/);for(var p=0;p<d.length;p++){var f=d[p];if(!e.is.emptyString(f)){var g=f.match(e.define.event.regex);if(g)for(var v=g[1],y=g[2]?g[2]:void 0,m={callback:o,data:i,delegated:r?!0:!1,selector:r,selObj:new e.Selector(r),type:v,namespace:y,unbindSelfOnTrigger:c.unbindSelfOnTrigger,unbindAllBindersOnTrigger:c.unbindAllBindersOnTrigger,binders:u},b=0;b<u.length;b++){var w=u[b]._private;w.listeners=w.listeners||[],w.listeners.push(m)}}}}return a}},eventAliasesOn:function(t){var n=t;n.addListener=n.listen=n.bind=n.on,n.removeListener=n.unlisten=n.unbind=n.off,n.emit=n.trigger,n.pon=n.promiseOn=function(t,n){var r=this,i=Array.prototype.slice.call(arguments,0);return new e.Promise(function(e,t){var n=function(t){r.off.apply(r,a),e(t)},o=i.concat([n]),a=o.concat([]);r.on.apply(r,o)})}},off:function(t){var n={};return t=e.util.extend({},n,t),function(t,n,r){var i=this,o=void 0!==i.length,a=o?i:[i],s=e.is.string(t);if(0===arguments.length){for(var u=0;u<a.length;u++)a[u]._private.listeners=[];return i}if((e.is.fn(n)||n===!1)&&(r=n,n=void 0),s){var l={};l[t]=r,t=l}for(var c in t){r=t[c],r===!1&&(r=e.define.event.falseCallback),c=c.split(/\s+/);for(var h=0;h<c.length;h++){var d=c[h];if(!e.is.emptyString(d)){var p=d.match(e.define.event.optionalTypeRegex);if(p)for(var f=p[1]?p[1]:void 0,g=p[2]?p[2]:void 0,u=0;u<a.length;u++)for(var v=a[u]._private.listeners=a[u]._private.listeners||[],y=0;y<v.length;y++){var m=v[y],b=!g||g===m.namespace,w=!f||m.type===f,x=!r||r===m.callback,_=b&&w&&x;_&&(v.splice(y,1),y--)}}}}return i}},trigger:function(t){var n={};return t=e.util.extend({},n,t),function(n,r,i){var o=this,a=void 0!==o.length,s=a?o:[o],u=e.is.string(n),l=e.is.plainObject(n),c=e.is.event(n),h=this._private.cy||(e.is.core(this)?this:null),d=h?h.hasCompoundNodes():!1;if(u){var p=n.split(/\s+/);n=[];for(var f=0;f<p.length;f++){var g=p[f];if(!e.is.emptyString(g)){var v=g.match(e.define.event.regex),y=v[1],m=v[2]?v[2]:void 0;n.push({type:y,namespace:m})}}}else if(l){var b=n;n=[b]}r?e.is.array(r)||(r=[r]):r=[];for(var f=0;f<n.length;f++)for(var w=n[f],x=0;x<s.length;x++){var g,_=s[x],E=_._private.listeners=_._private.listeners||[],k=e.is.element(_),S=k||t.layout;if(c?(g=w,g.cyTarget=g.cyTarget||_,g.cy=g.cy||h):g=new e.Event(w,{cyTarget:_,cy:h,namespace:w.namespace}),w.layout&&(g.layout=w.layout),t.layout&&(g.layout=_),g.cyPosition){var T=g.cyPosition,C=h.zoom(),N=h.pan();g.cyRenderedPosition={x:T.x*C+N.x,y:T.y*C+N.y}}i&&(E=[{namespace:g.namespace,type:g.type,callback:i}]);for(var A=0;A<E.length;A++){var P=E[A],D=!P.namespace||P.namespace===g.namespace,$=P.type===g.type,M=P.delegated?_!==g.cyTarget&&e.is.element(g.cyTarget)&&P.selObj.matches(g.cyTarget):!0,I=D&&$&&M;if(I){var O=[g];if(O=O.concat(r),g.data=P.data?P.data:void 0,(P.unbindSelfOnTrigger||P.unbindAllBindersOnTrigger)&&(E.splice(A,1),A--),P.unbindAllBindersOnTrigger)for(var L=P.binders,j=0;j<L.length;j++){var R=L[j];if(R&&R!==_)for(var q=R._private.listeners,F=0;F<q.length;F++){var B=q[F];B===P&&(q.splice(F,1),F--)}}var G=P.delegated?g.cyTarget:_,z=P.callback.apply(G,O);(z===!1||g.isPropagationStopped())&&(S=!1,z===!1&&(g.stopPropagation(),g.preventDefault()))}}if(S){var U=d?_._private.parent:null,V=null!=U&&0!==U.length;V?(U=U[0],U.trigger(g)):h.trigger(g)}}return o}},animated:function(t){var n={};return t=e.util.extend({},n,t),function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(t){var n={};return t=e.util.extend({},n,t),function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var o=n[i];o._private.animation.queue=[]}return this}},delay:function(t){var n={};return t=e.util.extend({},n,t),function(e,t){var n=this._private.cy||this;return n.styleEnabled()?(this.animate({delay:e},{duration:e,complete:t}),this):this}},delayPromise:function(t){var n={};return t=e.util.extend({},n,t),function(t,n){var r=this._private.cy||this,i=this;return r.styleEnabled()?new e.Promise(function(e){i.delay(t,function(){n&&n(),e()})}):e.Promise.resolve()}},animate:function(t){var n={};return t=e.util.extend({},n,t),function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this,a=!r,s=!a;if(!o.styleEnabled())return this;var u,l=+new Date,c=o.style();switch(void 0===t&&(t={}),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}var h=!0;if(e)for(var d in e){h=!1;break}if(h)return this;if(s&&(e.style=c.getPropsList(e.style||e.css),e.css=void 0),e.renderedPosition&&s){var p=e.renderedPosition,f=o.pan(),g=o.zoom();e.position={x:(p.x-f.x)/g,y:(p.y-f.y)/g}}if(e.panBy&&a){var v=e.panBy,y=o.pan();e.pan={x:y.x+v.x,y:y.y+v.y}}var m=e.center||e.centre;if(m&&a){var b=o.getCenterPan(m.eles,e.zoom);b&&(e.pan=b)}if(e.fit&&a){var w=e.fit,x=o.getFitViewport(w.eles||w.boundingBox,w.padding);x&&(e.pan=x.pan,e.zoom=x.zoom)}for(var d=0;d<i.length;d++){var _=i[d];u=_.animated()&&(void 0===t.queue||t.queue)?_._private.animation.queue:_._private.animation.current,u.push({properties:e,duration:t.duration,params:t,callTime:l})}return s&&o.addToAnimationPool(this),this}},animatePromise:function(t){var n={};return t=e.util.extend({},n,t),function(t,n){var r=this._private.cy||this,i=this;return n=n||{},r.styleEnabled()?new e.Promise(function(e){var r=n.complete;n.complete=function(){r&&r(),e()},i.animate(t,n)}):e.Promise.resolve()}},stop:function(t){var n={};return t=e.util.extend({},n,t),function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var s=i[a],u=s._private.animation.current,l=0;l<u.length;l++){var c=u[l];t&&(c.duration=0)}e&&(s._private.animation.queue=[]),t||(s._private.animation.current=[])}return o.notify({collection:this,type:"draw"}),this}}}}(cytoscape),function(e){"use strict";e.fn.selector=function(t,n){for(var r in t){var i=t[r];e.Selector.prototype[r]=i}},e.Selector=function(t,n){if(!(this instanceof e.Selector))return new e.Selector(t,n);void 0===n&&void 0!==t&&(n=t,t=void 0);var r=this;if(r._private={selectorText:null,invalid:!0},!n||e.is.string(n)&&n.match(/^\s*$/))null==t?r.length=0:(r[0]=a(),r[0].group=t,r.length=1);else if(e.is.element(n)){var i=new e.Collection(r.cy(),[n]);r[0]=a(),r[0].collection=i,r.length=1}else if(e.is.collection(n))r[0]=a(),r[0].collection=n,r.length=1;else if(e.is.fn(n))r[0]=a(),r[0].filter=n,r.length=1;else{if(!e.is.string(n))return void e.util.error("A selector must be created from a string; found "+n);var o=null,a=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},s={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:e.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};s.variable="(?:[\\w-]|(?:\\\\"+s.metaChar+"))+",s.value=s.string+"|"+s.number,s.className=s.variable,s.id=s.variable;for(var u=function(e){return e.replace(new RegExp("\\\\("+s.metaChar+")","g"),function(e,t,n,r){return t})},l=s.comparatorOp.split("|"),c=0;c<l.length;c++){var h=l[c];s.comparatorOp+="|@"+h}for(var l=s.comparatorOp.split("|"),c=0;c<l.length;c++){var h=l[c];h.indexOf("!")>=0||"="!==h&&(s.comparatorOp+="|\\!"+h)}var d={group:{query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(e){this.colonSelectors.push(e)}},id:{query:!0,regex:"\\#("+s.id+")",populate:function(e){this.ids.push(u(e))}},className:{query:!0,regex:"\\.("+s.className+")",populate:function(e){this.classes.push(u(e))}},dataExists:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*\\]",populate:function(e){this.data.push({field:u(e)})}},dataCompare:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*("+s.comparatorOp+")\\s*("+s.value+")\\s*\\]",populate:function(e,t,n){var r=null!=new RegExp("^"+s.string+"$").exec(n);n=r?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:u(e),operator:t,value:n})}},dataBool:{query:!0,regex:"\\[\\s*("+s.boolOp+")\\s*("+s.variable+")\\s*\\]",populate:function(e,t){this.data.push({field:u(t),operator:e})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+s.meta+")\\s*("+s.comparatorOp+")\\s*("+s.number+")\\s*\\]\\]",populate:function(e,t,n){this.meta.push({field:u(e),operator:t,value:parseFloat(n)})}},nextQuery:{separator:!0,regex:s.separator,populate:function(){r[++c]=a(),o=null}},child:{separator:!0,regex:s.child,populate:function(){var e=a();e.parent=this,e.subject=o,r[c]=e}},descendant:{separator:!0,regex:s.descendant,populate:function(){var e=a();e.ancestor=this,e.subject=o,r[c]=e}},subject:{modifier:!0,regex:s.subject,populate:function(){return null!=o&&this.subject!=this?(e.util.error("Redefinition of subject in selector `"+n+"`"),!1):(o=this,void(this.subject=this))}}},p=0;for(var f in d)d[p]=d[f],d[p].name=f,p++;d.length=p,r._private.selectorText=n;var g=n,c=0,v=function(t){for(var n,r,i,o=0;o<d.length;o++){var a=d[o],s=a.name;if(!e.is.fn(t)||t(s,a)){
var u=g.match(new RegExp("^"+a.regex));if(null!=u){r=u,n=a,i=s;var l=u[0];g=g.substring(l.length);break}}}return{expr:n,match:r,name:i}},y=function(){var e=g.match(/^\s+/);if(e){var t=e[0];g=g.substring(t.length)}};for(r[0]=a(),y();;){var m=v();if(null==m.expr)return void e.util.error("The selector `"+n+"`is invalid");for(var b=[],p=1;p<m.match.length;p++)b.push(m.match[p]);var w=m.expr.populate.apply(r[c],b);if(w===!1)return;if(g.match(/^\s*$/))break}for(r.length=c+1,p=0;p<r.length;p++){var x=r[p];if(null!=x.subject){for(;x.subject!=x;)if(null!=x.parent){var _=x.parent,E=x;E.parent=null,_.child=E,x=_}else{if(null==x.ancestor){e.util.error("When adjusting references for the selector `"+x+"`, neither parent nor ancestor was found");break}var k=x.ancestor,S=x;S.ancestor=null,k.descendant=S,x=k}r[p]=x.subject}}if(null!=t)for(var p=0;p<r.length;p++){if(null!=r[p].group&&r[p].group!=t)return void e.util.error("Group `"+r[p].group+"` conflicts with implicit group `"+t+"` in selector `"+n+"`");r[p].group=t}}r._private.invalid=!1},e.selfn=e.Selector.prototype,e.selfn.size=function(){return this.length},e.selfn.eq=function(e){return this[e]},e.selfn.find=function(){};var t=function(n,r){if(null!=n.group&&"*"!=n.group&&n.group!=r._private.group)return!1;for(var i=r.cy(),o=!0,a=0;a<n.colonSelectors.length;a++){var s=n.colonSelectors[a];switch(s){case":selected":o=r.selected();break;case":unselected":o=!r.selected();break;case":selectable":o=r.selectable();break;case":unselectable":o=!r.selectable();break;case":locked":o=r.locked();break;case":unlocked":o=!r.locked();break;case":visible":o=r.visible();break;case":hidden":o=!r.visible();break;case":transparent":o=r.transparent();break;case":grabbed":o=r.grabbed();break;case":free":o=!r.grabbed();break;case":removed":o=r.removed();break;case":inside":o=!r.removed();break;case":grabbable":o=r.grabbable();break;case":ungrabbable":o=!r.grabbable();break;case":animated":o=r.animated();break;case":unanimated":o=!r.animated();break;case":parent":o=r.isNode()&&r.children().nonempty();break;case":child":case":nonorphan":o=r.isNode()&&r.parent().nonempty();break;case":orphan":o=r.isNode()&&r.parent().empty();break;case":loop":o=r.isEdge()&&r.data("source")===r.data("target");break;case":simple":o=r.isEdge()&&r.data("source")!==r.data("target");break;case":active":o=r.active();break;case":inactive":o=!r.active();break;case":touch":o=e.is.touch();break;case":backgrounding":o=r.backgrounding();break;case":nonbackgrounding":o=!r.backgrounding()}if(!o)break}if(!o)return!1;for(var u=!0,a=0;a<n.ids.length;a++){var l=n.ids[a],c=r._private.data.id;if(u=u&&l==c,!u)break}if(!u)return!1;for(var h=!0,a=0;a<n.classes.length;a++){var d=n.classes[a];if(h=h&&r.hasClass(d),!h)break}if(!h)return!1;var p=function(t){for(var r=!0,i=0;i<n[t.name].length;i++){var o,a=n[t.name][i],s=a.operator,u=a.value,l=a.field;if(null!=s&&null!=u){var c=t.fieldValue(l),h=e.is.string(c)||e.is.number(c)?""+c:"",d=""+u,p=!1;s.indexOf("@")>=0&&(h=h.toLowerCase(),d=d.toLowerCase(),s=s.replace("@",""),p=!0);var f=!1,g=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),f=!0),p&&(u=d.toLowerCase(),c=h.toLowerCase()),s){case"*=":o=h.search(d)>=0;break;case"$=":o=null!=new RegExp(d+"$").exec(h);break;case"^=":o=null!=new RegExp("^"+d).exec(h);break;case"=":o=c===u;break;case"!=":o=c!==u;break;case">":o=f?u>=c:c>u,g=!0;break;case">=":o=f?u>c:c>=u,g=!0;break;case"<":o=f?c>=u:u>c,g=!0;break;case"<=":o=f?c>u:u>=c,g=!0;break;default:o=!1}}else if(null!=s)switch(s){case"?":o=t.fieldTruthy(l);break;case"!":o=!t.fieldTruthy(l);break;case"^":o=t.fieldUndefined(l)}else o=!t.fieldUndefined(l);if(f&&!g&&(o=!o,g=!0),!o){r=!1;break}}return r},f=p({name:"data",fieldValue:function(e){return r._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===r._private.data[e]},fieldTruthy:function(e){return r._private.data[e]?!0:!1}});if(!f)return!1;var g=p({name:"meta",fieldValue:function(e){return r[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return null==r[e]()},fieldTruthy:function(e){return r[e]()?!0:!1}});if(!g)return!1;if(null!=n.collection){var v=null!=n.collection._private.ids[r.id()];if(!v)return!1}if(null!=n.filter&&0===r.collection().filter(n.filter).size())return!1;var y=function(e,n){if(null!=e){var r=!1;if(!i.hasCompoundNodes())return!1;n=n();for(var o=0;o<n.length;o++)if(t(e,n[o])){r=!0;break}return r}return!0};return y(n.parent,function(){return r.parent()})&&y(n.ancestor,function(){return r.parents()})&&y(n.child,function(){return r.children()})&&y(n.descendant,function(){return r.descendants()})?!0:!1};e.selfn.filter=function(n){var r=this,i=n.cy();if(r._private.invalid)return new e.Collection(i);var o=function(e,n){for(var i=0;i<r.length;i++){var o=r[i];if(t(o,n))return!0}return!1};null==r._private.selectorText&&(o=function(){return!0});var a=n.filter(o);return a},e.selfn.matches=function(e){var n=this;if(n._private.invalid)return!1;for(var r=0;r<n.length;r++){var i=n[r];if(t(i,e))return!0}return!1},e.selfn.toString=e.selfn.selector=function(){for(var t="",n=function(t,n){return e.is.string(t)?n?'"'+t+'"':t:""},r=function(e){var t="";e.subject===e&&(t+="$");var o=n(e.group);t+=o.substring(0,o.length-1);for(var a=0;a<e.data.length;a++){var s=e.data[a];t+=s.value?"["+s.field+n(s.operator)+n(s.value,!0)+"]":"["+n(s.operator)+s.field+"]"}for(var a=0;a<e.meta.length;a++){var u=e.meta[a];t+="[["+u.field+n(u.operator)+n(u.value,!0)+"]]"}for(var a=0;a<e.colonSelectors.length;a++){var l=e.colonSelectors[i];t+=l}for(var a=0;a<e.ids.length;a++){var l="#"+e.ids[i];t+=l}for(var a=0;a<e.classes.length;a++){var l="."+e.classes[i];t+=l}return null!=e.parent&&(t=r(e.parent)+" > "+t),null!=e.ancestor&&(t=r(e.ancestor)+" "+t),null!=e.child&&(t+=" > "+r(e.child)),null!=e.descendant&&(t+=" "+r(e.descendant)),t},i=0;i<this.length;i++){var o=this[i];t+=r(o),this.length>1&&i<this.length-1&&(t+=", ")}return t}}(cytoscape),function(e){"use strict";e.Style=function(t){return this instanceof e.Style?e.is.core(t)?(this._private={cy:t,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void e.util.error("A style must have a core reference"):new e.Style(t)},e.style=e.Style,e.styfn=e.Style.prototype,e.fn.style=function(t,n){for(var r in t){var i=t[r];e.Style.prototype=i}},function(){var t=e.util.regex.number,n=e.util.regex.rgbaNoBackRefs,r=e.util.regex.hslaNoBackRefs,i=e.util.regex.hex3,o=e.util.regex.hex6,a=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(e){return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+t+"|\\w+|"+n+"|"+r+"|"+i+"|"+o+")\\s*\\,\\s*("+t+"|\\w+|"+n+"|"+r+"|"+i+"|"+o+")\\)$"};e.style.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["auto","label"]},number:{number:!0},size:{number:!0,min:0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad"},textRotation:{enums:["none","autorotate"]},polygonPointList:{numberList:!0,evenNumberList:!0,min:-1,max:1},easing:{regex:"^(?:(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\))",enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var u=e.style.types,l=e.style.properties=[{name:"text-valign",type:u.valign},{name:"text-halign",type:u.halign},{name:"color",type:u.color},{name:"label",type:u.text},{name:"text-outline-color",type:u.color},{name:"text-outline-width",type:u.size},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size},{name:"text-border-style",type:u.borderStyle},{name:"text-background-shape",type:u.textBackgroundShape},{name:"text-transform",type:u.textTransform},{name:"text-wrap",type:u.textWrap},{name:"text-max-width",type:u.size},{name:"text-events",type:u.bool},{name:"font-family",type:u.fontFamily},{name:"font-style",type:u.fontStyle},{name:"font-weight",type:u.fontWeight},{name:"font-size",type:u.size},{name:"min-zoomed-font-size",type:u.size},{name:"edge-text-rotation",type:u.textRotation},{name:"events",type:u.bool},{name:"display",type:u.display},{name:"visibility",type:u.visibility},{name:"opacity",type:u.zeroOneNumber},{name:"z-index",type:u.nonNegativeInt},{name:"overlay-padding",type:u.size},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber},{name:"shadow-blur",type:u.size},{name:"shadow-color",type:u.color},{name:"shadow-opacity",type:u.zeroOneNumber},{name:"shadow-offset-x",type:u.number},{name:"shadow-offset-y",type:u.number},{name:"text-shadow-blur",type:u.size},{name:"text-shadow-color",type:u.color},{name:"text-shadow-opacity",type:u.zeroOneNumber},{name:"text-shadow-offset-x",type:u.number},{name:"text-shadow-offset-y",type:u.number},{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing},{name:"height",type:u.nodeSize},{name:"width",type:u.nodeSize},{name:"shape",type:u.nodeShape},{name:"shape-polygon-points",type:u.polygonPointList},{name:"background-color",type:u.color},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"padding-left",type:u.size},{name:"padding-right",type:u.size},{name:"padding-top",type:u.size},{name:"padding-bottom",type:u.size},{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size},{name:"border-style",type:u.borderStyle},{name:"background-image",type:u.url},{name:"background-image-opacity",type:u.zeroOneNumber},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"position",type:u.position},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels},{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"control-point-step-size",type:u.size},{name:"control-point-distance",type:u.number},{name:"control-point-weight",type:u.zeroOneNumber},{name:"curve-style",type:u.curveStyle},{name:"haystack-radius",type:u.zeroOneNumber},{name:"source-arrow-shape",type:u.arrowShape},{name:"target-arrow-shape",type:u.arrowShape},{name:"mid-source-arrow-shape",type:u.arrowShape},{name:"mid-target-arrow-shape",type:u.arrowShape},{name:"source-arrow-color",type:u.color},{name:"target-arrow-color",type:u.color},{name:"mid-source-arrow-color",type:u.color},{name:"mid-target-arrow-color",type:u.color},{name:"source-arrow-fill",type:u.arrowFill},{name:"target-arrow-fill",type:u.arrowFill},{name:"mid-source-arrow-fill",type:u.arrowFill},{name:"mid-target-arrow-fill",type:u.arrowFill},{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],c=e.style.aliases=[{name:"content",pointsTo:"label"}];e.style.pieBackgroundN=16,l.push({name:"pie-size",type:u.bgSize});for(var h=1;h<=e.style.pieBackgroundN;h++)l.push({name:"pie-"+h+"-background-color",type:u.color}),l.push({name:"pie-"+h+"-background-size",type:u.percent}),l.push({name:"pie-"+h+"-background-opacity",type:u.zeroOneNumber});for(var h=0;h<l.length;h++){var d=l[h];l[d.name]=d}for(var h=0;h<c.length;h++){var p=c[h],f=l[p.pointsTo],g={name:p.name,alias:!0,pointsTo:f};l.push(g),l[p.name]=g}}(),e.styfn.addDefaultStylesheet=function(){var e="Helvetica",t="normal",n="normal",r="#000",i="none",o=16,a=9999;this.selector("node, edge").css({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:r,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":i,"text-wrap":"none","text-max-width":a,"text-background-color":"#000","text-background-opacity":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":e,"font-style":t,"font-weight":n,"font-size":o,"min-zoomed-font-size":0,"edge-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","compound-sizing-wrt-labels":"include","pie-size":"100%","pie-1-background-color":"black","pie-2-background-color":"black","pie-3-background-color":"black","pie-4-background-color":"black","pie-5-background-color":"black","pie-6-background-color":"black","pie-7-background-color":"black","pie-8-background-color":"black","pie-9-background-color":"black","pie-10-background-color":"black","pie-11-background-color":"black","pie-12-background-color":"black","pie-13-background-color":"black","pie-14-background-color":"black","pie-15-background-color":"black","pie-16-background-color":"black","pie-1-background-size":"0%","pie-2-background-size":"0%","pie-3-background-size":"0%","pie-4-background-size":"0%","pie-5-background-size":"0%","pie-6-background-size":"0%","pie-7-background-size":"0%","pie-8-background-size":"0%","pie-9-background-size":"0%","pie-10-background-size":"0%","pie-11-background-size":"0%","pie-12-background-size":"0%","pie-13-background-size":"0%","pie-14-background-size":"0%","pie-15-background-size":"0%","pie-16-background-size":"0%","pie-1-background-opacity":1,"pie-2-background-opacity":1,"pie-3-background-opacity":1,"pie-4-background-opacity":1,"pie-5-background-opacity":1,"pie-6-background-opacity":1,"pie-7-background-opacity":1,"pie-8-background-opacity":1,"pie-9-background-opacity":1,"pie-10-background-opacity":1,"pie-11-background-opacity":1,"pie-12-background-opacity":1,"pie-13-background-opacity":1,"pie-14-background-opacity":1,"pie-15-background-opacity":1,"pie-16-background-opacity":1,"source-arrow-shape":"none","mid-source-arrow-shape":"none","target-arrow-shape":"none","mid-target-arrow-shape":"none","source-arrow-color":"#ddd","mid-source-arrow-color":"#ddd","target-arrow-color":"#ddd","mid-target-arrow-color":"#ddd","source-arrow-fill":"filled","mid-source-arrow-fill":"filled","target-arrow-fill":"filled","mid-target-arrow-fill":"filled","line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier","haystack-radius":.8}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},e.styfn.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},e.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},e.styfn.core=function(){return this._private.coreStyle},e.styfn.parse=function(t,n,r,i){var o,a=[t,n,r,i].join("$"),s=this.propCache=this.propCache||{};return(o=s[a])||(o=s[a]=this.parseImpl(t,n,r,i)),e.util.copy(o)},e.styfn.parseImpl=function(t,n,r,i){t=e.util.camel2dash(t);var o=e.style.properties[t],a=n,s=e.style.types;if(!o)return null;if(void 0===n||null===n)return null;o.alias&&(o=o.pointsTo,t=o.name);var u=e.is.string(n);u&&(n=e.util.trim(n));var l=o.type;if(!l)return null;if(r&&(""===n||null===n))return{name:t,value:n,bypass:!0,deleteBypass:!0};var c=t.match(/pie-(\d+)-background-size/);if(e.is.fn(n))return{name:t,value:n,strValue:"fn",mapped:s.fn,bypass:r,hasPie:c};var h,d,p,f,g,v;if(!u||i);else{if((h=new RegExp(s.data.regex).exec(n))||(p=new RegExp(s.layoutData.regex).exec(n))||(g=new RegExp(s.scratch.regex).exec(n))){if(r)return!1;var y;return y=h?s.data:p?s.layoutData:s.scratch,h=h||p||g,{name:t,value:h,strValue:""+n,mapped:y,field:h[1],bypass:r,hasPie:c}}if((d=new RegExp(s.mapData.regex).exec(n))||(f=new RegExp(s.mapLayoutData.regex).exec(n))||(v=new RegExp(s.mapScratch.regex).exec(n))){if(r)return!1;var y;if(y=d?s.mapData:f?s.mapLayoutData:s.mapScratch,d=d||f||v,!l.color&&!l.number)return!1;var m=this.parse(t,d[4]);if(!m||m.mapped)return!1;var b=this.parse(t,d[5]);if(!b||b.mapped)return!1;if(m.value===b.value)return!1;if(l.color){var w=m.value,x=b.value,_=!(w[0]!==x[0]||w[1]!==x[1]||w[2]!==x[2]||w[3]!==x[3]&&(null!=w[3]&&1!==w[3]||null!=x[3]&&1!==x[3]));if(_)return!1}return{name:t,value:d,strValue:""+n,mapped:y,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:m.value,valueMax:b.value,bypass:r,hasPie:c}}}var E=function(){for(var e=0;e<l.enums.length;e++){var i=l.enums[e];if(i===n)return{name:t,value:n,strValue:""+n,bypass:r}}return null};if(l.number){var k,S="px";if(l.units&&(k=l.units),l.implicitUnits&&(S=l.implicitUnits),!l.unitless)if(u){var T="px|em"+(l.allowPercent?"|\\%":"");k&&(T=k);var C=n.match("^("+e.util.regex.number+")("+T+")?$");C&&(n=C[1],k=C[2]||S)}else(!k||l.implicitUnits)&&(k=S);if(n=parseFloat(n),isNaN(n)&&void 0===l.enums)return null;if(isNaN(n)&&void 0!==l.enums)return n=a,E();if(l.integer&&!e.is.integer(n))return null;if(void 0!==l.min&&n<l.min||void 0!==l.max&&n>l.max)return null;var N={name:t,value:n,strValue:""+n+(k?k:""),units:k,bypass:r,hasPie:c&&null!=n&&0!==n&&""!==n};return l.unitless||"px"!==k&&"em"!==k||(N.pxValue="px"!==k&&k?this.getEmSizeInPixels()*n:n),("ms"===k||"s"===k)&&(N.msValue="ms"===k?n:1e3*n),N}if(l.propList){var A=[],P=""+n;if("none"===P);else{for(var D=P.split(","),$=0;$<D.length;$++){var M=e.util.trim(D[$]);e.style.properties[M]&&A.push(M)}if(0===A.length)return null}return{name:t,value:A,strValue:0===A.length?"none":A.join(", "),bypass:r}}if(l.numberList){var I=n.split(","),O=[];if(l.evenNumberList&&I.length%2!==0)return null;for(var $=0;$<I.length;$++){var L=parseFloat(I[$].trim());if(isNaN(L))return null;if(void 0!==l.min&&L<l.min)return null;if(void 0!==l.max&&L>l.max)return null;O.push(L)}return{name:t,value:O,strValue:O.join(", "),bypass:r}}if(l.color){var j=e.util.color2tuple(n);return j?{name:t,value:j,strValue:""+n,bypass:r}:null}if(l.regex){var R=new RegExp(l.regex),q=R.exec(n);return q?{name:t,value:q,strValue:""+n,bypass:r}:l.enums?E():null}return l.string?{name:t,value:n,strValue:""+n,bypass:r}:l.enums?E():null},e.styfn.selector=function(t){var n="core"===t?null:new e.Selector(t),r=this.length++;return this[r]={selector:n,properties:[],mappedProperties:[],index:r},this},e.styfn.css=function(){var t=arguments;switch(t.length){case 1:for(var n=t[0],r=0;r<e.style.properties.length;r++){var i=e.style.properties[r],o=n[i.name];void 0===o&&(o=n[e.util.dash2camel(i.name)]),void 0!==o&&this.cssRule(i.name,o)}break;case 2:this.cssRule(t[0],t[1])}return this},e.styfn.style=e.styfn.css,e.styfn.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.hasPie&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this}}(cytoscape),function(e){"use strict";e.styfn.apply=function(e){var t=this;t._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var n=0;n<e.length;n++){var r=e[n],i=t.getContextMeta(r),o=t.getContextStyle(i),a=t.applyContextStyle(i,o,r);t.updateTransitions(r,a.diffProps),t.updateStyleHints(r)}t._private.newStyle=!1},e.styfn.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=e+"-"+t,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c="t"===e[u],h="t"===t[u],d=c!==h,p=l.mappedProperties.length>0;if(d||p){var f;d&&p?f=l.properties:d?f=l.properties:p&&(f=l.mappedProperties);for(var g=0;g<f.length;g++){for(var v=f[g],y=v.name,m=!1,b=u+1;b<n.length;b++){var w=n[b],x="t"===t[b];if(x&&(m=null!=w.properties[v.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return r[i]=a,a},e.styfn.getContextMeta=function(e){var t,n=this,r="",i=e._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var o=0;o<n.length;o++){var a=n[o],s=a.selector&&a.selector.matches(e);r+=s?"t":"f"}return t=n.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t}},e.styfn.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var i={_private:{key:t}},o=0;o<n.length;o++){var a=n[o],s="t"===t[o];if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u],c=i[l.name]=l;c.context=a}}return r[t]=i,i},e.styfn.applyContextStyle=function(e,t,n){for(var r=this,i=e.diffPropNames,o={},a=0;a<i.length;a++){var s=i[a],u=t[s],l=n._private.style[s];if(u&&l!==u){var c=o[s]={prev:l};r.applyParsedProperty(n,u),c.next=n._private.style[s],c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}},e.styfn.updateStyleHints=function(t){var n=t._private,r=this,i=n.style,o=!1;if("nodes"===n.group&&r._private.hasPie)for(var a=1;a<=e.style.pieBackgroundN;a++){var s=n.style["pie-"+a+"-background-size"].value;if(s>0){o=!0;break}}n.hasPie=o;var u=i["text-transform"].strValue,l=i.label.strValue,c=i["font-style"].strValue,s=i["font-size"].pxValue+"px",h=i["font-family"].strValue,d=i["font-weight"].strValue,p=i["text-valign"].strValue,f=i["text-valign"].strValue,g=i["text-outline-width"].pxValue,v=i["text-wrap"].strValue,y=i["text-max-width"].pxValue;n.labelKey=c+"$"+s+"$"+h+"$"+d+"$"+l+"$"+u+"$"+p+"$"+f+"$"+g+"$"+v+"$"+y,n.fontKey=c+"$"+d+"$"+s+"$"+h;var m=i.width.pxValue,b=i.height.pxValue,w=i["border-width"].pxValue;if(n.boundingBoxKey=m+"$"+b+"$"+w,"edges"===t._private.group){var x=i["control-point-step-size"].pxValue,_=i["control-point-distance"]?i["control-point-distance"].pxValue:void 0,E=i["control-point-weight"].value,k=i["curve-style"].strValue;n.boundingBoxKey+="$"+x+"$"+_+"$"+E+"$"+k}n.styleKey=Date.now()},e.styfn.applyParsedProperty=function(t,n){var r,i,o=n,a=t._private.style,s=e.style.types,u=e.style.properties[o.name].type,l=o.bypass,c=a[o.name],h=c&&c.bypass,d=t._private;if(("height"===n.name||"width"===n.name)&&t.isNode()){if("auto"===n.value&&!t.isParent())return!1;"auto"!==n.value&&t.isParent()&&(o=n=this.parse(n.name,"auto",l))}if(l&&o.deleteBypass){var p=a[o.name];return p?p.bypass&&p.bypassed?(a[o.name]=p.bypassed,!0):!1:!0}var f=function(){e.util.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+t.id()+"` for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case s.mapData:case s.mapLayoutData:case s.mapScratch:var r,g=o.mapped===s.mapLayoutData,v=o.mapped===s.mapScratch,y=o.field.split(".");r=v||g?d.scratch:d.data;for(var m=0;m<y.length&&r;m++){var b=y[m];r=r[b]}var w;if(w=e.is.number(r)?(r-o.fieldMin)/(o.fieldMax-o.fieldMin):0,0>w?w=0:w>1&&(w=1),u.color){var x=o.valueMin[0],_=o.valueMax[0],E=o.valueMin[1],k=o.valueMax[1],S=o.valueMin[2],T=o.valueMax[2],C=null==o.valueMin[3]?1:o.valueMin[3],N=null==o.valueMax[3]?1:o.valueMax[3],A=[Math.round(x+(_-x)*w),Math.round(E+(k-E)*w),Math.round(S+(T-S)*w),Math.round(C+(N-C)*w)];i={bypass:o.bypass,name:o.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else{if(!u.number)return!1;var P=o.valueMin+(o.valueMax-o.valueMin)*w;i=this.parse(o.name,P,o.bypass,!0)}i||(i=this.parse(o.name,c.strValue,o.bypass,!0)),i||f(),i.mapping=o,o=i;break;case s.data:case s.layoutData:case s.scratch:var r,g=o.mapped===s.layoutData,v=o.mapped===s.scratch,y=o.field.split(".");if(r=v||g?d.scratch:d.data)for(var m=0;m<y.length;m++){var b=y[m];r=r[b]}if(i=this.parse(o.name,r,o.bypass,!0),!i){var D=c?c.strValue:"";i=this.parse(o.name,D,o.bypass,!0)}i||f(),i.mapping=o,o=i;break;case s.fn:var $=o.value,M=$(t);i=this.parse(o.name,M,o.bypass,!0),i.mapping=o,o=i;break;case void 0:break;default:return!1}return l?(o.bypassed=h?c.bypassed:c,a[o.name]=o):h?c.bypassed=o:a[o.name]=o,!0},e.styfn.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},e.styfn.updateMappers=function(t){for(var n=0;n<t.length;n++){for(var r=t[n],i=r._private.style,o=0;o<e.style.properties.length;o++){var a=e.style.properties[o],s=i[a.name];if(s&&s.mapping){var u=s.mapping;this.applyParsedProperty(r,u)}}this.updateStyleHints(r)}},e.styfn.updateTransitions=function(t,n,r){var i=this,o=t._private,a=o.style,s=a["transition-property"].value,u=a["transition-duration"].msValue,l=a["transition-delay"].msValue,c={};if(s.length>0&&u>0){for(var h=!1,d=0;d<s.length;d++){var p=s[d],f=a[p],g=n[p];if(g){var v,y=g.prev,m=y,b=null!=g.next?g.next:f,w=!1,x=1e-6;m&&(e.is.number(m.pxValue)&&e.is.number(b.pxValue)?(w=b.pxValue-m.pxValue,v=m.pxValue+x*w):e.is.number(m.value)&&e.is.number(b.value)?(w=b.value-m.value,v=m.value+x*w):e.is.array(m.value)&&e.is.array(b.value)&&(w=m.value[0]!==b.value[0]||m.value[1]!==b.value[1]||m.value[2]!==b.value[2],v=m.strValue),w&&(c[p]=b.strValue,this.applyBypass(t,p,v),h=!0))}}if(!h)return;o.transitioning=!0,t.stop(),l>0&&t.delay(l),t.animate({css:c},{duration:u,easing:a["transition-timing-function"].value,queue:!1,complete:function(){r||i.removeBypasses(t,s),o.transitioning=!1}})}else o.transitioning&&(t.stop(),this.removeBypasses(t,s),o.transitioning=!1)}}(cytoscape),function(e){"use strict";e.styfn.applyBypass=function(t,n,r,i){var o=[],a=!0;if("*"===n||"**"===n){if(void 0!==r)for(var s=0;s<e.style.properties.length;s++){var u=e.style.properties[s],n=u.name,l=this.parse(n,r,!0);l&&o.push(l)}}else if(e.is.string(n)){var l=this.parse(n,r,!0);l&&o.push(l)}else{if(!e.is.plainObject(n))return!1;var c=n;i=r;for(var s=0;s<e.style.properties.length;s++){var u=e.style.properties[s],n=u.name,r=c[n];if(void 0===r&&(r=c[e.util.dash2camel(n)]),void 0!==r){var l=this.parse(n,r,!0);l&&o.push(l)}}}if(0===o.length)return!1;for(var h=!1,s=0;s<t.length;s++){for(var d,p=t[s],f=p._private.style,g={},v=0;v<o.length;v++){var u=o[v];if(i){var y=f[u.name];d=g[u.name]={prev:y}}h=this.applyParsedProperty(p,u)||h,i&&(d.next=f[u.name])}i&&this.updateTransitions(p,g,a)}return h},e.styfn.overrideBypass=function(t,n,r){for(var i=0;i<t.length;i++){var o=t[i],a=o._private.style[e.util.camel2dash(n)];a.bypass?(a.value=r,a.pxValue=r):this.applyBypass(o,n,r)}},e.styfn.removeAllBypasses=function(t,n){for(var r=!0,i=0;i<t.length;i++){for(var o=t[i],a={},s=o._private.style,u=0;u<e.style.properties.length;u++){var l=e.style.properties[u],c=l.name,h="",d=this.parse(c,h,!0),p=s[l.name],f=a[l.name]={prev:p};this.applyParsedProperty(o,d),f.next=s[l.name]}n&&this.updateTransitions(o,a,r)}},e.styfn.removeBypasses=function(t,n,r){for(var i=!0,o=0;o<t.length;o++){for(var a=t[o],s={},u=a._private.style,l=0;l<n.length;l++){var c=n[l],h=e.style.properties[c],d="",p=this.parse(c,d,!0),f=u[h.name],g=s[h.name]={prev:f};this.applyParsedProperty(a,p),g.next=u[h.name]}r&&this.updateTransitions(a,s,i)}}}(cytoscape),function(e,t){"use strict";e.styfn.getEmSizeInPixels=function(){var e=this._private.cy,n=e.container();if(t&&n&&t.getComputedStyle){var r=t.getComputedStyle(n).getPropertyValue("font-size"),i=parseFloat(r);return i}return 1},e.styfn.containerCss=function(e){var n=this._private.cy,r=n.container();return t&&r&&t.getComputedStyle?t.getComputedStyle(r).getPropertyValue(e):void 0},e.styfn.containerProperty=function(e){var t=this.containerCss(e),n=this.parse(e,t);return n},e.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);return t?t.strValue:void 0}}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.styfn.getRenderedStyle=function(t){var t=t[0];if(t){for(var n={},r=t._private.style,i=this._private.cy,o=i.zoom(),a=0;a<e.style.properties.length;a++){var s=e.style.properties[a],u=r[s.name];if(u){var l=u.unitless?u.strValue:u.pxValue*o+"px";n[s.name]=l,n[e.util.dash2camel(s.name)]=l}}return n}},e.styfn.getRawStyle=function(t){var t=t[0];if(t){
for(var n={},r=t._private.style,i=0;i<e.style.properties.length;i++){var o=e.style.properties[i],a=r[o.name];a&&(n[o.name]=a.strValue,n[e.util.dash2camel(o.name)]=a.strValue)}return n}},e.styfn.getValueStyle=function(t){var n,r={},i=e.is.element(t);if(n=i?t._private.style:t)for(var o=0;o<e.style.properties.length;o++){var a=e.style.properties[o],s=n[a.name]||n[e.util.dash2camel(a.name)];void 0!==s&&(s=e.is.plainObject(s)?this.parse(a.name,s.strValue):this.parse(a.name,s)),s&&(r[a.name]=s,r[e.util.dash2camel(a.name)]=s)}return r},e.styfn.getPropsList=function(t){var n=[],r=t,i=e.style.properties;if(r)for(var o in r){var a=r[o],s=i[o]||i[e.util.camel2dash(o)],u=this.parse(s.name,a);n.push(u)}return n}}(cytoscape),function(e){"use strict";e.style.applyFromJson=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.selector,o=r.style||r.css;e.selector(i);for(var a in o){var s=o[a];e.css(a,s)}}return e},e.style.fromJson=function(t,n){var r=new e.Style(t);return e.style.applyFromJson(r,n),r},e.styfn.fromJson=function(t){var n=this;return n.resetToDefault(),e.style.applyFromJson(n,t),n},e.styfn.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:o})}return e}}(cytoscape),function(e){"use strict";e.style.applyFromString=function(t,n){function r(){u=u.length>o.length?u.substr(o.length):""}function i(){a=a.length>s.length?a.substr(s.length):""}var o,a,s,u=""+n;for(u=u.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var l=u.match(/^\s*$/);if(l)break;var c=u.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){e.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+u);break}o=c[0];var h=c[1];if("core"!==h){var d=new e.Selector(h);if(d._private.invalid){e.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),r();continue}}var p=c[2],f=!1;a=p;for(var g=[];;){var l=a.match(/^\s*$/);if(l)break;var v=a.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!v){e.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),f=!0;break}s=v[0];var y=v[1],m=v[2],b=e.style.properties[y];if(b){var w=t.parse(y,m);w?(g.push({name:y,val:m}),i()):(e.util.error("Skipping property: Invalid property definition in: "+s),i())}else e.util.error("Skipping property: Invalid property name in: "+s),i()}if(f){r();break}t.selector(h);for(var x=0;x<g.length;x++){var b=g[x];t.css(b.name,b.val)}r()}return t},e.style.fromString=function(t,n){var r=new e.Style(t);return e.style.applyFromString(r,n),r},e.styfn.fromString=function(t){var n=this;return n.resetToDefault(),e.style.applyFromString(n,t),n}}(cytoscape),function(e){"use strict";e.stylesheet=e.Stylesheet=function(){return this instanceof e.Stylesheet?void(this.length=0):new e.Stylesheet},e.sheetfn=e.Stylesheet.prototype,e.sheetfn.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},e.sheetfn.css=function(t,n){var r=this.length-1;if(e.is.string(t))this[r].properties.push({name:t,value:n});else if(e.is.plainObject(t))for(var i=t,o=0;o<e.style.properties.length;o++){var a=e.style.properties[o],s=i[a.name];if(void 0===s&&(s=i[e.util.dash2camel(a.name)]),void 0!==s){var t=a.name,n=s;this[r].properties.push({name:t,value:n})}}return this},e.sheetfn.style=e.sheetfn.css,e.sheetfn.generateStyle=function(t){for(var n=new e.Style(t),r=0;r<this.length;r++){var i=this[r],o=i.selector,a=i.properties;n.selector(o);for(var s=0;s<a.length;s++){var u=a[s];n.css(u.name,u.value)}}return n}}(cytoscape),function(e,t){"use strict";e.Thread=function(t){return this instanceof e.Thread?(this._private={requires:[],files:[],queue:null,pass:[]},void(t&&this.run(t))):new e.Thread(t)},e.thread=e.Thread,e.thdfn=e.Thread.prototype,e.fn.thread=function(t,n){for(var r in t){var i=t[r];e.Thread.prototype[r]=i}};var n=function(t){var n=e.is.fn(t)?t.toString():'JSON.parse("'+JSON.stringify(t)+'")';return n},r=function(t){var i,a;e.is.object(t)&&t.fn?(i=o(t.fn,t.name),a=t.name,t=t.fn):e.is.fn(t)?(i=t.toString(),a=t.name):e.is.string(t)?i=t:e.is.object(t)&&(i=t.proto?"":t.name+" = {};",a=t.name,t=t.obj),i+="\n";var s=function(e,t){if(e.prototype){var n=!1;for(var o in e.prototype){n=!0;break}n&&(i+=r({name:t,obj:e,proto:!0},e))}};if(t.prototype&&null!=a)for(var u in t.prototype){var l="",c=t.prototype[u],h=n(c),d=a+".prototype."+u;l+=d+" = "+h+";\n",l&&(i+=l),s(c,d)}if(!e.is.string(t))for(var u in t){var p="";if(t.hasOwnProperty(u)){var c=t[u],h=n(c),d=a+'["'+u+'"]';p+=d+" = "+h+";\n"}p&&(i+=p),s(c,d)}return i},i=function(t){return e.is.string(t)&&t.match(/\.js$/)};e.fn.thread({require:function(t,n){return i(t)?(this._private.files.push(t),this):(n&&(e.is.fn(t)?(n=n||t.name,t={name:n,fn:t}):t={name:n,obj:t}),this._private.requires.push(t),this)},pass:function(e){return this._private.pass.push(e),this},run:function(n,i){var o=this,a=this._private;if(i=i||a.pass.shift(),a.stopped)return void e.util.error("Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.");if(a.running)return a.queue=a.queue.then(function(){return o.run(n,i)});var s=null!=t,u="undefined"!=typeof module;o.trigger("run");var l=new e.Promise(function(l,c){a.running=!0;var h=a.ran,d=e.is.string(n)?n:n.toString(),p="\n"+a.requires.map(function(e){return r(e)}).concat(a.files.map(function(e){if(s){var n=function(e){return e.match(/^\.\//)||e.match(/^\.\./)?t.location.origin+t.location.pathname+e:e.match(/^\//)?t.location.origin+"/"+e:e};return'importScripts("'+n(e)+'");'}return u?'eval( require("fs").readFileSync("'+e+'", { encoding: "utf8" }) );':void 0})).concat(["( function(){","var ret = ("+d+")("+JSON.stringify(i)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(a.requires=[],a.files=[],s){var f,g;if(!h){var v=p+"";p=["function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),p+=v,f=new Blob([p],{type:"application/javascript"}),g=t.URL.createObjectURL(f)}var y=a.webworker=a.webworker||new Worker(g);h&&y.postMessage({$$eval:p});var m;y.addEventListener("message",m=function(t){var n=e.is.object(t)&&e.is.object(t.data);n&&"$$resolve"in t.data?(y.removeEventListener("message",m),l(t.data.$$resolve)):n&&"$$reject"in t.data?(y.removeEventListener("message",m),c(t.data.$$reject)):o.trigger(new e.Event(t,{type:"message",message:t.data}))},!1),h||y.postMessage("$$start")}else if(u){var m,b=require("path"),w=require("child_process"),x=a.child=a.child||w.fork(b.join(__dirname,"thread-node-fork"));x.on("message",m=function(t){e.is.object(t)&&"$$resolve"in t?(x.removeListener("message",m),l(t.$$resolve)):e.is.object(t)&&"$$reject"in t?(x.removeListener("message",m),c(t.$$reject)):o.trigger(new e.Event({},{type:"message",message:t}))}),x.send({$$eval:p})}else e.error("Tried to create thread but no underlying tech found!")}).then(function(e){return a.running=!1,a.ran=!0,o.trigger("ran"),e});return null==a.queue&&(a.queue=l),l},message:function(e){var t=this._private;return t.webworker&&t.webworker.postMessage(e),t.child&&t.child.send(e),this},stop:function(){var e=this._private;return e.webworker&&e.webworker.terminate(),e.child&&e.child.kill(),e.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var o=function(e,t){var n=e.toString();return n=n.replace(/function.*\(/,"function "+t+"(")},a=function(e){return e=e||{},function(t,n){var r=o(t,"_$_$_"+e.name);return this.require(r),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+e.name+"( _$_$_"+e.name+(arguments.length>1?", "+JSON.stringify(n):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};e.fn.thread({reduce:a({name:"reduce"}),reduceRight:a({name:"reduceRight"}),map:a({name:"map"})});var s=e.thdfn;s.promise=s.run,s.terminate=s.halt=s.stop,s.include=s.require,e.worker=e.Worker=e.Thread,e.fn.thread({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.define.eventAliasesOn(e.thdfn)}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";e.Fabric=function(t){if(!(this instanceof e.Fabric))return new e.Fabric(t);this._private={pass:[]};var n=4;e.is.number(t),t="undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency?navigator.hardwareConcurrency:"undefined"!=typeof module?require("os").cpus().length:n;for(var r=0;t>r;r++)this[r]=e.Thread();this.length=t},e.fabric=e.Fabric,e.fabfn=e.Fabric.prototype,e.fn.fabric=function(t,n){for(var r in t){var i=t[r];e.Fabric.prototype[r]=i}},e.fn.fabric({require:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.require(e,t)}return this},random:function(){var e=Math.round((this.length-1)*Math.random()),t=this[e];return t},run:function(e){var t=this._private.pass.shift();return this.random().pass(t).run(e)},message:function(e){return this.random().message(e)},broadcast:function(e){for(var t=0;t<this.length;t++){var n=this[t];n.message(e)}return this},stop:function(){for(var e=0;e<this.length;e++){var t=this[e];t.stop()}return this},pass:function(t){var n=this._private.pass;return e.is.array(t)?n.push(t):e.util.error("Only arrays or collections may be used with fabric.pass()"),this},spreadSize:function(){var e=Math.ceil(this._private.pass[0].length/this.length);return e=Math.max(1,e)},spread:function(t){for(var n=this,r=n._private,i=n.spreadSize(),o=r.pass.shift().concat([]),a=[],s=0;s<this.length;s++){var u=this[s],l=o.splice(0,i),c=u.pass(l).run(t);a.push(c);var h=0===o.length;if(h)break}return e.Promise.all(a).then(function(e){for(var t=[],n=0,r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++){var a=i[o];t[n++]=a}return t})},map:function(e){var t=this;return t.require(e,"_$_$_fabmap"),t.spread(function(e){var t=[],n=resolve;resolve=function(e){t.push(e)};for(var r=0;r<e.length;r++){var i=t.length,o=_$_$_fabmap(e[r]),a=i===t.length;a&&t.push(o)}return resolve=n,t})},filter:function(e){var t=this._private,n=t.pass[0];return this.map(e).then(function(e){for(var t=[],r=0;r<n.length;r++){var i=n[r],o=e[r];o&&t.push(i)}return t})},sort:function(e){var t=this,n=this._private.pass[0].length,r=this.spreadSize();return e=e||function(e,t){return t>e?-1:e>t?1:0},t.require(e,"_$_$_cmp"),t.spread(function(e){var t=e.sort(_$_$_cmp);resolve(t)}).then(function(t){for(var i=function(r,i,o){i=Math.min(i,n),o=Math.min(o,n);for(var a=r,s=i,u=[],l=a;o>l;l++){var c=t[r],h=t[i];s>r&&(i>=o||e(c,h)<=0)?(u.push(c),r++):(u.push(h),i++)}for(var l=0;l<u.length;l++){var d=a+l;t[d]=u[l]}},o=r;n>o;o*=2)for(var a=0;n>a;a+=2*o)i(a,a+o,a+2*o);return t})}});var n=function(e){return e=e||{},function(t,n){var r=this._private.pass.shift();return this.random().pass(r)[e.threadFn](t,n)}};e.fn.fabric({randomMap:n({threadFn:"map"}),reduce:n({threadFn:"reduce"}),reduceRight:n({threadFn:"reduceRight"})});var r=e.fabfn;r.promise=r.run,r.terminate=r.halt=r.stop,r.include=r.require,e.fn.fabric({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.define.eventAliasesOn(e.fabfn)}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";var n={},r=e.util.copy(n);e.defaults=function(t){n=e.util.extend({},r,t)},e.fn.core=function(t,n){for(var r in t){var i=t[r];e.Core.prototype[r]=i}},e.Core=function(r){if(!(this instanceof e.Core))return new e.Core(r);var i=this;r=e.util.extend({},n,r);var o=r.container,a=o?o._cyreg:null;if(a=a||{},a&&a.cy){if(o)for(;o.firstChild;)o.removeChild(o.firstChild);a.cy.notify({type:"destroy"}),a={}}var s=a.readies=a.readies||[];o&&(o._cyreg=a),a.cy=i;var u=void 0!==t&&void 0!==o&&!r.headless,l=r;l.layout=e.util.extend({name:u?"grid":"null"},l.layout),l.renderer=e.util.extend({name:u?"canvas":"null"},l.renderer);var c=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},h=this._private={container:l.container,ready:!1,initrender:!1,options:l,elements:[],id2index:{},listeners:[],onRenders:[],aniEles:e.Collection(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,l.zoomingEnabled),userZoomingEnabled:c(!0,l.userZoomingEnabled),panningEnabled:c(!0,l.panningEnabled),userPanningEnabled:c(!0,l.userPanningEnabled),boxSelectionEnabled:c(!0,l.boxSelectionEnabled),autolock:c(!1,l.autolock,l.autolockNodes),autoungrabify:c(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:c(!1,l.autounselectify),styleEnabled:void 0===l.styleEnabled?u:l.styleEnabled,zoom:e.is.number(l.zoom)?l.zoom:1,pan:{x:e.is.plainObject(l.pan)&&e.is.number(l.pan.x)?l.pan.x:0,y:e.is.plainObject(l.pan)&&e.is.number(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},d=l.selectionType;h.selectionType=void 0===d||"additive"!==d&&"single"!==d?"single":d,e.is.number(l.minZoom)&&e.is.number(l.maxZoom)&&l.minZoom<l.maxZoom?(h.minZoom=l.minZoom,h.maxZoom=l.maxZoom):e.is.number(l.minZoom)&&void 0===l.maxZoom?h.minZoom=l.minZoom:e.is.number(l.maxZoom)&&void 0===l.minZoom&&(h.maxZoom=l.maxZoom);var p=function(t){for(var n=!1,r=0;r<f.length;r++){var i=f[r];if(e.is.promise(i)){n=!0;break}}return n?e.Promise.all(f).then(t):void t(f)},f=[l.style,l.elements];p(function(t){var n=t[0],r=t[1];h.styleEnabled&&i.setStyle(n),i.initRenderer(e.util.extend({hideEdgesOnViewport:l.hideEdgesOnViewport,hideLabelsOnViewport:l.hideLabelsOnViewport,textureOnViewport:l.textureOnViewport,wheelSensitivity:e.is.number(l.wheelSensitivity)&&l.wheelSensitivity>0?l.wheelSensitivity:1,motionBlur:void 0===l.motionBlur?!0:l.motionBlur,motionBlurOpacity:void 0===l.motionBlurOpacity?.05:l.motionBlurOpacity,pixelRatio:e.is.number(l.pixelRatio)&&l.pixelRatio>0?l.pixelRatio:"auto"===l.pixelRatio?void 0:1,desktopTapThreshold:void 0===l.desktopTapThreshold?4:l.desktopTapThreshold,touchTapThreshold:void 0===l.touchTapThreshold?8:l.touchTapThreshold},l.renderer)),l.initrender&&(i.on("initrender",l.initrender),i.on("initrender",function(){i._private.initrender=!0})),i.load(r,function(){i.startAnimationLoop(),i._private.ready=!0,e.is.fn(l.ready)&&i.on("ready",l.ready);for(var t=0;t<s.length;t++){var n=s[t];i.on("ready",n)}a&&(a.readies=[]),i.trigger("ready")},l.done)})},e.corefn=e.Core.prototype,e.fn.core({isReady:function(){return this._private.ready},ready:function(e){this.isReady()?this.trigger("ready",[],e):this.on("ready",e)},initrender:function(){return this._private.initrender},destroy:function(){var e=this;e.stopAnimationLoop(),e.notify({type:"destroy"});var t=e.container(),n=t.parentNode;if(n)try{n.removeChild(t)}catch(r){}return e},getElementById:function(t){var n=this._private.id2index[t];return void 0!==n?this._private.elements[n]:new e.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){for(var t=this._private.elements,n=this._private.id2index,r=0;r<e.length;r++){var i=e[r],o=i._private.data.id,a=n[o],s=void 0!==a;s||(a=t.length,t.push(i),n[o]=a,i._private.index=a)}return this},removeFromPool:function(e){for(var t=this._private.elements,n=this._private.id2index,r=0;r<e.length;r++){var i=e[r],o=i._private.data.id,a=n[o],s=void 0!==a;if(s){this._private.id2index[o]=void 0,t.splice(a,1);for(var u=a;u<t.length;u++){var l=t[u]._private.data.id;n[l]--,t[u]._private.index--}}}},container:function(){return this._private.container},options:function(){return e.util.copy(this._private.options)},json:function(e){var t={},n=this;return t.elements={},n.elements().each(function(e,n){var r=n.group();t.elements[r]||(t.elements[r]=[]),t.elements[r].push(n.json())}),this._private.styleEnabled&&(t.style=n.style().json()),t.zoomingEnabled=n._private.zoomingEnabled,t.userZoomingEnabled=n._private.userZoomingEnabled,t.zoom=n._private.zoom,t.minZoom=n._private.minZoom,t.maxZoom=n._private.maxZoom,t.panningEnabled=n._private.panningEnabled,t.userPanningEnabled=n._private.userPanningEnabled,t.pan=n._private.pan,t.boxSelectionEnabled=n._private.boxSelectionEnabled,t.layout=n._private.options.layout,t.renderer=n._private.options.renderer,t.hideEdgesOnViewport=n._private.options.hideEdgesOnViewport,t.hideLabelsOnViewport=n._private.options.hideLabelsOnViewport,t.textureOnViewport=n._private.options.textureOnViewport,t.wheelSensitivity=n._private.options.wheelSensitivity,t.motionBlur=n._private.options.motionBlur,t},defer:function(e){var t=this,n=t._private,r=n.deferredExecQueue;r.push(e),n.deferredTimeout||(n.deferredTimeout=setTimeout(function(){for(;r.length>0;)r.shift()();n.deferredTimeout=null},0))}})}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";function n(e){var t=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?n:e;setTimeout(t,9,e)}e.fn.core({add:function(t){var n,r=this;if(e.is.elementOrCollection(t)){var i=t;if(i._private.cy===r)n=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}n=new e.Collection(r,o)}}else if(e.is.array(t)){var o=t;n=new e.Collection(r,o)}else if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){for(var u=t,o=[],l=["nodes","edges"],a=0,c=l.length;c>a;a++){var h=l[a],d=u[h];if(e.is.array(d))for(var p=0,f=d.length;f>p;p++){var g=d[p];g.group=h,o.push(g)}}n=new e.Collection(r,o)}else{var g=t;n=new e.Element(r,g).collection()}return n},remove:function(t){if(e.is.elementOrCollection(t))t=t;else if(e.is.string(t)){var n=t;t=this.$(n)}return t.remove()},load:function(r,i,o){function a(){s.one("layoutready",function(e){s.notifications(!0),s.trigger(e),s.notify({type:"load",collection:s.elements()}),s.one("load",i),s.trigger("load")}).one("layoutstop",function(){s.one("done",o),s.trigger("done")});var t=e.util.extend({},s._private.options.layout);t.eles=s.$(),s.layout(t)}var s=this;s.notifications(!1);var u=s.elements();return u.length>0&&u.remove(),null!=r&&(e.is.plainObject(r)||e.is.array(r))&&s.add(r),t?n(a):a(),this}})}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";e.fn.core({animated:e.define.animated(),clearQueue:e.define.clearQueue(),delay:e.define.delay(),delayPromise:e.define.delayPromise(),animate:e.define.animate(),animatePromise:e.define.animatePromise(),stop:e.define.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function n(){c._private.animationsRunning&&e.util.requestAnimationFrame(function(e){r(e),n()})}function r(t){function n(n,r){var u=n._private.animation.current,l=n._private.animation.queue,c=!1;if(0===u.length){var h=l.length>0?l.shift():null;h&&(h.callTime=t,u.push(h))}for(var d=[],p=u.length-1;p>=0;p--){var f=u[p];f.started||(i(n,f),s=!0),o(n,f,t,r),f.done&&(d.push(f),u.splice(p,1)),c=!0}for(var p=0;p<d.length;p++){var f=d[p],g=f.params.complete;e.is.fn(g)&&g.apply(n,[t])}return r||0!==u.length||0!==l.length||a.push(n),c}t=+new Date;for(var r=c._private.aniEles,a=[],s=!1,u=0;u<r.length;u++){var l=r[u];n(l)}var h=n(c,!0);if(r.length>0||h){var d;if(r.length>0){var p=r.updateCompoundBounds();d=p.length>0?r.add(p):r}c.notify({type:s?"style":"draw",collection:d})}r.unmerge(a)}function i(t,n){var r=e.is.core(t),i=!r,o=t,a=c._private.style;if(i)var s=o._private.position,u={x:s.x,y:s.y},l=a.getValueStyle(o);if(r)var h=c._private.pan,d={x:h.x,y:h.y},p=c._private.zoom;n.started=!0,n.startTime=Date.now(),n.startPosition=u,n.startStyle=l,n.startPan=d,n.startZoom=p}function o(t,n,r,i){var o=c._private.style,s=n.properties,u=n.params,h=n.startTime,p=!i,f=u.easing,g=t._private;if(!u.easingImpl)if(null==f)u.easingImpl=d.linear;else{var v;if(e.is.string(f)){var y=o.parse("transition-timing-function",f);v=y.value}else v=f;var m,b;e.is.string(v)?(m=v,b=[]):(m=v[1],b=v.slice(2).map(function(e){return+e})),u.easingImpl=b.length>0?d[m].apply(null,b):d[m]}var w,x=u.easingImpl;if(w=0===n.duration?1:(r-h)/n.duration,0>w?w=0:w>1&&(w=1),null==s.delay){var _=n.startPosition,E=s.position,k=g.position;E&&p&&(a(_.x,E.x)&&(k.x=l(_.x,E.x,w,x)),a(_.y,E.y)&&(k.y=l(_.y,E.y,w,x)));var S=n.startPan,T=s.pan,C=g.pan,N=null!=T&&i;N&&(a(S.x,T.x)&&(C.x=l(S.x,T.x,w,x)),a(S.y,T.y)&&(C.y=l(S.y,T.y,w,x)),t.trigger("pan"));var A=n.startZoom,P=s.zoom,D=null!=P&&i;D&&(a(A,P)&&(g.zoom=l(A,P,w,x)),t.trigger("zoom")),(N||D)&&t.trigger("viewport");var $=s.style||s.css;if($&&p)for(var M=0;M<$.length;M++){var m=$[M].name,I=$[M],O=I,L=n.startStyle[m],j=l(L,O,w,x);o.overrideBypass(t,m,j)}}return e.is.fn(u.step)&&u.step.apply(t,[r]),w>=1&&(n.done=!0),w}function a(t,n){return null==t||null==n?!1:e.is.number(t)&&e.is.number(n)?!0:t&&n?!0:!1}function s(e,t,n){var r=1-n,i=n*n;return 3*r*r*n*e+3*r*i*t+i*n}function u(e,t){return function(n,r,i){return n+(r-n)*s(e,t,i)}}function l(t,n,r,i){0>r?r=0:r>1&&(r=1);var o,a;if(o=null!=t.pxValue||null!=t.value?null!=t.pxValue?t.pxValue:t.value:t,a=null!=n.pxValue||null!=n.value?null!=n.pxValue?n.pxValue:n.value:n,e.is.number(o)&&e.is.number(a))return i(o,a,r);if(e.is.number(o[0])&&e.is.number(a[0])){var s=o,u=a,l=function(e,t){return Math.round(i(e,t,r))},c=l(s[0],u[0]),h=l(s[1],u[1]),d=l(s[2],u[2]);return[c,h,d]}return void 0}var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()&&t){n();var h=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function r(e,t,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0,h=1e-4,d=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,i=i||null,u.tension=e,u.friction=t,o=null!==i,o?(c=r(e,t),a=c/i*d):a=d;;)if(s=n(s||u,a),l.push(1+s.x),c+=16,!(Math.abs(s.x)>h&&Math.abs(s.v)>h))break;return o?function(e){return l[e*(l.length-1)|0]}:c}}(),d={linear:function(e,t,n){return e+(t-e)*n},ease:u(.25,.1,.25,1),"ease-in":u(.42,0,1,1),"ease-out":u(0,0,.58,1),"ease-in-out":u(.42,0,.58,1),"ease-in-sine":u(.47,0,.745,.715),"ease-out-sine":u(.39,.575,.565,1),"ease-in-out-sine":u(.445,.05,.55,.95),"ease-in-quad":u(.55,.085,.68,.53),"ease-out-quad":u(.25,.46,.45,.94),"ease-in-out-quad":u(.455,.03,.515,.955),"ease-in-cubic":u(.55,.055,.675,.19),"ease-out-cubic":u(.215,.61,.355,1),"ease-in-out-cubic":u(.645,.045,.355,1),"ease-in-quart":u(.895,.03,.685,.22),"ease-out-quart":u(.165,.84,.44,1),"ease-in-out-quart":u(.77,0,.175,1),"ease-in-quint":u(.755,.05,.855,.06),"ease-out-quint":u(.23,1,.32,1),"ease-in-out-quint":u(.86,0,.07,1),"ease-in-expo":u(.95,.05,.795,.035),"ease-out-expo":u(.19,1,.22,1),"ease-in-out-expo":u(1,0,0,1),"ease-in-circ":u(.6,.04,.98,.335),"ease-out-circ":u(.075,.82,.165,1),"ease-in-out-circ":u(.785,.135,.15,.86),spring:function(e,t){var n=1e3,r=h(e,t,n);return function(e,t,n){return e+(t-e)*r(n)}},"cubic-bezier":function(e,t,n,r){return u(e,t,n,r)}}}}})}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(e){"use strict";e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.define.eventAliasesOn(e.corefn)}(cytoscape),function(e){"use strict";e.fn.core({png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}}),e.corefn.jpeg=e.corefn.jpg}(cytoscape),function(e){"use strict";e.fn.core({layout:function(e){var t=this._private.prevLayout=null==e?this._private.prevLayout:this.initLayout(e);return t.run(),this},makeLayout:function(e){return this.initLayout(e)},initLayout:function(t){if(null==t)return void e.util.error("Layout options must be specified to make a layout");if(null==t.name)return void e.util.error("A `name` must be specified to make a layout");var n=t.name,r=e.extension("layout",n);if(null==r)return void e.util.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");t.eles=null!=t.eles?t.eles:this.$(),e.is.string(t.eles)&&(t.eles=this.$(t.eles));var i=new r(e.util.extend({},t,{cy:this}));return e.is.plainObject(i._private)||(i._private={}),i._private.cy=this,i._private.listeners=[],i}}),e.corefn.createLayout=e.corefn.makeLayout}(cytoscape),function(e){"use strict";e.fn.core({notify:function(e){if(this._private.batchingNotify){var t=this._private.batchNotifyEles,n=this._private.batchNotifyTypes;if(e.collection)for(var r=0;r<e.collection.length;r++){var i=e.collection[r];t.ids[i._private.id]||t.push(i)}return void(n.ids[e.type]||n.push(e.type))}if(this._private.notificationsEnabled){var o=this.renderer();o.notify(e)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=e?!0:!1)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchingStyle=e.batchingNotify=!0,e.batchStyleEles=[],e.batchNotifyEles=[],e.batchNotifyTypes=[],e.batchStyleEles.ids={},e.batchNotifyEles.ids={},e.batchNotifyTypes.ids={}),e.batchCount++,this},endBatch:function(){var t=this._private;return t.batchCount--,0===t.batchCount&&(t.batchingStyle=!1,new e.Collection(this,t.batchStyleEles).updateStyle(),t.batchingNotify=!1,this.notify({type:t.batchNotifyTypes,collection:t.batchNotifyEles})),this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n in e){var r=e[n],i=t.getElementById(n);i.data(r)}})}})}(cytoscape),function(e){"use strict";e.fn.core({renderTo:function(e,t,n,r){var i=this._private.renderer;return i.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(t){var n=this,r=e.extension("renderer",t.name);return null==r?void e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name):void(this._private.renderer=new r(e.util.extend({},t,{cy:n,style:n._private.style})))},triggerOnRender:function(){for(var e=this._private.onRenders,t=0;t<e.length;t++){var n=e[t];n()}return this},onRender:function(e){return this._private.onRenders.push(e),this},offRender:function(e){var t=this._private.onRenders;if(null==e)return this._private.onRenders=[],this;for(var n=0;n<t.length;n++){var r=t[n];if(e===r){t.splice(n,1);break}}return this}})}(cytoscape),function(e){"use strict";e.fn.core({collection:function(t){return e.is.string(t)?this.$(t):e.is.elementOrCollection(t)?t.collection():e.is.array(t)?new e.Collection(this,t):new e.Collection(this)},nodes:function(e){var t=this.$(function(){return this.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(){return this.isEdge()});return e?t.filter(e):t},$:function(t){var n=new e.Collection(this,this._private.elements);return t?n.filter(t):n}}),e.corefn.elements=e.corefn.filter=e.corefn.$}(cytoscape),function(e){"use strict";e.fn.core({style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(t){var n=this._private;return n.style=e.is.stylesheet(t)?t.generateStyle(this):e.is.array(t)?e.style.fromJson(this,t):e.is.string(t)?e.style.fromString(this,t):new e.Style(this),n.style}})}(cytoscape),function(e){"use strict";e.fn.core({autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=e?!0:!1,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=e?!0:!1,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=e?!0:!1,this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=e?!0:!1,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=e?!0:!1,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=e?!0:!1,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=e?!0:!1,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=e?!0:!1,this)},pan:function(){var t,n,r,i,o,a=arguments,s=this._private.pan;switch(a.length){case 0:return s;case 1:if(e.is.string(a[0]))return t=a[0],s[t];if(e.is.plainObject(a[0])){if(!this._private.panningEnabled)return this;r=a[0],i=r.x,o=r.y,e.is.number(i)&&(s.x=i),e.is.number(o)&&(s.y=o),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=a[0],n=a[1],"x"!==t&&"y"!==t||!e.is.number(n)||(s[t]=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(t){var n,r,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:e.is.plainObject(s[0])&&(i=s[0],o=i.x,a=i.y,e.is.number(o)&&(u.x+=o),e.is.number(a)&&(u.y+=a),this.trigger("pan viewport"));break;case 2:n=s[0],r=s[1],"x"!==n&&"y"!==n||!e.is.number(r)||(u[n]+=r),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(t,n){if(e.is.number(t)&&void 0===n&&(n=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(e.is.string(t)){var i=t;t=this.$(i)}else if(e.is.boundingBox(t)){var o=t;r={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else e.is.elementOrCollection(t)||(t=this.elements());r=r||t.boundingBox();var a,s=this.width(),u=this.height();if(n=e.is.number(n)?n:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){a=Math.min((s-2*n)/r.w,(u-2*n)/r.h),a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a;var l={x:(s-a*(r.x1+r.x2))/2,y:(u-a*(r.y1+r.y2))/2};return{zoom:a,pan:l}}}},minZoom:function(t){return void 0===t?this._private.minZoom:(e.is.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(e.is.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var n,r;if(void 0===t)return this._private.zoom;if(e.is.number(t))r=t;else if(e.is.plainObject(t)){if(r=t.level,t.position){var i=t.position,o=this._private.pan,a=this._private.zoom;

n={x:i.x*a+o.x,y:i.y*a+o.y}}else t.renderedPosition&&(n=t.renderedPosition);if(n&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!e.is.number(r)||n&&(!e.is.number(n.x)||!e.is.number(n.y)))return this;if(r=r>this._private.maxZoom?this._private.maxZoom:r,r=r<this._private.minZoom?this._private.minZoom:r,n){var s=this._private.pan,u=this._private.zoom,l=r,c={x:-l/u*(n.x-s.x)+n.x,y:-l/u*(n.y-s.y)+n.y};this._private.zoom=r,this._private.pan=c;var h=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(h?" pan ":"")+" viewport ")}else this._private.zoom=r,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(t){var n=this._private,r=!0,i=!0,o=[],a=!1,s=!1;if(!t)return this;if(e.is.number(t.zoom)||(r=!1),e.is.plainObject(t.pan)||(i=!1),!r&&!i)return this;if(r){var u=t.zoom;u<n.minZoom||u>n.maxZoom||!n.zoomingEnabled?a=!0:(n.zoom=u,o.push("zoom"))}if(i&&(!a||!t.cancelOnFailedZoom)&&n.panningEnabled){var l=t.pan;e.is.number(l.x)&&(n.pan.x=l.x,s=!1),e.is.number(l.y)&&(n.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.trigger(o.join(" ")),this.notify({type:"viewport"})),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(t,n){if(this._private.panningEnabled){if(e.is.string(t)){var r=t;t=this.elements(r)}else e.is.elementOrCollection(t)||(t=this.elements());var i=t.boundingBox(),o=this.width(),a=this.height();n=void 0===n?this._private.zoom:n;var s={x:(o-n*(i.x1+i.x2))/2,y:(a-n*(i.y1+i.y2))/2};return s}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var e=this._private.container;return e?e.clientWidth:1},height:function(){var e=this._private.container;return e?e.clientHeight:1},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}}),e.corefn.centre=e.corefn.center,e.corefn.autolockNodes=e.corefn.autolock,e.corefn.autoungrabifyNodes=e.corefn.autoungrabify}(cytoscape),function(e){"use strict";e.fn.collection=e.fn.eles=function(t,n){for(var r in t){var i=t[r];e.Collection.prototype[r]=i}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,n,r){var i=e.is.element(n)?n._private:n,o=i.group,a=null!=r?r:this.prefix[o]+this.id[o];if(t.getElementById(a).empty())this.id[o]++;else for(;!t.getElementById(a).empty();)a=this.prefix[o]+ ++this.id[o];return a}};e.Element=function(t,n,r){if(!(this instanceof e.Element))return new e.Element(t,n,r);var i=this;if(r=void 0===r||r?!0:!1,void 0===t||void 0===n||!e.is.core(t))return void e.util.error("An element must have a core reference and parameters set");if("nodes"!==n.group&&"edges"!==n.group)return void e.util.error("An element must be of type `nodes` or `edges`; you specified `"+n.group+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:n.data||{},position:n.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:n.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:n.selected?!0:!1,selectable:void 0===n.selectable?!0:n.selectable?!0:!1,locked:n.locked?!0:!1,grabbed:!1,grabbable:void 0===n.grabbable?!0:n.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[]},n.renderedPosition){var o=n.renderedPosition,a=t.pan(),s=t.zoom();this._private.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}if(e.is.string(n.classes))for(var u=n.classes.split(/\s+/),l=0,c=u.length;c>l;l++){var h=u[l];h&&""!==h&&(i._private.classes[h]=!0)}n.css&&t.style().applyBypass(this,n.css),(void 0===r||r)&&this.restore()},e.Collection=function(n,r,i){if(!(this instanceof e.Collection))return new e.Collection(n,r);if(void 0===n||!e.is.core(n))return void e.util.error("A collection must have a reference to the core");var o={},a={},s=!1;if(r){if(r.length>0&&e.is.plainObject(r[0])&&!e.is.element(r[0])){s=!0;for(var u=[],l={},c=0,h=r.length;h>c;c++){var d=r[c];null==d.data&&(d.data={});var p=d.data;if(null==p.id)p.id=t.generate(n,d);else if(0!==n.getElementById(p.id).length||l[p.id])continue;var f=new e.Element(n,d,!1);u.push(f),l[p.id]=!0}r=u}}else r=[];this.length=0;for(var c=0,h=r.length;h>c;c++){var g=r[c];if(g){var v=g._private.data.id;(!i||i.unique&&!o[v])&&(o[v]=g,a[v]=this.length,this[this.length]=g,this.length++)}}this._private={cy:n,ids:o,indexes:a},s&&this.restore()},e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype,e.elesfn.cy=function(){return this._private.cy},e.elesfn.element=function(){return this[0]},e.elesfn.collection=function(){return e.is.collection(this)?this:new e.Collection(this._private.cy,[this])},e.elesfn.unique=function(){return new e.Collection(this._private.cy,this,{unique:!0})},e.elesfn.getElementById=function(t){var n=this._private.cy,r=this._private.ids[t];return r?r:e.Collection(n)},e.elesfn.json=function(t){var n=this.element(),r=this.cy();if(null==n&&t)return this;if(null==n)return void 0;var i=n._private;if(t){r.startBatch(),t.data&&this.data(t.data),t.position&&this.position(t.position);var o=function(e,n,r){var o=t[e];null!=o&&o!==i[e]&&(o?this[n]():this[r]())};return o("removed","remove","restore"),o("selected","select","unselect"),o("selectable","selectify","unselectify"),o("locked","lock","unlock"),o("grabbable","grabify","ungrabify"),null!=t.classes&&this.classes(t.classes),r.endBatch(),this}var a={data:e.util.copy(i.data),position:e.util.copy(i.position),group:i.group,removed:i.removed,selected:i.selected,selectable:i.selectable,locked:i.locked,grabbable:i.grabbable,classes:null},s=[];for(var u in i.classes)i.classes[u]&&s.push(u);return a.classes=s.join(" "),a},e.elesfn.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e},e.elesfn.clone=function(){for(var t=this.cy(),n=[],r=0;r<this.length;r++){var i=this[r],o=i.json(),a=new e.Element(t,o,!1);n.push(a)}return new e.Collection(t,n)},e.elesfn.copy=e.elesfn.clone,e.elesfn.restore=function(n){var r=this,i=[],o=r.cy();void 0===n&&(n=!0);for(var a=[],s=[],u=[],l=0,c=0,h=0,d=r.length;d>h;h++){var p=r[h];p.isNode()?(s.push(p),l++):(u.push(p),c++)}a=s.concat(u);for(var h=0,d=a.length;d>h;h++){var p=a[h];if(p.removed()){var f=p._private,g=f.data;if(void 0===g.id)g.id=t.generate(o,p);else if(e.is.number(g.id))g.id=""+g.id;else{if(e.is.emptyString(g.id)||!e.is.string(g.id)){e.util.error("Can not create element with invalid string ID `"+g.id+"`");continue}if(0!==o.getElementById(g.id).length){e.util.error("Can not create second element with ID `"+g.id+"`");continue}}var v=g.id;if(p.isEdge()){for(var y=p,m=["source","target"],b=m.length,w=!1,x=0;b>x;x++){var _=m[x],E=g[_];e.is.number(E)&&(E=g[_]=""+g[_]),null==E||""===E?(e.util.error("Can not create edge `"+v+"` with unspecified "+_),w=!0):o.getElementById(E).empty()&&(e.util.error("Can not create edge `"+v+"` with nonexistant "+_+" `"+E+"`"),w=!0)}if(w)continue;var k=o.getElementById(g.source),S=o.getElementById(g.target);k._private.edges.push(y),S._private.edges.push(y),y._private.source=k,y._private.target=S}f.ids={},f.ids[v]=p,f.removed=!1,o.addToPool(p),i.push(p)}}for(var h=0;l>h;h++){var T=a[h],g=T._private.data;e.is.number(g.parent)&&(g.parent=""+g.parent);var C=g.parent,N=null!=C;if(N){var A=o.getElementById(C);if(A.empty())g.parent=void 0;else{for(var P=!1,D=A;!D.empty();){if(T.same(D)){P=!0,g.parent=void 0;break}D=D.parent()}P||(A[0]._private.children.push(T),T._private.parent=A[0],o._private.hasCompoundNodes=!0)}}}if(i=new e.Collection(o,i),i.length>0){var $=i.add(i.connectedNodes()).add(i.parent());$.updateStyle(n),n?i.rtrigger("add"):i.trigger("add")}return r},e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed},e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed},e.elesfn.remove=function(t){function n(e){for(var t=e._private.edges,n=0;n<t.length;n++)i(t[n])}function r(e){for(var t=e._private.children,n=0;n<t.length;n++)i(t[n])}function i(e){var t=c[e.id()];t||(c[e.id()]=!0,e.isNode()?(l.push(e),n(e),r(e)):l.unshift(e))}function o(e,t){for(var n=e._private.edges,r=0;r<n.length;r++){var i=n[r];if(t===i){n.splice(r,1);break}}}function a(e,t){t=t[0],e=e[0];for(var n=e._private.children,r=0;r<n.length;r++)if(n[r][0]===t[0]){n.splice(r,1);break}}var s=this,u=[],l=[],c={},h=s._private.cy;void 0===t&&(t=!0);for(var d=0,p=s.length;p>d;d++){var f=s[d];i(f)}for(var d=0;d<l.length;d++){var f=l[d];if(f._private.removed=!0,h.removeFromPool(f),u.push(f),f.isEdge()){var g=f.source()[0],v=f.target()[0];o(g,f),o(v,f)}else{var y=f.parent();0!==y.length&&a(y,f)}}var m=h._private.elements;h._private.hasCompoundNodes=!1;for(var d=0;d<m.length;d++){var f=m[d];if(f.isParent()){h._private.hasCompoundNodes=!0;break}}var b=new e.Collection(this.cy(),u);b.size()>0&&(t&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var w={},d=0;d<l.length;d++){var f=l[d],x="nodes"===f._private.group,_=f._private.data.parent;if(x&&void 0!==_&&!w[_]){w[_]=!0;var y=h.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this},e.elesfn.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var n=e.source,r=e.target,i=t.getElementById(n).length>0,o=t.getElementById(r).length>0;if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s];"edges"===u.group&&(i&&(u.data.source=n),o&&(u.data.target=r))}return t.add(a)}}else if(void 0!==e.parent){var l=e.parent,c=null===l||t.getElementById(l).length>0;if(c){var a=this.jsons(),h=this.descendants(),d=h.merge(h.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){var u=a[s];"nodes"===u.group&&(u.data.parent=null===l?void 0:l)}}return t.add(a).merge(d.restore())}return this}}(cytoscape),function(e){"use strict";e.fn.eles({stdBreadthFirstSearch:function(t){return t=e.util.extend({},t,{std:!0}),this.breadthFirstSearch(t)},breadthFirstSearch:function(t,n,r){var i,o,a;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(i=t,t=i.roots,n=i.visit,r=i.directed,o=i.std,a=i.thisArg),r=2!==arguments.length||e.is.fn(n)?r:n,n=e.is.fn(n)?n:function(){};for(var s,u=this._private.cy,l=e.is.string(t)?this.filter(t):t,c=[],h=[],d={},p={},f={},g=0,v=this.nodes(),y=this.edges(),m=0;m<l.length;m++)l[m].isNode()&&(c.unshift(l[m]),f[l[m].id()]=!0,h.push(l[m]),p[l[m].id()]=0);for(;0!==c.length;){var b,l=c.shift(),w=p[l.id()],x=d[l.id()],_=null==x?void 0:x.connectedNodes().not(l)[0];if(b=o?n.call(a,l,x,_,g++,w):n.call(l,g++,w,l,x,_),b===!0){s=l;break}if(b===!1)break;for(var E=l.connectedEdges(r?function(){return this.data("source")===l.id()}:void 0).intersect(y),m=0;m<E.length;m++){var k=E[m],S=k.connectedNodes(function(){return this.id()!==l.id()}).intersect(v);0===S.length||f[S.id()]||(S=S[0],c.push(S),f[S.id()]=!0,p[S.id()]=p[l.id()]+1,h.push(S),d[S.id()]=k)}}for(var T=[],m=0;m<h.length;m++){var C=h[m],N=d[C.id()];N&&T.push(N),T.push(C)}return{path:new e.Collection(u,T,{unique:!0}),found:new e.Collection(u,s,{unique:!0})}},stdDepthFirstSearch:function(t){return t=e.util.extend({},t,{std:!0}),this.depthFirstSearch(t)},depthFirstSearch:function(t,n,r){var i,o,a;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(i=t,t=i.roots,n=i.visit,r=i.directed,o=i.std,a=i.thisArg),r=2!==arguments.length||e.is.fn(n)?r:n,n=e.is.fn(n)?n:function(){};for(var s,u=this._private.cy,l=e.is.string(t)?this.filter(t):t,c=[],h=[],d={},p={},f={},g=0,v=this.edges(),y=this.nodes(),m=0;m<l.length;m++)l[m].isNode()&&(c.push(l[m]),h.push(l[m]),p[l[m].id()]=0);for(;0!==c.length;){var l=c.pop();if(!f[l.id()]){f[l.id()]=!0;var b,w=p[l.id()],x=d[l.id()],_=null==x?void 0:x.connectedNodes().not(l)[0];if(b=o?n.call(a,l,x,_,g++,w):n.call(l,g++,w,l,x,_),b===!0){s=l;break}if(b===!1)break;for(var E=l.connectedEdges(r?function(){return this.data("source")===l.id()}:void 0).intersect(v),m=0;m<E.length;m++){var k=E[m],S=k.connectedNodes(function(){return this.id()!==l.id()}).intersect(y);0===S.length||f[S.id()]||(S=S[0],c.push(S),p[S.id()]=p[l.id()]+1,h.push(S),d[S.id()]=k)}}}for(var T=[],m=0;m<h.length;m++){var C=h[m],N=d[C.id()];N&&T.push(N),T.push(C)}return{path:new e.Collection(u,T,{unique:!0}),found:new e.Collection(u,s,{unique:!0})}},kruskal:function(t){function n(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.anySame(e))return{eles:n,index:t}}}t=e.is.fn(t)?t:function(){return 1};for(var r=new e.Collection(this._private.cy,[]),i=[],o=this.nodes(),a=0;a<o.length;a++)i.push(o[a].collection());for(var s=this.edges(),u=s.toArray().sort(function(e,n){var r=t.call(e,e),i=t.call(n,n);return r-i}),a=0;a<u.length;a++){var l=u[a],c=l.source()[0],h=l.target()[0],d=n(c),p=n(h);d.index!==p.index&&(r=r.add(l),i[d.index]=d.eles.add(p.eles),i.splice(p.index,1))}return o.add(r)},dijkstra:function(t,n,r){var i;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(i=t,t=i.root,n=i.weight,r=i.directed);var o=this._private.cy;n=e.is.fn(n)?n:function(){return 1};for(var a=e.is.string(t)?this.filter(t)[0]:t[0],s={},u={},l={},c=this.edges().filter(function(){return!this.isLoop()}),h=this.nodes(),d=[],p=0;p<h.length;p++)s[h[p].id()]=h[p].same(a)?0:1/0,d.push(h[p]);var f=function(e){return s[e.id()]};d=new e.Collection(o,d);for(var g=e.Minheap(o,d,f),v=function(e,t){for(var i,o=(r?e.edgesTo(t):e.edgesWith(t)).intersect(c),a=1/0,s=0;s<o.length;s++){var u=o[s],l=n.apply(u,[u]);(a>l||!i)&&(a=l,i=u)}return{edge:i,dist:a}};g.size()>0;){var y=g.pop(),m=y.value,b=y.id,w=o.getElementById(b);if(l[b]=m,m===Math.Infinite)break;for(var x=w.neighborhood().intersect(h),p=0;p<x.length;p++){var _=x[p],E=_.id(),k=v(w,_),S=m+k.dist;S<g.getValueById(E)&&(g.edit(E,S),u[E]={node:w,edge:k.edge})}}return{distanceTo:function(t){var n=e.is.string(t)?h.filter(t)[0]:t[0];return l[n.id()]},pathTo:function(t){var n=e.is.string(t)?h.filter(t)[0]:t[0],r=[],i=n;if(n.length>0)for(r.unshift(n);u[i.id()];){var a=u[i.id()];r.unshift(a.edge),r.unshift(a.node),i=a.node}return new e.Collection(o,r)}}}}),e.elesfn.bfs=e.elesfn.breadthFirstSearch,e.elesfn.dfs=e.elesfn.depthFirstSearch,e.elesfn.stdBfs=e.elesfn.stdBreadthFirstSearch,e.elesfn.stdDfs=e.elesfn.stdDepthFirstSearch}(cytoscape),function(e){"use strict";e.fn.eles({aStar:function(t){t=t||{};var n=function(e,t,r,o){if(e==t)return o.push(i.getElementById(t)),o;if(t in r){var a=r[t],s=p[t];return o.push(i.getElementById(t)),o.push(i.getElementById(s)),n(e,a,r,o)}return void 0},r=function(e,t){if(0===e.length)return void 0;for(var n=0,r=t[e[0]],i=1;i<e.length;i++){var o=t[e[i]];r>o&&(r=o,n=i)}return n},i=this._private.cy;if(null==t||null==t.root)return void 0;var o=e.is.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null==t.goal)return void 0;var a=e.is.string(t.goal)?this.filter(t.goal)[0]:t.goal[0];if(null!=t.heuristic&&e.is.fn(t.heuristic))var s=t.heuristic;else var s=function(){return 0};if(null!=t.weight&&e.is.fn(t.weight))var u=t.weight;else var u=function(e){return 1};if(null!=t.directed)var l=t.directed;else var l=!1;var c=[],h=[o.id()],d={},p={},f={},g={};f[o.id()]=0,g[o.id()]=s(o);for(var v=this.edges().stdFilter(function(e){return!e.isLoop()}),y=this.nodes(),m=0;h.length>0;){var b=r(h,g),w=i.getElementById(h[b]);if(m++,w.id()==a.id()){var x=n(o.id(),a.id(),d,[]);return x.reverse(),{found:!0,distance:f[w.id()],path:new e.Collection(i,x),steps:m}}c.push(w.id()),h.splice(b,1);var _=w.connectedEdges();l&&(_=_.stdFilter(function(e){return e.data("source")===w.id()})),_=_.intersect(v);for(var E=0;E<_.length;E++){var k=_[E],S=k.connectedNodes().stdFilter(function(e){return e.id()!==w.id()}).intersect(y);if(-1==c.indexOf(S.id())){var T=f[w.id()]+u.apply(k,[k]);-1!=h.indexOf(S.id())?T<f[S.id()]&&(f[S.id()]=T,g[S.id()]=T+s(S),d[S.id()]=w.id()):(f[S.id()]=T,g[S.id()]=T+s(S),h.push(S.id()),d[S.id()]=w.id(),p[S.id()]=k.id())}}}return{found:!1,distance:void 0,path:void 0,steps:m}},floydWarshall:function(t){t=t||{};var n=this._private.cy;if(null!=t.weight&&e.is.fn(t.weight))var r=t.weight;else var r=function(e){return 1};if(null!=t.directed)var i=t.directed;else var i=!1;for(var o=this.edges().stdFilter(function(e){return!e.isLoop()}),a=this.nodes(),s=a.length,u={},l=0;s>l;l++)u[a[l].id()]=l;for(var c=[],l=0;s>l;l++){for(var h=new Array(s),d=0;s>d;d++)h[d]=l==d?0:1/0;c.push(h)}var p=[],f=[],g=function(e){for(var t=0;s>t;t++){for(var n=new Array(s),r=0;s>r;r++)n[r]=void 0;e.push(n)}};g(p),g(f);for(var l=0;l<o.length;l++){var v=u[o[l].source().id()],y=u[o[l].target().id()],m=r.apply(o[l],[o[l]]);c[v][y]>m&&(c[v][y]=m,p[v][y]=y,f[v][y]=o[l])}if(!i)for(var l=0;l<o.length;l++){var v=u[o[l].target().id()],y=u[o[l].source().id()],m=r.apply(o[l],[o[l]]);c[v][y]>m&&(c[v][y]=m,p[v][y]=y,f[v][y]=o[l])}for(var b=0;s>b;b++)for(var l=0;s>l;l++)for(var d=0;s>d;d++)c[l][b]+c[b][d]<c[l][d]&&(c[l][d]=c[l][b]+c[b][d],p[l][d]=p[l][b]);for(var w=[],l=0;s>l;l++)w.push(a[l].id());var x={distance:function(t,r){if(e.is.string(t))var i=n.filter(t)[0].id();else var i=t.id();if(e.is.string(r))var o=n.filter(r)[0].id();else var o=r.id();return c[u[i]][u[o]]},path:function(t,r){var i=function(e,t,r,i,o){if(e===t)return n.getElementById(i[e]);if(void 0===r[e][t])return void 0;for(var a=[n.getElementById(i[e])],s=e;e!==t;){s=e,e=r[e][t];var u=o[s][e];a.push(u),a.push(n.getElementById(i[e]))}return a};if(e.is.string(t))var o=n.filter(t)[0].id();else var o=t.id();if(e.is.string(r))var a=n.filter(r)[0].id();else var a=r.id();var s=i(u[o],u[a],p,w,f);return new e.Collection(n,s)}};return x},bellmanFord:function(t){if(t=t||{},null!=t.weight&&e.is.fn(t.weight))var n=t.weight;else var n=function(e){return 1};if(null!=t.directed)var r=t.directed;else var r=!1;if(null==t.root)return void e.util.error("options.root required");if(e.is.string(t.root))var i=this.filter(t.root)[0];else var i=t.root[0];for(var o=this._private.cy,a=this.edges().stdFilter(function(e){return!e.isLoop()}),s=this.nodes(),u=s.length,l={},c=0;u>c;c++)l[s[c].id()]=c;for(var h=[],d=[],p=[],c=0;u>c;c++)h[c]=s[c].id()===i.id()?0:1/0,d[c]=void 0;for(var f=!1,c=1;u>c;c++){f=!1;for(var g=0;g<a.length;g++){var v=l[a[g].source().id()],y=l[a[g].target().id()],m=n.apply(a[g],[a[g]]),b=h[v]+m;if(b<h[y]&&(h[y]=b,d[y]=v,p[y]=a[g],f=!0),!r){var b=h[y]+m;b<h[v]&&(h[v]=b,d[v]=y,p[v]=a[g],f=!0)}}if(!f)break}if(f)for(var g=0;g<a.length;g++){var v=l[a[g].source().id()],y=l[a[g].target().id()],m=n.apply(a[g],[a[g]]);if(h[v]+m<h[y])return e.util.error("Error: graph contains a negative weigth cycle!"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var w=[],c=0;u>c;c++)w.push(s[c].id());var x={distanceTo:function(t){if(e.is.string(t))var n=o.filter(t)[0].id();else var n=t.id();return h[l[n]]},pathTo:function(t){var n=function(e,t,n,r,i,a){for(;;){if(i.push(o.getElementById(r[n])),i.push(a[n]),t===n)return i;var s=e[n];if("undefined"==typeof s)return void 0;n=s}};if(e.is.string(t))var r=o.filter(t)[0].id();else var r=t.id();var a=[],s=n(d,l[i.id()],l[r],w,a,p);return null!=s&&s.reverse(),new e.Collection(o,s)},hasNegativeWeightCycle:!1};return x},kargerStein:function(t){t=t||{};var n=function(e,t,n){for(var r=n[e],i=r[1],o=r[2],a=t[i],s=t[o],u=n.filter(function(e){return t[e[1]]===a&&t[e[2]]===s?!1:t[e[1]]===s&&t[e[2]]===a?!1:!0}),l=0;l<u.length;l++){var c=u[l];c[1]===s?(u[l]=c.slice(0),u[l][1]=a):c[2]===s&&(u[l]=c.slice(0),u[l][2]=a)}for(var l=0;l<t.length;l++)t[l]===s&&(t[l]=a);return u},r=function(e,t,i,o){if(o>=i)return t;var a=Math.floor(Math.random()*t.length),s=n(a,e,t);return r(e,s,i-1,o)},i=this._private.cy,o=this.edges().stdFilter(function(e){return!e.isLoop()}),a=this.nodes(),s=a.length,u=o.length,l=Math.ceil(Math.pow(Math.log(s)/Math.LN2,2)),c=Math.floor(s/Math.sqrt(2));if(2>s)return void e.util.error("At least 2 nodes are required for KargerSteing algorithm!");for(var h={},d=0;s>d;d++)h[a[d].id()]=d;for(var p=[],d=0;u>d;d++){var f=o[d];p.push([d,h[f.source().id()],h[f.target().id()]])}for(var g,v=1/0,y=[],d=0;s>d;d++)y.push(d);for(var m=0;l>=m;m++){var b=y.slice(0),w=r(b,p,s,c),x=b.slice(0),_=r(b,w,c,2),E=r(x,w,c,2);_.length<=E.length&&_.length<v?(v=_.length,g=[_,b]):E.length<=_.length&&E.length<v&&(v=E.length,g=[E,x])}for(var k=g[0].map(function(e){return o[e[0]]}),S=[],T=[],C=g[1][0],d=0;d<g[1].length;d++){var N=g[1][d];N===C?S.push(a[d]):T.push(a[d])}var A={cut:new e.Collection(i,k),partition1:new e.Collection(i,S),partition2:new e.Collection(i,T)};return A},pageRank:function(t){t=t||{};var n=function(e){for(var t=e.length,n=0,r=0;t>r;r++)n+=e[r];for(var r=0;t>r;r++)e[r]=e[r]/n};if(null!=t&&null!=t.dampingfactor)var r=t.dampingFactor;else var r=.8;if(null!=t&&null!=t.precision)var i=t.precision;else var i=1e-6;if(null!=t&&null!=t.iterations)var o=t.iterations;else var o=200;if(null!=t&&null!=t.weight&&e.is.fn(t.weight))var a=t.weight;else var a=function(e){return 1};for(var s=this._private.cy,u=this.edges().stdFilter(function(e){return!e.isLoop()}),l=this.nodes(),c=l.length,h=u.length,d={},p=0;c>p;p++)d[l[p].id()]=p;for(var f=[],g=[],v=(1-r)/c,p=0;c>p;p++){for(var y=[],m=0;c>m;m++)y.push(0);f.push(y),g.push(0)}for(var p=0;h>p;p++){var b=u[p],w=d[b.source().id()],x=d[b.target().id()],_=a.apply(b,[b]);f[x][w]+=_,g[w]+=_}for(var E=1/c+v,m=0;c>m;m++)if(0===g[m])for(var p=0;c>p;p++)f[p][m]=E;else for(var p=0;c>p;p++)f[p][m]=f[p][m]/g[m]+v;for(var k,S=[],T=[],p=0;c>p;p++)S.push(1),T.push(0);for(var C=0;o>C;C++){for(var N=T.slice(0),p=0;c>p;p++)for(var m=0;c>m;m++)N[p]+=f[p][m]*S[m];n(N),k=S,S=N;for(var A=0,p=0;c>p;p++)A+=Math.pow(k[p]-S[p],2);if(i>A)break}var P={rank:function(t){if(e.is.string(t))var n=s.filter(t)[0].id();else var n=t.id();return S[d[n]]}};return P},degreeCentralityNormalized:function(t){if(t=t||{},null!=t.directed)var n=t.directed;else var n=!1;var r=this.nodes(),i=r.length;if(n){for(var o={},a={},s=0,u=0,l=0;i>l;l++){var c=r[l],h=this.degreeCentrality(e.util.extend({},t,{root:c}));s<h.indegree&&(s=h.indegree),u<h.outdegree&&(u=h.outdegree),o[c.id()]=h.indegree,a[c.id()]=h.outdegree}return{indegree:function(t){if(e.is.string(t))var t=cy.filter(t)[0].id();else var t=t.id();return o[t]/s},outdegree:function(t){if(e.is.string(t))var t=cy.filter(t)[0].id();else var t=t.id();return a[t]/u}}}for(var d={},p=0,l=0;i>l;l++){var c=r[l],h=this.degreeCentrality(e.util.extend({},t,{root:c}));p<h.degree&&(p=h.degree),d[c.id()]=h.degree}return{degree:function(t){if(e.is.string(t))var t=cy.filter(t)[0].id();else var t=t.id();return d[t]/p}}},degreeCentrality:function(t){t=t||{};var n=this;if(null==t||null==t.root)return void 0;var r=e.is.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.weight&&e.is.fn(t.weight))var i=t.weight;else var i=function(e){return 1};if(null!=t.directed)var o=t.directed;else var o=!1;if(null!=t.alpha&&e.is.number(t.alpha))var a=t.alpha;else a=0;if(o){for(var s=r.connectedEdges('edge[target = "'+r.id()+'"]').intersection(n),u=r.connectedEdges('edge[source = "'+r.id()+'"]').intersection(n),l=s.length,c=u.length,h=0,d=0,p=0;p<s.length;p++){var f=s[p];h+=i.apply(f,[f])}for(var p=0;p<u.length;p++){var f=u[p];d+=i.apply(f,[f])}return{indegree:Math.pow(l,1-a)*Math.pow(h,a),outdegree:Math.pow(c,1-a)*Math.pow(d,a)}}for(var g=r.connectedEdges().intersection(n),v=g.length,y=0,p=0;p<g.length;p++){var f=g[p];y+=i.apply(f,[f])}return{degree:Math.pow(v,1-a)*Math.pow(y,a)}},closenessCentralityNormalized:function(t){t=t||{};var n=t.harmonic;void 0===n&&(n=!0);for(var r={},i=0,o=this.nodes(),a=this.floydWarshall({weight:t.weight,directed:t.directed}),s=0;s<o.length;s++){for(var u=0,l=0;l<o.length;l++)if(s!=l){var c=a.distance(o[s],o[l]);u+=n?1/c:c}n||(u=1/u),u>i&&(i=u),r[o[s].id()]=u}return{closeness:function(t){if(e.is.string(t))var t=cy.filter(t)[0].id();else var t=t.id();return r[t]/i}}},closenessCentrality:function(t){if(t=t||{},null==t.root)return void e.util.error("options.root required");if(e.is.string(t.root))var n=this.filter(t.root)[0];else var n=t.root[0];if(null!=t.weight&&e.is.fn(t.weight))var r=t.weight;else var r=function(){return 1};if(null!=t.directed&&e.is.bool(t.directed))var i=t.directed;else var i=!1;var o=t.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++)if(u[l].id()!=n.id()){var c=a.distanceTo(u[l]);s+=o?1/c:c}return o?s:1/s},betweennessCentrality:function(t){if(t=t||{},null!=t.weight&&e.is.fn(t.weight))var n=t.weight,r=!0;else var r=!1;if(null!=t.directed&&e.is.bool(t.directed))var i=t.directed;else var i=!1;for(var o=function(e,t){e.unshift(t);for(var n=0;g[e[n]]<g[e[n+1]]&&n<e.length-1;n++){var r=e[n];e[n]=e[n+1],e[n+1]=r}},a=this._private.cy,s=this.nodes(),u={},l={},c=0;c<s.length;c++)u[s[c].id()]=i?s[c].outgoers("node"):s[c].openNeighborhood("node");for(var c=0;c<s.length;c++)l[s[c].id()]=0;for(var h=0;h<s.length;h++){for(var d=[],p={},f={},g={},v=[],c=0;c<s.length;c++)p[s[c].id()]=[],f[s[c].id()]=0,g[s[c].id()]=Number.POSITIVE_INFINITY;for(f[s[h].id()]=1,g[s[h].id()]=0,v.unshift(s[h].id());v.length>0;){var y=v.pop();d.push(y),u[y].forEach(r?function(e){if(a.$("#"+y).edgesTo(e).length>0)var t=a.$("#"+y).edgesTo(e)[0];else var t=e.edgesTo("#"+y)[0];var r=n.apply(t,[t]);g[e.id()]>g[y]+r&&(g[e.id()]=g[y]+r,v.indexOf(e.id())<0?o(v,e.id()):(v.splice(v.indexOf(e.id()),1),o(v,e.id())),f[e.id()]=0,p[e.id()]=[]),g[e.id()]==g[y]+r&&(f[e.id()]=f[e.id()]+f[y],p[e.id()].push(y))}:function(e){g[e.id()]==Number.POSITIVE_INFINITY&&(v.unshift(e.id()),g[e.id()]=g[y]+1),g[e.id()]==g[y]+1&&(f[e.id()]=f[e.id()]+f[y],p[e.id()].push(y))})}for(var m={},c=0;c<s.length;c++)m[s[c].id()]=0;for(;d.length>0;){var b=d.pop();p[b].forEach(function(e){m[e]=m[e]+f[e]/f[b]*(1+m[b]),b!=s[h].id()&&(l[b]=l[b]+m[b])})}}var w=0;for(var x in l)w<l[x]&&(w=l[x]);var _={betweenness:function(t){if(e.is.string(t))var t=a.filter(t)[0].id();else var t=t.id();return l[t]},betweennessNormalized:function(t){if(e.is.string(t))var t=a.filter(t)[0].id();else var t=t.id();return l[t]/w}};return _.betweennessNormalised=_.betweennessNormalized,_}}),e.elesfn.dc=e.elesfn.degreeCentrality,e.elesfn.dcn=e.elesfn.degreeCentralityNormalised=e.elesfn.degreeCentralityNormalized,e.elesfn.cc=e.elesfn.closenessCentrality,e.elesfn.ccn=e.elesfn.closenessCentralityNormalised=e.elesfn.closenessCentralityNormalized,e.elesfn.bc=e.elesfn.betweennessCentrality}(cytoscape),function(e){"use strict";e.fn.eles({animated:e.define.animated(),clearQueue:e.define.clearQueue(),delay:e.define.delay(),delayPromise:e.define.delayPromise(),animate:e.define.animate(),animatePromise:e.define.animatePromise(),stop:e.define.stop()})}(cytoscape),function(e){"use strict";e.fn.eles({classes:function(t){t=t.match(/\S+/g)||[];for(var n=this,r=[],i={},o=0;o<t.length;o++){var a=t[o];i[a]=!0}for(var s=0;s<n.length;s++){for(var u=n[s],l=u._private,c=l.classes,h=!1,o=0;o<t.length;o++){var a=t[o],d=c[a];if(!d){h=!0;break}}if(!h)for(var p in c){var d=c[p],f=i[p];if(d&&!f){h=!0;break}}h&&(l.classes=e.util.copy(i),r.push(u))}return r.length>0&&new e.Collection(this._private.cy,r).updateStyle().trigger("class"),n},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]?!0:!1},toggleClass:function(t,n){for(var r=t.match(/\S+/g)||[],i=this,o=[],a=0,s=i.length;s>a;a++)for(var u=i[a],l=!1,c=0;c<r.length;c++){var h=r[c],d=u._private.classes,p=d[h],f=n||void 0===n&&!p;f?(d[h]=!0,p||l||(o.push(u),l=!0)):(d[h]=!1,p&&!l&&(o.push(u),l=!0))}return o.length>0&&new e.Collection(this._private.cy,o).updateStyle().trigger("class"),i},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}})}(cytoscape),function(e){"use strict";e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},some:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}}),e.elesfn.allAreNeighbours=e.elesfn.allAreNeighbors}(cytoscape),function(e){"use strict";e.fn.eles({parent:function(t){for(var n=[],r=this._private.cy,i=0;i<this.length;i++){var o=this[i],a=r.getElementById(o._private.data.parent);a.size()>0&&n.push(a)}return new e.Collection(r,n,{unique:!0}).filter(t)},parents:function(t){for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var o=r[i];n.push(o)}r=r.parent()}return new e.Collection(this.cy(),n,{unique:!0}).filter(t)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n],i=r.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().empty()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().nonempty()}).filter(e)},children:function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];n=n.concat(i._private.children)}return new e.Collection(this.cy(),n,{unique:!0}).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(t){function n(e){for(var t=0;t<e.length;t++){var i=e[t];r.push(i),i.children().nonempty()&&n(i.children())}}var r=[];return n(this.children()),new e.Collection(this.cy(),r,{unique:!0}).filter(t)}}),e.elesfn.ancestors=e.elesfn.parents}(cytoscape),function(e){"use strict";var t=e.elesfn;e.fn.eles({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:e.define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:e.define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:e.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];return e?e._private.data.id:void 0},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){var t=e.updateCompoundBounds();t.rtrigger("position")},canSet:function(e){return!e.locked()}}),silentPosition:e.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){e.updateCompoundBounds()},canSet:function(e){return!e.locked()}}),positions:function(t,n){if(e.is.plainObject(t))this.position(t);else if(e.is.fn(t)){for(var r=t,i=0;i<this.length;i++){var o=this[i],t=r.apply(o,[i,o]);if(t&&!o.locked()){var a=o._private.position;

a.x=t.x,a.y=t.y}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;n?u.trigger("position"):u.rtrigger("position")}return this},silentPositions:function(e){return this.positions(e,!0)},updateCompoundBounds:function(){function t(e){var t=e.children(),n=e._private.style,i="include"===n["compound-sizing-wrt-labels"].value,o=t.boundingBox({includeLabels:i,includeEdges:!0}),a={top:n["padding-top"].pxValue,bottom:n["padding-bottom"].pxValue,left:n["padding-left"].pxValue,right:n["padding-right"].pxValue},s=e._private.position,u=!1;"auto"===n.width.value&&(e._private.autoWidth=o.w,s.x=(o.x1+o.x2-a.left+a.right)/2,u=!0),"auto"===n.height.value&&(e._private.autoHeight=o.h,s.y=(o.y1+o.y2-a.top+a.bottom)/2,u=!0),u&&r.push(e)}var n=this.cy();if(!n.styleEnabled()||!n.hasCompoundNodes())return n.collection();for(var r=[],i=this.parent();i.nonempty();){for(var o=0;o<i.length;o++){var a=i[o];t(a)}i=i.parent()}return new e.Collection(n,r)},renderedPosition:function(t,n){var r=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=e.is.plainObject(t)?t:void 0,u=void 0!==s||void 0!==n&&e.is.string(t);if(r&&r.isNode()){if(!u){var l=r._private.position;return s={x:l.x*o+a.x,y:l.y*o+a.y},void 0===t?s:s[t]}for(var c=0;c<this.length;c++){var r=this[c];void 0!==n?r._private.position[t]=(n-a[t])/o:void 0!==s&&(r._private.position={x:(s.x-a.x)/o,y:(s.y-a.y)/o})}this.rtrigger("position")}else if(!u)return void 0;return this},relativePosition:function(t,n){var r=this[0],i=this.cy(),o=e.is.plainObject(t)?t:void 0,a=void 0!==o||void 0!==n&&e.is.string(t),s=i.hasCompoundNodes();if(r&&r.isNode()){if(!a){var u=r._private.position,l=s?r.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};return o={x:u.x-d.x,y:u.y-d.y},void 0===t?o:o[t]}for(var p=0;p<this.length;p++){var r=this[p],l=s?r.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};void 0!==n?r._private.position[t]=n+d[t]:void 0!==o&&(r._private.position={x:o.x+d.x,y:o.y+d.y})}this.rtrigger("position")}else if(!a)return void 0;return this},renderedBoundingBox:function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),o=t.x1*r+i.x,a=t.x2*r+i.x,s=t.y1*r+i.y,u=t.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},boundingBox:function(t){var n=this,r=n._private.cy,i=r._private,o=i.styleEnabled;t=t||e.util.staticEmptyObject();var a=void 0===t.includeNodes?!0:t.includeNodes,s=void 0===t.includeEdges?!0:t.includeEdges,u=void 0===t.includeLabels?!0:t.includeLabels;o&&i.renderer.recalculateRenderedStyle(this);for(var l=1/0,c=-(1/0),h=1/0,d=-(1/0),p=0;p<n.length;p++){var f,g,v,y,m,b,w=n[p],x=w._private,_=x.style,E=o?x.style.display.value:"element",k="nodes"===x.group,S=!1;if("none"!==E){if(k&&a){S=!0;var T=x.position;m=T.x,b=T.y;var C=w.outerWidth(),N=C/2,A=w.outerHeight(),P=A/2;f=m-N,g=m+N,v=b-P,y=b+P,l=l>f?f:l,c=g>c?g:c,h=h>v?v:h,d=y>d?y:d}else if(w.isEdge()&&s){S=!0;var D=x.source,$=D._private,M=$.position,I=x.target,O=I._private,L=O.position,j=x.rstyle||{},C=0,R=0;if(o&&(C=_.width.pxValue,R=C/2),f=M.x,g=L.x,v=M.y,y=L.y,f>g){var q=f;f=g,g=q}if(v>y){var q=v;v=y,y=q}if(f-=R,g+=R,v-=R,y+=R,l=l>f?f:l,c=g>c?g:c,h=h>v?v:h,d=y>d?y:d,o)for(var F=j.bezierPts||[],B=0;B<F.length;B++){var G=F[B];f=G.x-R,g=G.x+R,v=G.y-R,y=G.y+R,l=l>f?f:l,c=g>c?g:c,h=h>v?v:h,d=y>d?y:d}if(o&&"haystack"===_["curve-style"].strValue){var z=x.rscratch.haystackPts;if(f=z[0],v=z[1],g=z[2],y=z[3],f>g){var q=f;f=g,g=q}if(v>y){var q=v;v=y,y=q}l=l>f?f:l,c=g>c?g:c,h=h>v?v:h,d=y>d?y:d}}if(o){var x=w._private,_=x.style,j=x.rstyle,U=_.label.strValue,V=_["font-size"],H=_["text-halign"],Y=_["text-valign"],X=j.labelWidth,W=j.labelHeight,Z=j.labelX,Q=j.labelY,J=w.isEdge(),K="autorotate"===_["edge-text-rotation"].strValue;if(u&&U&&V&&null!=W&&null!=X&&null!=Z&&null!=Q&&H&&Y){var ee,te,ne,re,ie=W,oe=X;if(J){if(ee=Z-oe/2,te=Z+oe/2,ne=Q-ie/2,re=Q+ie/2,K){var ae=x.rscratch.labelAngle,se=Math.cos(ae),ue=Math.sin(ae),le=function(e,t){return e-=Z,t-=Q,{x:e*se-t*ue+Z,y:e*ue+t*se+Q}},ce=le(ee,ne),he=le(ee,re),de=le(te,ne),pe=le(te,re);ee=Math.min(ce.x,he.x,de.x,pe.x),te=Math.max(ce.x,he.x,de.x,pe.x),ne=Math.min(ce.y,he.y,de.y,pe.y),re=Math.max(ce.y,he.y,de.y,pe.y)}}else{switch(H.value){case"left":ee=Z-oe,te=Z;break;case"center":ee=Z-oe/2,te=Z+oe/2;break;case"right":ee=Z,te=Z+oe}switch(Y.value){case"top":ne=Q-ie,re=Q;break;case"center":ne=Q-ie/2,re=Q+ie/2;break;case"bottom":ne=Q,re=Q+ie}}l=l>ee?ee:l,c=te>c?te:c,h=h>ne?ne:h,d=re>d?re:d}}}}var fe=function(e){return e===1/0||e===-(1/0)?0:e};return l=fe(l),c=fe(c),h=fe(h),d=fe(d),{x1:l,x2:c,y1:h,y2:d,w:c-l,h:d-h}}});var n=function(n){n.uppercaseName=e.util.capitalize(n.name),n.autoName="auto"+n.uppercaseName,n.labelName="label"+n.uppercaseName,n.outerName="outer"+n.uppercaseName,n.uppercaseOuterName=e.util.capitalize(n.outerName),t[n.name]=function(){var e=this[0],t=e._private,r=t.cy,i=r._private.styleEnabled;if(e){if(!i)return 1;var o=t.style[n.name];switch(o.strValue){case"auto":return t[n.autoName]||0;case"label":return t.rstyle[n.labelName]||0;default:return o.pxValue}}},t["outer"+n.uppercaseName]=function(){var e=this[0],t=e._private,r=t.cy,i=r._private.styleEnabled;if(e){if(i){var o=t.style,a=e[n.name](),s=o["border-width"].pxValue,u=o[n.paddings[0]].pxValue+o[n.paddings[1]].pxValue;return a+s+u}return 1}},t["rendered"+n.uppercaseName]=function(){var e=this[0];if(e){var t=e[n.name]();return t*this.cy().zoom()}},t["rendered"+n.uppercaseOuterName]=function(){var e=this[0];if(e){{e[n.outerName]()}return owidth*this.cy().zoom()}}};n({name:"width",paddings:["padding-left","padding-right"]}),n({name:"height",paddings:["padding-top","padding-bottom"]}),t.attr=t.data,t.removeAttr=t.removeData,t.modelPosition=t.point=t.position,t.modelPositions=t.points=t.positions,t.renderedPoint=t.renderedPosition,t.relativePoint=t.relativePosition,t.boundingbox=t.boundingBox,t.renderedBoundingbox=t.renderedBoundingBox}(cytoscape),function(e){"use strict";function t(e){return function(t){var n=this;if(void 0===t&&(t=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];(t||!s.isLoop())&&(r+=e(i,s))}return r}}}function n(e,t){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[e](n);void 0===s||void 0!==r&&!t(s,r)||(r=s)}return r}}e.fn.eles({degree:t(function(e,t){return t.source().same(t.target())?2:1}),indegree:t(function(e,t){return t.target().same(e)?1:0}),outdegree:t(function(e,t){return t.source().same(e)?1:0})}),e.fn.eles({minDegree:n("degree",function(e,t){return t>e}),maxDegree:n("degree",function(e,t){return e>t}),minIndegree:n("indegree",function(e,t){return t>e}),maxIndegree:n("indegree",function(e,t){return e>t}),minOutdegree:n("outdegree",function(e,t){return t>e}),maxOutdegree:n("outdegree",function(e,t){return e>t})}),e.fn.eles({totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}})}(cytoscape),function(e){"use strict";e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){return 0!==this.length?(this.cy().notify({type:e,collection:this}),this.trigger(e,t),this):void 0}}),e.define.eventAliasesOn(e.elesfn)}(cytoscape),function(e){"use strict";e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var n=this._private.cy;if(e.is.fn(t)){for(var r=[],i=0;i<this.length;i++){var o=this[i];t.apply(o,[i,o])&&r.push(o)}return new e.Collection(n,r)}return e.is.string(t)||e.is.elementOrCollection(t)?new e.Selector(t).filter(this):void 0===t?this:new e.Collection(n)},not:function(t){var n=this._private.cy;if(t){e.is.string(t)&&(t=this.filter(t));for(var r=[],i=0;i<this.length;i++){var o=this[i],a=t._private.ids[o.id()];a||r.push(o)}return new e.Collection(n,r)}return this},absoluteComplement:function(){var e=this._private.cy;return e.elements().not(this)},intersect:function(t){var n=this._private.cy;if(e.is.string(t)){var r=t;return this.filter(r)}for(var i=[],o=this,a=t,s=this.length<t.length,u=s?a._private.ids:o._private.ids,l=s?o:a,c=0;c<l.length;c++){var h=l[c]._private.data.id,d=u[h];d&&i.push(d)}return new e.Collection(n,i)},xor:function(t){var n=this._private.cy;e.is.string(t)&&(t=n.$(t));var r=[],i=this,o=t,a=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=i._private.data.id,a=t._private.ids[o];a||r.push(i)}};return a(i,o),a(o,i),new e.Collection(n,r)},diff:function(t){var n=this._private.cy;e.is.string(t)&&(t=n.$(t));var r=[],i=[],o=[],a=this,s=t,u=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r],a=i._private.data.id,s=t._private.ids[a];s?o.push(i):n.push(i)}};return u(a,s,r),u(s,a,i),{left:new e.Collection(n,r,{unique:!0}),right:new e.Collection(n,i,{unique:!0}),both:new e.Collection(n,o,{unique:!0})}},add:function(t){var n=this._private.cy;if(!t)return this;if(e.is.string(t)){var r=t;t=n.elements(r)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var o=0;o<t.length;o++){var a=!this._private.ids[t[o].id()];a&&i.push(t[o])}return new e.Collection(n,i)},merge:function(t){var n=this._private,r=n.cy;if(!t)return this;if(e.is.string(t)){var i=t;t=r.elements(i)}for(var o=0;o<t.length;o++){var a=t[o],s=a.id(),u=!n.ids[s];if(u){var l=this.length++;this[l]=a,n.ids[s]=a,n.indexes[s]=l}}return this},unmergeOne:function(e){e=e[0];var t=this._private,n=e.id(),r=t.indexes[n];if(null==r)return this;this[r]=void 0,t.ids[n]=void 0,t.indexes[n]=void 0;var i=r===this.length-1;if(this.length>1&&!i){var o=this.length-1,a=this[o];this[o]=void 0,this[r]=a,t.indexes[a.id()]=r}return this.length--,this},unmerge:function(t){var n=this._private.cy;if(!t)return this;if(e.is.string(t)){var r=t;t=n.elements(r)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},map:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);n.push(a)}return n},stdFilter:function(t,n){for(var r=[],i=this,o=this._private.cy,a=0;a<i.length;a++){var s=i[a],u=n?t.apply(n,[s,a,i]):t(s,a,i);u&&r.push(s)}return new e.Collection(o,r)},max:function(e,t){for(var n,r=-(1/0),i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);s>r&&(r=s,n=a)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);r>s&&(r=s,n=a)}return{value:r,ele:n}}});var t=e.elesfn;t.u=t["|"]=t["+"]=t.union=t.or=t.add,t["\\"]=t["!"]=t["-"]=t.difference=t.relativeComplement=t.not,t.n=t["&"]=t["."]=t.and=t.intersection=t.intersect,t["^"]=t["(+)"]=t["(-)"]=t.symmetricDifference=t.symdiff=t.xor,t.fnFilter=t.filterFn=t.stdFilter,t.complement=t.abscomp=t.absoluteComplement}(cytoscape),function(e){"use strict";e.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}})}(cytoscape),function(e){"use strict";e.fn.eles({each:function(t){if(e.is.fn(t))for(var n=0;n<this.length;n++){var r=this[n],i=t.apply(r,[n,r]);if(i===!1)break}return this},forEach:function(t,n){if(e.is.fn(t))for(var r=0;r<this.length;r++){var i=this[r],o=n?t.apply(n,[i,r,this]):t(i,r,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(t,n){var r=[],i=this.length;null==n&&(n=i),null==t&&(t=0),0>t&&(t=i+t),0>n&&(n=i+n);for(var o=t;o>=0&&n>o&&i>o;o++)r.push(this[o]);return new e.Collection(this.cy(),r)},size:function(){return this.length},eq:function(t){return this[t]||new e.Collection(this.cy())},first:function(){return this[0]||new e.Collection(this.cy())},last:function(){return this[this.length-1]||new e.Collection(this.cy())},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!e.is.fn(t))return this;var n=this.cy(),r=this.toArray().sort(t);return new e.Collection(n,r)},sortByZIndex:function(){return this.sort(e.Collection.zIndexSort)},zDepth:function(){var e=this[0];if(!e)return void 0;var t=e._private,n=t.group;if("nodes"===n){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:Number.MAX_VALUE}var i=t.source,o=t.target,a=i.zDepth(),s=o.zDepth();return Math.max(a,s,0)}}),e.Collection.zIndexSort=function(e,t){var n=e.cy(),r=e._private,i=t._private,o=r.style["z-index"].value-i.style["z-index"].value,a=0,s=0,u=n.hasCompoundNodes(),l="nodes"===r.group,c="edges"===r.group,h="nodes"===i.group,d="edges"===i.group;u&&(a=e.zDepth(),s=t.zDepth());var p=a-s,f=0===p;return f?l&&d?1:c&&h?-1:0===o?r.index-i.index:o:p}}(cytoscape),function(e){"use strict";e.fn.eles({layoutPositions:function(t,n,r){var i=this.nodes(),o=this.cy();if(t.trigger({type:"layoutstart",layout:t}),n.animate){for(var a=0;a<i.length;a++){var s=i[a],u=a===i.length-1,l=r.call(s,a,s),c=s.position();e.is.number(c.x)&&e.is.number(c.y)||s.silentPosition({x:0,y:0}),s.animate({position:l},{duration:n.animationDuration,step:u?function(){n.fit&&o.fit(n.eles,n.padding)}:void 0,complete:u?function(){null!=n.zoom&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),n.fit&&o.fit(n.eles,n.padding),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t})}:void 0})}t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t})}else i.positions(r),n.fit&&o.fit(n.eles,n.padding),null!=n.zoom&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t});return this},layout:function(t){var n=this.cy();return n.layout(e.util.extend({},t,{eles:this})),this},makeLayout:function(t){var n=this.cy();return n.makeLayout(e.util.extend({},t,{eles:this}))}}),e.elesfn.createLayout=e.elesfn.makeLayout}(cytoscape),function(e){"use strict";e.fn.eles({updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t._private.batchingStyle){for(var n=t._private.batchStyleEles,r=0;r<this.length;r++){var i=this[r];n.ids[i._private.id]||n.push(i)}return this}var o=t.style();e=e||void 0===e?!0:!1,o.apply(this);var a=this.updateCompoundBounds(),s=a.length>0?this.add(a):this;return e?s.rtrigger("style"):s.trigger("style"),this},updateMappers:function(e){var t=this._private.cy,n=t.style();if(e=e||void 0===e?!0:!1,!t.styleEnabled())return this;n.updateMappers(this);var r=this.updateCompoundBounds(),i=r.length>0?this.add(r):this;return e?i.rtrigger("style"):i.trigger("style"),this},renderedCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n){var r=n.cy().style().getRenderedStyle(n);return void 0===e?r:r[e]}},css:function(t,n){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,o=r.style();if(e.is.plainObject(t)){var a=t;o.applyBypass(this,a,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(e.is.string(t)){if(void 0===n){var l=this[0];return l?l._private.style[t].strValue:void 0}o.applyBypass(this,t,n,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(void 0===t){var l=this[0];return l?o.getRawStyle(l):void 0}return this},removeCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),i=this;if(void 0===e)for(var o=0;o<i.length;o++){var a=i[o];r.removeAllBypasses(a,n)}else{e=e.split(/\s+/);for(var o=0;o<i.length;o++){var a=i[o];r.removeBypasses(a,e,n)}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;return u.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var e=this.cy();if(!e.styleEnabled())return!0;var t=this[0],n=e.hasCompoundNodes();if(t){var r=t._private.style;if("visible"!==r.visibility.value||"element"!==r.display.value)return!1;if("nodes"===t._private.group){if(!n)return!0;var i=t._private.data.parent?t.parents():null;if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a._private.style,u=s.visibility.value,l=s.display.value;if("visible"!==u||"element"!==l)return!1}return!0}var c=t._private.source,h=t._private.target;return c.visible()&&h.visible()}},hidden:function(){var e=this[0];return e?!e.visible():void 0},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=r.style.opacity.value;if(!t)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s._private.style.opacity.value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();return t?n?0===t.effectiveOpacity():0===t._private.style.opacity.value:void 0},isFullAutoParent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];if(t){var n="auto"===t._private.style.width.value,r="auto"===t._private.style.height.value;return t.isParent()&&n&&r}},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return t._private.backgrounding?!0:!1}}),e.elesfn.bypass=e.elesfn.style=e.elesfn.css,e.elesfn.renderedStyle=e.elesfn.renderedCss,e.elesfn.removeBypass=e.elesfn.removeStyle=e.elesfn.removeCss}(cytoscape),function(e){"use strict";function t(t){return function(){var n=arguments,r=[];if(2===n.length){var i=n[0],o=n[1];this.bind(t.event,i,o)}else if(1===n.length){var o=n[0];this.bind(t.event,o)}else if(0===n.length){for(var a=0;a<this.length;a++){var s=this[a],u=!t.ableField||s._private[t.ableField],l=s._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(s);if(void 0!==c&&(u=c,!c))return this}u&&(s._private[t.field]=t.value,l&&r.push(s))}var h=e.Collection(this.cy(),r);h.updateStyle(),h.trigger(t.event)}return this}}function n(n){e.elesfn[n.field]=function(){var e=this[0];if(e){if(n.overrideField){var t=n.overrideField(e);if(void 0!==t)return t}return e._private[n.field]}},e.elesfn[n.on]=t({event:n.on,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!0}),e.elesfn[n.off]=t({event:n.off,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!1})}n({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),n({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"}),n({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),n({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),e.elesfn.deselect=e.elesfn.unselect,e.elesfn.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},n({field:"active",on:"activate",off:"unactivate"}),e.elesfn.inactive=function(){var e=this[0];return e?!e._private.active:void 0}}(cytoscape),function(e){"use strict";function t(t){return function(n){for(var r=[],i=this._private.cy,o=0;o<this.length;o++){var a=this[o],s=a._private[t.attr];s&&r.push(s)}return new e.Collection(i,r,{unique:!0}).filter(n)}}function n(t){return function(n){var r=[],i=this._private.cy,o=t||{};e.is.string(n)&&(n=i.$(n));for(var a=this._private.ids,s=n._private.ids,u=0;u<n.length;u++)for(var l=n[u]._private.edges,c=0;c<l.length;c++){var h=l[c],d=h._private.data,p=a[d.source]&&s[d.target],f=s[d.source]&&a[d.target],g=p||f;if(g){if(o.thisIs){if("source"===o.thisIs&&!p)continue;if("target"===o.thisIs&&!f)continue}r.push(h)}}return new e.Collection(i,r,{unique:!0})}}function r(t){var n={codirected:!1};return t=e.util.extend({},n,t),function(n){for(var r=this._private.cy,i=[],o=this.edges(),a=t,s=0;s<o.length;s++)for(var u=o[s],l=u.source()[0],c=l.id(),h=u.target()[0],d=h.id(),p=l._private.edges,f=0;f<p.length;f++){var g=p[f],v=g._private.data,y=v.target,m=v.source,b=y===d&&m===c,w=c===y&&d===m;(a.codirected&&b||!a.codirected&&(b||w))&&i.push(g)}return new e.Collection(r,i,{unique:!0}).filter(n)}}e.fn.eles({roots:function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){var a=o.connectedEdges(function(){return this.data("target")===o.id()&&this.data("source")!==o.id()}).length>0;a||r.push(o)}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},leaves:function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){var a=o.connectedEdges(function(){return this.data("source")===o.id()&&this.data("target")!==o.id()}).length>0;a||r.push(o)}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},outgoers:function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i],a=o.id();if(o.isNode())for(var s=o._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data.source,h=l._private.data.target;c===a&&h!==a&&(r.push(l),r.push(l.target()[0]))}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},successors:function(t){for(var n=this,r=[],i={};;){var o=n.outgoers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},incomers:function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i],a=o.id();if(o.isNode())for(var s=o._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data.source,h=l._private.data.target;h===a&&c!==a&&(r.push(l),r.push(l.source()[0]))}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},predecessors:function(t){for(var n=this,r=[],i={};;){var o=n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)}}),e.fn.eles({neighborhood:function(t){for(var n=[],r=this._private.cy,i=this.nodes(),o=0;o<i.length;o++)for(var a=i[o],s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.connectedNodes().not(a);c.length>0&&n.push(c[0]),n.push(l[0])}return new e.Collection(r,n,{unique:!0}).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),e.elesfn.neighbourhood=e.elesfn.neighborhood,e.elesfn.closedNeighbourhood=e.elesfn.closedNeighborhood,e.elesfn.openNeighbourhood=e.elesfn.openNeighborhood,e.fn.eles({source:function(e){var t,n=this[0];return n&&(t=n._private.source),t&&e?t.filter(e):t},target:function(e){var t,n=this[0];return n&&(t=n._private.target),t&&e?t.filter(e):t},sources:t({attr:"source"}),targets:t({attr:"target"})}),e.fn.eles({edgesWith:n(),edgesTo:n({thisIs:"source"})}),e.fn.eles({connectedEdges:function(t){for(var n=[],r=this._private.cy,i=this,o=0;o<i.length;o++){var a=i[o];if(a.isNode())for(var s=a._private.edges,u=0;u<s.length;u++){var l=s[u];n.push(l)}}return new e.Collection(r,n,{unique:!0}).filter(t)},connectedNodes:function(t){for(var n=[],r=this._private.cy,i=this,o=0;o<i.length;o++){var a=i[o];a.isEdge()&&(n.push(a.source()[0]),n.push(a.target()[0]))}return new e.Collection(r,n,{unique:!0}).filter(t)},parallelEdges:r(),codirectedEdges:r({codirected:!0})})}(cytoscape),function(e){"use strict";e.fn.eles({fit:function(){},center:function(){}})}(cytoscape),function(e){"use strict";e.Minheap=function(t,n,r){return new e.Heap(t,n,e.Heap.minHeapComparator,r)},e.Maxheap=function(t,n,r){return new e.Heap(t,n,e.Heap.maxHeapComparator,r)},e.Heap=function(t,n,r,i){if("undefined"!=typeof r&&"undefined"!=typeof n){"undefined"==typeof i&&(i=e.Heap.idFn);var o,a,s,u=[],l={},c=[],h=0;for(n=this.getArgumentAsCollection(n,t),s=n.length,h=0;s>h;h+=1){if(u.push(i.call(t,n[h],h,n)),o=n[h].id(),l.hasOwnProperty(o))throw"ERROR: Multiple items with the same id found: "+o;l[o]=h,c.push(o)}for(this._private={cy:t,heap:u,pointers:l,elements:c,comparator:r,extractor:i,length:s},h=Math.floor(s/2);h>=0;h-=1)a=this.heapify(h);return a}},e.Heap.idFn=function(e){return e.id()},e.Heap.minHeapComparator=function(e,t){return e>=t},e.Heap.maxHeapComparator=function(e,t){return t>=e},e.fn.heap=function(t,n){for(var r in t){var i=t[r];e.Heap.prototype[r]=i}},e.heapfn=e.Heap.prototype,e.heapfn.size=function(){return this._private.length},e.heapfn.getArgumentAsCollection=function(t,n){var r;if("undefined"==typeof n&&(n=this._private.cy),e.is.elementOrCollection(t))r=t;else{for(var i=[],o=[].concat.apply([],[t]),a=0;a<o.length;a++){var s=o[a],u=n.getElementById(s);u.length>0&&i.push(u)}r=new e.Collection(n,i)}return r},e.heapfn.isHeap=function(){var e,t,n,r,i,o=this._private.heap,a=o.length,s=this._private.comparator;for(e=0;a>e;e+=1)if(t=2*e+1,n=t+1,r=a>t?s(o[t],o[e]):!0,i=a>n?s(o[n],o[e]):!0,!r||!i)return!1;return!0},e.heapfn.heapSwap=function(e,t){var n=this._private.heap,r=this._private.pointers,i=this._private.elements,o=n[e],a=i[e],s=i[e],u=i[t];n[e]=n[t],i[e]=i[t],r[s]=t,r[u]=e,n[t]=o,i[t]=a},e.heapfn.heapify=function(e,t){var n,r,i,o,a,s,u,l=0,c=!1;for("undefined"==typeof t&&(t=!0),n=this._private.heap,l=n.length,s=this._private.comparator,r=e;!c;)t?(i=2*r+1,o=i+1,a=r,l>i&&!s(n[i],n[a])&&(a=i),l>o&&!s(n[o],n[a])&&(a=o),c=a===r,c||(this.heapSwap(a,r),r=a)):(u=Math.floor((r-1)/2),a=r,c=0>u||s(n[a],n[u]),c||(this.heapSwap(a,u),r=u))},e.heapfn.insert=function(e){var t,n,r,i,o,a=this.getArgumentAsCollection(e),s=a.length;for(o=0;s>o;o+=1){if(t=a[o],n=this._private.heap.length,r=this._private.extractor(t),i=t.id(),this._private.pointers.hasOwnProperty(i))throw"ERROR: Multiple items with the same id found: "+i;this._private.heap.push(r),this._private.elements.push(i),this._private.pointers[i]=n,this.heapify(n,!1)}this._private.length=this._private.heap.length},e.heapfn.getValueById=function(e){if(this._private.pointers.hasOwnProperty(e)){var t=this._private.pointers[e];return this._private.heap[t]}},e.heapfn.contains=function(e){for(var t=this.getArgumentAsCollection(e),n=0;n<t.length;n+=1){var r=t[n].id();if(!this._private.pointers.hasOwnProperty(r))return!1}return!0},e.heapfn.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0},e.heapfn.pop=function(){if(this._private.length>0){var e,t,n,r=this.top(),i=this._private.length-1;return this.heapSwap(0,i),e=this._private.elements[i],t=this._private.heap[i],n=e,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[n]=void 0,this.heapify(0),r}},e.heapfn.findDirectionHeapify=function(e){var t=Math.floor((e-1)/2),n=this._private.heap,r=0>t||this._private.comparator(n[e],n[t]);this.heapify(e,r)},e.heapfn.edit=function(t,n){for(var r=this.getArgumentAsCollection(t),i=0;i<r.length;i+=1){var o=r[i].id(),a=this._private.pointers[o],s=this._private.heap[a];e.is.number(n)?this._private.heap[a]=n:e.is.fn(n)&&(this._private.heap[a]=n.call(this._private.cy,s,a)),this.findDirectionHeapify(a)}},e.heapfn.remove=function(e){for(var t=this.getArgumentAsCollection(e),n=0;n<t.length;n+=1){var r,i,o,a=t[n].id(),s=this._private.pointers[a],u=this._private.length-1;s!==u&&this.heapSwap(s,u),r=this._private.elements[u],i=this._private.heap[u],o=r,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[o]=void 0,this.findDirectionHeapify(s)}return i}}(cytoscape),function(e){"use strict";function t(e){this.options=e,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(n.CANVAS_LAYERS),contexts:new Array(n.CANVAS_LAYERS),canvasNeedsRedraw:new Array(n.CANVAS_LAYERS),bufferCanvases:new Array(n.BUFFER_COUNT),bufferContexts:new Array(n.CANVAS_LAYERS)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.showFps=e.showFps,this.bindings=[],this.data.canvasContainer=document.createElement("div");var t=this.data.canvasContainer.style;t.position="absolute",t.zIndex="0",t.overflow="hidden",this.data.container.appendChild(this.data.canvasContainer);for(var r=0;r<n.CANVAS_LAYERS;r++)this.data.canvases[r]=document.createElement("canvas"),this.data.contexts[r]=this.data.canvases[r].getContext("2d"),this.data.canvases[r].style.position="absolute",this.data.canvases[r].setAttribute("data-id","layer"+r),this.data.canvases[r].style.zIndex=String(n.CANVAS_LAYERS-r),this.data.canvasContainer.appendChild(this.data.canvases[r]),this.data.canvasNeedsRedraw[r]=!1;this.data.topCanvas=this.data.canvases[0],this.data.canvases[n.NODE].setAttribute("data-id","layer"+n.NODE+"-node"),this.data.canvases[n.SELECT_BOX].setAttribute("data-id","layer"+n.SELECT_BOX+"-selectbox"),this.data.canvases[n.DRAG].setAttribute("data-id","layer"+n.DRAG+"-drag");for(var r=0;r<n.BUFFER_COUNT;r++)this.data.bufferCanvases[r]=document.createElement("canvas"),this.data.bufferContexts[r]=this.data.bufferCanvases[r].getContext("2d"),this.data.bufferCanvases[r].style.position="absolute",this.data.bufferCanvases[r].setAttribute("data-id","buffer"+r),this.data.bufferCanvases[r].style.zIndex=String(-r-1),this.data.bufferCanvases[r].style.visibility="hidden";this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.hideLabelsOnViewport=e.hideLabelsOnViewport,this.textureOnViewport=e.textureOnViewport,this.wheelSensitivity=e.wheelSensitivity,this.motionBlurEnabled=e.motionBlur,this.forcedPixelRatio=e.pixelRatio,this.motionBlur=!0,this.motionBlurOpacity=e.motionBlurOpacity,this.motionBlurTransparency=1-this.motionBlurOpacity,this.motionBlurPxRatio=1,this.mbPxRBlurry=1,this.minMbLowQualFrames=4,this.fullQualityMb=!1,this.clearedForMotionBlur=[],this.desktopTapThreshold=e.desktopTapThreshold,this.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,this.touchTapThreshold=e.touchTapThreshold,this.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,this.tapholdDuration=500,this.pathsEnabled=!0,this.load()}var n=t,r=t.prototype;n.CANVAS_LAYERS=3,n.SELECT_BOX=0,n.DRAG=1,n.NODE=2,n.BUFFER_COUNT=3,n.TEXTURE_BUFFER=0,n.MOTIONBLUR_BUFFER_NODE=1,n.MOTIONBLUR_BUFFER_DRAG=2,n.panOrBoxSelectDelay=400;var i="undefined"!=typeof Path2D;r.path2dEnabled=function(e){return void 0===e?this.pathsEnabled:void(this.pathsEnabled=e?!0:!1)},r.usePaths=function(){return i&&this.pathsEnabled},r.notify=function(n){var r;r=e.is.array(n.type)?n.type:[n.type];for(var i=0;i<r.length;i++){var o=r[i];switch(o){case"destroy":return void this.destroy();case"add":case"remove":case"load":this.updateNodesCache(),this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}("load"===o||"resize"===o)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.data.container))}this.data.canvasNeedsRedraw[t.NODE]=!0,this.data.canvasNeedsRedraw[t.DRAG]=!0,this.startRenderLoop(),this.redraw()},r.destroy=function(){this.destroyed=!0;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],n=t;n.target.removeEventListener(n.event,n.handler,n.useCapture)}if(this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(r){}};for(var o in e.math)r[o]=e.math[o];e("renderer","canvas",t)}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t.prototype,r=t.arrowShapes={};t.arrowShapeHeight=.3;var i=function(e,t,n,r,i,o,a,s){var u=n-i/2,l=n+i/2,c=r-o/2,h=r+o/2;return e>=u&&l>=e&&t>=c&&h>=t},o=function(e,t,n,r,i){r=-r;var o=e*Math.cos(r)-t*Math.sin(r),a=e*Math.sin(r)+t*Math.cos(r),s=o*n,u=a*n,l=s+i.x,c=u+i.y;

return{x:l,y:c}},a=function(t,n){e.is.string(n)&&(n=r[n]),r[t]=e.util.extend({points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,n,r,i,o,a,s,u){return e.math.pointInsidePolygon(t,n,this.points,r,i,o,a,s,u)},roughCollide:i,draw:function(e,t,n,r){for(var i=this.points,a=0;a<i.length/2;a++){var s=o(i[2*a],i[2*a+1],t,n,r);e.lineTo(s.x,s.y)}},spacing:function(e){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},n)};a("none",{collide:e.util.falsify,roughCollide:e.util.falsify,draw:e.util.noop,spacing:e.util.zeroify,gap:e.util.zeroify}),a("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),a("arrow","triangle"),a("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:i,draw:function(e,t,n,i){for(var a,s=r.triangle.points,u=0;u<s.length/2;u++){var l=o(s[2*u],s[2*u+1],t,n,i);0===u&&(a=l),e.lineTo(l.x,l.y)}var c=this.controlPoint,h=o(c[0],c[1],t,n,i);e.quadraticCurveTo(h.x,h.y,a.x,a.y)},gap:function(e){return e._private.style.width.pxValue}}),a("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,n,r,i,o,a,s,u){var l=this.points,c=this.pointsTee,h=e.math.pointInsidePolygon(t,n,c,r,i,o,a,s,u)||e.math.pointInsidePolygon(t,n,l,r,i,o,a,s,u);return h},draw:function(e,t,n,r){for(var i=this.points,a=0;a<i.length/2;a++){var s=o(i[2*a],i[2*a+1],t,n,r);e.lineTo(s.x,s.y)}var u=this.pointsTee,l=o(u[0],u[1],t,n,r);e.moveTo(l.x,l.y);for(var a=0;a<u.length/2;a++){var s=o(u[2*a],u[2*a+1],t,n,r);e.lineTo(s.x,s.y)}}}),a("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return e._private.style.width.pxValue}}),a("half-triangle-overshot",{points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0}),a("circle",{radius:.15,collide:function(e,t,n,r,i,o,a,s){if(i!=o){var u=(o+s)/(i+s);return t/=u,r/=u,Math.pow(n-e,2)+Math.pow(r-t,2)<=Math.pow((i+s)*this.radius,2)}return Math.pow(n-e,2)+Math.pow(r-t,2)<=Math.pow((i+s)*this.radius,2)},draw:function(e,t,n,r){e.arc(r.x,r.y,this.radius*t,0,2*Math.PI,!1)},spacing:function(e){return n.getArrowWidth(e._private.style.width.pxValue)*this.radius}}),a("inhibitor",{points:[-.25,0,-.25,-.1,.25,-.1,.25,0],spacing:function(e){return 1},gap:function(e){return 1}}),a("tee","inhibitor"),a("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),a("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e._private.style.width.pxValue}})}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t.prototype;n.getCachedNodes=function(){var e=this.data,t=this.data.cy;return null==e.cache&&(e.cache={}),null==e.cache.cachedNodes&&(e.cache.cachedNodes=t.nodes()),e.cache.cachedNodes},n.updateNodesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={}),e.cache.cachedNodes=t.nodes()},n.getCachedEdges=function(){var e=this.data,t=this.data.cy;return null==e.cache&&(e.cache={}),null==e.cache.cachedEdges&&(e.cache.cachedEdges=t.edges()),e.cache.cachedEdges},n.updateEdgesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={}),e.cache.cachedEdges=t.edges()}}(cytoscape),function(e){"use strict";function t(t,n){var r=e.math.qbezierAt,i=t._private,o=i.rscratch,a=i.rstyle.bezierPts;a.push({x:r(n[0],n[2],n[4],.05),y:r(n[1],n[3],n[5],.05)}),a.push({x:r(n[0],n[2],n[4],.25),y:r(n[1],n[3],n[5],.25)}),a.push({x:r(n[0],n[2],n[4],.4),y:r(n[1],n[3],n[5],.4)});var s={x:r(n[0],n[2],n[4],.5),y:r(n[1],n[3],n[5],.5)};a.push(s),"self"===o.edgeType||"compound"===o.edgeType?(o.midX=o.selfEdgeMidX,o.midY=o.selfEdgeMidY):(o.midX=s.x,o.midY=s.y),a.push({x:r(n[0],n[2],n[4],.6),y:r(n[1],n[3],n[5],.6)}),a.push({x:r(n[0],n[2],n[4],.75),y:r(n[1],n[3],n[5],.75)}),a.push({x:r(n[0],n[2],n[4],.95),y:r(n[1],n[3],n[5],.95)})}var n=e("renderer","canvas"),r=n,i=r.prototype;i.projectIntoViewport=function(e,t){var n=this.findContainerClientCoords(),r=n[0],i=n[1],o=e-r,a=t-i;return o-=this.data.cy.pan().x,a-=this.data.cy.pan().y,o/=this.data.cy.zoom(),a/=this.data.cy.zoom(),[o,a]},i.findContainerClientCoords=function(){var e=this.data.container,t=this.containerBB=this.containerBB||e.getBoundingClientRect();return[t.left,t.top,t.right-t.left,t.bottom-t.top]},i.invalidateContainerClientCoordsCache=function(){this.containerBB=null},i.findNearestElement=function(t,n,i,o){function a(e){var o=e.outerWidth()+2*g,a=e.outerHeight()+2*g,s=o/2,u=a/2,c=e._private.position;if(c.x-s<=t&&t<=c.x+s&&c.y-u<=n&&n<=c.y+u){var d=!i||e.visible()&&!e.transparent();if(i&&!d)return;{var p=r.nodeShapes[l.getNodeShape(e)];e._private.style["border-width"].pxValue/2}p.checkPoint(t,n,0,o,a,c.x,c.y)&&h.push(e)}}function s(o){var s,u,c=o._private.rscratch,d=o._private.style,g=d.width.pxValue/2+f,v=g*g,y=2*g,m=o._private.source,b=o._private.target,w=!1,x=function(){if(void 0!==u)return u;if(!i)return u=!0,!0;var e=o.visible()&&!o.transparent();return e?(u=!0,!0):(u=!1,!1)};if("self"===c.edgeType||"compound"===c.edgeType)((w=e.math.inBezierVicinity(t,n,c.startX,c.startY,c.cp2ax,c.cp2ay,c.selfEdgeMidX,c.selfEdgeMidY,v))&&x()&&v>(s=e.math.sqDistanceToQuadraticBezier(t,n,c.startX,c.startY,c.cp2ax,c.cp2ay,c.selfEdgeMidX,c.selfEdgeMidY))||(w=e.math.inBezierVicinity(t,n,c.selfEdgeMidX,c.selfEdgeMidY,c.cp2cx,c.cp2cy,c.endX,c.endY,v))&&x()&&v>(s=e.math.sqDistanceToQuadraticBezier(t,n,c.selfEdgeMidX,c.selfEdgeMidY,c.cp2cx,c.cp2cy,c.endX,c.endY)))&&h.push(o);else if("haystack"===c.edgeType){var _=d["haystack-radius"].value,E=_/2,k=b._private.position,S=b.width(),T=b.height(),C=m._private.position,N=m.width(),A=m.height(),P=C.x+c.source.x*N*E,D=C.y+c.source.y*A*E,$=k.x+c.target.x*S*E,M=k.y+c.target.y*T*E;(w=e.math.inLineVicinity(t,n,P,D,$,M,y))&&x()&&v>(s=e.math.sqDistanceToFiniteLine(t,n,P,D,$,M))&&h.push(o)}else"straight"===c.edgeType?(w=e.math.inLineVicinity(t,n,c.startX,c.startY,c.endX,c.endY,y))&&x()&&v>(s=e.math.sqDistanceToFiniteLine(t,n,c.startX,c.startY,c.endX,c.endY))&&h.push(o):"bezier"===c.edgeType&&(w=e.math.inBezierVicinity(t,n,c.startX,c.startY,c.cp2x,c.cp2y,c.endX,c.endY,v))&&x()&&v>(s=e.math.sqDistanceToQuadraticBezier(t,n,c.startX,c.startY,c.cp2x,c.cp2y,c.endX,c.endY))&&h.push(o);if(w&&x()&&0===h.length||h[h.length-1]!==o){var I=r.arrowShapes[d["source-arrow-shape"].value],O=r.arrowShapes[d["target-arrow-shape"].value],m=m||o._private.source,b=b||o._private.target,k=b._private.position,C=m._private.position,L=l.getArrowWidth(d.width.pxValue),j=l.getArrowHeight(d.width.pxValue),R=L,q=j;(I.roughCollide(t,n,c.arrowStartX,c.arrowStartY,L,j,[c.arrowStartX-C.x,c.arrowStartY-C.y],f)&&I.collide(t,n,c.arrowStartX,c.arrowStartY,L,j,[c.arrowStartX-C.x,c.arrowStartY-C.y],f)||O.roughCollide(t,n,c.arrowEndX,c.arrowEndY,R,q,[c.arrowEndX-k.x,c.arrowEndY-k.y],f)&&O.collide(t,n,c.arrowEndX,c.arrowEndY,R,q,[c.arrowEndX-k.x,c.arrowEndY-k.y],f))&&h.push(o)}p&&h.length>0&&h[h.length-1]===o&&(a(m),a(b))}function u(r){var i=r._private,o=v;if("edges"===i.group&&"autorotate"===i.style["edge-text-rotation"].strValue){var a=i.rstyle,s=a.labelWidth+2*o,u=a.labelHeight+2*o,l=a.labelX,c=a.labelY,d=i.rscratch.labelAngle,p=Math.cos(d),f=Math.sin(d),g=function(e,t){return e-=l,t-=c,{x:e*p-t*f+l,y:e*f+t*p+c}},y=l-s/2,m=l+s/2,b=c-u/2,w=c+u/2,x=g(y,b),_=g(y,w),E=g(m,b),k=g(m,w),S=[x.x,x.y,E.x,E.y,k.x,k.y,_.x,_.y];e.math.pointInsidePolygonPoints(t,n,S)&&h.push(r)}else{var T=r.boundingBox({includeLabels:!0,includeNodes:!1,includeEdges:!1});T.x1-=o,T.y1-=o,T.x2+=o,T.y2+=o,T.w=T.x2-T.x1,T.h=T.y2-T.y1,e.math.inBoundingBox(T,t,n)&&h.push(r)}}for(var l=this,c=this.getCachedZSortedEles(),h=[],d=this.data.cy.zoom(),p=this.data.cy.hasCompoundNodes(),f=(o?24:8)/d,g=(o?8:2)/d,v=(o?8:2)/d,y=c.length-1;y>=0;y--){var m=c[y],b=m._private;if(h.length>0)break;"yes"===b.style.events.strValue&&("nodes"===b.group?a(m):s(m),"yes"===b.style["text-events"].strValue&&u(m))}return h.length>0?h[h.length-1]:null},i.getAllInBox=function(t,n,r,i){var o=this.getCachedNodes(),a=this.getCachedEdges(),s=[],u=Math.min(t,r),l=Math.max(t,r),c=Math.min(n,i),h=Math.max(n,i);t=u,r=l,n=c,i=h;for(var d,p=e.math.makeBoundingBox({x1:t,y1:n,x2:r,y2:i}),f=0;f<o.length;f++){var g=o[f],v=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});e.math.boundingBoxesIntersect(p,v)&&s.push(o[f])}for(var f=0;f<a.length;f++){var y=a[f],m=y._private,b=m.style,w=m.rscratch,x=b.width.pxValue;if(("self"==w.edgeType||"compound"==w.edgeType)&&((d=e.math.boxInBezierVicinity(t,n,r,i,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,x))&&(2==d||1==d&&e.math.checkBezierInBox(t,n,r,i,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,x))||(d=e.math.boxInBezierVicinity(t,n,r,i,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,x))&&(2==d||1==d&&e.math.checkBezierInBox(t,n,r,i,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,x)))&&s.push(y),"bezier"==w.edgeType&&(d=e.math.boxInBezierVicinity(t,n,r,i,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,x))&&(2==d||1==d&&e.math.checkBezierInBox(t,n,r,i,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,x))&&s.push(y),"straight"==w.edgeType&&(d=e.math.boxInBezierVicinity(t,n,r,i,w.startX,w.startY,.5*w.startX+.5*w.endX,.5*w.startY+.5*w.endY,w.endX,w.endY,x))&&(2==d||1==d&&e.math.checkStraightEdgeInBox(t,n,r,i,w.startX,w.startY,w.endX,w.endY,x))&&s.push(y),"haystack"==w.edgeType){var _=y.target()[0],E=_.position(),k=y.source()[0],S=k.position(),T=S.x+w.source.x,C=S.y+w.source.y,N=E.x+w.target.x,A=E.y+w.target.y,P=T>=t&&r>=T&&C>=n&&i>=C,D=N>=t&&r>=N&&A>=n&&i>=A;P&&D&&s.push(y)}}return s},i.getNodeShape=function(e){var t=e._private.style,n=t.shape.value;if(e.isParent())return"rectangle"===n||"roundrectangle"===n?n:"rectangle";if("polygon"===n){var i=t["shape-polygon-points"].value;return r.nodeShapes.makePolygon(i).name}return n},i.zOrderSort=e.Collection.zIndexSort,i.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},i.getCachedZSortedEles=function(e){var t=this.lastZOrderCachedNodes,n=this.lastZOrderCachedEdges,r=this.getCachedNodes(),i=this.getCachedEdges(),o=[];if(!e&&t&&n&&t===r&&n===i)o=this.cachedZSortedEles;else{for(var a=0;a<r.length;a++){var s=r[a];(s.animated()||s.visible()&&!s.transparent())&&o.push(s)}for(var a=0;a<i.length;a++){var u=i[a];(u.animated()||u.visible()&&!u.transparent())&&o.push(u)}o.sort(this.zOrderSort),this.cachedZSortedEles=o}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=i,o},i.projectBezier=function(e){{var n=e._private,r=n.rscratch;n.rstyle.bezierPts=[]}"self"===r.edgeType?(t(e,[r.startX,r.startY,r.cp2ax,r.cp2ay,r.selfEdgeMidX,r.selfEdgeMidY]),t(e,[r.selfEdgeMidX,r.selfEdgeMidY,r.cp2cx,r.cp2cy,r.endX,r.endY])):"bezier"===r.edgeType&&t(e,[r.startX,r.startY,r.cp2x,r.cp2y,r.endX,r.endY])},i.recalculateNodeLabelProjection=function(e){var t=e._private.style.label.strValue;if(t&&!t.match(/^\s+$/)){var n,r,i=e.outerWidth(),o=e.outerHeight(),a=e._private.position,s=e._private.style["text-halign"].strValue,u=e._private.style["text-valign"].strValue,l=e._private.rscratch,c=e._private.rstyle;switch(s){case"left":n=a.x-i/2;break;case"right":n=a.x+i/2;break;default:n=a.x}switch(u){case"top":r=a.y-o/2;break;case"bottom":r=a.y+o/2;break;default:r=a.y}l.labelX=n,l.labelY=r,c.labelX=n,c.labelY=r,this.applyLabelDimensions(e)}},i.recalculateEdgeLabelProjection=function(t){var n=t._private.style.label.strValue;if(n&&!n.match(/^\s+$/)){var r,i,o,a,s=t._private,u=s.rscratch,l=s.rstyle;if("self"==u.edgeType)o=u.selfEdgeMidX,a=u.selfEdgeMidY;else if("straight"==u.edgeType)o=(u.startX+u.endX)/2,a=(u.startY+u.endY)/2;else if("bezier"==u.edgeType)o=e.math.qbezierAt(u.startX,u.cp2x,u.endX,.5),a=e.math.qbezierAt(u.startY,u.cp2y,u.endY,.5);else if("haystack"==u.edgeType){var c=u.haystackPts;o=(c[0]+c[2])/2,a=(c[1]+c[3])/2}r=o,i=a,u.labelX=r,u.labelY=i,l.labelX=r,l.labelY=i,this.applyLabelDimensions(t)}},i.applyLabelDimensions=function(e){var t=e._private.rscratch,n=e._private.rstyle,r=this.getLabelText(e),i=this.calculateLabelDimensions(e,r);n.labelWidth=i.width,t.labelWidth=i.width,n.labelHeight=i.height,t.labelHeight=i.height},i.getLabelText=function(e){var t=e._private.style,n=e._private.style.label.strValue,r=t["text-transform"].value,i=e._private.rscratch;if("none"==r||("uppercase"==r?n=n.toUpperCase():"lowercase"==r&&(n=n.toLowerCase())),"wrap"===t["text-wrap"].value){if(i.labelWrapKey===i.labelKey)return i.labelWrapCachedText;for(var o=n.split("\n"),a=t["text-max-width"].pxValue,s=[],u=0;u<o.length;u++){var l=o[u],c=this.calculateLabelDimensions(e,l,"line="+l),h=c.width;if(h>a){for(var d=l.split(/\s+/),p="",f=0;f<d.length;f++){var g=d[f],v=0===p.length?g:p+" "+g,y=this.calculateLabelDimensions(e,v,"testLine="+v),m=y.width;a>=m?p+=g+" ":(s.push(p),p=g+" ")}p.match(/^\s+$/)||s.push(p)}else s.push(l)}i.labelWrapCachedLines=s,i.labelWrapCachedText=n=s.join("\n"),i.labelWrapKey=i.labelKey}return n},i.calculateLabelDimensions=function(e,t,n){var r=this,i=e._private.style,o=i["font-style"].strValue,a=i["font-size"].pxValue+"px",s=i["font-family"].strValue,u=i["font-weight"].strValue,l=e._private.labelKey;n&&(l+="$@$"+n);var c=r.labelDimCache||(r.labelDimCache={});if(c[l])return c[l];var h=this.labelCalcDiv;h||(h=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(h));var d=h.style;return d.fontFamily=s,d.fontStyle=o,d.fontSize=a,d.fontWeight=u,d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none",d.padding="0",d.lineHeight="1",d.whiteSpace="wrap"===i["text-wrap"].value?"pre":"normal",h.textContent=t,c[l]={width:h.clientWidth,height:h.clientHeight},c[l]},i.recalculateRenderedStyle=function(e){for(var t=[],n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o._private,s=a.style,u=a.rscratch,l=a.rstyle,c=a.data.id,h=null!=u.boundingBoxKey&&a.boundingBoxKey===u.boundingBoxKey,d=null!=u.labelKey&&a.labelKey===u.labelKey,p=h&&d;if("nodes"===a.group){var f=a.position,g=null!=l.nodeX&&null!=l.nodeY&&f.x===l.nodeX&&f.y===l.nodeY,v=null!=l.nodeW&&l.nodeW===s.width.pxValue,y=null!=l.nodeH&&l.nodeH===s.height.pxValue;g&&p&&v&&y||n.push(o),l.nodeX=f.x,l.nodeY=f.y,l.nodeW=s.width.pxValue,l.nodeH=s.height.pxValue}else{var m=a.source._private.position,b=a.target._private.position,w=null!=l.srcX&&null!=l.srcY&&m.x===l.srcX&&m.y===l.srcY,x=null!=l.tgtX&&null!=l.tgtY&&b.x===l.tgtX&&b.y===l.tgtY,_=w&&x;if(!_||!p){var E=a.style["curve-style"].value;if("bezier"===E){if(!r[c]){t.push(o),r[c]=!0;for(var k=o.parallelEdges(),i=0;i<k.length;i++){var S=k[i],T=S._private.data.id;r[T]||(t.push(S),r[T]=!0)}}}else t.push(o)}l.srcX=m.x,l.srcY=m.y,l.tgtX=b.x,l.tgtY=b.y}u.boundingBoxKey=a.boundingBoxKey,u.labelKey=a.labelKey}this.recalculateEdgeProjections(t),this.recalculateLabelProjections(n,t)},i.recalculateLabelProjections=function(e,t){for(var n=0;n<e.length;n++)this.recalculateNodeLabelProjection(e[n]);for(var n=0;n<t.length;n++)this.recalculateEdgeLabelProjection(t[n])},i.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)},i.findEdgeControlPoints=function(t){if(t&&0!==t.length){for(var n,i=this.data.cy,o=i.hasCompoundNodes(),a={},s=[],u=[],l=[],c=0;c<t.length;c++){var h=t[c],d=h._private,p=d.data,f=d.style,g="unbundled-bezier"===f["curve-style"].value;if("none"!==f.display.value)if("autorotate"===f["edge-text-rotation"].strValue&&l.push(h),"haystack"!==f["curve-style"].value){var v=p.source,y=p.target;n=v>y?y+"-"+v:v+"-"+y,g&&(n="unbundled"+p.id),null==a[n]&&(a[n]=[],s.push(n)),a[n].push(h),g&&(a[n].hasUnbundled=!0)}else u.push(h)}for(var m,b,w,x,_,E,k,S,T,C,N,A,P,D,$=0;$<s.length;$++){n=s[$];var M=a[n];if(M.sort(function(e,t){return e._private.index-t._private.index}),m=M[0]._private.source,b=M[0]._private.target,w=m._private,x=b._private,w.data.id>x.data.id){var I=m;m=b,b=I}if(_=w.position,E=x.position,k=m.outerWidth(),S=m.outerHeight(),T=b.outerWidth(),C=b.outerHeight(),N=r.nodeShapes[this.getNodeShape(m)],A=r.nodeShapes[this.getNodeShape(b)],D=!1,M.length>1&&m!==b||M.hasUnbundled){var O=N.intersectLine(_.x,_.y,k,S,E.x,E.y,0),L=A.intersectLine(E.x,E.y,T,C,_.x,_.y,0),j={x1:O[0],x2:L[0],y1:O[1],y2:L[1]},R=L[1]-O[1],q=L[0]-O[0],F=Math.sqrt(q*q+R*R),B={x:q,y:R},G={x:B.x/F,y:B.y/F};P={x:-G.y,y:G.x},(A.checkPoint(O[0],O[1],0,T,C,E.x,E.y)||N.checkPoint(L[0],L[1],0,k,S,_.x,_.y))&&(P={},D=!0)}for(var h,z,U,c=0;c<M.length;c++){h=M[c],z=h._private,U=z.rscratch;var V=U.lastEdgeIndex,H=c,Y=U.lastNumEdges,X=M.length,W=z.style,Z=W["control-point-step-size"].pxValue,Q=void 0!==W["control-point-distance"]?W["control-point-distance"].pxValue:void 0,J=W["control-point-weight"].value,g="unbundled-bezier"===W["curve-style"].value,K=z.source!==m;K&&g&&(Q*=-1);var ee=U.lastSrcCtlPtX,te=_.x,ne=U.lastSrcCtlPtY,re=_.y,ie=U.lastSrcCtlPtW,oe=m.outerWidth(),ae=U.lastSrcCtlPtH,se=m.outerHeight(),ue=U.lastTgtCtlPtX,le=E.x,ce=U.lastTgtCtlPtY,he=E.y,de=U.lastTgtCtlPtW,pe=b.outerWidth(),fe=U.lastTgtCtlPtH,ge=b.outerHeight(),ve=U.lastW,ye=W["control-point-step-size"].pxValue;if(U.badBezier=D?!0:!1,ee!==te||ne!==re||ie!==oe||ae!==se||ue!==le||ce!==he||de!==pe||fe!==ge||ve!==ye||!(V===H&&Y===X||g)){if(U.lastSrcCtlPtX=te,U.lastSrcCtlPtY=re,U.lastSrcCtlPtW=oe,U.lastSrcCtlPtH=se,U.lastTgtCtlPtX=le,U.lastTgtCtlPtY=he,U.lastTgtCtlPtW=pe,U.lastTgtCtlPtH=ge,U.lastEdgeIndex=H,U.lastNumEdges=X,U.lastWidth=ye,m===b){U.edgeType="self";var me=c,be=Z;g&&(me=0,be=Q),U.cp2ax=_.x,U.cp2ay=_.y-(1+Math.pow(S,1.12)/100)*be*(me/3+1),U.cp2cx=_.x-(1+Math.pow(k,1.12)/100)*be*(me/3+1),U.cp2cy=_.y,U.selfEdgeMidX=(U.cp2ax+U.cp2cx)/2,U.selfEdgeMidY=(U.cp2ay+U.cp2cy)/2}else if(o&&(m.isParent()||m.isChild()||b.isParent()||b.isChild())&&(m.parents().anySame(b)||b.parents().anySame(m))){U.edgeType="compound",U.badBezier=!1;var me=c,be=Z;g&&(me=0,be=Q);var we=50,xe={x:_.x-k/2,y:_.y-S/2},_e={x:E.x-T/2,y:E.y-C/2},Ee=1;U.cp2ax=xe.x,U.compoundStretchA=Math.max(Ee,Math.log(.01*k)),U.cp2ay=xe.y-(1+Math.pow(we,1.12)/100)*be*(me/3+1)*U.compoundStretchA,U.compoundStretchB=Math.max(Ee,Math.log(.01*T)),U.cp2cx=_e.x-(1+Math.pow(we,1.12)/100)*be*(me/3+1)*U.compoundStretchB,U.cp2cy=_e.y,U.selfEdgeMidX=(U.cp2ax+U.cp2cx)/2,U.selfEdgeMidY=(U.cp2ay+U.cp2cy)/2}else if(M.length%2!==1||c!==Math.floor(M.length/2)||g){var ke,Se=(.5-M.length/2+c)*Z,Te=e.math.signum(Se);ke=g?Q:void 0!==Q?Te*Q:void 0;var Ce=void 0!==ke?ke:Se,Ne=1-J,Ae=J;K&&(Ne=J,Ae=1-J);var Pe={x:j.x1*Ne+j.x2*Ae,y:j.y1*Ne+j.y2*Ae};U.edgeType="bezier",U.cp2x=Pe.x+P.x*Ce,U.cp2y=Pe.y+P.y*Ce}else U.edgeType="straight";this.findEndpoints(h);var De=!e.is.number(U.startX)||!e.is.number(U.startY),$e=!e.is.number(U.arrowStartX)||!e.is.number(U.arrowStartY),Me=!e.is.number(U.endX)||!e.is.number(U.endY),Ie=!e.is.number(U.arrowEndX)||!e.is.number(U.arrowEndY),Oe=3,Le=this.getArrowWidth(W.width.pxValue)*r.arrowShapeHeight,je=Oe*Le,Re=e.math.distance({x:U.cp2x,y:U.cp2y},{x:U.startX,y:U.startY}),qe=je>Re,Fe=e.math.distance({x:U.cp2x,y:U.cp2y},{x:U.endX,y:U.endY}),Be=je>Fe;if("bezier"===U.edgeType){var Ge=!1;if(De||$e||qe){Ge=!0;var ze={x:U.cp2x-_.x,y:U.cp2y-_.y},Ue=Math.sqrt(ze.x*ze.x+ze.y*ze.y),Ve={x:ze.x/Ue,y:ze.y/Ue},He=Math.max(k,S),Ye={x:U.cp2x+2*Ve.x*He,y:U.cp2y+2*Ve.y*He},Xe=N.intersectLine(_.x,_.y,k,S,Ye.x,Ye.y,0);qe?(U.cp2x=U.cp2x+Ve.x*(je-Re),U.cp2y=U.cp2y+Ve.y*(je-Re)):(U.cp2x=Xe[0]+Ve.x*je,U.cp2y=Xe[1]+Ve.y*je)}if(Me||Ie||Be){Ge=!0;var ze={x:U.cp2x-E.x,y:U.cp2y-E.y},Ue=Math.sqrt(ze.x*ze.x+ze.y*ze.y),Ve={x:ze.x/Ue,y:ze.y/Ue},He=Math.max(k,S),Ye={x:U.cp2x+2*Ve.x*He,y:U.cp2y+2*Ve.y*He},We=A.intersectLine(E.x,E.y,T,C,Ye.x,Ye.y,0);Be?(U.cp2x=U.cp2x+Ve.x*(je-Fe),U.cp2y=U.cp2y+Ve.y*(je-Fe)):(U.cp2x=We[0]+Ve.x*je,U.cp2y=We[1]+Ve.y*je)}Ge&&this.findEndpoints(h)}else"straight"===U.edgeType&&(U.midX=(te+le)/2,U.midY=(re+he)/2);this.projectBezier(h),this.recalculateEdgeLabelProjection(h)}}}for(var c=0;c<u.length;c++){var h=u[c],d=h._private,Ze=d.rscratch,U=Ze;if(!Ze.haystack){var Qe=2*Math.random()*Math.PI;Ze.source={x:Math.cos(Qe),y:Math.sin(Qe)};var Qe=2*Math.random()*Math.PI;Ze.target={x:Math.cos(Qe),y:Math.sin(Qe)}}var m=d.source,b=d.target,_=m._private.position,E=b._private.position,k=m.width(),T=b.width(),S=m.height(),C=b.height(),He=f["haystack-radius"].value,Je=He/2;U.haystackPts=[U.source.x*k*Je+_.x,U.source.y*S*Je+_.y,U.target.x*T*Je+E.x,U.target.y*C*Je+E.y],Ze.edgeType="haystack",Ze.haystack=!0,this.recalculateEdgeLabelProjection(h)}for(var c=0;c<l.length;c++){var h=l[c],U=h._private.rscratch;switch(U.edgeType){case"haystack":q=U.haystackPts[2]-U.haystackPts[0],R=U.haystackPts[3]-U.haystackPts[1];break;default:q=U.endX-U.startX,R=U.endY-U.startY}U.labelAngle=Math.atan(R/q)}return a}},i.findEndpoints=function(t){var n,i=t.source()[0],o=t.target()[0],a=i._private,s=o._private,u=a.position,l=s.position,c=t._private.style["target-arrow-shape"].value,h=t._private.style["source-arrow-shape"].value,d=t._private.rscratch;if("self"==d.edgeType||"compound"==d.edgeType){var p=[d.cp2cx,d.cp2cy];n=r.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),p[0],p[1],0);var f=e.math.shortenIntersection(n,p,r.arrowShapes[c].spacing(t)),g=e.math.shortenIntersection(n,p,r.arrowShapes[c].gap(t));d.endX=g[0],d.endY=g[1],d.arrowEndX=f[0],d.arrowEndY=f[1];var p=[d.cp2ax,d.cp2ay];n=r.nodeShapes[this.getNodeShape(i)].intersectLine(u.x,u.y,i.outerWidth(),i.outerHeight(),p[0],p[1],0);var v=e.math.shortenIntersection(n,p,r.arrowShapes[h].spacing(t)),y=e.math.shortenIntersection(n,p,r.arrowShapes[h].gap(t));d.startX=y[0],d.startY=y[1],d.arrowStartX=v[0],d.arrowStartY=v[1]}else if("straight"==d.edgeType){n=r.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),u.x,u.y,0),d.noArrowPlacement=0===n.length?!0:!1;var f=e.math.shortenIntersection(n,[u.x,u.y],r.arrowShapes[c].spacing(t)),g=e.math.shortenIntersection(n,[u.x,u.y],r.arrowShapes[c].gap(t));d.endX=g[0],d.endY=g[1],d.arrowEndX=f[0],d.arrowEndY=f[1],n=r.nodeShapes[this.getNodeShape(i)].intersectLine(u.x,u.y,i.outerWidth(),i.outerHeight(),o.position().x,o.position().y,0),d.noArrowPlacement=0===n.length?!0:!1;var v=e.math.shortenIntersection(n,[o.position().x,o.position().y],r.arrowShapes[h].spacing(t)),y=e.math.shortenIntersection(n,[o.position().x,o.position().y],r.arrowShapes[h].gap(t));d.startX=y[0],d.startY=y[1],d.arrowStartX=v[0],d.arrowStartY=v[1],d.badLine=e.is.number(d.startX)&&e.is.number(d.startY)&&e.is.number(d.endX)&&e.is.number(d.endY)?!1:!0}else if("bezier"==d.edgeType){var p=[d.cp2x,d.cp2y];n=r.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),p[0],p[1],0);var f=e.math.shortenIntersection(n,p,r.arrowShapes[c].spacing(t)),g=e.math.shortenIntersection(n,p,r.arrowShapes[c].gap(t));d.endX=g[0],d.endY=g[1],d.arrowEndX=f[0],d.arrowEndY=f[1],n=r.nodeShapes[this.getNodeShape(i)].intersectLine(u.x,u.y,i.outerWidth(),i.outerHeight(),p[0],p[1],0);var v=e.math.shortenIntersection(n,p,r.arrowShapes[h].spacing(t)),y=e.math.shortenIntersection(n,p,r.arrowShapes[h].gap(t));d.startX=y[0],d.startY=y[1],d.arrowStartX=v[0],d.arrowStartY=v[1]}else if(d.isArcEdge)return},i.getArrowWidth=i.getArrowHeight=function(e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[e];return n?n:(n=Math.max(Math.pow(13.37*e,.9),29),t[e]=n,n)}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t.prototype;n.drawEdge=function(e,t,n){var r=t._private.rscratch,i=this.usePaths();if(!r.badBezier&&("bezier"!==r.edgeType&&"straight"!==r.edgeType||!isNaN(r.startX))){var o=t._private.style;if(!(o.width.pxValue<=0)){var a=o["overlay-padding"].pxValue,s=o["overlay-opacity"].value,u=o["overlay-color"].value;if(n){if(0===s)return;this.strokeStyle(e,u[0],u[1],u[2],s),e.lineCap="round","self"!=t._private.rscratch.edgeType||i||(e.lineCap="butt")}else{var l=o["line-color"].value;this.strokeStyle(e,l[0],l[1],l[2],o.opacity.value),e.lineCap="butt"}var c,h,d,p;d=c=t._private.source,p=h=t._private.target;var f=o.width.pxValue+(n?2*a:0),g=n?"solid":o["line-style"].value;e.lineWidth=f;var v=o["shadow-blur"].pxValue,y=o["shadow-opacity"].value,m=o["shadow-color"].value,b=o["shadow-offset-x"].pxValue,w=o["shadow-offset-y"].pxValue;if(this.shadowStyle(e,m,n?0:y,v,b,w),"haystack"===r.edgeType)this.drawStyledEdge(t,e,r.haystackPts,g,f);else if("self"===r.edgeType||"compound"===r.edgeType){var x=t._private.rscratch,_=[x.startX,x.startY,x.cp2ax,x.cp2ay,x.selfEdgeMidX,x.selfEdgeMidY,x.selfEdgeMidX,x.selfEdgeMidY,x.cp2cx,x.cp2cy,x.endX,x.endY];this.drawStyledEdge(t,e,_,g,f)}else if("straight"===r.edgeType){var E=h._private.position.x-c._private.position.x,k=h._private.position.y-c._private.position.y,S=r.endX-r.startX,T=r.endY-r.startY;if(0>E*S+k*T)r.straightEdgeTooShort=!0;else{var x=r;this.drawStyledEdge(t,e,[x.startX,x.startY,x.endX,x.endY],g,f),r.straightEdgeTooShort=!1}}else{var x=r;this.drawStyledEdge(t,e,[x.startX,x.startY,x.cp2x,x.cp2y,x.endX,x.endY],g,f)}"haystack"===r.edgeType?this.drawArrowheads(e,t,n):r.noArrowPlacement!==!0&&void 0!==r.startX&&this.drawArrowheads(e,t,n),this.shadowStyle(e,"transparent",0)}}},n.drawStyledEdge=function(e,t,n,r,i){var o,a=e._private.rscratch,s=t,u=!1,l=this.usePaths();if(l){for(var c=n,h=a.pathCacheKey&&c.length===a.pathCacheKey.length,d=h,p=0;d&&p<c.length;p++)a.pathCacheKey[p]!==c[p]&&(d=!1);d?(o=t=a.pathCache,u=!0):(o=t=new Path2D,a.pathCacheKey=c,a.pathCache=o)}if(s.setLineDash)switch(r){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([6,3]);break;case"solid":s.setLineDash([])}u||(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),6!==n.length||a.badBezier?12!==n.length||a.badBezier?4!==n.length||a.badLine||t.lineTo(n[2],n[3]):(t.quadraticCurveTo(n[2],n[3],n[4],n[5]),t.quadraticCurveTo(n[8],n[9],n[10],n[11])):t.quadraticCurveTo(n[2],n[3],n[4],n[5])),t=s,l?t.stroke(o):t.stroke(),t.setLineDash&&t.setLineDash([])},n.drawArrowheads=function(e,t,n){function r(n,r,i,o,a){var s=g[n+"-arrow-shape"].value;if("none"!==s){var u=e.globalCompositeOperation,l="hollow"===g[n+"-arrow-fill"].value?"both":"filled",c=g[n+"-arrow-fill"].value;"half-triangle-overshot"===s&&(c="hollow",l="hollow"),(1!==g.opacity.value||"hollow"===c)&&(e.globalCompositeOperation="destination-out",h.fillStyle(e,255,255,255,1),h.strokeStyle(e,255,255,255,1),h.drawArrowShape(t,n,e,l,g.width.pxValue,g[n+"-arrow-shape"].value,r,i,o,a),e.globalCompositeOperation=u);var d=g[n+"-arrow-color"].value;h.fillStyle(e,d[0],d[1],d[2],g.opacity.value),h.strokeStyle(e,d[0],d[1],d[2],g.opacity.value),h.drawArrowShape(t,n,e,c,g.width.pxValue,g[n+"-arrow-shape"].value,r,i,o,a)}}if(!n){var i,o,a,s,u,l,c=t._private.rscratch,h=this,d="haystack"===c.edgeType,p=t.source().position(),f=t.target().position();d?(a=c.haystackPts[0],s=c.haystackPts[1],u=c.haystackPts[2],l=c.haystackPts[3]):(a=c.arrowStartX,s=c.arrowStartY,u=c.arrowEndX,l=c.arrowEndY);var g=t._private.style;i=a-p.x,o=s-p.y,d||isNaN(a)||isNaN(s)||isNaN(i)||isNaN(o)||r("source",a,s,i,o);var v=c.midX,y=c.midY;d&&(v=(a+u)/2,y=(s+l)/2),i=a-u,o=s-l,"self"===c.edgeType&&(i=1,o=-1),isNaN(v)||isNaN(y)||r("mid-target",v,y,i,o),i*=-1,o*=-1,isNaN(v)||isNaN(y)||r("mid-source",v,y,i,o),i=u-f.x,o=l-f.y,d||isNaN(u)||isNaN(l)||isNaN(i)||isNaN(o)||r("target",u,l,i,o)}},n.drawArrowShape=function(e,n,r,i,o,a,s,u,l,c){var h,d=this.usePaths(),p=e._private.rscratch,f=!1,g=r,v={x:s,y:u},y=Math.asin(c/Math.sqrt(l*l+c*c));0>l?y+=Math.PI/2:y=-(Math.PI/2+y);var m=this.getArrowWidth(o),b=t.arrowShapes[a];if(d){var w=m+"$"+a+"$"+y+"$"+s+"$"+u;p.arrowPathCacheKey=p.arrowPathCacheKey||{},p.arrowPathCache=p.arrowPathCache||{};var x=p.arrowPathCacheKey[n]===w;x?(h=r=p.arrowPathCache[n],f=!0):(h=r=new Path2D,p.arrowPathCacheKey[n]=w,p.arrowPathCache[n]=h)}r.beginPath&&r.beginPath(),f||b.draw(r,m,y,v),!b.leavePathOpen&&r.closePath&&r.closePath(),r=g,("filled"===i||"both"===i)&&(d?r.fill(h):r.fill()),("hollow"===i||"both"===i)&&(r.lineWidth=b.matchEdgeWidth?o:1,r.lineJoin="miter",d?r.stroke(h):r.stroke())}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t.prototype;n.getCachedImage=function(e,t){var n=this,r=n.imageCache=n.imageCache||{};if(r[e]&&r[e].image)return r[e].image;var i=r[e]=r[e]||{},o=i.image=new Image;return o.addEventListener("load",t),o.src=e,o},n.safeDrawImage=function(e,n,r,i,o,a,s,u,l,c){var h=this;try{e.drawImage(n,r,i,o,a,s,u,l,c)}catch(d){h.data.canvasNeedsRedraw[t.NODE]=!0,h.data.canvasNeedsRedraw[t.DRAG]=!0,h.drawingImage=!0,h.redraw()}},n.drawInscribedImage=function(e,n,r){var i=this,o=r._private.position.x,a=r._private.position.y,s=r._private.style,u=s["background-fit"].value,l=s["background-position-x"],c=s["background-position-y"],h=s["background-repeat"].value,d=r.width(),p=r.height(),f=r._private.rscratch,g=s["background-clip"].value,v="node"===g,y=s["background-image-opacity"].value,m=n.width,b=n.height;if(0!==m&&0!==b){var w=s["background-width"];"auto"!==w.value&&(m="%"===w.units?w.value/100*d:w.pxValue);var x=s["background-height"];if("auto"!==x.value&&(b="%"===x.units?x.value/100*p:x.pxValue),"contain"===u){var _=Math.min(d/m,p/b);m*=_,b*=_}else if("cover"===u){var _=Math.max(d/m,p/b);m*=_,b*=_}var E=o-d/2;E+="%"===l.units?(d-m)*l.value/100:l.pxValue;var k=a-p/2;k+="%"===c.units?(p-b)*c.value/100:c.pxValue,f.pathCache&&(E-=o,k-=a,o=0,a=0);var S=e.globalAlpha;if(e.globalAlpha=y,"no-repeat"===h)v&&(e.save(),f.pathCache?e.clip(f.pathCache):(t.nodeShapes[i.getNodeShape(r)].drawPath(e,o,a,d,p),e.clip())),i.safeDrawImage(e,n,0,0,n.width,n.height,E,k,m,b),v&&e.restore();else{var T=e.createPattern(n,h);e.fillStyle=T,t.nodeShapes[i.getNodeShape(r)].drawPath(e,o,a,d,p),e.translate(E,k),e.fill(),e.translate(-E,-k)}e.globalAlpha=S}}}(cytoscape),function(e){"use strict";function t(e,t,n,r,i,o){var o=o||5;e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill()}var n=e("renderer","canvas"),r=n.prototype;r.drawEdgeText=function(t,n){var r=n._private.style.label.strValue;if(!(!r||r.match(/^\s+$/)||this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var i=n._private.style["font-size"].pxValue*n.cy().zoom(),o=n._private.style["min-zoomed-font-size"].pxValue;if(!(o>i)){t.textAlign="center",t.textBaseline="middle";var a=n._private.rscratch;if(e.is.number(a.labelX)&&e.is.number(a.labelY)){var s,u=n._private.style,l="autorotate"===u["edge-text-rotation"].strValue;l?(s=a.labelAngle,t.translate(a.labelX,a.labelY),t.rotate(s),this.drawText(t,n,0,0),t.rotate(-s),t.translate(-a.labelX,-a.labelY)):this.drawText(t,n,a.labelX,a.labelY)}}}},r.drawNodeText=function(t,n){var r=n._private.style.label.strValue;if(r&&!r.match(/^\s+$/)){var i=n._private.style["font-size"].pxValue*n.cy().zoom(),o=n._private.style["min-zoomed-font-size"].pxValue;if(!(o>i)){var a=n._private.style["text-halign"].strValue,s=n._private.style["text-valign"].strValue,u=n._private.rscratch;if(e.is.number(u.labelX)&&e.is.number(u.labelY)){switch(a){case"left":t.textAlign="right";break;case"right":t.textAlign="left";break;default:t.textAlign="center"}switch(s){case"top":t.textBaseline="bottom";break;case"bottom":t.textBaseline="top";break;default:t.textBaseline="middle"}this.drawText(t,n,u.labelX,u.labelY)}}}},r.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},r.setupTextStyle=function(e,t){var n=t.effectiveOpacity(),r=t._private.style,i=r["font-style"].strValue,o=r["font-size"].pxValue+"px",a=r["font-family"].strValue,s=r["font-weight"].strValue,u=r["text-opacity"].value*r.opacity.value*n,l=r["text-outline-opacity"].value*u,c=r.color.value,h=r["text-outline-color"].value,d=r["text-shadow-blur"].pxValue,p=r["text-shadow-opacity"].value,f=r["text-shadow-color"].value,g=r["text-shadow-offset-x"].pxValue,v=r["text-shadow-offset-y"].pxValue,y=t._private.fontKey,m=this.getFontCache(e);m.key!==y&&(e.font=i+" "+s+" "+o+" "+a,m.key=y);var b=this.getLabelText(t);return e.lineJoin="round",this.fillStyle(e,c[0],c[1],c[2],u),this.strokeStyle(e,h[0],h[1],h[2],l),this.shadowStyle(e,f,p,d,g,v),
b},r.drawText=function(e,n,r,i){var o=n._private,a=o.style,s=o.rstyle,u=o.rscratch,l=n.effectiveOpacity();if(0!==l&&0!==a["text-opacity"].value){var c=this.setupTextStyle(e,n),h=a["text-halign"].value,d=a["text-valign"].value;if(n.isEdge()&&(h="center",d="center"),n.isNode()){var p=a["padding-left"].pxValue,f=a["padding-right"].pxValue,g=a["padding-top"].pxValue,v=a["padding-bottom"].pxValue;r+=p/2,r-=f/2,i+=g/2,i-=v/2}if(null!=c&&!isNaN(r)&&!isNaN(i)){var y=a["text-background-opacity"].value,m=a["text-border-opacity"].value,b=a["text-border-width"].pxValue;if(y>0||b>0&&m>0){var w=4+b/2;n.isNode()&&("top"===d?i-=w:"bottom"===d&&(i+=w),"left"===h?r-=w:"right"===h&&(r+=w));var x=s.labelWidth,_=s.labelHeight,E=r;h&&("center"==h?E-=x/2:"left"==h&&(E-=x));var k=i;if(n.isNode()?"top"==d?k-=_:"center"==d&&(k-=_/2):k-=_/2,"autorotate"===a["edge-text-rotation"].strValue?(i=0,x+=4,E=r-x/2,k=i-_/2):(E-=w,k-=w,_+=2*w,x+=2*w),y>0){var S=e.fillStyle,T=a["text-background-color"].value;e.fillStyle="rgba("+T[0]+","+T[1]+","+T[2]+","+y*l+")";var C=a["text-background-shape"].strValue;"roundrectangle"==C?t(e,E,k,x,_,2):e.fillRect(E,k,x,_),e.fillStyle=S}if(b>0&&m>0){var N=e.strokeStyle,A=e.lineWidth,P=a["text-border-color"].value,D=a["text-border-style"].value;if(e.strokeStyle="rgba("+P[0]+","+P[1]+","+P[2]+","+m*l+")",e.lineWidth=b,e.setLineDash)switch(D){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=b/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(E,k,x,_),"double"===D){var $=b/2;e.strokeRect(E+$,k+$,x-2*$,_-2*$)}e.setLineDash&&e.setLineDash([]),e.lineWidth=A,e.strokeStyle=N}}var M=2*a["text-outline-width"].pxValue;if(M>0&&(e.lineWidth=M),"wrap"===a["text-wrap"].value){var I=u.labelWrapCachedLines,O=s.labelHeight/I.length;switch(d){case"top":i-=(I.length-1)*O;break;case"bottom":break;default:case"center":i-=(I.length-1)*O/2}for(var L=0;L<I.length;L++)M>0&&e.strokeText(I[L],r,i),e.fillText(I[L],r,i),i+=O}else M>0&&e.strokeText(c,r,i),e.fillText(c,r,i);this.shadowStyle(e,"transparent",0)}}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t.prototype;n.drawNode=function(e,n,r){var i,o,a=this,s=n._private.style,u=n._private.rscratch,l=n._private,c=l.position;if(void 0!==c.x&&void 0!==c.y){var h,d=this.usePaths(),p=e,f=!1,g=s["overlay-padding"].pxValue,v=s["overlay-opacity"].value,y=s["overlay-color"].value;if(!r||0!==v){var m=n.effectiveOpacity();if(0!==m)if(i=n.width()+s["padding-left"].pxValue+s["padding-right"].pxValue,o=n.height()+s["padding-top"].pxValue+ +s["padding-bottom"].pxValue,e.lineWidth=s["border-width"].pxValue,void 0!==r&&r)v>0&&(this.fillStyle(e,y[0],y[1],y[2],v),t.nodeShapes.roundrectangle.drawPath(e,n._private.position.x,n._private.position.y,i+2*g,o+2*g),e.fill());else{var b,w=s["background-image"].value[2]||s["background-image"].value[1];if(void 0!==w){b=this.getCachedImage(w,function(){a.data.canvasNeedsRedraw[t.NODE]=!0,a.data.canvasNeedsRedraw[t.DRAG]=!0,a.drawingImage=!0,a.redraw()});var x=l.backgrounding;l.backgrounding=!b.complete,x!==l.backgrounding&&n.updateStyle(!1)}var _=s["background-color"].value,E=s["border-color"].value,k=s["border-style"].value;this.fillStyle(e,_[0],_[1],_[2],s["background-opacity"].value*m),this.strokeStyle(e,E[0],E[1],E[2],s["border-opacity"].value*m);var S=s["shadow-blur"].pxValue,T=s["shadow-opacity"].value,C=s["shadow-color"].value,N=s["shadow-offset-x"].pxValue,A=s["shadow-offset-y"].pxValue;if(this.shadowStyle(e,C,T,S,N,A),e.lineJoin="miter",e.setLineDash)switch(k){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var P=s.shape.strValue;if(d){var D=P+"$"+i+"$"+o;e.translate(c.x,c.y),u.pathCacheKey===D?(h=e=u.pathCache,f=!0):(h=e=new Path2D,u.pathCacheKey=D,u.pathCache=h)}if(!f){var $=c;d&&($={x:0,y:0}),t.nodeShapes[this.getNodeShape(n)].drawPath(e,$.x,$.y,i,o)}e=p,d?e.fill(h):e.fill(),this.shadowStyle(e,"transparent",0),void 0!==w&&b.complete&&this.drawInscribedImage(e,b,n);var M=s["background-blacken"].value,I=s["border-width"].pxValue;if(this.hasPie(n)&&(this.drawPie(e,n,m),(0!==M||0!==I)&&(d||t.nodeShapes[this.getNodeShape(n)].drawPath(e,c.x,c.y,i,o))),M>0?(this.fillStyle(e,0,0,0,M),d?e.fill(h):e.fill()):0>M&&(this.fillStyle(e,255,255,255,-M),d?e.fill(h):e.fill()),I>0&&(d?e.stroke(h):e.stroke(),"double"===k)){e.lineWidth=s["border-width"].pxValue/3;var O=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",d?e.stroke(h):e.stroke(),e.globalCompositeOperation=O}d&&e.translate(-c.x,-c.y),e.setLineDash&&e.setLineDash([])}}}},n.hasPie=function(e){return e=e[0],e._private.hasPie},n.drawPie=function(t,n,r){n=n[0];var i=n._private,o=i.style,a=o["pie-size"],s=n.width(),u=n.height(),l=i.position.x,c=i.position.y,h=Math.min(s,u)/2,d=0,p=this.usePaths();p&&(l=0,c=0),"%"===a.units?h=h*a.value/100:void 0!==a.pxValue&&(h=a.pxValue/2);for(var f=1;f<=e.style.pieBackgroundN;f++){var g=o["pie-"+f+"-background-size"].value,v=o["pie-"+f+"-background-color"].value,y=o["pie-"+f+"-background-opacity"].value*r,m=g/100;m+d>1&&(m=1-d);var b=1.5*Math.PI+2*Math.PI*d,w=2*Math.PI*m,x=b+w;0===g||d>=1||d+m>1||(t.beginPath(),t.moveTo(l,c),t.arc(l,c,h,b,x),t.closePath(),this.fillStyle(t,v[0],v[1],v[2],y),t.fill(),d+=m)}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t,r=n.prototype;r.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},r.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(t=n[i],t.context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},r.fillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},r.strokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},r.shadowStyle=function(e,t,n,r,i,o){var a=this.data.cy.zoom(),s=this.paintCache(e);(0!==s.shadowOpacity||0!==n)&&(s.shadowOpacity=n,n>0?(e.shadowBlur=r*a,e.shadowColor="rgba("+t[0]+","+t[1]+","+t[2]+","+n+")",e.shadowOffsetX=i*a,e.shadowOffsetY=o*a):(e.shadowBlur=0,e.shadowColor="transparent"))},r.matchCanvasSize=function(e){var t=this.data,r=e.clientWidth,i=e.clientHeight,o=this.getPixelRatio(),a=this.motionBlurPxRatio;(e===this.data.bufferCanvases[n.MOTIONBLUR_BUFFER_NODE]||e===this.data.bufferCanvases[n.MOTIONBLUR_BUFFER_DRAG])&&(o=a);var s,u=r*o,l=i*o;if(u!==this.canvasWidth||l!==this.canvasHeight){this.fontCaches=null;var c=t.canvasContainer;c.style.width=r+"px",c.style.height=i+"px";for(var h=0;h<n.CANVAS_LAYERS;h++)s=t.canvases[h],(s.width!==u||s.height!==l)&&(s.width=u,s.height=l,s.style.width=r+"px",s.style.height=i+"px");for(var h=0;h<n.BUFFER_COUNT;h++)s=t.bufferCanvases[h],(s.width!==u||s.height!==l)&&(s.width=u,s.height=l,s.style.width=r+"px",s.style.height=i+"px");this.textureMult=1,1>=o&&(s=t.bufferCanvases[n.TEXTURE_BUFFER],this.textureMult=2,s.width=u*this.textureMult,s.height=l*this.textureMult),this.canvasWidth=u,this.canvasHeight=l}},r.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},n.minRedrawLimit=1e3/60,n.maxRedrawLimit=1e3,n.motionBlurDelay=100,r.redraw=function(t){t=t||e.util.staticEmptyObject();var r=this,i=t.forcedContext;!i&&r.motionBlurTimeout&&clearTimeout(r.motionBlurTimeout),void 0===r.averageRedrawTime&&(r.averageRedrawTime=0),void 0===r.lastRedrawTime&&(r.lastRedrawTime=0);var o=n.minRedrawLimit,a=n.maxRedrawLimit,s=r.lastRedrawTime;s=o>s?o:s,s=a>s?s:a,void 0===r.lastDrawTime&&(r.lastDrawTime=0);var u=Date.now(),l=u-r.lastDrawTime,c=l>=s;return i||r.clearingMotionBlur||c&&!r.currentlyDrawing?(r.requestedFrame=!0,r.currentlyDrawing=!0,void(r.renderOptions=t)):void(r.skipFrame=!0)},r.startRenderLoop=function(){var t=this,n=function(){if(!t.destroyed){if(t.requestedFrame&&!t.skipFrame){var r=e.util.performanceNow();t.render(t.renderOptions);var i=t.lastRedrawTime=e.util.performanceNow();void 0===t.averageRedrawTime&&(t.averageRedrawTime=i-r),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var o=i-r;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}t.skipFrame=!1,e.util.requestAnimationFrame(n)}};e.util.requestAnimationFrame(n)},r.render=function(t){function r(e,t,n,r,i){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",h.fillStyle(e,255,255,255,h.motionBlurTransparency),e.fillRect(t,n,r,i),e.globalCompositeOperation=o}function i(e,t){var i,o,u,d;h.clearingMotionBlur||e!==f.bufferContexts[n.MOTIONBLUR_BUFFER_NODE]&&e!==f.bufferContexts[n.MOTIONBLUR_BUFFER_DRAG]?(i=N,o=T,u=h.canvasWidth,d=h.canvasHeight):(i={x:C.x*m,y:C.y*m},o=S*m,u=h.canvasWidth*m,d=h.canvasHeight*m),e.setTransform(1,0,0,1,0,0),"motionBlur"===t?r(e,0,0,u,d):a||void 0!==t&&!t||e.clearRect(0,0,u,d),s||(e.translate(i.x,i.y),e.scale(o,o)),c&&e.translate(c.x,c.y),l&&e.scale(l,l)}function o(e,t){for(var n=e.eles,r=0;r<n.length;r++){var i=n[r];i.isNode()?(h.drawNode(t,i),B||h.drawNodeText(t,i),h.drawNode(t,i,!0)):F||(h.drawEdge(t,i),B||h.drawEdgeText(t,i),h.drawEdge(t,i,!0))}}t=t||e.util.staticEmptyObject();var a=t.forcedContext,s=t.drawAllLayers,u=t.drawOnlyNodeLayer,l=t.forcedZoom,c=t.forcedPan,h=this,d=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,p=h.data.cy,f=h.data,g=f.canvasNeedsRedraw,v=h.textureOnViewport&&!a&&(h.pinching||h.hoverData.dragging||h.swipePanning||h.data.wheelZooming),y=void 0!==t.motionBlur?t.motionBlur:h.motionBlur,m=h.motionBlurPxRatio,b=p.hasCompoundNodes(),w=h.hoverData.draggingEles,x=h.hoverData.selecting||h.touchData.selecting?!0:!1;y=y&&!a&&h.motionBlurEnabled&&!x;var _=y;y&&(null==h.mbFrames&&(h.mbFrames=0),h.drawingImage||h.mbFrames++,h.mbFrames<3&&(_=!1),h.mbFrames>h.minMbLowQualFrames&&(h.motionBlurPxRatio=h.mbPxRBlurry)),h.clearingMotionBlur&&(h.motionBlurPxRatio=1),h.textureDrawLastFrame&&!v&&(g[n.NODE]=!0,g[n.SELECT_BOX]=!0);var E=h.getCachedEdges(),k=p.style()._private.coreStyle,S=p.zoom(),T=void 0!==l?l:S,C=p.pan(),N={x:C.x,y:C.y},A={zoom:S,pan:{x:C.x,y:C.y}},P=h.prevViewport,D=void 0===P||A.zoom!==P.zoom||A.pan.x!==P.pan.x||A.pan.y!==P.pan.y;D||w&&!b||(h.motionBlurPxRatio=1),c&&(N=c),T*=d,N.x*=d,N.y*=d;var $={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}};if(v||(h.textureDrawLastFrame=!1),v){h.textureDrawLastFrame=!0;var M;if(!h.textureCache){h.textureCache={},M=h.textureCache.bb=p.elements().boundingBox(),h.textureCache.texture=h.data.bufferCanvases[n.TEXTURE_BUFFER];var I=h.data.bufferContexts[n.TEXTURE_BUFFER];I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,h.canvasWidth*h.textureMult,h.canvasHeight*h.textureMult),h.render({forcedContext:I,drawOnlyNodeLayer:!0,forcedPxRatio:d*h.textureMult});var A=h.textureCache.viewport={zoom:p.zoom(),pan:p.pan(),width:h.canvasWidth,height:h.canvasHeight};A.mpan={x:(0-A.pan.x)/A.zoom,y:(0-A.pan.y)/A.zoom}}g[n.DRAG]=!1,g[n.NODE]=!1;var O=f.contexts[n.NODE],L=h.textureCache.texture,A=h.textureCache.viewport;M=h.textureCache.bb,O.setTransform(1,0,0,1,0,0),y?r(O,0,0,A.width,A.height):O.clearRect(0,0,A.width,A.height);var j=k["outside-texture-bg-color"].value,R=k["outside-texture-bg-opacity"].value;h.fillStyle(O,j[0],j[1],j[2],R),O.fillRect(0,0,A.width,A.height);var S=p.zoom();i(O,!1),O.clearRect(A.mpan.x,A.mpan.y,A.width/A.zoom/d,A.height/A.zoom/d),O.drawImage(L,A.mpan.x,A.mpan.y,A.width/A.zoom/d,A.height/A.zoom/d)}else h.textureOnViewport&&!a&&(h.textureCache=null);var q=h.pinching||h.hoverData.dragging||h.swipePanning||h.data.wheelZooming||h.hoverData.draggingEles,F=h.hideEdgesOnViewport&&q,B=h.hideLabelsOnViewport&&q;if(g[n.DRAG]||g[n.NODE]||s||u){F||h.findEdgeControlPoints(E);for(var G=h.getCachedZSortedEles(),z=p.extent(),U=0;U<G.length;U++){var V,H=G[U],M=a?null:H.boundingBox(),Y=a?!0:e.math.boundingBoxesIntersect(z,M);Y&&(V=H._private.rscratch.inDragLayer?$.drag:$.nondrag,V.eles.push(H))}}var X=[];if(X[n.NODE]=!g[n.NODE]&&y&&!h.clearedForMotionBlur[n.NODE]||h.clearingMotionBlur,X[n.NODE]&&(h.clearedForMotionBlur[n.NODE]=!0),X[n.DRAG]=!g[n.DRAG]&&y&&!h.clearedForMotionBlur[n.DRAG]||h.clearingMotionBlur,X[n.DRAG]&&(h.clearedForMotionBlur[n.DRAG]=!0),g[n.NODE]||s||u||X[n.NODE]){var W=y&&!X[n.NODE]&&1!==m,O=a||(W?h.data.bufferContexts[n.MOTIONBLUR_BUFFER_NODE]:f.contexts[n.NODE]),Z=y&&!W?"motionBlur":void 0;i(O,Z),o($.nondrag,O),s||y||(g[n.NODE]=!1)}if(!u&&(g[n.DRAG]||s||X[n.DRAG])){var W=y&&!X[n.DRAG]&&1!==m,O=a||(W?h.data.bufferContexts[n.MOTIONBLUR_BUFFER_DRAG]:f.contexts[n.DRAG]);i(O,y&&!W?"motionBlur":void 0),o($.drag,O),s||y||(g[n.DRAG]=!1)}if(h.showFps||!u&&g[n.SELECT_BOX]&&!s){var O=a||f.contexts[n.SELECT_BOX];if(i(O),1==f.select[4]&&(h.hoverData.selecting||h.touchData.selecting)){var S=f.cy.zoom(),Q=k["selection-box-border-width"].value/S;O.lineWidth=Q,O.fillStyle="rgba("+k["selection-box-color"].value[0]+","+k["selection-box-color"].value[1]+","+k["selection-box-color"].value[2]+","+k["selection-box-opacity"].value+")",O.fillRect(f.select[0],f.select[1],f.select[2]-f.select[0],f.select[3]-f.select[1]),Q>0&&(O.strokeStyle="rgba("+k["selection-box-border-color"].value[0]+","+k["selection-box-border-color"].value[1]+","+k["selection-box-border-color"].value[2]+","+k["selection-box-opacity"].value+")",O.strokeRect(f.select[0],f.select[1],f.select[2]-f.select[0],f.select[3]-f.select[1]))}if(f.bgActivePosistion&&!h.hoverData.selecting){var S=f.cy.zoom(),J=f.bgActivePosistion;O.fillStyle="rgba("+k["active-bg-color"].value[0]+","+k["active-bg-color"].value[1]+","+k["active-bg-color"].value[2]+","+k["active-bg-opacity"].value+")",O.beginPath(),O.arc(J.x,J.y,k["active-bg-size"].pxValue/S,0,2*Math.PI),O.fill()}var K=h.lastRedrawTime;if(h.showFps&&K){K=Math.round(K);var ee=Math.round(1e3/K);O.setTransform(1,0,0,1,0,0),O.fillStyle="rgba(255, 0, 0, 0.75)",O.strokeStyle="rgba(255, 0, 0, 0.75)",O.lineWidth=1,O.fillText("1 frame = "+K+" ms = "+ee+" fps",0,20);var te=60;O.strokeRect(0,30,250,20),O.fillRect(0,30,250*Math.min(ee/te,1),20)}s||(g[n.SELECT_BOX]=!1)}if(y&&1!==m){var ne=f.contexts[n.NODE],re=h.data.bufferCanvases[n.MOTIONBLUR_BUFFER_NODE],ie=f.contexts[n.DRAG],oe=h.data.bufferCanvases[n.MOTIONBLUR_BUFFER_DRAG],ae=function(e,t,n){e.setTransform(1,0,0,1,0,0),n||!_?e.clearRect(0,0,h.canvasWidth,h.canvasHeight):r(e,0,0,h.canvasWidth,h.canvasHeight);var i=m;e.drawImage(t,0,0,h.canvasWidth*i,h.canvasHeight*i,0,0,h.canvasWidth,h.canvasHeight)};(g[n.NODE]||X[n.NODE])&&(ae(ne,re,X[n.NODE]),g[n.NODE]=!1),(g[n.DRAG]||X[n.DRAG])&&(ae(ie,oe,X[n.DRAG]),g[n.DRAG]=!1)}h.currentlyDrawing=!1,h.prevViewport=A,h.clearingMotionBlur&&(h.clearingMotionBlur=!1,h.motionBlurCleared=!0,h.motionBlur=!0),y&&(h.motionBlurTimeout=setTimeout(function(){h.motionBlurTimeout=null,h.clearedForMotionBlur[n.NODE]=!1,h.clearedForMotionBlur[n.DRAG]=!1,h.motionBlur=!1,h.clearingMotionBlur=!v,h.mbFrames=0,g[n.NODE]=!0,g[n.DRAG]=!0,h.redraw()},n.motionBlurDelay)),h.drawingImage=!1,a||h.initrender||(h.initrender=!0,p.trigger("initrender")),a||p.triggerOnRender()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t.prototype;n.drawPolygonPath=function(e,t,n,r,i,o){var a=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)e.lineTo(t+a*o[2*u],n+s*o[2*u+1]);e.closePath()},n.drawPolygon=function(e,t,n,r,i,o){this.drawPolygonPath(e,t,n,r,i,o),e.fill()},n.drawRoundRectanglePath=function(t,n,r,i,o,a){var s=i/2,u=o/2,l=e.math.getRoundRectangleRadius(i,o);t.beginPath&&t.beginPath(),t.moveTo(n,r-u),t.arcTo(n+s,r-u,n+s,r,l),t.arcTo(n+s,r+u,n,r+u,l),t.arcTo(n-s,r+u,n-s,r,l),t.arcTo(n-s,r-u,n,r-u,l),t.lineTo(n,r-u),t.closePath()},n.drawRoundRectangle=function(e,t,n,r,i,o){this.drawRoundRectanglePath(e,t,n,r,i,o),e.fill()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t.prototype;n.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},n.bufferCanvasImage=function(t){var n=this.data,r=n.cy,i=r.elements().boundingBox(),o=t.full?Math.ceil(i.w):this.data.container.clientWidth,a=t.full?Math.ceil(i.h):this.data.container.clientHeight,s=1;if(void 0!==t.scale)o*=t.scale,a*=t.scale,s=t.scale;else if(e.is.number(t.maxWidth)||e.is.number(t.maxHeight)){var u=1/0,l=1/0;e.is.number(t.maxWidth)&&(u=s*t.maxWidth/o),e.is.number(t.maxHeight)&&(l=s*t.maxHeight/a),s=Math.min(u,l),o*=s,a*=s}var c=document.createElement("canvas");c.width=o,c.height=a,c.style.width=o+"px",c.style.height=a+"px";var h=c.getContext("2d");if(o>0&&a>0)if(h.clearRect(0,0,o,a),t.bg&&(h.fillStyle=t.bg,h.rect(0,0,o,a),h.fill()),h.globalCompositeOperation="source-over",t.full)this.render({forcedContext:h,drawAllLayers:!0,forcedZoom:s,forcedPan:{x:-i.x1*s,y:-i.y1*s},forcedPxRatio:1});else{var d=r.pan(),p={x:d.x*s,y:d.y*s},f=r.zoom()*s;this.render({forcedContext:h,drawAllLayers:!0,forcedZoom:f,forcedPan:p,forcedPxRatio:1})}return c},n.png=function(e){return this.bufferCanvasImage(e).toDataURL("image/png")},n.jpg=function(e){return this.bufferCanvasImage(e).toDataURL("image/jpeg")}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),n=t,r=n.prototype;r.registerBinding=function(e,t,n,r){this.bindings.push({target:e,event:t,handler:n,useCapture:r}),e.addEventListener(t,n,r)},r.nodeIsDraggable=function(e){return 0!==e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e.locked()&&e.grabbable()?!0:!1},r.load=function(){var t=this,r=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},i=function(e){var n;if(e.addToList&&t.data.cy.hasCompoundNodes()){if(!e.addToList.hasId){e.addToList.hasId={};for(var r=0;r<e.addToList.length;r++){var i=e.addToList[r];e.addToList.hasId[i.id()]=!0}}n=e.addToList.hasId}return n||{}},o=function(e,t){if(e._private.cy.hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList))for(var n=i(t),r=e.descendants(),o=0;o<r.size();o++){var a=r[o],s=a._private;t.inDragLayer&&(s.rscratch.inDragLayer=!0),t.addToList&&!n[a.id()]&&(t.addToList.push(a),n[a.id()]=!0,s.grabbed=!0);for(var u=s.edges,l=0;t.inDragLayer&&l<u.length;l++)u[l]._private.rscratch.inDragLayer=!0}},a=function(e,t){var n=e._private,r=i(t);t.inDragLayer&&(n.rscratch.inDragLayer=!0),t.addToList&&!r[e.id()]&&(t.addToList.push(e),r[e.id()]=!0,n.grabbed=!0);for(var a=n.edges,s=0;t.inDragLayer&&s<a.length;s++)a[s]._private.rscratch.inDragLayer=!0;o(e,t),u(e,{inDragLayer:t.inDragLayer})},s=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t]._private;if("nodes"===n.group){n.rscratch.inDragLayer=!1,n.grabbed=!1;for(var r=n.edges,i=0;i<r.length;i++)r[i]._private.rscratch.inDragLayer=!1;u(e[t],{inDragLayer:!1})}else"edges"===n.group&&(n.rscratch.inDragLayer=!1)}},u=function(e,t){if(null!=t.inDragLayer||null!=t.addToList){var n=e;if(e._private.cy.hasCompoundNodes()){for(;n.parent().nonempty();)n=n.parent()[0];if(n!=e){for(var r=n.descendants().merge(n).unmerge(e).unmerge(e.descendants()),o=r.connectedEdges(),a=i(t),s=0;s<r.size();s++)void 0!==t.inDragLayer&&(r[s]._private.rscratch.inDragLayer=t.inDragLayer),t.addToList&&!a[r[s].id()]&&(t.addToList.push(r[s]),a[r[s].id()]=!0,r[s]._private.grabbed=!0);for(var u=0;void 0!==t.inDragLayer&&u<o.length;u++)o[u]._private.rscratch.inDragLayer=t.inDragLayer}}}};"undefined"!=typeof MutationObserver?(t.removeObserver=new MutationObserver(function(e){for(var n=0;n<e.length;n++){var r=e[n],i=r.removedNodes;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a===t.data.container){t.destroy();break}}}}),t.removeObserver.observe(t.data.container.parentNode,{childList:!0})):t.registerBinding(t.data.container,"DOMNodeRemoved",function(e){t.destroy()}),t.registerBinding(window,"resize",e.util.debounce(function(e){t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.data.container),t.data.canvasNeedsRedraw[n.NODE]=!0,t.redraw()},100));for(var l=function(e){t.registerBinding(e,"scroll",function(e){t.invalidateContainerClientCoordsCache()})},c=t.data.cy.container();l(c),c.parentNode;)c=c.parentNode;t.registerBinding(t.data.container,"contextmenu",function(e){e.preventDefault()});var h=function(){return 0!==t.data.select[4]};t.registerBinding(t.data.container,"mousedown",function(r){r.preventDefault(),t.hoverData.capture=!0,t.hoverData.which=r.which;var i=t.data.cy,o=t.projectIntoViewport(r.clientX,r.clientY),s=t.data.select,u=t.findNearestElement(o[0],o[1],!0,!1),l=t.dragData.possibleDragElements;t.hoverData.mdownPos=o;var c=t.data.canvasNeedsRedraw,h=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var n=t.hoverData.down;n?n.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:o[0],y:o[1]}})):i.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:o[0],y:o[1]}}))}},t.tapholdDuration)};if(3==r.which){t.hoverData.cxtStarted=!0;var d=new e.Event(r,{type:"cxttapstart",cyPosition:{x:o[0],y:o[1]}});u?(u.activate(),u.trigger(d),t.hoverData.down=u):i.trigger(d),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==r.which){if(u&&u.activate(),null!=u){if(t.nodeIsDraggable(u)){var p=new e.Event(r,{type:"grab",cyPosition:{x:o[0],y:o[1]}});if(u.isNode()&&!u.selected())l=t.dragData.possibleDragElements=[],a(u,{addToList:l}),u.trigger(p);else if(u.isNode()&&u.selected()){l=t.dragData.possibleDragElements=[];for(var f=i.$(function(){return this.isNode()&&this.selected()}),g=0;g<f.length;g++)t.nodeIsDraggable(f[g])&&a(f[g],{addToList:l});u.trigger(p)}c[n.NODE]=!0,c[n.DRAG]=!0}u.trigger(new e.Event(r,{type:"mousedown",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:o[0],y:o[1]}}))}else null==u&&i.trigger(new e.Event(r,{type:"mousedown",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:o[0],y:o[1]}}));t.hoverData.down=u,t.hoverData.downTime=(new Date).getTime(),null==u?(s[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},c[n.SELECT_BOX]=!0,t.redraw()):u.isEdge()&&(s[4]=1),h()}s[0]=s[2]=o[0],s[1]=s[3]=o[1]},!1),t.registerBinding(window,"mousemove",e.util.throttle(function(i){var o=!1,s=t.hoverData.capture;if(!s){var u=t.findContainerClientCoords();if(!(i.clientX>u[0]&&i.clientX<u[0]+t.canvasWidth&&i.clientY>u[1]&&i.clientY<u[1]+t.canvasHeight))return;for(var l=t.data.container,c=i.target,h=c.parentNode,d=!1;h;){if(h===l){d=!0;break}h=h.parentNode}if(!d)return}var p=t.data.cy,f=p.zoom(),g=t.projectIntoViewport(i.clientX,i.clientY),v=t.data.select,y=t.data.canvasNeedsRedraw,m=null;t.hoverData.draggingEles||(m=t.findNearestElement(g[0],g[1],!0,!1));var b=t.hoverData.last,w=t.hoverData.down,x=[g[0]-v[2],g[1]-v[3]],_=t.dragData.possibleDragElements,E=v[2]-v[0],k=E*E,S=v[3]-v[1],T=S*S,C=k+T,N=C*f*f,A=r(i);t.hoverData.tapholdCancelled=!0;var P=function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(x[0]),e.push(x[1])):(e[0]+=x[0],e[1]+=x[1])};if(o=!0,null!=m?m.trigger(new e.Event(i,{type:"mousemove",cyPosition:{x:g[0],y:g[1]}})).trigger(new e.Event(i,{type:"vmousemove",cyPosition:{x:g[0],y:g[1]}})).trigger(new e.Event(i,{type:"tapdrag",cyPosition:{x:g[0],y:g[1]}})):null==m&&p.trigger(new e.Event(i,{type:"mousemove",cyPosition:{x:g[0],y:g[1]}})).trigger(new e.Event(i,{type:"vmousemove",cyPosition:{x:g[0],y:g[1]}})).trigger(new e.Event(i,{type:"tapdrag",cyPosition:{x:g[0],y:g[1]}})),3===t.hoverData.which){var D=new e.Event(i,{type:"cxtdrag",cyPosition:{x:g[0],y:g[1]}});w?w.trigger(D):p.trigger(D),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&m===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.trigger(new e.Event(i,{type:"cxtdragout",cyPosition:{x:g[0],y:g[1]}})),t.hoverData.cxtOver=m,m&&m.trigger(new e.Event(i,{type:"cxtdragover",cyPosition:{x:g[0],y:g[1]}})))}else if(t.hoverData.dragging){if(o=!0,p.panningEnabled()&&p.userPanningEnabled()){var $;if(t.hoverData.justStartedPan){var M=t.hoverData.mdownPos;$={x:(g[0]-M[0])*f,y:(g[1]-M[1])*f},t.hoverData.justStartedPan=!1}else $={x:x[0]*f,y:x[1]*f};p.panBy($),t.hoverData.dragged=!0}g=t.projectIntoViewport(i.clientX,i.clientY)}else if(1!=v[4]||null!=w&&!w.isEdge()){if(w&&w.isEdge()&&w.active()&&w.unactivate(),m!=b&&(b&&(b.trigger(new e.Event(i,{type:"mouseout",cyPosition:{x:g[0],y:g[1]}})),b.trigger(new e.Event(i,{type:"tapdragout",cyPosition:{x:g[0],y:g[1]}}))),m&&(m.trigger(new e.Event(i,{type:"mouseover",cyPosition:{x:g[0],y:g[1]}})),m.trigger(new e.Event(i,{type:"tapdragover",cyPosition:{x:g[0],y:g[1]}}))),t.hoverData.last=m),w&&w.isNode()&&t.nodeIsDraggable(w))if(N>=t.desktopTapThreshold2){var I=!t.dragData.didDrag;I&&(y[n.NODE]=!0),t.dragData.didDrag=!0;for(var O=[],L=0;L<_.length;L++){var j=_[L];if(t.hoverData.draggingEles||a(j,{inDragLayer:!0}),j.isNode()&&t.nodeIsDraggable(j)&&j.grabbed()){var R=j._private.position;if(O.push(j),e.is.number(x[0])&&e.is.number(x[1])&&(R.x+=x[0],R.y+=x[1],I)){var q=t.hoverData.dragDelta;e.is.number(q[0])&&e.is.number(q[1])&&(R.x+=q[0],R.y+=q[1])}}}t.hoverData.draggingEles=!0;var F=new e.Collection(p,O);F.updateCompoundBounds(),F.trigger("position drag"),y[n.DRAG]=!0,t.redraw()}else P();o=!0}else!t.hoverData.dragging&&p.boxSelectionEnabled()&&A?(t.data.bgActivePosistion=void 0,t.hoverData.selecting=!0,y[n.SELECT_BOX]=!0,t.redraw()):!t.hoverData.selecting&&p.panningEnabled()&&p.userPanningEnabled()&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,v[4]=0,t.data.bgActivePosistion={x:g[0],y:g[1]},y[n.SELECT_BOX]=!0,t.redraw()),w&&w.isEdge()&&w.active()&&w.unactivate();return v[2]=g[0],v[3]=g[1],o?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0},1e3/30,{trailing:!0}),!1),t.registerBinding(window,"mouseup",function(i){var o=t.hoverData.capture;if(o){t.hoverData.capture=!1;var a=t.data.cy,u=t.projectIntoViewport(i.clientX,i.clientY),l=t.data.select,c=t.findNearestElement(u[0],u[1],!0,!1),h=t.dragData.possibleDragElements,d=t.hoverData.down,p=r(i),f=t.data.canvasNeedsRedraw;if(t.data.bgActivePosistion&&(f[n.SELECT_BOX]=!0,t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,d&&d.unactivate(),3===t.hoverData.which){var g=new e.Event(i,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}});if(d?d.trigger(g):a.trigger(g),!t.hoverData.cxtDragged){var v=new e.Event(i,{type:"cxttap",cyPosition:{x:u[0],y:u[1]}});d?d.trigger(v):a.trigger(v)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else{if(null!=d||t.dragData.didDrag||t.hoverData.dragged||(a.$(function(){return this.selected()}).unselect(),h.length>0&&(f[n.NODE]=!0),t.dragData.possibleDragElements=h=[]),null!=c?c.trigger(new e.Event(i,{type:"mouseup",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(i,{type:"tapend",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(i,{type:"vmouseup",cyPosition:{x:u[0],y:u[1]}})):null==c&&a.trigger(new e.Event(i,{type:"mouseup",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(i,{type:"tapend",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(i,{type:"vmouseup",cyPosition:{x:u[0],y:u[1]}})),t.dragData.didDrag||t.hoverData.dragged||(null!=c?c.trigger(new e.Event(i,{type:"click",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(i,{type:"tap",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(i,{type:"vclick",cyPosition:{x:u[0],y:u[1]}})):null==c&&a.trigger(new e.Event(i,{type:"click",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(i,{type:"tap",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(i,{type:"vclick",cyPosition:{x:u[0],y:u[1]}}))),c!=d||t.dragData.didDrag||null!=c&&c._private.selectable&&(t.hoverData.dragging||("additive"===a.selectionType()||p?c.selected()?c.unselect():c.select():p||(a.$(":selected").unmerge(c).unselect(),c.select())),f[n.NODE]=!0),t.hoverData.selecting&&a.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]){var y=[],m=t.getAllInBox(l[0],l[1],l[2],l[3]);f[n.SELECT_BOX]=!0,m.length>0&&(f[n.NODE]=!0);for(var b=0;b<m.length;b++)m[b]._private.selectable&&y.push(m[b]);var w=new e.Collection(a,y);"additive"===a.selectionType()?w.select():(p||a.$(":selected").unmerge(w).unselect(),w.select()),t.redraw()}t.hoverData.dragging&&(t.hoverData.dragging=!1,f[n.SELECT_BOX]=!0,f[n.NODE]=!0,t.redraw()),l[4]||(f[n.DRAG]=!0,f[n.NODE]=!0,s(h),d&&d.trigger("free"))}l[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[]}},!1);var d=function(e){if(!t.scrollingPage){var r=t.data.cy,i=t.projectIntoViewport(e.clientX,e.clientY),o=[i[0]*r.zoom()+r.pan().x,i[1]*r.zoom()+r.pan().y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||h())return void e.preventDefault();if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.data.canvasNeedsRedraw[n.NODE]=!0,t.redraw()},150);var a=e.deltaY/-250||e.wheelDeltaY/1e3||e.wheelDelta/1e3;a*=t.wheelSensitivity;var s=1===e.deltaMode;s&&(a*=33),r.zoom({level:r.zoom()*Math.pow(10,a),renderedPosition:{x:o[0],y:o[1]}})}}};t.registerBinding(t.data.container,"wheel",d,!0),t.registerBinding(window,"scroll",function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.data.container,"mouseout",function(n){var r=t.projectIntoViewport(n.clientX,n.clientY);t.data.cy.trigger(new e.Event(n,{type:"mouseout",cyPosition:{x:r[0],y:r[1]}}))},!1),t.registerBinding(t.data.container,"mouseover",function(n){var r=t.projectIntoViewport(n.clientX,n.clientY);t.data.cy.trigger(new e.Event(n,{type:"mouseover",cyPosition:{x:r[0],y:r[1]}}))},!1);var p,f,g,v,y,m,b,w,x,_,E,k,S,T,C=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},N=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};t.registerBinding(t.data.container,"touchstart",T=function(r){clearTimeout(t.threeFingerSelectTimeout),r.target!==t.data.link&&r.preventDefault(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var i=t.data.cy,o=t.getCachedNodes(),s=t.getCachedEdges(),u=t.touchData.now,l=t.touchData.earlier,c=t.data.canvasNeedsRedraw;if(r.touches[0]){var h=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=h[0],u[1]=h[1]}if(r.touches[1]){var h=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=h[0],u[3]=h[1]}if(r.touches[2]){var h=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=h[0],u[5]=h[1]}if(r.touches[1]){var d=function(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()};d(o),d(s);var T=t.findContainerClientCoords();x=T[0],_=T[1],E=T[2],k=T[3],p=r.touches[0].clientX-x,f=r.touches[0].clientY-_,g=r.touches[1].clientX-x,v=r.touches[1].clientY-_,S=p>=0&&E>=p&&g>=0&&E>=g&&f>=0&&k>=f&&v>=0&&k>=v;var A=i.pan(),P=i.zoom();y=C(p,f,g,v),m=N(p,f,g,v),b=[(p+g)/2,(f+v)/2],w=[(b[0]-A.x)/P,(b[1]-A.y)/P];var D=200,$=D*D;if($>m&&!r.touches[2]){var M=t.findNearestElement(u[0],u[1],!0,!0),I=t.findNearestElement(u[2],u[3],!0,!0);return M&&M.isNode()?(M.activate().trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),t.touchData.start=M):I&&I.isNode()?(I.activate().trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),t.touchData.start=I):(i.trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),t.touchData.start=null),t.touchData.start&&(t.touchData.start._private.grabbed=!1),
t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(r.touches[2]);else if(r.touches[1]);else if(r.touches[0]){var O=t.findNearestElement(u[0],u[1],!0,!0);if(null!=O){if(O.activate(),t.touchData.start=O,O.isNode()&&t.nodeIsDraggable(O)){var L=t.dragData.touchDragEles=[];if(c[n.NODE]=!0,c[n.DRAG]=!0,O.selected())for(var j=i.$(function(){return this.isNode()&&this.selected()}),R=0;R<j.length;R++){var q=j[R];t.nodeIsDraggable(q)&&a(q,{addToList:L})}else a(O,{addToList:L});O.trigger(new e.Event(r,{type:"grab",cyPosition:{x:u[0],y:u[1]}}))}O.trigger(new e.Event(r,{type:"touchstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(r,{type:"vmousdown",cyPosition:{x:u[0],y:u[1]}}))}null==O&&(i.trigger(new e.Event(r,{type:"touchstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:u[0],y:u[1]}})),t.data.bgActivePosistion={x:h[0],y:h[1]},c[n.SELECT_BOX]=!0,t.redraw());for(var F=0;F<u.length;F++)l[F]=u[F],t.touchData.startPosition[F]=u[F];t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved!==!1||t.pinching||(t.touchData.start?t.touchData.start.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:u[0],y:u[1]}})):(t.data.cy.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:u[0],y:u[1]}})),i.$(":selected").unselect()))},t.tapholdDuration)}},!1);var A;t.registerBinding(window,"touchmove",A=e.util.throttle(function(r){var i=t.data.select,o=t.touchData.capture;o&&r.preventDefault();var s=t.data.cy,u=t.touchData.now,l=t.touchData.earlier,c=s.zoom(),h=t.data.canvasNeedsRedraw;if(r.touches[0]){var d=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=d[0],u[1]=d[1]}if(r.touches[1]){var d=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=d[0],u[3]=d[1]}if(r.touches[2]){var d=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=d[0],u[5]=d[1]}for(var b=[],E=0;E<u.length;E++)b[E]=u[E]-l[E];var k=t.touchData.startPosition,T=u[0]-k[0],A=T*T,P=u[1]-k[1],D=P*P,$=A+D,M=$*c*c;if(o&&t.touchData.cxt){var I=r.touches[0].clientX-x,O=r.touches[0].clientY-_,L=r.touches[1].clientX-x,j=r.touches[1].clientY-_,R=N(I,O,L,j),q=R/m,F=150,B=F*F,G=1.5,z=G*G;if(q>=z||R>=B){t.touchData.cxt=!1,t.touchData.start&&(t.touchData.start.unactivate(),t.touchData.start=null),t.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0;var U=new e.Event(r,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}});t.touchData.start?t.touchData.start.trigger(U):s.trigger(U)}}if(o&&t.touchData.cxt){var U=new e.Event(r,{type:"cxtdrag",cyPosition:{x:u[0],y:u[1]}});t.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0,t.touchData.start?t.touchData.start.trigger(U):s.trigger(U),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var V=t.findNearestElement(u[0],u[1],!0,!0);t.touchData.cxtOver&&V===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.trigger(new e.Event(r,{type:"cxtdragout",cyPosition:{x:u[0],y:u[1]}})),t.touchData.cxtOver=V,V&&V.trigger(new e.Event(r,{type:"cxtdragover",cyPosition:{x:u[0],y:u[1]}})))}else if(o&&r.touches[2]&&s.boxSelectionEnabled())t.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,t.touchData.selecting=!0,h[n.SELECT_BOX]=!0,i&&0!==i.length&&void 0!==i[0]?(i[2]=(u[0]+u[2]+u[4])/3,i[3]=(u[1]+u[3]+u[5])/3):(i[0]=(u[0]+u[2]+u[4])/3,i[1]=(u[1]+u[3]+u[5])/3,i[2]=(u[0]+u[2]+u[4])/3+1,i[3]=(u[1]+u[3]+u[5])/3+1),i[4]=1,t.touchData.selecting=!0,t.redraw();else if(o&&r.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){t.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0;var H=t.dragData.touchDragEles;if(H){h[n.DRAG]=!0;for(var Y=0;Y<H.length;Y++)H[Y]._private.grabbed=!1,H[Y]._private.rscratch.inDragLayer=!1}var I=r.touches[0].clientX-x,O=r.touches[0].clientY-_,L=r.touches[1].clientX-x,j=r.touches[1].clientY-_,X=C(I,O,L,j),W=X/y;if(1!=W&&S){var Z=I-p,Q=O-f,J=L-g,K=j-v,ee=(Z+J)/2,te=(Q+K)/2,ne=s.zoom(),re=ne*W,ie=s.pan(),oe=w[0]*ne+ie.x,ae=w[1]*ne+ie.y,se={x:-re/ne*(oe-ie.x-ee)+oe,y:-re/ne*(ae-ie.y-te)+ae};if(t.touchData.start){var H=t.dragData.touchDragEles;if(H)for(var Y=0;Y<H.length;Y++){var ue=H[Y]._private;ue.grabbed=!1,ue.rscratch.inDragLayer=!1}var le=t.touchData.start._private;le.active=!1,le.grabbed=!1,le.rscratch.inDragLayer=!1,h[n.DRAG]=!0,t.touchData.start.trigger("free").trigger("unactivate")}s.viewport({zoom:re,pan:se,cancelOnFailedZoom:!0}),y=X,p=I,f=O,g=L,v=j,t.pinching=!0}if(r.touches[0]){var d=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=d[0],u[1]=d[1]}if(r.touches[1]){var d=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=d[0],u[3]=d[1]}if(r.touches[2]){var d=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=d[0],u[5]=d[1]}}else if(r.touches[0]){var ce=t.touchData.start,he=t.touchData.last,V=V||t.findNearestElement(u[0],u[1],!0,!0);if(null!=ce&&"nodes"==ce._private.group&&t.nodeIsDraggable(ce))if(M>=t.touchTapThreshold2){for(var H=t.dragData.touchDragEles,de=0;de<H.length;de++){var pe=H[de];if(t.nodeIsDraggable(pe)&&pe.isNode()&&pe.grabbed()){t.dragData.didDrag=!0;var fe=pe._private.position,ge=!t.hoverData.draggingEles;if(e.is.number(b[0])&&e.is.number(b[1])&&(fe.x+=b[0],fe.y+=b[1]),ge){a(pe,{inDragLayer:!0}),h[n.NODE]=!0;var ve=t.touchData.dragDelta;e.is.number(ve[0])&&e.is.number(ve[1])&&(fe.x+=ve[0],fe.y+=ve[1])}}}var ye=new e.Collection(s,pe);ye.updateCompoundBounds(),ye.trigger("position drag"),t.hoverData.draggingEles=!0,h[n.DRAG]=!0,t.touchData.startPosition[0]==l[0]&&t.touchData.startPosition[1]==l[1]&&(h[n.NODE]=!0),t.redraw()}else{var ve=t.touchData.dragDelta=t.touchData.dragDelta||[];0===ve.length?(ve.push(b[0]),ve.push(b[1])):(ve[0]+=b[0],ve[1]+=b[1])}null!=ce&&(ce.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),ce.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),ce.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}}))),null==ce&&(null!=V&&(V.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),V.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),V.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}}))),null==V&&(s.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),s.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),s.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}})))),V!=he&&(he&&he.trigger(new e.Event(r,{type:"tapdragout",cyPosition:{x:u[0],y:u[1]}})),V&&V.trigger(new e.Event(r,{type:"tapdragover",cyPosition:{x:u[0],y:u[1]}}))),t.touchData.last=V;for(var Y=0;Y<u.length;Y++)u[Y]&&t.touchData.startPosition[Y]&&Math.abs(u[Y]-t.touchData.startPosition[Y])>4&&(t.touchData.singleTouchMoved=!0);if(o&&(null==ce||ce.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){t.swipePanning?s.panBy({x:b[0]*c,y:b[1]*c}):M>=t.touchTapThreshold2&&(t.swipePanning=!0,s.panBy({x:T*c,y:P*c})),ce&&(ce.unactivate(),t.data.bgActivePosistion||(t.data.bgActivePosistion={x:u[0],y:u[1]}),h[n.SELECT_BOX]=!0,t.touchData.start=null);var d=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=d[0],u[1]=d[1]}}for(var E=0;E<u.length;E++)l[E]=u[E]},1e3/30,{trailing:!0}),!1);var P;t.registerBinding(window,"touchcancel",P=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()});var D;if(t.registerBinding(window,"touchend",D=function(r){var i=t.touchData.start,o=t.touchData.capture;if(o){t.touchData.capture=!1,r.preventDefault();var a=t.data.select;t.swipePanning=!1,t.hoverData.draggingEles=!1;var u=t.data.cy,l=u.zoom(),c=t.touchData.now,h=t.touchData.earlier,d=t.data.canvasNeedsRedraw;if(r.touches[0]){var p=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);c[0]=p[0],c[1]=p[1]}if(r.touches[1]){var p=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);c[2]=p[0],c[3]=p[1]}if(r.touches[2]){var p=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);c[4]=p[0],c[5]=p[1]}i&&i.unactivate();var f;if(t.touchData.cxt){if(f=new e.Event(r,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}}),i?i.trigger(f):u.trigger(f),!t.touchData.cxtDragged){var g=new e.Event(r,{type:"cxttap",cyPosition:{x:c[0],y:c[1]}});i?i.trigger(g):u.trigger(g)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!r.touches[2]&&u.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1,clearTimeout(this.threeFingerSelectTimeout);var v=[],y=t.getAllInBox(a[0],a[1],a[2],a[3]);a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,d[n.SELECT_BOX]=!0;for(var m=0;m<y.length;m++)y[m]._private.selectable&&v.push(y[m]);var b=new e.Collection(u,v);"single"===u.selectionType()&&u.$(":selected").unmerge(b).unselect(),b.select(),b.length>0?d[n.NODE]=!0:t.redraw()}var w=!1;if(null!=i&&(i._private.active=!1,w=!0,i.unactivate()),r.touches[2])t.data.bgActivePosistion=void 0,d[n.SELECT_BOX]=!0;else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){t.data.bgActivePosistion=void 0,d[n.SELECT_BOX]=!0;var x=t.dragData.touchDragEles;if(null!=i){var _=i._private.grabbed;s(x),d[n.DRAG]=!0,d[n.NODE]=!0,_&&i.trigger("free"),i.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),i.unactivate(),t.touchData.start=null}else{var E=t.findNearestElement(c[0],c[1],!0,!0);null!=E&&E.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),null==E&&u.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}))}var k=t.touchData.startPosition[0]-c[0],S=k*k,T=t.touchData.startPosition[1]-c[1],C=T*T,N=S+C,A=N*l*l;null!=i&&!t.dragData.didDrag&&i._private.selectable&&A<t.touchTapThreshold2&&!t.pinching&&("single"===u.selectionType()?(u.$(":selected").unmerge(i).unselect(),i.select()):i.selected()?i.unselect():i.select(),w=!0,d[n.NODE]=!0),t.touchData.singleTouchMoved===!1&&(i?i.trigger(new e.Event(r,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})):u.trigger(new e.Event(r,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:c[0],y:c[1]}}))),t.touchData.singleTouchMoved=!0}for(var P=0;P<c.length;P++)h[P]=c[P];t.dragData.didDrag=!1,0===r.touches.length&&(t.touchData.dragDelta=[]),w&&i&&i.updateStyle(!1),r.touches.length<2&&(t.pinching=!1,d[n.NODE]=!0,t.redraw())}},!1),"undefined"==typeof TouchEvent){var $=[],M=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},I=function(e){return{event:e,touch:M(e)}},O=function(e){$.push(I(e))},L=function(e){for(var t=0;t<$.length;t++){var n=$[t];if(n.event.pointerId===e.pointerId)return void $.splice(t,1)}},j=function(e){var t=$.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=M(e)},R=function(e){e.touches=$.map(function(e){return e.touch})};t.registerBinding(t.data.container,"pointerdown",function(e){"mouse"!==e.pointerType&&(e.preventDefault(),O(e),R(e),T(e))}),t.registerBinding(t.data.container,"pointerup",function(e){"mouse"!==e.pointerType&&(L(e),R(e),D(e))}),t.registerBinding(t.data.container,"pointercancel",function(e){"mouse"!==e.pointerType&&(L(e),R(e),P(e))}),t.registerBinding(t.data.container,"pointermove",function(e){"mouse"!==e.pointerType&&(e.preventDefault(),j(e),R(e),A(e))})}}}(cytoscape),function(e){"use strict";function t(t,n){return i[t]={name:t,points:n,draw:function(e,t,n,i,o){r.drawPolygon(e,t,n,i,o,this.points)},drawPath:function(e,t,n,i,o){r.drawPolygonPath(e,t,n,i,o,this.points)},intersectLine:function(t,n,r,i,o,a,s){return e.math.polygonIntersectLine(o,a,this.points,t,n,r/2,i/2,s)},checkPoint:function(n,r,o,a,s,u,l){return e.math.pointInsidePolygon(n,r,i[t].points,u,l,a,s,[0,-1],o)}}}for(var n=e("renderer","canvas"),r=n.prototype,i=n.nodeShapes={},o=Math.sin(0),a=Math.cos(0),s={},u={},l=.1,c=0*Math.PI;c<2*Math.PI;c+=l)s[c]=Math.sin(c),u[c]=Math.cos(c);i.ellipse={name:"ellipse",draw:function(e,t,n,r,i){this.drawPath(e,t,n,r,i),e.fill()},drawPath:function(e,t,n,r,i){e.beginPath&&e.beginPath();for(var c,h,d=r/2,p=i/2,f=0*Math.PI;f<2*Math.PI;f+=l)c=t-d*s[f]*o+d*u[f]*a,h=n+p*u[f]*o+p*s[f]*a,0===f?e.moveTo(c,h):e.lineTo(c,h);e.closePath()},intersectLine:function(t,n,r,i,o,a,s){var u=e.math.intersectLineEllipse(o,a,t,n,r/2+s,i/2+s);return u},checkPoint:function(e,t,n,r,i,o,a){return e-=o,t-=a,e/=r/2+n,t/=i/2+n,Math.pow(e,2)+Math.pow(t,2)<=1}},t("triangle",e.math.generateUnitNgonPointsFitToSquare(3,0)),t("square",e.math.generateUnitNgonPointsFitToSquare(4,0)),i.rectangle=i.square,i.roundrectangle={name:"roundrectangle",points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,i,o){r.drawRoundRectangle(e,t,n,i,o,10)},drawPath:function(e,t,n,i,o){r.drawRoundRectanglePath(e,t,n,i,o,10)},intersectLine:function(t,n,r,i,o,a,s){return e.math.roundRectangleIntersectLine(o,a,t,n,r,i,s)},checkPoint:function(t,n,r,i,o,a,s){var u=e.math.getRoundRectangleRadius(i,o);if(e.math.pointInsidePolygon(t,n,this.points,a,s,i,o-2*u,[0,-1],r))return!0;if(e.math.pointInsidePolygon(t,n,this.points,a,s,i-2*u,o,[0,-1],r))return!0;var l=function(e,t,n,r,i,o,a){return e-=n,t-=r,e/=i/2+a,t/=o/2+a,1>=e*e+t*t};return l(t,n,a-i/2+u,s-o/2+u,2*u,2*u,r)?!0:l(t,n,a+i/2-u,s-o/2+u,2*u,2*u,r)?!0:l(t,n,a+i/2-u,s+o/2-u,2*u,2*u,r)?!0:l(t,n,a-i/2+u,s+o/2-u,2*u,2*u,r)?!0:!1}},t("diamond",[0,1,1,0,0,-1,-1,0]),t("pentagon",e.math.generateUnitNgonPointsFitToSquare(5,0)),t("hexagon",e.math.generateUnitNgonPointsFitToSquare(6,0)),t("heptagon",e.math.generateUnitNgonPointsFitToSquare(7,0)),t("octagon",e.math.generateUnitNgonPointsFitToSquare(8,0));var h=new Array(20),d=e.math.generateUnitNgonPoints(5,0),p=e.math.generateUnitNgonPoints(5,Math.PI/5),f=.5*(3-Math.sqrt(5));f*=1.57;for(var c=0;c<p.length/2;c++)p[2*c]*=f,p[2*c+1]*=f;for(var c=0;5>c;c++)h[4*c]=d[2*c],h[4*c+1]=d[2*c+1],h[4*c+2]=p[2*c],h[4*c+3]=p[2*c+1];h=e.math.fitPolygonToSquare(h),t("star",h),t("vee",[-1,-1,0,-.333,1,-1,0,1]),t("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),i.makePolygon=function(e){var n,r=e.join("$"),o="polygon-"+r;return(n=i[o])?n:t(o,e)}}(cytoscape),function(e){"use strict";function t(t){this._private={},this._private.options=e.util.extend({},n,t)}var n={animate:!0,maxSimulationTime:4e3,fit:!0,padding:30,boundingBox:void 0,ungrabifyWhileSimulating:!1,randomize:!1,ready:void 0,stop:void 0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:.1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3},infinite:!1};t.prototype.run=function(){var t=this,n=this._private.options;return e.util.require("arbor",function(r){function i(e,t){return null==t?void 0:"function"==typeof t?t.apply(e,[e._private.data,{nodes:l.length,edges:c.length,element:e}]):t}function o(e){if(!e.isFullAutoParent()){var t=e._private.data.id,r=i(e,n.nodeMass),o=e._private.locked,a=e.position();n.randomize&&(a={x:Math.round(h.x1+(h.x2-h.x1)*Math.random()),y:Math.round(h.y1+(h.y2-h.y1)*Math.random())});var s=p.fromScreen({x:a.x,y:a.y});e.scratch().arbor=p.addNode(t,{element:e,mass:r,fixed:o,x:o&&s?s.x:void 0,y:o&&s?s.y:void 0})}}function a(e){var t=e.source().id(),r=e.target().id(),o=i(e,n.edgeLength);e.scratch().arbor=p.addEdge(t,r,{length:o})}var s=n.cy,u=n.eles,l=u.nodes().not(":parent"),c=u.edges(),h=e.math.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),d=!1;if(t.trigger({type:"layoutstart",layout:t}),void 0!==n.liveUpdate&&(n.animate=n.liveUpdate),u.nodes().size()<=1)return n.fit&&s.reset(),u.nodes().position({x:Math.round((h.x1+h.x2)/2),y:Math.round((h.y1+h.y2)/2)}),t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",n.stop),void t.trigger({type:"layoutstop",layout:t});var p=t._private.system=r.ParticleSystem();p.parameters({repulsion:n.repulsion,stiffness:n.stiffness,friction:n.friction,gravity:n.gravity,fps:n.fps,dt:n.dt,precision:n.precision}),n.animate&&n.fit&&s.fit(h,n.padding);var f,g=250,v=!1,y=+new Date,m={init:function(e){},redraw:function(){var e=p.energy();if(!n.infinite&&null!=n.stableEnergy&&null!=e&&e.n>0&&n.stableEnergy(e))return void t.stop();n.infinite||g==1/0||(clearTimeout(f),f=setTimeout(S,g));var r=s.collection();p.eachNode(function(e,t){var n=e.data,i=n.element;null!=i&&(i.locked()||i.grabbed()||(i.silentPosition({x:h.x1+t.x,y:h.y1+t.y}),r.merge(i)))}),n.animate&&r.length>0&&(d=!0,r.rtrigger("position"),n.fit&&s.fit(n.padding),y=+new Date,d=!1),v||(v=!0,t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t}))}};p.renderer=m,p.screenSize(h.w,h.h),p.screenPadding(n.padding,n.padding,n.padding,n.padding),p.screenStep(n.stepSize);var b;l.on("grab free position",b=function(e){if(!d){var t=this.position(),i=p.fromScreen(t);if(i){var o=r.Point(i.x,i.y),a=n.padding;switch(h.x1+a<=t.x&&t.x<=h.x2-a&&h.y1+a<=t.y&&t.y<=h.y2-a&&(this.scratch().arbor.p=o),e.type){case"grab":this.scratch().arbor.fixed=!0;break;case"free":this.scratch().arbor.fixed=!1}}}});var w;l.on("lock unlock",w=function(e){node.scratch().arbor.fixed=node.locked()});var x;u.on("remove",x=function(e){});var _;s.on("add","*",_=function(){});var E;s.on("resize",E=function(){if(null==n.boundingBox&&null!=t._private.system){var e=s.width(),r=s.height();p.screenSize(e,r)}}),l.each(function(e,t){o(t)}),c.each(function(e,t){a(t)});var k=l.filter(":grabbable");n.ungrabifyWhileSimulating&&k.ungrabify();var S=t._private.doneHandler=function(){t._private.doneHandler=null,n.animate||(n.fit&&s.reset(),l.rtrigger("position")),l.off("grab free position",b),l.off("lock unlock",w),u.off("remove",x),s.off("add","*",_),s.off("resize",E),n.ungrabifyWhileSimulating&&k.grabify(),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t})};p.start(),!n.infinite&&null!=n.maxSimulationTime&&n.maxSimulationTime>0&&n.maxSimulationTime!==1/0&&setTimeout(function(){t.stop()},n.maxSimulationTime)}),this},t.prototype.stop=function(){return null!=this._private.system&&this._private.system.stop(),this._private.doneHandler&&this._private.doneHandler(),this},e("layout","arbor",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var n={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t,n=this.options,r=n,i=n.cy,o=r.eles,a=o.nodes().not(":parent"),s=o,u=e.math.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(e.is.elementOrCollection(r.roots))t=r.roots;else if(e.is.array(r.roots)){for(var l=[],c=0;c<r.roots.length;c++){var h=r.roots[c],d=i.getElementById(h);l.push(d)}t=new e.Collection(i,l)}else if(e.is.string(r.roots))t=i.$(r.roots);else if(r.directed)t=a.roots();else{for(var p=[],f=a;f.length>0;){var g=i.collection();o.bfs({roots:f[0],visit:function(e,t,n,r,i){g=g.add(n)},directed:!1}),f=f.not(g),p.push(g)}t=i.collection();for(var c=0;c<p.length;c++){var v=p[c],y=v.maxDegree(!1),m=v.filter(function(){return this.degree(!1)===y});t=t.add(m)}}var b=[],w={},x={},_={},E={},k={};s.bfs({roots:t,directed:r.directed,visit:function(e,t,n,r,i){var o=this[0],a=o.id();if(b[t]||(b[t]=[]),b[t].push(o),w[a]=!0,x[a]=t,_[a]=i,E[a]=r,i){var s=i.id(),u=k[s]=k[s]||[];u.push(n)}}});for(var S=[],c=0;c<a.length;c++){var d=a[c];w[d.id()]||S.push(d)}for(var T=3*S.length,C=0;0!==S.length&&T>C;){for(var N=S.shift(),A=N.neighborhood().nodes(),P=!1,c=0;c<A.length;c++){var D=x[A[c].id()];if(void 0!==D){b[D].push(N),P=!0;break}}P||S.push(N),C++}for(;0!==S.length;){var N=S.shift(),P=!1;P||(0===b.length&&b.push([]),b[0].push(N))}var $=function(){for(var e=0;e<b.length;e++)for(var t=b[e],n=0;n<t.length;n++){var r=t[n];r._private.scratch.breadthfirst={depth:e,index:n}}};$();for(var M=function(e){for(var t,n=e.connectedEdges(function(){return this.data("target")===e.id()}),r=e._private.scratch.breadthfirst,i=0,o=0;o<n.length;o++){var a=n[o],s=a.source()[0],u=s._private.scratch.breadthfirst;r.depth<=u.depth&&i<u.depth&&(i=u.depth,t=s)}return t},I=0;I<r.maximalAdjustments;I++){for(var O=b.length,L=[],c=0;O>c;c++)for(var D=b[c],j=D.length,R=0;j>R;R++){var d=D[R],q=d._private.scratch.breadthfirst,F=M(d);F&&(q.intEle=F,L.push(d))}for(var c=0;c<L.length;c++){var d=L[c],q=d._private.scratch.breadthfirst,F=q.intEle,B=F._private.scratch.breadthfirst;b[q.depth].splice(q.index,1);for(var G=B.depth+1;G>b.length-1;)b.push([]);b[G].push(d),q.depth=G,q.index=b[G].length-1}$()}var z=0;if(r.avoidOverlap){for(var c=0;c<a.length;c++){var U=a[c],V=U.boundingBox(),H=V.w,Y=V.h;z=Math.max(z,H,Y)}z*=r.spacingFactor}for(var X={},W=function(e){if(X[e.id()])return X[e.id()];for(var t=e._private.scratch.breadthfirst.depth,n=e.neighborhood().nodes().not(":parent"),r=0,i=0,o=0;o<n.length;o++){var a=n[o],s=a._private.scratch.breadthfirst,u=s.index,l=s.depth,c=b[l].length;(t>l||0===t)&&(r+=u/c,i++)}return i=Math.max(1,i),r/=i,0===i&&(r=void 0),X[e.id()]=r,r},Z=function(e,t){var n=W(e),r=W(t);return n-r},Q=0;3>Q;Q++){for(var c=0;c<b.length;c++)b[c]=b[c].sort(Z);$()}for(var J=0,c=0;c<b.length;c++)J=Math.max(b[c].length,J);for(var K={x:u.x1+u.w/2,y:u.x1+u.h/2},ee=function(e,t){var n=e._private.scratch.breadthfirst,i=n.depth,o=n.index,a=b[i].length,s=Math.max(u.w/(a+1),z),l=Math.max(u.h/(b.length+1),z),c=Math.min(u.w/2/b.length,u.h/2/b.length);if(c=Math.max(c,z),r.circle){if(r.circle){var h=c*i+c-(b.length>0&&b[0].length<=3?c/2:0),d=2*Math.PI/b[i].length*o;return 0===i&&1===b[0].length&&(h=1),{x:K.x+h*Math.cos(d),y:K.y+h*Math.sin(d)}}return{x:K.x+(o+1-(a+1)/2)*s,y:(i+1)*l}}var p={x:K.x+(o+1-(a+1)/2)*s,y:(i+1)*l};return t?p:p},te={},c=b.length-1;c>=0;c--)for(var D=b[c],R=0;R<D.length;R++){var N=D[R];te[N.id()]=ee(N,c===b.length-1)}return a.layoutPositions(this,r,function(){return te[this.id()]}),this},e("layout","breadthfirst",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var n={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,counterclockwise:!1,sort:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,n=t,r=t.cy,i=n.eles,o=i.nodes().not(":parent");n.sort&&(o=o.sort(n.sort));for(var a,s=e.math.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=n.startAngle,c=2*Math.PI/o.length,h=0,d=0;d<o.length;d++){var p=o[d],f=p.boundingBox(),g=f.w,v=f.h;h=Math.max(h,g,v)}if(a=e.is.number(n.radius)?n.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&n.avoidOverlap){h*=1.75;var c=2*Math.PI/o.length,y=Math.cos(c)-Math.cos(0),m=Math.sin(c)-Math.sin(0),b=Math.sqrt(h*h/(y*y+m*m));a=Math.max(b,a)}var w=function(e,t){var r=a*Math.cos(l),i=a*Math.sin(l),o={x:u.x+r,y:u.y+i};return l=n.counterclockwise?l-c:l+c,o};return o.layoutPositions(this,n,w),this},e("layout","circle",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(e){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};t.prototype.run=function(){var t=this,n=this.options;return t.manuallyStopped=!1,e.util.require("cola",function(r){var i=n.cy,o=n.eles,a=o.nodes(),s=o.edges(),u=!1,l=e.math.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),c=function(t,n){if(e.is.fn(t)){var r=t;return r.apply(n,[n])}return t},h=function(){for(var t={min:1/0,max:-(1/0)},r={min:1/0,max:-(1/0)},o=0;o<a.length;o++){var s=a[o],h=s._private.scratch.cola;if(t.min=Math.min(t.min,h.x||0),t.max=Math.max(t.max,h.x||0),r.min=Math.min(r.min,h.y||0),r.max=Math.max(r.max,h.y||0),!h.updatedDims){var d=s.boundingBox(),f=c(n.nodeSpacing,s);h.width=d.w+2*f,h.height=d.h+2*f}}a.positions(function(n,i){var o,a=i._private.scratch.cola;return i.grabbed()||i.isParent()||(o={x:l.x1+a.x-t.min,y:l.y1+a.y-r.min},e.is.number(o.x)&&e.is.number(o.y)||(o=void 0)),o}),a.updateCompoundBounds(),u||(p(),u=!0),n.fit&&i.fit(n.padding)},d=function(){n.ungrabifyWhileSimulating&&y.grabify(),a.off("grab free position",m),a.off("lock unlock",b),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t})},p=function(){t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t})},f=n.refresh,g=1;n.refresh<0?(g=Math.abs(n.refresh),f=1):f=Math.max(1,f);var v=t.adaptor=r.adaptor({trigger:function(e){var t=r.EventType?r.EventType.tick:null,i=r.EventType?r.EventType.end:null;switch(e.type){case"tick":case t:n.animate&&h();break;case"end":case i:h(),n.infinite||d()}},kick:function(){var r=function(){if(t.manuallyStopped)return d(),!0;var e=v.tick();return e&&n.infinite&&v.resume(),e},i=function(){for(var e,t=0;f>t&&!e;t++)e=e||r();return e};if(n.animate){var o=function(){i()||e.util.requestAnimationFrame(o)};e.util.requestAnimationFrame(o)}else for(;!r(););},on:function(e,t){},drag:function(){}});t.adaptor=v;var y=a.filter(":grabbable");n.ungrabifyWhileSimulating&&y.ungrabify();var m;a.on("grab free position",m=function(e){var t=this,n=t._private.scratch.cola,r=t._private.position;switch(n.x=r.x-l.x1,n.y=r.y-l.y1,e.type){case"grab":v.dragstart(n),v.resume();break;case"free":v.dragend(n)}});var b;a.on("lock unlock",b=function(e){var t=this,n=t._private.scratch.cola;t.locked()?v.dragstart(n):v.dragend(n)});var w=a.stdFilter(function(e){return!e.isParent()});if(v.nodes(w.map(function(e,t){var r=c(n.nodeSpacing,e),i=e.position(),o=e.boundingBox(),a=e._private.scratch.cola={x:n.randomize||void 0===i.x?Math.round(Math.random()*l.w):i.x,y:n.randomize||void 0===i.y?Math.round(Math.random()*l.h):i.y,width:o.w+2*r,height:o.h+2*r,index:t};return a})),n.alignment){var x=[],_=[];w.forEach(function(e){var t=c(n.alignment,e),r=e._private.scratch.cola,i=r.index;t&&(null!=t.x&&x.push({node:i,offset:t.x}),null!=t.y&&_.push({node:i,offset:t.y}))});var E=[];x.length>0&&E.push({type:"alignment",axis:"x",offsets:x}),_.length>0&&E.push({type:"alignment",axis:"y",offsets:_}),v.constraints(E)}v.groups(a.stdFilter(function(e){return e.isParent()}).map(function(e,t){var r=e._private.style,i=c(n.nodeSpacing,e),o=r["padding-left"].pxValue+i,a=r["padding-right"].pxValue+i,s=r["padding-top"].pxValue+i,u=r["padding-bottom"].pxValue+i;return e._private.scratch.cola={index:t,padding:Math.max(o,a,s,u),leaves:e.descendants().stdFilter(function(e){return!e.isParent()}).map(function(e){return e[0]._private.scratch.cola.index})},e}).map(function(e){return e._private.scratch.cola.groups=e.descendants().stdFilter(function(e){return e.isParent()}).map(function(e){return e._private.scratch.cola.index}),e._private.scratch.cola}));var k,S;null!=n.edgeLength?(k=n.edgeLength,S="linkDistance"):null!=n.edgeSymDiffLength?(k=n.edgeSymDiffLength,S="symmetricDiffLinkLengths"):null!=n.edgeJaccardLength?(k=n.edgeJaccardLength,S="jaccardLinkLengths"):(k=100,S="linkDistance");var T=function(e){return e.calcLength};if(v.links(s.stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()}).map(function(e,t){var n=e._private.scratch.cola={source:e.source()[0]._private.scratch.cola.index,target:e.target()[0]._private.scratch.cola.index};return null!=k&&(n.calcLength=c(k,e)),n})),v.size([l.w,l.h]),null!=k&&v[S](T),n.flow){var C,N="y",A=50;e.is.string(n.flow)?C={axis:n.flow,minSeparation:A}:e.is.number(n.flow)?C={axis:N,minSeparation:n.flow}:e.is.plainObject(n.flow)?(C=n.flow,C.axis=C.axis||N,C.minSeparation=null!=C.minSeparation?C.minSeparation:A):C={axis:N,minSeparation:A},v.flowLayout(C.axis,C.minSeparation)}t.trigger({type:"layoutstart",layout:t}),v.avoidOverlaps(n.avoidOverlap).handleDisconnected(n.handleDisconnected).start(n.unconstrIter,n.userConstIter,n.allConstIter),n.infinite||setTimeout(function(){t.manuallyStopped||v.stop()},n.maxSimulationTime)}),this},t.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},e("layout","cola",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var n={fit:!0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){for(var t=this.options,n=t,r=t.cy,i=n.eles,o=i.nodes().not(":parent"),a=e.math.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=n.startAngle,c=0,h=0;h<o.length;h++){var d,p=o[h];d=n.concentric.apply(p,[p]),u.push({value:d,node:p}),p._private.scratch.concentric=d}o.updateStyle();for(var h=0;h<o.length;h++){var p=o[h],f=p.boundingBox();c=Math.max(c,f.w,f.h)}u.sort(function(e,t){return t.value-e.value});for(var g=n.levelWidth(o),v=[[]],y=v[0],h=0;h<u.length;h++){var m=u[h];if(y.length>0){var b=Math.abs(y[0].value-m.value);b>=g&&(y=[],v.push(y))}y.push(m)}var w={},x=0,_=c+n.minNodeSpacing;if(!n.avoidOverlap){var E=v.length>0&&v[0].length>1,k=Math.min(a.w,a.h)/2-_,S=k/(v.length+E?1:0);_=Math.min(_,S)}for(var h=0;h<v.length;h++){var T=v[h],C=2*Math.PI/T.length;if(T.length>1&&n.avoidOverlap){var N=Math.cos(C)-Math.cos(0),A=Math.sin(C)-Math.sin(0),P=Math.sqrt(_*_/(N*N+A*A));x=Math.max(P,x)}for(var D=0;D<T.length;D++){var m=T[D],l=n.startAngle+(n.counterclockwise?-1:1)*C*D,$={x:s.x+x*Math.cos(l),y:s.y+x*Math.sin(l)};w[m.node.id()]=$}x+=_}return o.layoutPositions(this,n,function(){var e=this.id();return w[e]}),this},e("layout","concentric",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var n,r={ready:function(){},stop:function(){},animate:!0,refresh:4,fit:!0,padding:30,boundingBox:void 0,randomize:!0,debug:!1,nodeRepulsion:4e5,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};t.prototype.run=function(){var t=this.options,r=t.cy,o=this;o.stopped=!1,o.trigger({type:"layoutstart",layout:o}),n=!0===t.debug?!0:!1;var a=new Date,h=i(r,o,t);n&&s(h),!0===t.randomize&&u(h,r),m(h,r,t);var d=function(e){return o.stopped?!1:(c(h,r,t,e),h.temperature=h.temperature*t.coolingFactor,h.temperature<t.minTemp?!1:!0)},p=function(){l(h,r,t),!0===t.fit&&r.fit(t.padding);var e=new Date;console.info("Layout took "+(e-a)+" ms"),o.one("layoutstop",t.stop),o.trigger({type:"layoutstop",layout:o})};if(t.animate){var f=0,g=function(){for(var n,i=0;i<t.refresh&&f<t.numIter;){var n=d(f);if(n===!1)break;i++,f++}l(h,r,t),t.fit&&r.fit(t.padding),n!==!1&&f+1<t.numIter?e.util.requestAnimationFrame(g):p()};e.util.requestAnimationFrame(g)}else{for(var f=0;f<t.numIter&&d(f)!==!1;f++);p()}return this},t.prototype.stop=function(){return this.stopped=!0,this};var i=function(t,n,r){for(var i=r.eles.edges(),a=r.eles.nodes(),s={layout:n,layoutNodes:[],
idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:r.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:e.math.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},u=0;u<s.nodeSize;u++){var l=a[u],c=l.boundingBox(),h={};h.id=l.data("id"),h.parentId=l.data("parent"),h.children=[],h.positionX=l.position("x"),h.positionY=l.position("y"),h.offsetX=0,h.offsetY=0,h.height=c.w,h.width=c.h,h.maxX=h.positionX+h.width/2,h.minX=h.positionX-h.width/2,h.maxY=h.positionY+h.height/2,h.minY=h.positionY-h.height/2,h.padLeft=l._private.style["padding-left"].pxValue,h.padRight=l._private.style["padding-right"].pxValue,h.padTop=l._private.style["padding-top"].pxValue,h.padBottom=l._private.style["padding-bottom"].pxValue,s.layoutNodes.push(h),s.idToIndex[h.id]=u}for(var d=[],p=0,f=-1,g=[],u=0;u<s.nodeSize;u++){var l=s.layoutNodes[u],v=l.parentId;null!=v?s.layoutNodes[s.idToIndex[v]].children.push(l.id):(d[++f]=l.id,g.push(l.id))}for(s.graphSet.push(g);f>=p;){var y=d[p++],m=s.idToIndex[y],b=s.layoutNodes[m],w=b.children;if(w.length>0){s.graphSet.push(w);for(var u=0;u<w.length;u++)d[++f]=w[u]}}for(var u=0;u<s.graphSet.length;u++)for(var x=s.graphSet[u],_=0;_<x.length;_++){var E=s.idToIndex[x[_]];s.indexToGraph[E]=u}for(var u=0;u<s.edgeSize;u++){var k=i[u],S={};S.id=k.data("id"),S.sourceId=k.data("source"),S.targetId=k.data("target");var T=r.idealEdgeLength,C=s.idToIndex[S.sourceId],N=s.idToIndex[S.targetId],A=s.indexToGraph[C],P=s.indexToGraph[N];if(A!=P){for(var D=o(S.sourceId,S.targetId,s),M=s.graphSet[D],I=0,h=s.layoutNodes[C];-1===$.inArray(h.id,M);)h=s.layoutNodes[s.idToIndex[h.parentId]],I++;for(h=s.layoutNodes[N];-1===$.inArray(h.id,M);)h=s.layoutNodes[s.idToIndex[h.parentId]],I++;T*=I*r.nestingFactor}S.idealLength=T,s.layoutEdges.push(S)}return s},o=function(e,t,n){var r=a(e,t,0,n);return 2>r.count?0:r.graph},a=function(e,t,n,r){var i=r.graphSet[n];if(-1<$.inArray(e,i)&&-1<$.inArray(t,i))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var u=i[s],l=r.idToIndex[u],c=r.layoutNodes[l].children;if(0!==c.length){var h=r.indexToGraph[r.idToIndex[c[0]]],d=a(e,t,h,r);if(0!==d.count){if(1!==d.count)return d;if(o++,2===o)break}}}return{count:o,graph:n}},s=function(e){if(n){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var r=e.layoutNodes[t],i="\nindex: "+t+"\nId: "+r.id+"\nChildren: "+r.children.toString()+"\nparentId: "+r.parentId+"\npositionX: "+r.positionX+"\npositionY: "+r.positionY+"\nOffsetX: "+r.offsetX+"\nOffsetY: "+r.offsetY+"\npadLeft: "+r.padLeft+"\npadRight: "+r.padRight+"\npadTop: "+r.padTop+"\npadBottom: "+r.padBottom;console.debug(i)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var o=e.graphSet,t=0;t<o.length;t++)console.debug("Set : "+t+": "+o[t].toString());for(var i="IndexToGraph",t=0;t<e.indexToGraph.length;t++)i+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(i),i="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var a=e.layoutEdges[t];i+="\nEdge Index: "+t+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(i),i="nodeSize: "+e.nodeSize,i+="\nedgeSize: "+e.edgeSize,i+="\ntemperature: "+e.temperature,console.debug(i)}},u=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.positionX=Math.random()*n,o.positionY=Math.random()*r}},l=function(e,t,n){var r=e.layout,i=n.eles.nodes(),o=e.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(t,r){var i=e.layoutNodes[e.idToIndex[r.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,u=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+u*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.trigger({type:"layoutready",layout:this}))},c=function(e,t,n,r){h(e,t,n),g(e,t,n),v(e,t,n),y(e,t,n),m(e,t,n)},h=function(e,t,n){for(var r=0;r<e.graphSet.length;r++)for(var i=e.graphSet[r],o=i.length,a=0;o>a;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;o>u;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];d(s,l,e,t,n)}},d=function(e,t,n,r,i){var o=t.positionX-e.positionX,a=t.positionY-e.positionY;if(0!==o||0!==a){var s=f(e,t,o,a);if(s>0)var u=i.nodeOverlap*s,l=Math.sqrt(o*o+a*a),c=u*o/l,h=u*a/l;else var d=p(e,o,a),g=p(t,-1*o,-1*a),v=g.x-d.x,y=g.y-d.y,m=v*v+y*y,l=Math.sqrt(m),u=i.nodeRepulsion/m,c=u*v/l,h=u*y/l;e.offsetX-=c,e.offsetY-=h,t.offsetX+=c,t.offsetY+=h}},p=function(e,t,n){var r=e.positionX,i=e.positionY,o=e.height,a=e.width,s=n/t,u=o/a,l={};do{if(0===t&&n>0){l.x=r,l.y=i+o/2;break}if(0===t&&0>n){l.x=r,l.y=i+o/2;break}if(t>0&&s>=-1*u&&u>=s){l.x=r+a/2,l.y=i+a*n/2/t;break}if(0>t&&s>=-1*u&&u>=s){l.x=r-a/2,l.y=i-a*n/2/t;break}if(n>0&&(-1*u>=s||s>=u)){l.x=r+o*t/2/n,l.y=i+o/2;break}if(0>n&&(-1*u>=s||s>=u)){l.x=r-o*t/2/n,l.y=i-o/2;break}}while(!1);return l},f=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},g=function(e,t,n){for(var r=0;r<e.edgeSize;r++){var i=e.layoutEdges[r],o=e.idToIndex[i.sourceId],a=e.layoutNodes[o],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(0===l&&0===c)return;var h=p(a,l,c),d=p(u,-1*l,-1*c),f=d.x-h.x,g=d.y-h.y,v=Math.sqrt(f*f+g*g),y=Math.pow(i.idealLength-v,2)/n.edgeElasticity;if(0!==v)var m=y*f/v,b=y*g/v;else var m=0,b=0;a.offsetX+=m,a.offsetY+=b,u.offsetX-=m,u.offsetY-=b}},v=function(e,t,n){for(var r=0;r<e.graphSet.length;r++){var i=e.graphSet[r],o=i.length;if(0===r)var a=e.clientHeight/2,s=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],l=e.layoutNodes[e.idToIndex[u.parentId]],a=l.positionX,s=l.positionY;for(var c=0;o>c;c++){var h=e.layoutNodes[e.idToIndex[i[c]]],d=a-h.positionX,p=s-h.positionY,f=Math.sqrt(d*d+p*p);if(f>1){var g=n.gravity*d/f,v=n.gravity*p/f;h.offsetX+=g,h.offsetY+=v}}}},y=function(e,t,n){var r=[],i=0,o=-1;for(r.push.apply(r,e.graphSet[0]),o+=e.graphSet[0].length;o>=i;){var a=r[i++],s=e.idToIndex[a],u=e.layoutNodes[s],l=u.children;if(0<l.length){for(var c=u.offsetX,h=u.offsetY,d=0;d<l.length;d++){var p=e.layoutNodes[e.idToIndex[l[d]]];p.offsetX+=c,p.offsetY+=h,r[++o]=l[d]}u.offsetX=0,u.offsetY=0}}},m=function(e,t,n){for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];if(!(0<i.children.length)){var o=b(i.offsetX,i.offsetY,e.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,w(i,e)}}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},b=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else var i={x:e,y:t};return i},w=function(e,t){var n=e.parentId;if(null!=n){var r=t.layoutNodes[t.idToIndex[n]],i=!1;return(null==r.maxX||e.maxX+r.padRight>r.maxX)&&(r.maxX=e.maxX+r.padRight,i=!0),(null==r.minX||e.minX-r.padLeft<r.minX)&&(r.minX=e.minX-r.padLeft,i=!0),(null==r.maxY||e.maxY+r.padBottom>r.maxY)&&(r.maxY=e.maxY+r.padBottom,i=!0),(null==r.minY||e.minY-r.padTop<r.minY)&&(r.minY=e.minY-r.padTop,i=!0),i?w(r,t):void 0}};e("layout","cose",t)}(cytoscape),function(e){"use strict";function t(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}function n(){this.map={},this.keys=[]}function r(){this.set={}}function i(){}function o(){}function a(){}function s(e,t,n){this.x=null,this.y=null,null==e&&null==t&&null==n?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==n?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==n&&(n=e,this.x=n.x,this.y=n.y)}function u(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}function l(){}function c(e,t,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=n&&null!=r&&(this.x=e,this.y=t,this.width=n,this.height=r)}function h(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}function d(){}function p(e,t,n){v.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=e,this.target=t}function f(e,t,n){v.call(this,n),this.estimatedSize=a.MIN_VALUE,this.margin=b.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof g?this.graphManager=t:null!=t&&t instanceof m&&(this.graphManager=t.graphManager)}function g(e){this.layout=e,this.graphs=[],this.edges=[]}function v(e){this.vGraphObject=e}function y(e,t,n,r){null==n&&null==r&&(r=t),v.call(this,r),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=r,this.edges=[],this.graphManager=e,this.rect=null!=n&&null!=t?new c(t.x,t.y,n.width,n.height):new c}function m(e){this.layoutQuality=b.DEFAULT_QUALITY,this.createBendsAsNeeded=b.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=b.DEFAULT_INCREMENTAL,this.animationOnLayout=b.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=b.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=b.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=b.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new n,this.graphManager=new g(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}function b(){}function w(){}function x(){w.layoutQuality=w.defaultLayoutQuality,w.animationDuringLayout=w.defaultAnimationDuringLayout,w.animationOnLayout=w.defaultAnimationOnLayout,w.animationPeriod=w.defaultAnimationPeriod,w.incremental=w.defaultIncremental,w.createBendsAsNeeded=w.defaultCreateBendsAsNeeded,w.uniformLeafNodeSizes=w.defaultUniformLeafNodeSizes}function _(){w.defaultIdealEdgeLength=$.DEFAULT_EDGE_LENGTH,w.defaultSpringStrength=50,w.defaultRepulsionStrength=50,w.defaultSmartRepulsionRangeCalc=$.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,w.defaultGravityStrength=50,w.defaultGravityRange=50,w.defaultCompoundGravityStrength=50,w.defaultCompoundGravityRange=50,w.defaultSmartEdgeLengthCalc=$.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,w.defaultMultiLevelScaling=$.DEFAULT_USE_MULTI_LEVEL_SCALING,w.idealEdgeLength=w.defaultIdealEdgeLength,w.springStrength=w.defaultSpringStrength,w.repulsionStrength=w.defaultRepulsionStrength,w.smartRepulsionRangeCalc=w.defaultSmartRepulsionRangeCalc,w.gravityStrength=w.defaultGravityStrength,w.gravityRange=w.defaultGravityRange,w.compoundGravityStrength=w.defaultCompoundGravityStrength,w.compoundGravityRange=w.defaultCompoundGravityRange,w.smartEdgeLengthCalc=w.defaultSmartEdgeLengthCalc,w.multiLevelScaling=w.defaultMultiLevelScaling}function E(){m.call(this),this.useSmartIdealEdgeLengthCalculation=k.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=k.DEFAULT_EDGE_LENGTH,this.springConstant=k.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=k.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=k.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=k.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=k.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=k.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*k.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=1,this.initialCoolingFactor=1,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=k.MAX_ITERATIONS}function k(){}function S(e,t,n){p.call(this,e,t,n),this.idealLength=k.DEFAULT_EDGE_LENGTH}function T(e,t,n,r){y.call(this,e,t,n,r),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}function C(e,t,n,r){T.call(this,e,t,n,r)}function N(){E.call(this)}function A(e){g.call(this,e)}function P(e,t,n){f.call(this,e,t,n)}function D(e,t,n){S.call(this,e,t,n)}function $(){}function M(t){this.options=e.util.extend({},O,t),k.getUserOptions(this.options),_()}t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(e){this.width=e},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(e){this.height=e},n.prototype.put=function(e,t){var n=d.createID(e);this.contains(n)||(this.map[n]=t,this.keys.push(e))},n.prototype.contains=function(e){d.createID(e);return null!=this.map[e]},n.prototype.get=function(e){var t=d.createID(e);return this.map[t]},n.prototype.keySet=function(){return this.keys},r.prototype.add=function(e){var t=d.createID(e);this.contains(t)||(this.set[t]=e)},r.prototype.remove=function(e){delete this.set[d.createID(e)]},r.prototype.clear=function(){this.set={}},r.prototype.contains=function(e){return this.set[d.createID(e)]==e},r.prototype.isEmpty=function(){return 0===this.size()},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),n=t.length,r=0;n>r;r++)e.push(this.set[t[r]])},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAll=function(e){for(var t=e.length,n=0;t>n;n++){var r=e[n];this.add(r)}},i.calcSeparationAmount=function(e,t,n,r){if(!e.intersects(t))throw"assert failed";var o=new Array(2);i.decideDirectionsForOverlappingNodes(e,t,o),n[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),n[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var a=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()==e.getCenterY()&&t.getCenterX()==e.getCenterX()&&(a=1);var s=a*n[0],u=n[1]/a;n[0]<u?u=n[0]:s=n[1],n[0]=-1*o[0]*(u/2+r),n[1]=-1*o[1]*(s/2+r)},i.decideDirectionsForOverlappingNodes=function(e,t,n){n[0]=e.getCenterX()<t.getCenterX()?-1:1,n[1]=e.getCenterY()<t.getCenterY()?-1:1},i.getIntersection2=function(e,t,n){var r=e.getCenterX(),o=e.getCenterY(),a=t.getCenterX(),s=t.getCenterY();if(e.intersects(t))return n[0]=r,n[1]=o,n[2]=a,n[3]=s,!0;var u=e.getX(),l=e.getY(),c=e.getRight(),h=e.getX(),d=e.getBottom(),p=e.getRight(),f=e.getWidthHalf(),g=e.getHeightHalf(),v=t.getX(),y=t.getY(),m=t.getRight(),b=t.getX(),w=t.getBottom(),x=t.getRight(),_=t.getWidthHalf(),E=t.getHeightHalf(),k=!1,S=!1;if(r==a){if(o>s)return n[0]=r,n[1]=l,n[2]=a,n[3]=w,!1;if(s>o)return n[0]=r,n[1]=d,n[2]=a,n[3]=y,!1}else if(o==s){if(r>a)return n[0]=u,n[1]=o,n[2]=m,n[3]=s,!1;if(a>r)return n[0]=c,n[1]=o,n[2]=v,n[3]=s,!1}else{var T,C,N,A,P,D,$=e.height/e.width,M=t.height/t.width,I=(s-o)/(a-r);if(-$==I?r>a?(n[0]=h,n[1]=d,k=!0):(n[0]=c,n[1]=l,k=!0):$==I&&(r>a?(n[0]=u,n[1]=l,k=!0):(n[0]=p,n[1]=d,k=!0)),-M==I?a>r?(n[2]=b,n[3]=w,S=!0):(n[2]=m,n[3]=y,S=!0):M==I&&(a>r?(n[2]=v,n[3]=y,S=!0):(n[2]=x,n[3]=w,S=!0)),k&&S)return!1;if(r>a?o>s?(T=i.getCardinalDirection($,I,4),C=i.getCardinalDirection(M,I,2)):(T=i.getCardinalDirection(-$,I,3),C=i.getCardinalDirection(-M,I,1)):o>s?(T=i.getCardinalDirection(-$,I,1),C=i.getCardinalDirection(-M,I,3)):(T=i.getCardinalDirection($,I,2),C=i.getCardinalDirection(M,I,4)),!k)switch(T){case 1:A=l,N=r+-g/I,n[0]=N,n[1]=A;break;case 2:N=p,A=o+f*I,n[0]=N,n[1]=A;break;case 3:A=d,N=r+g/I,n[0]=N,n[1]=A;break;case 4:N=h,A=o+-f*I,n[0]=N,n[1]=A}if(!S)switch(C){case 1:D=y,P=a+-E/I,n[2]=P,n[3]=D;break;case 2:P=x,D=s+_*I,n[2]=P,n[3]=D;break;case 3:D=w,P=a+E/I,n[2]=P,n[3]=D;break;case 4:P=b,D=s+-_*I,n[2]=P,n[3]=D}}return!1},i.getCardinalDirection=function(e,t,n){return e>t?n:1+n%4},i.getIntersection=function(e,t,n,r){if(null==r)return i.getIntersection2(e,t,n);var o,a,u,l,c,h,d,p,f,g=e.x,v=e.y,y=t.x,m=t.y,b=n.x,w=n.y,x=r.x,_=r.y;return u=m-v,c=g-y,d=y*v-g*m,l=_-w,h=b-x,p=x*w-b*_,f=u*h-l*c,0==f?null:(o=(c*p-h*d)/f,a=(l*d-u*p)/f,new s(o,a))},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,o.sign=function(e){return e>0?1:0>e?-1:0},o.floor=function(e){return 0>e?Math.ceil(e):Math.floor(e)},o.ceil=function(e){return 0>e?Math.floor(e):Math.ceil(e)},a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,s.prototype.getX=function(){return this.x},s.prototype.getY=function(){return this.y},s.prototype.getLocation=function(){return new s(this.x,this.y)},s.prototype.setLocation=function(e,t,n){"Point"==e.constructor.name&&null==t&&null==n?(n=e,this.setLocation(n.x,n.y)):"number"==typeof e&&"number"==typeof t&&null==n&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},s.prototype.move=function(e,t){this.x=e,this.y=t},s.prototype.translate=function(e,t){this.x+=e,this.y+=t},s.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},s.prototype.toString=function(){return(new s).constructor.name+"[x="+this.x+",y="+this.y+"]"},u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.setX=function(e){this.x=e},u.prototype.setY=function(e){this.y=e},u.prototype.getDifference=function(e){return new t(this.x-e.x,this.y-e.y)},u.prototype.getCopy=function(){return new u(this.x,this.y)},u.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},l.seed=1,l.x=0,l.nextDouble=function(){return l.x=1e4*Math.sin(l.seed++),l.x-Math.floor(l.x)},c.prototype.getX=function(){return this.x},c.prototype.setX=function(e){this.x=e},c.prototype.getY=function(){return this.y},c.prototype.setY=function(e){this.y=e},c.prototype.getWidth=function(){return this.width},c.prototype.setWidth=function(e){this.width=e},c.prototype.getHeight=function(){return this.height},c.prototype.setHeight=function(e){this.height=e},c.prototype.getRight=function(){return this.x+this.width},c.prototype.getBottom=function(){return this.y+this.height},c.prototype.intersects=function(e){return this.getRight()<e.x?!1:this.getBottom()<e.y?!1:e.getRight()<this.x?!1:e.getBottom()<this.y?!1:!0},c.prototype.getCenterX=function(){return this.x+this.width/2},c.prototype.getMinX=function(){return this.getX()},c.prototype.getMaxX=function(){return this.getX()+this.width},c.prototype.getCenterY=function(){return this.y+this.height/2},c.prototype.getMinY=function(){return this.getY()},c.prototype.getMaxY=function(){return this.getY()+this.height},c.prototype.getWidthHalf=function(){return this.width/2},c.prototype.getHeightHalf=function(){return this.height/2},h.prototype.getWorldOrgX=function(){return this.lworldOrgX},h.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},h.prototype.getWorldOrgY=function(){return this.lworldOrgY},h.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},h.prototype.getWorldExtX=function(){return this.lworldExtX},h.prototype.setWorldExtX=function(e){this.lworldExtX=e},h.prototype.getWorldExtY=function(){return this.lworldExtY},h.prototype.setWorldExtY=function(e){this.lworldExtY=e},h.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},h.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},h.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},h.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},h.prototype.getDeviceExtX=function(){return this.ldeviceExtX},h.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},h.prototype.getDeviceExtY=function(){return this.ldeviceExtY},h.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},h.prototype.transformX=function(e){var t=0,n=this.lworldExtX;return 0!=n&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/n),t},h.prototype.transformY=function(e){var t=0,n=this.lworldExtY;return 0!=n&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/n),t},h.prototype.inverseTransformX=function(e){var t=0,n=this.ldeviceExtX;return 0!=n&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/n),t},h.prototype.inverseTransformY=function(e){var t=0,n=this.ldeviceExtY;return 0!=n&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/n),t},h.prototype.inverseTransformPoint=function(e){var t=new u(this.inverseTransformX(e.x),this.inverseTransformY(e.y));return t},d.lastID=0,d.createID=function(e){return d.isPrimitive(e)?e:null!=e.uniqueID?e.uniqueID:(e.uniqueID=d.getString(),d.lastID++,e.uniqueID)},d.getString=function(e){return null==e&&(e=d.lastID),"Object#"+e},d.isPrimitive=function(e){var t=typeof e;return null==e||"object"!=t&&"function"!=t},p.prototype=Object.create(v.prototype);for(var I in v)p[I]=v[I];p.prototype.getSource=function(){return this.source},p.prototype.getTarget=function(){return this.target},p.prototype.isInterGraph=function(){return this.isInterGraph},p.prototype.getLength=function(){return this.length},p.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},p.prototype.getBendpoints=function(){return this.bendpoints},p.prototype.getLca=function(){return this.lca},p.prototype.getSourceInLca=function(){return this.sourceInLca},p.prototype.getTargetInLca=function(){return this.targetInLca},p.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},p.prototype.getOtherEndInGraph=function(e,t){for(var n=this.getOtherEnd(e),r=t.getGraphManager().getRoot();;){if(n.getOwner()==t)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},p.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},p.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},f.prototype=Object.create(v.prototype);for(var I in v)f[I]=v[I];f.prototype.getNodes=function(){return this.nodes},f.prototype.getEdges=function(){return this.edges},f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getParent=function(){return this.parent},f.prototype.getLeft=function(){return this.left},f.prototype.getRight=function(){return this.right},f.prototype.getTop=function(){return this.top},f.prototype.getBottom=function(){return this.bottom},f.prototype.isConnected=function(){return this.isConnected},f.prototype.add=function(e,t,n){if(null==t&&null==n){var r=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(r)>-1)throw"Node already in graph!";return r.owner=this,this.getNodes().push(r),r}var i=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(t.owner!=n.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=n.owner?null:(i.source=t,i.target=n,i.isInterGraph=!1,this.getEdges().push(i),t.edges.push(i),n!=t&&n.edges.push(i),i)},f.prototype.remove=function(e){var t=e;if(e instanceof y){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n,r=t.edges.slice(),i=r.length,o=0;i>o;o++)n=r[o],n.isInterGraph?this.graphManager.remove(n):n.source.owner.remove(n);var a=this.nodes.indexOf(t);if(-1==a)throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(e instanceof p){var n=e;if(null==n)throw"Edge is null!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(null==n.source.owner||null==n.target.owner||n.source.owner!=this||n.target.owner!=this)throw"Source and/or target owner is invalid!";var s=n.source.edges.indexOf(n),u=n.target.edges.indexOf(n);if(!(s>-1&&u>-1))throw"Source and/or target doesn't know this edge!";n.source.edges.splice(s,1),n.target!=n.source&&n.target.edges.splice(u,1);var a=n.source.owner.getEdges().indexOf(n);if(-1==a)throw"Not in owner's edge list!";n.source.owner.getEdges().splice(a,1)}},f.prototype.updateLeftTop=function(){for(var e,t,n=a.MAX_VALUE,r=a.MAX_VALUE,i=this.getNodes(),o=i.length,u=0;o>u;u++){var l=i[u];e=Math.floor(l.getTop()),t=Math.floor(l.getLeft()),n>e&&(n=e),r>t&&(r=t)}return n==a.MAX_VALUE?null:(this.left=r-this.margin,this.top=n-this.margin,new s(this.left,this.top))},f.prototype.updateBounds=function(e){for(var t,n,r,i,o=a.MAX_VALUE,s=-a.MAX_VALUE,u=a.MAX_VALUE,l=-a.MAX_VALUE,h=this.nodes,d=h.length,p=0;d>p;p++){var f=h[p];e&&null!=f.child&&f.updateBounds(),t=Math.floor(f.getLeft()),n=Math.floor(f.getRight()),r=Math.floor(f.getTop()),i=Math.floor(f.getBottom()),o>t&&(o=t),n>s&&(s=n),u>r&&(u=r),i>l&&(l=i)}var g=new c(o,u,s-o,l-u);o==a.MAX_VALUE&&(this.left=Math.floor(this.parent.getLeft()),this.right=Math.floor(this.parent.getRight()),this.top=Math.floor(this.parent.getTop()),this.bottom=Math.floor(this.parent.getBottom())),this.left=g.x-this.margin,this.right=g.x+g.width+this.margin,this.top=g.y-this.margin,this.bottom=g.y+g.height+this.margin},f.calculateBounds=function(e){for(var t,n,r,i,o=a.MAX_VALUE,s=-a.MAX_VALUE,u=a.MAX_VALUE,l=-a.MAX_VALUE,h=e.length,d=0;h>d;d++){var p=e[d];t=Math.floor(p.getLeft()),n=Math.floor(p.getRight()),r=Math.floor(p.getTop()),i=Math.floor(p.getBottom()),o>t&&(o=t),n>s&&(s=n),u>r&&(u=r),i>l&&(l=i)}var f=new c(o,u,s-o,l-u);return f},f.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,n=t.length,r=0;n>r;r++){var i=t[r];e+=i.calcEstimatedSize()}return this.estimatedSize=0==e?b.EMPTY_COMPOUND_NODE_SIZE:Math.floor(e/Math.sqrt(this.nodes.length)),Math.floor(this.estimatedSize)},f.prototype.updateConnected=function(){if(0==this.nodes.length)return void(this.isConnected=!0);var e,t,n=[],i=new r,o=this.nodes[0];for(n=n.concat(o.withChildren());n.length>0;){o=n.shift(),i.add(o),e=o.getEdges();for(var a=e.length,s=0;a>s;s++){var u=e[s];t=u.getOtherEndInGraph(o,this),null==t||i.contains(t)||(n=n.concat(t.withChildren()))}}if(this.isConnected=!1,i.size()>=this.nodes.length){var l=0,a=i.size();for(var c in i.set){var h=i.set[c];h.owner==this&&l++}l==this.nodes.length&&(this.isConnected=!0)}},g.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),n=this.add(e,t);return this.setRootGraph(n),this.rootGraph},g.prototype.add=function(e,t,n,r,i){if(null==n&&null==r&&null==i){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}i=n,r=t,n=e;var o=r.getOwner(),a=i.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return n.isInterGraph=!1,o.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(-1!=n.source.edges.indexOf(n)||-1!=n.target.edges.indexOf(n))throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},g.prototype.remove=function(e){if(e instanceof f){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";var n=[];n=n.concat(t.getEdges());for(var r,i=n.length,o=0;i>o;o++)r=n[o],t.remove(r);var a=[];a=a.concat(t.getNodes());var s;i=a.length;for(var o=0;i>o;o++)s=a[o],t.remove(s);t==this.rootGraph&&this.setRootGraph(null);var u=this.graphs.indexOf(t);this.graphs.splice(u,1),t.parent=null}else if(e instanceof p){if(r=e,null==r)throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(-1==r.source.edges.indexOf(r)||-1==r.target.edges.indexOf(r))throw"Source and/or target doesn't know this edge!";var u=r.source.edges.indexOf(r);if(r.source.edges.splice(u,1),u=r.target.edges.indexOf(r),r.target.edges.splice(u,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==r.source.owner.getGraphManager().edges.indexOf(r))throw"Not in owner graph manager's edge list!";var u=r.source.owner.getGraphManager().edges.indexOf(r);r.source.owner.getGraphManager().edges.splice(u,1)}},g.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},g.prototype.getGraphs=function(){return this.graphs},g.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),n=t.length,r=0;n>r;r++)e=e.concat(t[r].getNodes());this.allNodes=e}return this.allNodes},g.prototype.resetAllNodes=function(){this.allNodes=null},g.prototype.resetAllEdges=function(){this.allEdges=null},g.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},g.prototype.getAllEdges=function(){if(null==this.allEdges){for(var e=[],t=this.getGraphs(),n=(t.length,0);n<t.length;n++)e=e.concat(t[n].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},g.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},g.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},g.prototype.getRoot=function(){return this.rootGraph},g.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},g.prototype.getLayout=function(){return this.layout},g.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var n,r=e.getOwner();;){if(n=r.getParent(),null==n)break;if(n==t)return!0;if(r=n.getOwner(),null==r)break}for(r=t.getOwner();;){if(n=r.getParent(),null==n)break;if(n==e)return!0;if(r=n.getOwner(),null==r)break}return!1},g.prototype.calcLowestCommonAncestors=function(){for(var e,t,n,r,i,o=this.getAllEdges(),a=o.length,s=0;a>s;s++)if(e=o[s],t=e.source,n=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=n,t!=n){for(r=t.getOwner();null==e.lca;){for(i=n.getOwner();null==e.lca;){if(i==r){e.lca=i;break}if(i==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=i.getParent(),i=e.targetInLca.getOwner()}if(r==this.rootGraph)break;null==e.lca&&(e.sourceInLca=r.getParent(),r=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},g.prototype.calcLowestCommonAncestor=function(e,t){
if(e==t)return e.getOwner();for(var n=e.getOwner();;){if(null==n)break;for(var r=t.getOwner();;){if(null==r)break;if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},g.prototype.calcInclusionTreeDepths=function(e,t){null==e&&null==t&&(e=this.rootGraph,t=1);for(var n,r=e.getNodes(),i=r.length,o=0;i>o;o++)n=r[o],n.inclusionTreeDepth=t,null!=n.child&&this.calcInclusionTreeDepths(n.child,t+1)},g.prototype.includesInvalidEdge=function(){for(var e,t=this.edges.length,n=0;t>n;n++)if(e=this.edges[n],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},y.prototype=Object.create(v.prototype);for(var I in v)y[I]=v[I];y.prototype.getEdges=function(){return this.edges},y.prototype.getChild=function(){return this.child},y.prototype.getOwner=function(){if(null!=this.owner&&!(null==this.owner||this.owner.getNodes().indexOf(this)>-1))throw"assert failed";return this.owner},y.prototype.getWidth=function(){return this.rect.width},y.prototype.setWidth=function(e){this.rect.width=e},y.prototype.getHeight=function(){return this.rect.height},y.prototype.setHeight=function(e){this.rect.height=e},y.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},y.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},y.prototype.getCenter=function(){return new u(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},y.prototype.getLocation=function(){return new u(this.rect.x,this.rect.y)},y.prototype.getRect=function(){return this.rect},y.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},y.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},y.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},y.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},y.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},y.prototype.getEdgeListToNode=function(e){var t,n=[];for(var r in this.edges)if(t=r,t.target==e){if(t.source!=this)throw"Incorrect edge source!";n.push(t)}return n},y.prototype.getEdgesBetween=function(e){var t,n=[];for(var r in this.edges){if(t=this.edges[r],t.source!=this&&t.target!=this)throw"Incorrect edge source and/or target";(t.target==e||t.source==e)&&n.push(t)}return n},y.prototype.getNeighborsList=function(){var e,t=new r;for(var n in this.edges)if(e=this.edges[n],e.source==this)t.add(e.target);else{if(!e.target==this)throw"Incorrect incidency!";t.add(e.source)}return t},y.prototype.withChildren=function(){var e,t=[];if(t.push(this),null!=this.child)for(var n=this.child.getNodes(),r=0;r<n.length;r++)e=n[r],t=t.concat(e.withChildren());return t},y.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},y.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=Math.floor((this.rect.width+this.rect.height)/2):(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},y.prototype.scatter=function(){var e,t,n=-b.INITIAL_WORLD_BOUNDARY,r=b.INITIAL_WORLD_BOUNDARY;e=b.WORLD_CENTER_X+l.nextDouble()*(r-n)+n;var i=-b.INITIAL_WORLD_BOUNDARY,o=b.INITIAL_WORLD_BOUNDARY;t=b.WORLD_CENTER_Y+l.nextDouble()*(o-i)+i,this.rect.x=e,this.rect.y=t},y.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()+2*b.COMPOUND_NODE_MARGIN),this.setHeight(e.getBottom()-e.getTop()+2*b.COMPOUND_NODE_MARGIN+b.LABEL_HEIGHT)}},y.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},y.prototype.transform=function(e){var t=this.rect.x;t>b.WORLD_BOUNDARY?t=b.WORLD_BOUNDARY:t<-b.WORLD_BOUNDARY&&(t=-b.WORLD_BOUNDARY);var n=this.rect.y;n>b.WORLD_BOUNDARY?n=b.WORLD_BOUNDARY:n<-b.WORLD_BOUNDARY&&(n=-b.WORLD_BOUNDARY);var r=new u(t,n),i=e.inverseTransformPoint(r);this.setLocation(i.x,i.y)},y.prototype.getLeft=function(){return this.rect.x},y.prototype.getRight=function(){return this.rect.x+this.rect.width},y.prototype.getTop=function(){return this.rect.y},y.prototype.getBottom=function(){return this.rect.y+this.rect.height},y.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},m.RANDOM_SEED=1,m.prototype.getGraphManager=function(){return this.graphManager},m.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},m.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},m.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},m.prototype.newGraphManager=function(){var e=new g(this);return this.graphManager=e,e},m.prototype.newGraph=function(e){return new f(null,this.graphManager,e)},m.prototype.newNode=function(e){return new y(this.graphManager,e)},m.prototype.newEdge=function(e){return new p(null,null,e)},m.prototype.runLayout=function(){this.isLayoutFinished=!1,this.initParameters();var e;if(null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge())e=!1;else{var t=0;if(this.isSubLayout||(t=(new Date).getTime()),e=this.layout(),!this.isSubLayout){var n=(new Date).getTime(),r=n-t;console.log("Total execution time: "+r+" miliseconds.")}}return e&&(this.isSubLayout||this.doPostLayout()),this.isLayoutFinished=!0,e},m.prototype.doPostLayout=function(){this.transform(),this.update()},m.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e,t=this.graphManager.getAllEdges(),n=0;n<t.length;n++)e=t[n];for(var r,i=this.graphManager.getRoot().getNodes(),n=0;n<i.length;n++)r=i[n];this.update(this.graphManager.getRoot())}},m.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof y){var t=e;if(null!=t.getChild())for(var n=t.getChild().getNodes(),r=0;r<n.length;r++)update(n[r]);if(null!=t.vGraphObject){var i=t.vGraphObject;i.update(t)}}else if(e instanceof p){var o=e;if(null!=o.vGraphObject){var a=o.vGraphObject;a.update(o)}}else if(e instanceof f){var s=e;if(null!=s.vGraphObject){var u=s.vGraphObject;u.update(s)}}},m.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=w.layoutQuality,this.animationDuringLayout=w.animationDuringLayout,this.animationPeriod=Math.floor(m.transform(w.animationPeriod,b.DEFAULT_ANIMATION_PERIOD)),this.animationOnLayout=w.animationOnLayout,this.incremental=w.incremental,this.createBendsAsNeeded=w.createBendsAsNeeded,this.uniformLeafNodeSizes=w.uniformLeafNodeSizes),this.animationDuringLayout&&(animationOnLayout=!1)},m.prototype.transform=function(e){if(void 0==e)this.transform(new u(0,0));else{var t=new h,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(n.x),t.setDeviceOrgY(n.y);for(var r,i=this.getAllNodes(),o=0;o<i.length;o++)r=i[o],r.transform(t)}}},m.prototype.positionNodesRandomly=function(e){if(void 0==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,n,r=e.getNodes(),i=0;i<r.length;i++)t=r[i],n=t.getChild(),null==n?t.scatter():0==n.getNodes().length?t.scatter():(this.positionNodesRandomly(n),t.updateBounds())},m.prototype.getFlatForest=function(){for(var e=[],t=!0,i=this.graphManager.getRoot().getNodes(),o=!0,a=0;a<i.length;a++)null!=i[a].getChild()&&(o=!1);if(!o)return e;var s=new r,u=[],l=new n,c=[];for(c=c.concat(i);c.length>0&&t;){for(u.push(c[0]);u.length>0&&t;){var h=u[0];u.splice(0,1),s.add(h);for(var d=h.getEdges(),a=0;a<d.length;a++){var p=d[a].getOtherEnd(h);if(l.get(h)!=p){if(s.contains(p)){t=!1;break}u.push(p),l.put(p,h)}}}if(t){var f=[];s.addAllTo(f),e.push(f);for(var a=0;a<f.length;a++){var g=f[a],v=c.indexOf(g);v>-1&&c.splice(v,1)}s=new r,l=new n}else e=[]}return e},m.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],n=e.source,r=this.graphManager.calcLowestCommonAncestor(e.source,e.target),i=0;i<e.bendpoints.length;i++){var o=this.newNode(null);o.setRect(new s(0,0),new Dimension(1,1)),r.add(o);var a=this.newEdge(null);this.graphManager.add(a,n,o),t.add(o),n=o}var a=this.newEdge(null);return this.graphManager.add(a,n,e.target),this.edgeToDummyNodes.put(e,t),e.isInterGraph()?this.graphManager.remove(e):r.remove(e),t},m.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=this.edgeToDummyNodes.keySet().concat(e);for(var t=0;t<e.length;t++){var n=e[t];if(n.bendpoints.length>0){for(var r=this.edgeToDummyNodes.get(n),i=0;i<r.length;i++){var o=r[i],a=new u(o.getCenterX(),o.getCenterY()),s=n.bendpoints.get(i);s.x=a.x,s.y=a.y,o.getOwner().remove(o)}this.graphManager.add(n,n.source,n.target)}}},m.transform=function(e,t,n,r){if(void 0!=n&&void 0!=r){var i=t;if(50>=e){var o=t/n;i-=(t-o)/50*(50-e)}else{var a=t*r;i+=(a-t)/50*(e-50)}return i}var s,u;return 50>=e?(s=9*t/500,u=t/10):(s=9*t/50,u=-8*t),s*e+u},m.findCenterOfTree=function(e){var t=[];t=t.concat(e);var r=[],i=new n,o=!1,a=null;(1==t.length||2==t.length)&&(o=!0,a=t[0]);for(var s=0;s<t.length;s++){var u=t[s],l=u.getNeighborsList().size();i.put(u,u.getNeighborsList().size()),1==l&&r.push(u)}var c=[];for(c=c.concat(r);!o;){var h=[];h=h.concat(c),c=[];for(var s=0;s<t.length;s++){var u=t[s],d=t.indexOf(u);d>=0&&t.splice(d,1);var p=u.getNeighborsList();for(var f in p.set){var g=p.set[f];if(r.indexOf(g)<0){var v=i.get(g),y=v-1;1==y&&c.push(g),i.put(g,y)}}}r=r.concat(c),(1==t.length||2==t.length)&&(o=!0,a=t[0])}return a},m.prototype.setGraphManager=function(e){this.graphManager=e},b.PROOF_QUALITY=0,b.DEFAULT_QUALITY=1,b.DRAFT_QUALITY=2,b.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,b.DEFAULT_INCREMENTAL=!1,b.DEFAULT_ANIMATION_ON_LAYOUT=!0,b.DEFAULT_ANIMATION_DURING_LAYOUT=!1,b.DEFAULT_ANIMATION_PERIOD=50,b.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,b.DEFAULT_GRAPH_MARGIN=10,b.LABEL_HEIGHT=20,b.COMPOUND_NODE_MARGIN=5,b.SIMPLE_NODE_SIZE=40,b.SIMPLE_NODE_HALF_SIZE=b.SIMPLE_NODE_SIZE/2,b.EMPTY_COMPOUND_NODE_SIZE=40,b.MIN_EDGE_LENGTH=1,b.WORLD_BOUNDARY=1e6,b.INITIAL_WORLD_BOUNDARY=b.WORLD_BOUNDARY/1e3,b.WORLD_CENTER_X=1200,b.WORLD_CENTER_Y=900,w.layoutQuality,w.animationDuringLayout,w.animationOnLayout,w.animationPeriod,w.incremental,w.createBendsAsNeeded,w.uniformLeafNodeSizes,w.defaultLayoutQuality=b.DEFAULT_QUALITY,w.defaultAnimationDuringLayout=b.DEFAULT_ANIMATION_DURING_LAYOUT,w.defaultAnimationOnLayout=b.DEFAULT_ANIMATION_ON_LAYOUT,w.defaultAnimationPeriod=50,w.defaultIncremental=b.DEFAULT_INCREMENTAL,w.defaultCreateBendsAsNeeded=b.DEFAULT_CREATE_BENDS_AS_NEEDED,w.defaultUniformLeafNodeSizes=b.DEFAULT_UNIFORM_LEAF_NODE_SIZES,x(),E.prototype=Object.create(m.prototype);for(var I in m)E[I]=m[I];E.prototype.initParameters=function(){m.prototype.initParameters.call(this,arguments),this.layoutQuality==b.DRAFT_QUALITY?(this.displacementThresholdPerNode+=.3,this.maxIterations*=.8):this.layoutQuality==b.PROOF_QUALITY&&(this.displacementThresholdPerNode-=.3,this.maxIterations*=1.2),this.totalIterations=0,this.notAnimatedIterations=0},E.prototype.calcIdealEdgeLengths=function(){for(var e,t,n,r,i,o,a=this.getGraphManager().getAllEdges(),s=0;s<a.length;s++)e=a[s],e.idealLength=this.idealEdgeLength,e.isInterGraph&&(n=e.getSource(),r=e.getTarget(),i=e.getSourceInLca().getEstimatedSize(),o=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=i+o-2*b.SIMPLE_NODE_SIZE),t=e.getLca().getInclusionTreeDepth(),e.idealLength+=k.DEFAULT_EDGE_LENGTH*k.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*t))},E.prototype.initSpringEmbedder=function(){this.incremental?(this.coolingFactor=.8,this.initialCoolingFactor=.8,this.maxNodeDisplacement=k.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=1,this.initialCoolingFactor=1,this.maxNodeDisplacement=k.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},E.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),n=0;n<t.length;n++)e=t[n],this.calcSpringForce(e,e.idealLength)},E.prototype.calcRepulsionForces=function(){var e,t,n,r,i=this.getAllNodes();for(e=0;e<i.length;e++)for(n=i[e],t=e+1;t<i.length;t++)r=i[t],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},E.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),n=0;n<t.length;n++)e=t[n],this.calcGravitationalForce(e)},E.prototype.moveNodes=function(){for(var e,t=this.getAllNodes(),n=0;n<t.length;n++)e=t[n],e.move()},E.prototype.calcSpringForce=function(e,t){var n,r,i,o,a=e.getSource(),s=e.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;n=e.getLength(),r=this.springConstant*(n-t),i=r*(e.lengthX/n),o=r*(e.lengthY/n),a.springForceX+=i,a.springForceY+=o,s.springForceX-=i,s.springForceY-=o},E.prototype.calcRepulsionForce=function(e,t){var n,r,a,s,u,l,c,h=e.getRect(),d=t.getRect(),p=new Array(2),f=new Array(4);h.intersects(d)?(i.calcSeparationAmount(h,d,p,k.DEFAULT_EDGE_LENGTH/2),l=p[0],c=p[1]):(this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(n=d.getCenterX()-h.getCenterX(),r=d.getCenterY()-h.getCenterY()):(i.getIntersection(h,d,f),n=f[2]-f[0],r=f[3]-f[1]),Math.abs(n)<k.MIN_REPULSION_DIST&&(n=o.sign(n)*k.MIN_REPULSION_DIST),Math.abs(r)<k.MIN_REPULSION_DIST&&(r=o.sign(r)*k.MIN_REPULSION_DIST),a=n*n+r*r,s=Math.sqrt(a),u=this.repulsionConstant/a,l=u*n/s,c=u*r/s),e.repulsionForceX-=l,e.repulsionForceY-=c,t.repulsionForceX+=l,t.repulsionForceY+=c},E.prototype.calcGravitationalForce=function(e){var t,n,r,i,o,a,s,u;t=e.getOwner(),n=(t.getRight()+t.getLeft())/2,r=(t.getTop()+t.getBottom())/2,i=e.getCenterX()-n,o=e.getCenterY()-r,a=Math.abs(i),s=Math.abs(o),e.getOwner()==this.graphManager.getRoot()?(Math.floor(80),u=Math.floor(t.getEstimatedSize()*this.gravityRangeFactor),(a>u||s>u)&&(e.gravitationForceX=-this.gravityConstant*i,e.gravitationForceY=-this.gravityConstant*o)):(u=Math.floor(t.getEstimatedSize()*this.compoundGravityRangeFactor),(a>u||s>u)&&(e.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant))},E.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},E.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},E.prototype.calcRepulsionRange=function(){return 0},k.getUserOptions=function(e){null!=e.nodeRepulsion&&(k.DEFAULT_REPULSION_STRENGTH=e.nodeRepulsion),null!=e.idealEdgeLength&&(k.DEFAULT_EDGE_LENGTH=e.idealEdgeLength,$.DEFAULT_EDGE_LENGTH=e.idealEdgeLength),null!=e.edgeElasticity&&(k.DEFAULT_SPRING_STRENGTH=e.edgeElasticity),null!=e.nestingFactor&&(k.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(k.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(k.MAX_ITERATIONS=e.numIter),w.incremental=!e.randomize,w.animate=e.animate},k.MAX_ITERATIONS=2500,k.DEFAULT_EDGE_LENGTH=50,k.DEFAULT_SPRING_STRENGTH=.45,k.DEFAULT_REPULSION_STRENGTH=4500,k.DEFAULT_GRAVITY_STRENGTH=.4,k.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,k.DEFAULT_GRAVITY_RANGE_FACTOR=2,k.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,k.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,k.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,k.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,k.MAX_NODE_DISPLACEMENT=3*k.MAX_NODE_DISPLACEMENT_INCREMENTAL,k.MIN_REPULSION_DIST=k.DEFAULT_EDGE_LENGTH/10,k.CONVERGENCE_CHECK_PERIOD=100,k.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,k.MIN_EDGE_LENGTH=1,k.GRID_CALCULATION_CHECK_PERIOD=10,S.prototype=Object.create(p.prototype);for(var I in p)S[I]=p[I];T.prototype=Object.create(y.prototype);for(var I in y)T[I]=y[I];T.prototype.setGridCoordinates=function(e,t,n,r){this.startX=e,this.finishX=t,this.startY=n,this.finishY=r},C.prototype=Object.create(T.prototype);for(var I in T)C[I]=T[I];C.prototype.move=function(){var e=this.graphManager.getLayout();this.displacementX=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX),this.displacementY=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*o.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*o.sign(this.displacementY)),null==this.child?this.moveBy(this.displacementX,this.displacementY):0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},C.prototype.propogateDisplacementToChildren=function(e,t){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)n=r[i],null==n.getChild()?(n.moveBy(e,t),n.displacementX+=e,n.displacementY+=t):n.propogateDisplacementToChildren(e,t)},C.prototype.setPred1=function(e){this.pred1=e},C.prototype.getPred1=function(){return pred1},C.prototype.getPred2=function(){return pred2},C.prototype.setNext=function(e){this.next=e},C.prototype.getNext=function(){return next},C.prototype.setProcessed=function(e){this.processed=e},C.prototype.isProcessed=function(){return processed},N.prototype=Object.create(E.prototype);for(var I in E)N[I]=E[I];N.prototype.newGraphManager=function(){var e=new A(this);return this.graphManager=e,e},N.prototype.newGraph=function(e){return new P(null,this.graphManager,e)},N.prototype.newNode=function(e){return new C(this.graphManager,e)},N.prototype.newEdge=function(e){return new D(null,null,e)},N.prototype.initParameters=function(){E.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=w.idealEdgeLength<10?10:w.idealEdgeLength,this.useSmartIdealEdgeLengthCalculation=w.smartEdgeLengthCalc,this.springConstant=m.transform(w.springStrength,k.DEFAULT_SPRING_STRENGTH,5,5),this.repulsionConstant=m.transform(w.repulsionStrength,k.DEFAULT_REPULSION_STRENGTH,5,5),this.gravityConstant=m.transform(w.gravityStrength,k.DEFAULT_GRAVITY_STRENGTH),this.compoundGravityConstant=m.transform(w.compoundGravityStrength,k.DEFAULT_COMPOUND_GRAVITY_STRENGTH),this.gravityRangeFactor=m.transform(w.gravityRange,k.DEFAULT_GRAVITY_RANGE_FACTOR),this.compoundGravityRangeFactor=m.transform(w.compoundGravityRange,k.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR))},N.prototype.layout=function(){var e=w.createBendsAsNeeded;return e&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},N.prototype.classicLayout=function(){if(this.calculateNodesToApplyGravitationTo(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),!this.incremental){var e=this.getFlatForest();e.length>0?this.positionNodesRadially(e):this.positionNodesRandomly()}return this.initSpringEmbedder(),this.runSpringEmbedder(),console.log("Classic CoSE layout finished after "+this.totalIterations+" iterations"),!0},N.prototype.runSpringEmbedder=function(){var e=(new Date).getTime(),t=25,n=t;do{if(this.totalIterations++,this.totalIterations%k.CONVERGENCE_CHECK_PERIOD==0){if(this.isConverged())break;this.coolingFactor=this.initialCoolingFactor*((this.maxIterations-this.totalIterations)/this.maxIterations),n=Math.ceil(t*Math.sqrt(this.coolingFactor))}if(this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(),this.calcGravitationalForces(),this.moveNodes(),this.animate(),w.animate&&this.totalIterations%n==0){for(var r=0;1e7>r&&!((new Date).getTime()-e>25);r++);e=(new Date).getTime();for(var i=this.graphManager.getAllNodes(),o={},r=0;r<i.length;r++){var a=i[r].rect,s=i[r].id;o[s]={id:s,x:a.getCenterX(),y:a.getCenterY(),w:a.width,h:a.height}}broadcast({pData:o})}}while(this.totalIterations<this.maxIterations);this.graphManager.updateBounds()},N.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,n=[],r=this.graphManager.getGraphs(),i=r.length;for(t=0;i>t;t++)e=r[t],e.updateConnected(),e.isConnected||(n=n.concat(e.getNodes()));this.graphManager.setAllNodesToApplyGravitation(n)},N.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,n=new r;for(t=0;t<e.length;t++){var i=e[t];if(!n.contains(i)){var o=i.getSource(),a=i.getTarget();if(o==a)i.getBendpoints().push(new u),i.getBendpoints().push(new u),this.createDummyNodesForBendpoints(i),n.add(i);else{var s=[];if(s=s.concat(o.getEdgeListToNode(a)),s=s.concat(a.getEdgeListToNode(o)),!n.contains(s[0])){if(s.length>1){var l;for(l=0;l<s.length;l++){var c=s[l];c.getBendpoints().push(new u),this.createDummyNodesForBendpoints(c)}}n.addAll(list)}}}if(n.size()==e.length)break}},N.prototype.positionNodesRadially=function(e){for(var t=new s(0,0),n=Math.ceil(Math.sqrt(e.length)),r=0,i=0,o=0,a=new u(0,0),l=0;l<e.length;l++){l%n==0&&(o=0,i=r,0!=l&&(i+=$.DEFAULT_COMPONENT_SEPERATION),r=0);var c=e[l],h=m.findCenterOfTree(c);t.x=o,t.y=i,a=N.radialLayout(c,h,t),a.y>r&&(r=Math.floor(a.y)),o=Math.floor(a.x+$.DEFAULT_COMPONENT_SEPERATION)}this.transform(new u(b.WORLD_CENTER_X-a.x/2,b.WORLD_CENTER_Y-a.y/2))},N.radialLayout=function(e,t,n){var r=Math.max(this.maxDiagonalInTree(e),$.DEFAULT_RADIAL_SEPARATION);N.branchRadialLayout(t,null,0,359,0,r);var i=f.calculateBounds(e),o=new h;o.setDeviceOrgX(i.getMinX()),o.setDeviceOrgY(i.getMinY()),o.setWorldOrgX(n.x),o.setWorldOrgY(n.y);for(var a=0;a<e.length;a++){var s=e[a];s.transform(o)}var l=new u(i.getMaxX(),i.getMaxY());return o.inverseTransformPoint(l)},N.branchRadialLayout=function(e,t,n,r,o,a){var s=(r-n+1)/2;0>s&&(s+=180);var u=(s+n)%360,l=u*i.TWO_PI/360,c=(Math.cos(l),o*Math.cos(l)),h=o*Math.sin(l);e.setCenter(c,h);var d=[];d=d.concat(e.getEdges());var p=d.length;null!=t&&p--;for(var f,g=0,v=d.length,y=e.getEdgesBetween(t);y.length>1;){var m=y[0];y.splice(0,1);var b=d.indexOf(m);b>=0&&d.splice(b,1),v--,p--}f=null!=t?(d.indexOf(y[0])+1)%v:0;for(var w=Math.abs(r-n)/p,x=f;g!=p;x=++x%v){var _=d[x].getOtherEnd(e);if(_!=t){var E=(n+g*w)%360,k=(E+w)%360;N.branchRadialLayout(_,e,E,k,o+a,a),g++}}},N.maxDiagonalInTree=function(e){for(var t=a.MIN_VALUE,n=0;n<e.length;n++){var r=e[n],i=r.getDiagonal();i>t&&(t=i)}return t},N.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},A.prototype=Object.create(g.prototype);for(var I in g)A[I]=g[I];P.prototype=Object.create(f.prototype);for(var I in f)P[I]=f[I];D.prototype=Object.create(S.prototype);for(var I in S)D[I]=S[I];for(var I in k)$[I]=k[I];$.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,$.DEFAULT_RADIAL_SEPARATION=k.DEFAULT_EDGE_LENGTH,$.DEFAULT_COMPONENT_SEPERATION=60,M.allChildren=[],M.idToLNode={},M.toBeTiled={};var O={ready:function(){},stop:function(){},fit:!0,padding:10,randomize:!1,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.4,numIter:2500,tile:!0,animate:!0};M.layout=new N,M.prototype.run=function(){var x=this;M.idToLNode={},M.toBeTiled={},M.layout=new N,this.cy=this.options.cy;var _=this;this.cy.trigger("layoutstart");var I=M.layout.newGraphManager();this.gm=I;var O=this.options.eles.nodes(),L=this.options.eles.edges();if(this.root=I.addRoot(),this.orphans=O.orphans(),this.options.tile)var j=this.groupZeroDegreeMembers(),R=this.clearComplexes(this.options),q=this.clearZeroDegreeMembers(j);else this.processChildrenList(this.root,this.orphans);for(var F=0;F<L.length;F++){var B=L[F],G=M.idToLNode[B.data("source")],z=M.idToLNode[B.data("target")];I.add(M.layout.newEdge(),G,z)}var U=x.thread;(!U||U.stopped())&&(U=x.thread=e.Thread(),U.require(t),U.require(n),U.require(r),U.require(i),U.require(o),U.require(a),U.require(s),U.require(u),U.require(l),U.require(c),U.require(h),U.require(d),U.require(v),U.require(f),U.require(p),U.require(g),U.require(y),U.require(m),U.require(b),U.require(w),U.require(E),U.require(k),U.require(S),U.require(T),U.require($),U.require(D),U.require(P),U.require(A),U.require(N),U.require(C));var O=this.options.eles.nodes(),L=this.options.eles.edges(),V={nodes:[],edges:[]};O.each(function(e,t){for(var n=this._private.data.id,r=t.parent().id(),i=t.boundingBox(),o=i.w,a=t.position("x"),s=t.position("y"),u=i.h,l=t.parent()[0];null!=l;){if(M.toBeTiled[l.id()])return;l=l.parent()[0]}V.nodes.push({id:n,pid:r,x:a,y:s,width:o,height:u})}),L.each(function(){var e=this.source().id(),t=this.target().id(),n=this._private.data.id;V.edges.push({id:n,source:e,target:t})});var H=!1;return U.pass(V).run(function(e){var n=function(e){broadcast({log:e})};n("start thread");var r=new N,i=r.newGraphManager(),o=i.layout.newGraph(),a=i.layout.newNode(null),s=i.add(o,a);s.graphManager=i,i.setRootGraph(s);for(var c=i.rootGraph,h=[],d={},p={},f={},g=function(e,n){for(var o=n.length,a=0;o>a;a++){var s,l=n[a],c=p[l.id];if(s=e.add(null!=l.width&&null!=l.height?new C(i,new u(l.x,l.y),new t(parseFloat(l.width),parseFloat(l.height))):new C(i)),s.id=l.id,d[l.id]=s,isNaN(s.rect.x)&&(s.rect.x=0),isNaN(s.rect.y)&&(s.rect.y=0),null!=c&&c.length>0){var h;h=r.getGraphManager().add(r.newGraph(),s),h.graphManager=i,g(h,c)}}},v=e.nodes,y=0;y<v.length;y++){var m=v[y],b=m.pid;null!=b?(null==p[b]&&(p[b]=[]),p[b].push(m)):h.push(m)}g(c,h);for(var w=e.edges,y=0;y<w.length;y++){var x=w[y],_=d[x.source],E=d[x.target];i.add(r.newEdge(),_,E)}r.runLayout();for(var k in d){var S=d[k],T=S.rect;f[k]={id:k,x:T.x,y:T.y,w:T.width,h:T.height}}var A={};A.rsSeed=l.seed,A.rsX=l.x;var P={result:f,seeds:A};return P}).then(function(e){var t=e.result,n=e.seeds;l.seed=n.rsSeed,l.x=n.rsX;for(var r in t){var i=M.idToLNode[r],o=t[r];i.rect.x=o.x,i.rect.y=o.y,i.rect.width=o.w,i.rect.height=o.h}_.options.tile&&(_.repopulateZeroDegreeMembers(q),_.repopulateComplexes(R),_.options.eles.nodes().updateCompoundBounds()),_.options.eles.nodes().positions(function(e,t){var n=t.data("id"),r=M.idToLNode[n];return{x:r.getRect().getCenterX(),y:r.getRect().getCenterY()}}),_.options.fit&&_.options.cy.fit(_.options.padding),H||(_.cy.one("layoutready",_.options.ready),_.cy.trigger("layoutready")),_.cy.one("layoutstop",_.options.stop),_.cy.trigger("layoutstop"),U.stop()}),U.on("message",function(e){var t=e.message.log;if(null!=t)return void console.log("Thread log: "+t);var n=e.message.pData;return null!=n?(_.options.eles.nodes().positions(function(e,t){for(var r=t.data("id"),i=n[r],o=this;null==i;)o=o.parent()[0],i=n[o.id()],n[r]=i;return{x:i.x,y:i.y}}),_.options.fit&&_.options.cy.fit(_.options.padding),void(H||(H=!0,_.one("layoutready",_.options.ready),_.trigger({type:"layoutready",layout:_})))):void 0}),this};var L=function(e){var t=e.data("id");if(null!=M.toBeTiled[t])return M.toBeTiled[t];var n=e.children();if(null==n||0==n.length)return M.toBeTiled[t]=!1,!1;for(var r=0;r<n.length;r++){var i=n[r];if(i.degree(!1)>0)return M.toBeTiled[t]=!1,!1;if(null!=i.children()&&0!=i.children().length){if(!L(i))return M.toBeTiled[t]=!1,!1}else M.toBeTiled[i.data("id")]=!1}return M.toBeTiled[t]=!0,!0};M.prototype.groupZeroDegreeMembers=function(){for(var e=[],t=[],n=this.options.eles.nodes().filter(function(e,t){return 0==this.degree(!1)&&t.parent().length>0&&!L(t.parent()[0])?!0:!1}),r=0;r<n.length;r++){var i=n[r],o=i.parent().id();"undefined"==typeof e[o]&&(e[o]=[]),e[o]=e[o].concat(i)}for(var o in e)if(e[o].length>1){var a="DummyComplex_"+o;t[a]=e[o],this.options.cy.getElementById(a).empty()&&this.options.cy.add({group:"nodes",data:{id:a,parent:o},position:{x:Math.random()*this.options.cy.container().clientWidth,y:Math.random()*this.options.cy.container().clientHeight}})}return t},M.prototype.performDFSOnComplexes=function(e){var t=[],n=this.options.eles.nodes().orphans();return this.fillCompexOrderByDFS(t,n),t},M.prototype.fillCompexOrderByDFS=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this.fillCompexOrderByDFS(e,r.children()),L(r)&&e.push(r)}},M.prototype.clearComplexes=function(e){var t=[],n=this.performDFSOnComplexes(e);M.complexOrder=n,this.processChildrenList(this.root,this.orphans);for(var r=0;r<n.length;r++){var i=M.idToLNode[n[r].id()];t[n[r].id()]=n[r].children(),i.child=null}var o=this.tileComplexMembers(t);return o},M.prototype.clearZeroDegreeMembers=function(e){var t=[];for(var n in e){var r=M.idToLNode[n];t[n]=this.tileNodes(e[n]),r.rect.width=t[n].width,r.rect.height=t[n].height}return t},M.prototype.repopulateComplexes=function(e){for(var t=M.complexOrder.length-1;t>=0;t--){var n=M.complexOrder[t].id(),r=M.idToLNode[n];this.adjustLocations(e[n],r.rect.x,r.rect.y)}},M.prototype.repopulateZeroDegreeMembers=function(e){for(var t in e){var n=this.cy.getElementById(t),r=M.idToLNode[t];this.adjustLocations(e[t],r.rect.x,r.rect.y),n.remove()}},M.prototype.adjustLocations=function(e,t,n){t+=e.complexMargin,n+=e.complexMargin;for(var r=t,i=0;i<e.rows.length;i++){var o=e.rows[i];t=r;for(var a=0,s=0;s<o.length;s++){var u=o[s],l=this.cy.getElementById(u.id);l.position({x:t+u.rect.width/2,y:n+u.rect.height/2}),u.rect.x=t,u.rect.y=n,t+=u.rect.width+e.horizontalPadding,u.rect.height>a&&(a=u.rect.height)}n+=a+e.verticalPadding}},M.prototype.tileComplexMembers=function(e){var t=[];for(var n in e){var r=M.idToLNode[n];t[n]=this.tileNodes(e[n]),r.rect.width=t[n].width+20,r.rect.height=t[n].height+20}return t},M.prototype.tileNodes=function(e){for(var t={rows:[],rowWidth:[],rowHeight:[],complexMargin:10,width:20,height:20,verticalPadding:10,horizontalPadding:10},n=[],r=0;r<e.length;r++){var i=e[r],o=M.idToLNode[i.id()],a=o.owner;a.remove(o),this.gm.resetAllNodes(),this.gm.getAllNodes(),n.push(o)}n.sort(function(e,t){return e.rect.width*e.rect.height>t.rect.width*t.rect.height?-1:e.rect.width*e.rect.height<t.rect.width*t.rect.height?1:0});for(var r=0;r<n.length;r++){var o=n[r];0==t.rows.length?this.insertNodeToRow(t,o,0):this.canAddHorizontal(t,o.rect.width,o.rect.height)?this.insertNodeToRow(t,o,this.getShortestRowIndex(t)):this.insertNodeToRow(t,o,t.rows.length),this.shiftToLastRow(t)}return t},M.prototype.insertNodeToRow=function(e,t,n){var r=2*e.complexMargin;if(n==e.rows.length){var i=[];e.rows.push(i),e.rowWidth.push(r),e.rowHeight.push(0)}var o=e.rowWidth[n]+t.rect.width;e.rows[n].length>0&&(o+=e.horizontalPadding),e.rowWidth[n]=o,e.width<o&&(e.width=o);var a=t.rect.height;n>0&&(a+=e.verticalPadding);var s=0;a>e.rowHeight[n]&&(s=e.rowHeight[n],e.rowHeight[n]=a,s=e.rowHeight[n]-s),e.height+=s,e.rows[n].push(t)},M.prototype.getShortestRowIndex=function(e){for(var t=-1,n=Number.MAX_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]<n&&(t=r,n=e.rowWidth[r]);return t},M.prototype.getLongestRowIndex=function(e){for(var t=-1,n=Number.MIN_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]>n&&(t=r,n=e.rowWidth[r]);return t},M.prototype.canAddHorizontal=function(e,t,n){var r=this.getShortestRowIndex(e);if(0>r)return!0;var i=e.rowWidth[r];if(i+e.horizontalPadding+t<=e.width)return!0;var o=0;e.rowHeight[r]<n&&r>0&&(o=n+e.verticalPadding-e.rowHeight[r]);var a;a=e.width-i>=t+e.horizontalPadding?(e.height+o)/(i+t+e.horizontalPadding):(e.height+o)/e.width,
o=n+e.verticalPadding;var s;return s=e.width<t?(e.height+o)/t:(e.height+o)/e.width,1>s&&(s=1/s),1>a&&(a=1/a),s>a},M.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),n=e.rowWidth.length-1,r=e.rows[t],i=r[r.length-1],o=i.width+e.horizontalPadding;if(e.width-e.rowWidth[n]>o&&t!=n){r.splice(-1,1),e.rows[n].push(i),e.rowWidth[t]=e.rowWidth[t]-o,e.rowWidth[n]=e.rowWidth[n]+o,e.width=e.rowWidth[this.getLongestRowIndex(e)];for(var a=Number.MIN_VALUE,s=0;s<r.length;s++)r[s].height>a&&(a=r[s].height);t>0&&(a+=e.verticalPadding);var u=e.rowHeight[t]+e.rowHeight[n];e.rowHeight[t]=a,e.rowHeight[n]<i.height+e.verticalPadding&&(e.rowHeight[n]=i.height+e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[n];e.height+=l-u,this.shiftToLastRow(e)}},M.prototype.stop=function(){return this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},M.prototype.destroy=function(){return this.thread&&this.thread.stop(),this},M.prototype.processChildrenList=function(e,n){for(var r=n.length,i=0;r>i;i++){var o=n[i];this.options.eles.nodes().length;var a,s=o.children();if(a=e.add(null!=o.width()&&null!=o.height()?new C(M.layout.graphManager,new u(o.position("x"),o.position("y")),new t(parseFloat(o.width()),parseFloat(o.height()))):new C(this.graphManager)),a.id=o.data("id"),M.idToLNode[o.data("id")]=a,isNaN(a.rect.x)&&(a.rect.x=0),isNaN(a.rect.y)&&(a.rect.y=0),null!=s&&s.length>0){var l;l=M.layout.getGraphManager().add(M.layout.newGraph(),a),this.processChildrenList(l,s)}}},e("layout","cose2",M)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(e){return 1},edgeWeight:function(e){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,boundingBox:void 0,ready:function(){},stop:function(){}};t.prototype.run=function(){var t=this.options,n=this;return e.util.require("dagre",function(r){var i=t.cy,o=t.eles,a=function(t,n){return e.is.fn(n)?n.apply(t,[t]):n},s=e.math.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),u=new r.graphlib.Graph({multigraph:!0,compound:!0}),l={},c=function(e,t){null!=t&&(l[e]=t)};c("nodesep",t.nodeSep),c("edgesep",t.edgeSep),c("ranksep",t.rankSep),c("rankdir",t.rankDir),u.setGraph(l),u.setDefaultEdgeLabel(function(){return{}}),u.setDefaultNodeLabel(function(){return{}});for(var h=o.nodes(),d=0;d<h.length;d++){var p=h[d],f=p.boundingBox();u.setNode(p.id(),{width:f.w,height:f.h,name:p.id()})}for(var d=0;d<h.length;d++){var p=h[d];p.isChild()&&u.setParent(p.id(),p.parent().id())}for(var g=o.edges().stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()}),d=0;d<g.length;d++){var v=g[d];u.setEdge(v.source().id(),v.target().id(),{minlen:a(v,t.minLen),weight:a(v,t.edgeWeight),name:v.id()},v.id())}r.layout(u);for(var y=u.nodes(),d=0;d<y.length;d++){var m=y[d],b=u.node(m);i.getElementById(m).scratch().dagre=b}var w;t.boundingBox?(w={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)},h.forEach(function(e){var t=e.scratch().dagre;w.x1=Math.min(w.x1,t.x),w.x2=Math.max(w.x2,t.x),w.y1=Math.min(w.y1,t.y),w.y2=Math.max(w.y2,t.y)}),w.w=w.x2-w.x1,w.h=w.y2-w.y1):w=s;var x=function(e){if(t.boundingBox){var n=(e.x-w.x1)/w.w,r=(e.y-w.y1)/w.h;return{x:s.x1+n*s.w,y:s.y1+r*s.h}}return e};h.layoutPositions(n,t,function(){var e=this.scratch().dagre;return x({x:e.x,y:e.y})})}),this},e("layout","dagre",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var n={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,columns:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,n=t,r=t.cy,i=n.eles,o=i.nodes().not(":parent");n.sort&&(o=o.sort(n.sort));var a=e.math.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===a.h||0===a.w)o.layoutPositions(this,n,function(){return{x:a.x1,y:a.y1}});else{var s=o.size(),u=Math.sqrt(s*a.h/a.w),l=Math.round(u),c=Math.round(a.w/a.h*u),h=function(e){if(null==e)return Math.min(l,c);var t=Math.min(l,c);t==l?l=e:c=e},d=function(e){if(null==e)return Math.max(l,c);var t=Math.max(l,c);t==l?l=e:c=e};if(null!=n.rows&&null!=n.columns)l=n.rows,c=n.columns;else if(null!=n.rows&&null==n.columns)l=n.rows,c=Math.ceil(s/l);else if(null==n.rows&&null!=n.columns)c=n.columns,l=Math.ceil(s/c);else if(c*l>s){var p=h(),f=d();(p-1)*f>=s?h(p-1):(f-1)*p>=s&&d(f-1)}else for(;s>c*l;){var p=h(),f=d();(f+1)*p>=s?d(f+1):h(p+1)}var g=a.w/c,v=a.h/l;if(n.condense&&(g=0,v=0),n.avoidOverlap)for(var y=0;y<o.length;y++){var m=o[y],b=m._private.position;(null==b.x||null==b.y)&&(b.x=0,b.y=0);var w=m.boundingBox(),x=n.avoidOverlapPadding,_=w.w+x,E=w.h+x;g=Math.max(g,_),v=Math.max(v,E)}for(var k={},S=function(e,t){return k["c-"+e+"-"+t]?!0:!1},T=function(e,t){k["c-"+e+"-"+t]=!0},C=0,N=0,A=function(){N++,N>=c&&(N=0,C++)},P={},y=0;y<o.length;y++){var m=o[y],D=n.position(m);if(D&&(void 0!==D.row||void 0!==D.col)){var b={row:D.row,col:D.col};if(void 0===b.col)for(b.col=0;S(b.row,b.col);)b.col++;else if(void 0===b.row)for(b.row=0;S(b.row,b.col);)b.row++;P[m.id()]=b,T(b.row,b.col)}}var $=function(e,t){var n,r;if(t.locked()||t.isFullAutoParent())return!1;var i=P[t.id()];if(i)n=i.col*g+g/2+a.x1,r=i.row*v+v/2+a.y1;else{for(;S(C,N);)A();n=N*g+g/2+a.x1,r=C*v+v/2+a.y1,T(C,N),A()}return{x:n,y:r}};o.layoutPositions(this,n,$)}return this},e("layout","grid",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={ready:function(){},stop:function(){}};t.prototype.run=function(){{var e=this.options,t=e.eles,n=this;e.cy}return n.trigger("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.trigger("layoutready"),n.one("layoutstop",e.stop),n.trigger("layoutstop"),this},t.prototype.stop=function(){return this},e("layout","null",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){function t(e){if(null==n.positions)return null;if(o)return n.positions.apply(e,[e]);var t=n.positions[e._private.data.id];return null==t?null:t}var n=this.options,r=n.eles,i=r.nodes(),o=e.is.fn(n.positions);return i.layoutPositions(this,n,function(e,n){var r=t(n);return n.locked()||null==r?!1:r}),this},e("layout","preset",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,n=t.cy,r=t.eles,i=r.nodes().not(":parent"),o=e.math.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),a=function(e,t){return{x:o.x1+Math.round(Math.random()*o.w),y:o.y1+Math.round(Math.random()*o.h)}};return i.layoutPositions(this,t,a),this},e("layout","random",t)}(cytoscape),function($$){"use strict";function SpreadLayout(e){this.options=$$.util.extend({},defaults,e)}function cellCentroid(e){for(var t,n,r,i=e.halfedges,o=0,a=0,s=0,u=0;u<i.length;++u)t=i[u].getEndpoint(),n=i[u].getStartpoint(),o+=t.x*n.y,o-=t.y*n.x,r=t.x*n.y-n.x*t.y,a+=(t.x+n.x)*r,s+=(t.y+n.y)*r;return o/=2,r=6*o,{x:a/r,y:s/r}}function sitesDistance(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}var defaults={animate:!0,ready:void 0,stop:void 0,fit:!0,minDist:20,padding:20,expandingFactor:-1,maxFruchtermanReingoldIterations:50,maxExpandIterations:4,boundingBox:void 0,randomize:!1};SpreadLayout.prototype.run=function(){var layout=this,options=this.options;return $$.util.requires(["foograph","Voronoi"],function(foograph,Voronoi){function setPositions(e){for(var t=e.vertices,n=[],r=0;r<t.length;++r){var i=t[r];n[i.id]={x:i.x,y:i.y}}nodes.positions(function(e,t){var r=t._private.data.id,i=n[r];return{x:Math.round(simBB.x1+i.x),y:Math.round(simBB.y1+i.y)}}),options.fit&&cy.fit(options.padding),cy.nodes().rtrigger("position")}var cy=options.cy,nodes=cy.nodes(),edges=cy.edges(),cWidth=cy.width(),cHeight=cy.height(),simulationBounds=options.boundingBox?$$.math.makeBoundingBox(options.boundingBox):null,padding=options.padding,simBBFactor=Math.max(1,.8*Math.log(nodes.length));nodes.length<100&&(simBBFactor/=2),layout.trigger({type:"layoutstart",layout:layout});var simBB={x1:0,y1:0,x2:cWidth*simBBFactor,y2:cHeight*simBBFactor};simulationBounds&&(simBB.x1=simulationBounds.x1,simBB.y1=simulationBounds.y1,simBB.x2=simulationBounds.x2,simBB.y2=simulationBounds.y2),simBB.x1+=padding,simBB.y1+=padding,simBB.x2-=padding,simBB.y2-=padding;var width=simBB.x2-simBB.x1,height=simBB.y2-simBB.y1,startTime=Date.now();if(nodes.size()<=1){nodes.positions({x:Math.round((simBB.x1+simBB.x2)/2),y:Math.round((simBB.y1+simBB.y2)/2)}),options.fit&&cy.fit(options.padding);var endTime=Date.now();return console.info("Layout on "+nodes.size()+" nodes took "+(endTime-startTime)+" ms"),layout.one("layoutready",options.ready),layout.trigger("layoutready"),layout.one("layoutstop",options.stop),void layout.trigger("layoutstop")}var pData={width:width,height:height,minDist:options.minDist,expFact:options.expandingFactor,expIt:0,maxExpIt:options.maxExpandIterations,vertices:[],edges:[],startTime:startTime,maxFruchtermanReingoldIterations:options.maxFruchtermanReingoldIterations};nodes.each(function(e,t){var n=t.id(),r=t.position();options.randomize&&(r={x:Math.round(simBB.x1+(simBB.x2-simBB.x1)*Math.random()),y:Math.round(simBB.y1+(simBB.y2-simBB.y1)*Math.random())}),pData.vertices.push({id:n,x:r.x,y:r.y})}),edges.each(function(){var e=this.source().id(),t=this.target().id();pData.edges.push({src:e,tgt:t})});var t1=layout.thread;(!t1||t1.stopped())&&(t1=layout.thread=$$.Thread(),t1.require(foograph,"foograph"),t1.require(Voronoi),t1.require(sitesDistance),t1.require(cellCentroid));var didLayoutReady=!1;t1.on("message",function(e){var t=e.message;options.animate&&(setPositions(t),didLayoutReady||(layout.trigger("layoutready"),didLayoutReady=!0))}),layout.one("layoutready",options.ready),t1.pass(pData).run(function(pData){function checkMinDist(e){for(var t=0,n=0;n<e.length;++n){var r=e[n];null!=r.lSite&&null!=r.rSite&&sitesDistance(r.lSite,r.rSite)<lMinDist&&++t}return t}foograph=eval("foograph"),Voronoi=eval("Voronoi");for(var lWidth=pData.width,lHeight=pData.height,lMinDist=pData.minDist,lExpFact=pData.expFact,lMaxExpIt=pData.maxExpIt,lMaxFruchtermanReingoldIterations=pData.maxFruchtermanReingoldIterations,savePositions=function(){pData.width=lWidth,pData.height=lHeight,pData.expIt=expandIteration,pData.expFact=lExpFact,pData.vertices=[];for(var e=0;e<fv.length;++e)pData.vertices.push({id:fv[e].label,x:fv[e].x,y:fv[e].y})},messagePositions=function(){broadcast(pData)},frg=new foograph.Graph("FRgraph",!1),frgNodes={},dataVertices=pData.vertices,ni=0;ni<dataVertices.length;++ni){var id=dataVertices[ni].id,v=new foograph.Vertex(id,Math.round(Math.random()*lHeight),Math.round(Math.random()*lHeight));frgNodes[id]=v,frg.insertVertex(v)}for(var dataEdges=pData.edges,ei=0;ei<dataEdges.length;++ei){var srcNodeId=dataEdges[ei].src,tgtNodeId=dataEdges[ei].tgt;frg.insertEdge("",1,frgNodes[srcNodeId],frgNodes[tgtNodeId])}var fv=frg.vertices,iterations=lMaxFruchtermanReingoldIterations,frLayoutManager=new foograph.ForceDirectedVertexLayout(lWidth,lHeight,iterations,!1,lMinDist);frLayoutManager.callback=function(){savePositions(),messagePositions()},frLayoutManager.layout(frg),savePositions(),messagePositions();for(var voronoi=new Voronoi,bbox={xl:0,xr:lWidth,yt:0,yb:lHeight},vSites=[],i=0;i<fv.length;++i)vSites[fv[i].label]=fv[i];for(var diagram=voronoi.compute(fv,bbox),cells=diagram.cells,i=0;i<cells.length;++i){var cell=cells[i],site=cell.site,centroid=cellCentroid(cell),currv=vSites[site.label];currv.x=centroid.x,currv.y=centroid.y}0>lExpFact&&(lExpFact=Math.max(.05,Math.min(.1,lMinDist/Math.sqrt(lWidth*lHeight/fv.length)*.5)));for(var prevInfractions=checkMinDist(diagram.edges),bStop=0>=prevInfractions,voronoiIteration=0,expandIteration=0;!bStop;){++voronoiIteration;for(var it=0;4>=it;++it){voronoi.recycle(diagram),diagram=voronoi.compute(fv,bbox),cells=diagram.cells;for(var i=0;i<cells.length;++i){var cell=cells[i],site=cell.site,centroid=cellCentroid(cell),currv=vSites[site.label];currv.x=centroid.x,currv.y=centroid.y}}var currInfractions=checkMinDist(diagram.edges);0>=currInfractions?bStop=!0:(currInfractions>=prevInfractions||voronoiIteration>=4)&&(expandIteration>=lMaxExpIt?bStop=!0:(lWidth+=lWidth*lExpFact,lHeight+=lHeight*lExpFact,bbox={xl:0,xr:lWidth,yt:0,yb:lHeight},++expandIteration,voronoiIteration=0)),prevInfractions=currInfractions,savePositions(),messagePositions()}return savePositions(),pData}).then(function(e){var t=e.vertices;setPositions(e);var n=e.startTime,r=new Date;console.info("Layout on "+t.length+" nodes took "+(r-n)+" ms"),layout.one("layoutstop",options.stop),options.animate||layout.trigger("layoutready"),layout.trigger("layoutstop"),t1.stop()})}),this},SpreadLayout.prototype.stop=function(){this.thread&&this.thread.stop(),this.trigger("layoutstop")},SpreadLayout.prototype.destroy=function(){this.thread&&this.thread.stop()},$$("layout","spread",SpreadLayout)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,randomize:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5,edgeLength:function(e){var t=e.data("length");return void 0===t||isNaN(t)?void 0:t}};t.prototype.run=function(){var t=this,n=this,r=this.options;return r.random=r.randomize,e.util.require("Springy",function(i){function o(e){var t=e.scratch("springy").model.id,n=x.layout.nodePoints[t].p,r=e.position(),i=null!=r.x&&null!=r.y?y(e.position()):{x:4*Math.random()-2,y:4*Math.random()-2};n.x=i.x,n.y=i.y}function a(){n.stopped=!1,r.ungrabifyWhileSimulating&&E.ungrabify(),x.start()}var s=!1,u=r.cy;t.trigger({type:"layoutstart",layout:t});var l=r.eles,c=l.nodes().not(":parent"),h=l.edges(),d=e.math.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:u.width(),h:u.height()}),p=new i.Graph;c.each(function(e,t){t.scratch("springy",{model:p.newNode({element:t})})}),h.each(function(e,t){var n=t.source().scratch("springy").model,i=t.target().scratch("springy").model;t.scratch("springy",{model:p.newEdge(n,i,{element:t,length:r.edgeLength.call(t,t)})})});var f=window.sim=new i.Layout.ForceDirected(p,r.stiffness,r.repulsion,r.damping);r.infinite&&(f.minEnergyThreshold=-(1/0));var g=f.getBoundingBox(),v=function(e){g=f.getBoundingBox();var t=g.topright.subtract(g.bottomleft),n=e.subtract(g.bottomleft).divide(t.x).x*d.w+d.x1,r=e.subtract(g.bottomleft).divide(t.y).y*d.h+d.x1;return new i.Vector(n,r)},y=function(e){g=f.getBoundingBox();var t=g.topright.subtract(g.bottomleft),n=(e.x-d.x1)/d.w*t.x+g.bottomleft.x,r=(e.y-d.y1)/d.h*t.y+g.bottomleft.y;return new i.Vector(n,r)},m=u.collection(),b=u.nodes().size(),w=1,x=new i.Renderer(f,function(){n.stopped||m.length>0&&r.animate&&(s=!0,m.rtrigger("position"),r.fit&&u.fit(r.padding),m=u.collection(),s=!1)},function(e,t,n){},function(e,i){if(!n.stopped){var o=v(i),a=e.data.element;a.locked()||a.grabbed()||(a._private.position={x:o.x,y:o.y},m.merge(a)),w==b&&(t.one("layoutready",r.ready),t.trigger({type:"layoutready",layout:t})),w++}});c.each(function(e,t){r.random||o(t)});var _;c.on("position",_=function(){s||o(this)});var E=c.filter(":grabbable");n.stopSystem=function(){n.stopped=!0,p.filterNodes(function(){return!1}),r.ungrabifyWhileSimulating&&E.grabify(),r.fit&&u.fit(r.padding),c.off("drag position",_),t.one("layoutstop",r.stop),t.trigger({type:"layoutstop",layout:t}),n.stopSystem=null},a(),r.infinite||setTimeout(function(){n.stop()},r.maxSimulationTime)}),this},t.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},e("layout","springy",t)}(cytoscape),function(e){"use strict";function t(e){this.options=e}t.prototype.recalculateRenderedStyle=function(){},t.prototype.notify=function(){},e("renderer","null",t)}(cytoscape),function(e){"use strict";var t={menuRadius:100,selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(92, 194, 237, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,minSpotlightRadius:24,maxSpotlightRadius:38,itemColor:"white",itemTextShadowColor:"black",zIndex:9999},n=function(e,n){e&&e("core","cxtmenu",function(e){function r(e){var t=e.offset();return t.left+=parseFloat(e.css("padding-left")),t.left+=parseFloat(e.css("border-left-width")),t.top+=parseFloat(e.css("padding-top")),t.top+=parseFloat(e.css("border-top-width")),t}function i(){n(document).off("click",I),g.off("click",O)}function o(e){e=void 0!==e?e:q,b.globalCompositeOperation="source-over",b.clearRect(0,0,x,x),b.fillStyle=h.fillColor,b.beginPath(),b.arc(w+h.activePadding,w+h.activePadding,w,0,2*Math.PI,!0),b.closePath(),b.fill(),b.globalCompositeOperation="destination-out",b.strokeStyle="white",b.lineWidth=h.separatorWidth;for(var t=h.commands,n=2*Math.PI/t.length,r=t.length%2!==0?Math.PI/2:0,i=r+n,o=0;o<t.length;o++){var a=(t[o],w*Math.cos(r)),s=w*Math.sin(r);b.beginPath(),b.moveTo(w+h.activePadding,w+h.activePadding),b.lineTo(w+h.activePadding+a,w+h.activePadding-s),b.closePath(),b.stroke(),r+=n,i+=n}b.fillStyle="white",b.globalCompositeOperation="destination-out",b.beginPath(),b.arc(w+h.activePadding,w+h.activePadding,e+h.spotlightPadding,0,2*Math.PI,!0),b.closePath(),b.fill(),b.globalCompositeOperation="source-over"}function a(e){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n=+new Date;clearTimeout(L),G||n>=F+B?(t(e),F=n,G=!1):L=setTimeout(function(){t(e),F=n},2*B)}function s(){var e,t,i,s=!1,u=function(){i&&d.userZoomingEnabled(!0)},l=function(){e&&c.grabify()};z.on("cxttapstart taphold",h.selector,function(t){c=this;var a=this,u=this===d;i=d.userZoomingEnabled(),d.userZoomingEnabled(!1),e=c.grabbable&&c.grabbable(),e&&c.ungrabify();var l,f,g;!u&&a.isNode()?(l=a.renderedPosition(),f=a.renderedWidth(),g=a.renderedHeight()):(l=t.cyRenderedPosition,f=1,g=1);n(window).scrollLeft(),n(window).scrollTop();v=r(p),j=l.x,R=l.y,y.show().css({left:l.x-w+"px",top:l.y-w+"px"}),q=Math.max(f,g)/2,q=Math.max(q,h.minSpotlightRadius),q=Math.min(q,h.maxSpotlightRadius),o(),_=void 0,s=!0}).on("cxtdrag tapdrag",h.selector,t=function(e){a(function(){if(s){var t=e.originalEvent,n=t.touches&&t.touches.length>0,r=n?t.touches[0].pageX:t.pageX,i=n?t.touches[0].pageY:t.pageY,a=r-v.left-j,u=i-v.top-R;0===a&&(a=.01);var l=Math.sqrt(a*a+u*u),c=(u*u-l*l-a*a)/(-2*l*a),d=Math.acos(c);if(_=void 0,l<q+h.spotlightPadding)return void o();o();var p=a*w/l,f=u*w/l;u>0&&(d=Math.PI+Math.abs(d-Math.PI));for(var g=h.commands,y=2*Math.PI/g.length,m=g.length%2!==0?Math.PI/2:0,x=m+y,E=0;E<g.length;E++){var k=g[E],S=d>=m&&x>=d||m<=d+2*Math.PI&&d+2*Math.PI<=x;if(k.disabled&&(S=!1),S){b.fillStyle=h.activeFillColor,b.strokeStyle="black",b.lineWidth=1,b.beginPath(),b.moveTo(w+h.activePadding,w+h.activePadding),b.arc(w+h.activePadding,w+h.activePadding,w+h.activePadding,2*Math.PI-m,2*Math.PI-x,!0),b.closePath(),b.fill(),_=E;break}m+=y,x+=y}b.fillStyle="white",b.globalCompositeOperation="destination-out",b.beginPath(),b.translate(w+h.activePadding+p/w*(q+h.spotlightPadding-h.indicatorSize/4),w+h.activePadding+f/w*(q+h.spotlightPadding-h.indicatorSize/4)),b.rotate(Math.PI/4-d),b.fillRect(-h.indicatorSize/2,-h.indicatorSize/2,h.indicatorSize,h.indicatorSize),b.closePath(),b.fill(),b.setTransform(1,0,0,1,0,0),b.beginPath(),b.arc(w+h.activePadding,w+h.activePadding,q+h.spotlightPadding,0,2*Math.PI,!0),b.closePath(),b.fill(),b.globalCompositeOperation="source-over"}})}).on("tapdrag",t).on("cxttapend tapend",h.selector,function(e){var t=this;if(y.hide(),void 0!==_){var n=h.commands[_].select;n&&(n.apply(t),_=void 0)}s=!1,l(),u()}).on("cxttapend tapend",function(e){y.hide(),s=!1,l(),u()})}function u(){for(var e=f.handlers,t=0;t<e.length;t++){var n=e[t];"core"===n.selector?d.off(n.events,n.fn):d.off(n.events,n.selector,n.fn)}}function l(){u(),i(),g.remove()}var c,h=n.extend(!0,{},t,e),d=this,p=n(d.container()),f={options:h,handlers:[]},g=n('<div class="cxtmenu"></div>');f.$container=g;var v,y=n("<div></div>"),m=n("<canvas></canvas>"),b=m[0].getContext("2d"),w=h.menuRadius,x=2*(w+h.activePadding),_=void 0;p.append(g),g.append(y),y.append(m),g.css({position:"absolute",zIndex:h.zIndex}),y.css({width:x+"px",height:x+"px",position:"absolute",zIndex:1,marginLeft:-h.activePadding+"px",marginTop:-h.activePadding+"px"}).hide(),m[0].width=x,m[0].height=x;for(var E=h.commands,k=2*Math.PI/E.length,S=E.length%2!==0?Math.PI/2:0,T=S+k,C=0;C<E.length;C++){var N=E[C],A=(S+T)/2,P=.66*w*Math.cos(A),D=.66*w*Math.sin(A),$=n('<div class="cxtmenu-item"></div>');$.css({color:h.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px "+h.itemTextShadowColor+", 1px -1px "+h.itemTextShadowColor+", -1px 1px "+h.itemTextShadowColor+", 1px 1px "+h.itemTextShadowColor,left:"50%",top:"50%","min-height":.66*w,width:.66*w,height:.66*w,marginLeft:P-.33*w,marginTop:-D-.33*w});var M=n('<div class="cxtmenu-content">'+N.content+"</div>");M.css({width:.66*w,height:.66*w,"vertical-align":"middle",display:"table-cell"}),N.disabled&&M.addClass("cxtmenu-disabled"),y.append($),$.append(M),S+=k,T+=k}var I,O,L,j,R,q,F=0,B=1e3/30,G=!0,z={on:function(e,t,n){return f.handlers.push({events:e,selector:t,fn:n}),"core"===t?d.on(e,function(e){return e.cyTarget===d?n.apply(this,[e]):void 0}):d.on(e,t,n),this}};return s(),{destroy:function(){l()}}})};"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof define&&define.amd&&define("cytoscape-cxtmenu",function(){return n}),"undefined"!=typeof cytoscape&&n(cytoscape,e)}(jQuery),function(){"use strict";var e=angular.module("pasvaz.bindonce",[]);e.directive("bindonce",function(){var e=function(e){if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"===t||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}else e=!1;return e},t=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(t)&&(t=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var n={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(n,r,i,o){var a=function(t,n,r){var i="show"===n?"":"none",o="hide"===n?"":"none";t.css("display",e(r)?i:o)},s=function(e,t){if(angular.isObject(t)&&!angular.isArray(t)){var n=[];angular.forEach(t,function(e,t){e&&n.push(t)}),t=n}t&&e.addClass(angular.isArray(t)?t.join(" "):t)},u={watcherRemover:void 0,binders:[],group:i.boName,element:r,ran:!1,addBinder:function(e){this.binders.push(e),this.ran&&this.runBinders()},setupWatcher:function(e){var t=this;this.watcherRemover=n.$watch(e,function(e){void 0!==e&&(t.removeWatcher(),t.runBinders())},!0)},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var n=this.binders.shift();if(!this.group||this.group==n.group){var r=n.scope.$eval(n.interpolate?o(n.value):n.value);switch(n.attr){case"boIf":e(r)&&n.transclude(n.scope.$new(),function(e){var t=n.element.parent(),r=n.element&&n.element[n.element.length-1],i=t&&t[0]||r&&r.parentNode,o=r&&r.nextSibling||null;angular.forEach(e,function(e){i.insertBefore(e,o)})});break;case"boSwitch":var i,u=n.controller[0];(i=u.cases["!"+r]||u.cases["?"])&&(n.scope.$eval(n.attrs.change),angular.forEach(i,function(e){e.transclude(n.scope.$new(),function(t){var n=e.element.parent(),r=e.element&&e.element[e.element.length-1],i=n&&n[0]||r&&r.parentNode,o=r&&r.nextSibling||null;angular.forEach(t,function(e){i.insertBefore(e,o)})})}));break;case"boSwitchWhen":var l=n.controller[0];l.cases["!"+n.attrs.boSwitchWhen]=l.cases["!"+n.attrs.boSwitchWhen]||[],l.cases["!"+n.attrs.boSwitchWhen].push({transclude:n.transclude,element:n.element});break;case"boSwitchDefault":var l=n.controller[0];l.cases["?"]=l.cases["?"]||[],l.cases["?"].push({transclude:n.transclude,element:n.element});break;case"hide":case"show":a(n.element,n.attr,r);break;case"class":s(n.element,r);break;case"text":n.element.text(r);break;case"html":n.element.html(r);break;case"style":n.element.css(r);break;case"src":n.element.attr(n.attr,r),t&&n.element.prop("src",r);break;case"attr":angular.forEach(n.attrs,function(e,t){var r,i;t.match(/^boAttr./)&&n.attrs[t]&&(r=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=n.scope.$eval(n.attrs[t]),n.element.attr(r,i))});break;case"href":case"alt":case"title":case"id":case"value":n.element.attr(n.attr,r)}}}this.ran=!0}};return u}],link:function(e,t,n,r){var i=n.bindonce?e.$eval(n.bindonce):!0;void 0!==i?i.then&&"function"==typeof i.then?i.then(function(){r.runBinders()}):r.runBinders():(r.setupWatcher(n.bindonce),t.bind("$destroy",r.removeWatcher))}};return n}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(t){var n=200;return e.directive(t.directiveName,function(){var e={priority:t.priority||n,transclude:t.transclude||!1,terminal:t.terminal||!1,require:["^bindonce"].concat(t.require||[]),controller:t.controller,compile:function(e,n,r){return function(e,n,i,o){var a=o[0],s=i.boParent;if(s&&a.group!==s){var u=a.element.parent();a=void 0;for(var l;9!==u[0].nodeType&&u.length;){if((l=u.data("$bindonceController"))&&l.group===s){a=l;break}u=u.parent()}if(!a)throw new Error("No bindonce controller: "+s)}a.addBinder({element:n,attr:t.attribute||t.directiveName,attrs:i,value:i[t.directiveName],interpolate:t.interpolate,group:s,transclude:r,controller:o.slice(1),scope:e})}}};return e})})}(),!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.Promise=e():"undefined"!=typeof global?global.Promise=e():"undefined"!=typeof self&&(self.Promise=e())}(function(){var e,t,n;return function r(e,t,n){function i(a,s){if(!t[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=t[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return r.isRejected()?r:(t.setHowMany(1),t.setUnwrap(),t.init(),r)}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){"use strict";function r(){this._isTickUsed=!1,this._schedule=i,this._length=0,this._lateBuffer=new o(16),this._functionBuffer=new o(65536);var e=this;this.consumeFunctionBuffer=function(){e._consumeFunctionBuffer()}}var i=e("./schedule.js"),o=e("./queue.js"),a=e("./util.js").errorObj,s=e("./util.js").tryCatch1,u="undefined"!=typeof process?process:void 0;r.prototype.haveItemsQueued=function(){return this._length>0},r.prototype.invokeLater=function(e,t,n){void 0===u||null==u.domain||e.domain||(e=u.domain.bind(e)),this._lateBuffer.push(e,t,n),this._queueTick()},r.prototype.invoke=function(e,t,n){void 0===u||null==u.domain||e.domain||(e=u.domain.bind(e));var r=this._functionBuffer;r.push(e,t,n),this._length=r.length(),this._queueTick()},r.prototype._consumeFunctionBuffer=function(){for(var e=this._functionBuffer;e.length()>0;){var t=e.shift(),n=e.shift(),r=e.shift();t.call(n,r)}this._reset(),this._consumeLateBuffer()},r.prototype._consumeLateBuffer=function(){for(var e=this._lateBuffer;e.length()>0;){var t=e.shift(),n=e.shift(),r=e.shift(),i=s(t,n,r);if(i===a){if(this._queueTick(),null==t.domain)throw i.e;t.domain.emit("error",i.e)}}},r.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},r.prototype._reset=function(){this._isTickUsed=!1,this._length=0},t.exports=new r},{"./queue.js":25,"./schedule.js":28,"./util.js":35}],3:[function(e,t,n){"use strict";var r=e("./promise.js")();t.exports=r},{"./promise.js":20}],4:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){function n(e){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,e))}function r(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))}function a(e,t,n){var r=n[e];if("function"!=typeof r){if(!f(e))return null;if(r=t(e),n[e]=r,n[" size"]++,n[" size"]>512){for(var i=Object.keys(n),o=0;256>o;++o)delete n[i[o]];n[" size"]=i.length-256}}return r}function s(e){return a(e,n,i)}function u(e){return a(e,r,o)}function l(e){return e[this.pop()].apply(e,this)}function c(e){return e[this]}function h(e){return e[this]}var d=e("./util.js"),p=d.canEvaluate,f=d.isIdentifier;t.prototype.call=function(e){for(var t=arguments.length,n=new Array(t-1),r=1;t>r;++r)n[r-1]=arguments[r];if(p){var i=s(e);if(null!==i)return this._then(i,void 0,void 0,n,void 0)}return n.push(e),this._then(l,void 0,void 0,n,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=h;else if(p){var r=u(e);t=null!==r?r:c}else t=c;return this._then(t,void 0,void 0,e,void 0)}}},{"./util.js":35}],5:[function(e,t,n){"use strict";t.exports=function(t,n){var r=e("./errors.js"),i=r.canAttach,o=e("./async.js"),a=r.CancellationError;t.prototype._cancel=function(e){if(!this.isCancellable())return this;for(var t,n=this;void 0!==(t=n._cancellationParent)&&t.isCancellable();)n=t;n._attachExtraTrace(e),n._rejectUnchecked(e)},t.prototype.cancel=function(e){return this.isCancellable()?(e=void 0!==e?i(e)?e:new Error(e+""):new a,o.invokeLater(this._cancel,this,e),this):this},t.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),
this._cancellationParent=void 0,this)},t.prototype.uncancellable=function(){var e=new t(n);return e._propagateFrom(this,6),e._follow(this),e._unsetCancellable(),e},t.prototype.fork=function(e,t,n){var r=this._then(e,t,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}}},{"./async.js":2,"./errors.js":10}],6:[function(e,t,n){"use strict";t.exports=function(){function t(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(t))try{var i=JSON.stringify(e);t=i}catch(o){}0===t.length&&(t="(empty array)")}return"(<"+n(t)+">, no stack trace)"}function n(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function r(e,t){this.captureStackTrace(r,t)}var i=e("./util.js").inherits,o=e("./es5.js").defineProperty,a=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),s=null,u=null;i(r,Error),r.prototype.captureStackTrace=function(e,t){l(this,e,t)},r.possiblyUnhandledRejection=function(e){if("object"==typeof console){var t;if("object"==typeof e||"function"==typeof e){var n=e.stack;t="Possibly unhandled "+u(n,e)}else t="Possibly unhandled "+String(e);"function"==typeof console.error||"object"==typeof console.error?console.error(t):("function"==typeof console.log||"object"==typeof console.log)&&console.log(t)}},r.combine=function(e,t){for(var n=e.length-1,r=t.length-1;r>=0;--r){var i=t[r];if(e[n]!==i)break;e.pop(),n--}e.push("From previous event:");for(var o=e.concat(t),u=[],r=0,l=o.length;l>r;++r)a.test(o[r])||r>0&&!s.test(o[r])&&"From previous event:"!==o[r]||u.push(o[r]);return u},r.protectErrorMessageNewlines=function(e){for(var t=0;t<e.length&&!s.test(e[t]);++t);if(!(1>=t)){for(var n=[],r=0;t>r;++r)n.push(e.shift());e.unshift(n.join("\x00"))}},r.isSupported=function(){return"function"==typeof l};var l=function c(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){s=/^\s*at\s*/,u=function(e,n){return"string"==typeof e?e:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:t(n)};var e=Error.captureStackTrace;return function(t,n){e(t,n)}}var n=new Error;if("string"==typeof n.stack&&"function"==typeof"".startsWith&&n.stack.startsWith("stackDetection@")&&"stackDetection"===c.name){o(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),s=/@/;var r=/[@\n]/;return u=function(e,n){return"string"==typeof e?n.name+". "+n.message+"\n"+e:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:t(n)},function(e){for(var t=(new Error).stack,n=t.split(r),i=n.length,o="",a=0;i>a;a+=2)o+=n[a],o+="@",o+=n[a+1],o+="\n";e.stack=o}}return u=function(e,n){return"string"==typeof e?e:"object"!=typeof n&&"function"!=typeof n||void 0===n.name||void 0===n.message?t(n):n.name+". "+n.message},null}();return r}},{"./es5.js":12,"./util.js":35}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t,n){this._instances=e,this._callback=t,this._promise=n}function r(e,t){var n={},r=a(e,n,t);if(r===s)return r;var i=u(n);return i.length?(s.e=new l("Catch filter must inherit from Error or be a simple predicate function"),s):r}var i=e("./util.js"),o=e("./errors.js"),a=i.tryCatch1,s=i.errorObj,u=e("./es5.js").keys,l=o.TypeError;return n.prototype.doFilter=function(e){for(var n=this._callback,i=this._promise,u=i._boundTo,l=0,c=this._instances.length;c>l;++l){var h=this._instances[l],d=h===Error||null!=h&&h.prototype instanceof Error;if(d&&e instanceof h){var p=a(n,u,e);return p===s?(t.e=p.e,t):p}if("function"==typeof h&&!d){var f=r(h,e);if(f===s){var g=o.canAttach(s.e)?s.e:new Error(s.e+"");this._promise._attachExtraTrace(g),e=s.e;break}if(f){var p=a(n,u,e);return p===s?(t.e=p.e,t):p}}}return t.e=e,t},n}},{"./errors.js":10,"./es5.js":12,"./util.js":35}],8:[function(e,t,n){"use strict";var r=e("./util.js"),i=r.isPrimitive,o=r.wrapsPrimitiveReceiver;t.exports=function(e){var t=function(){return this},n=function(){throw this},r=function(e,t){return 1===t?function(){throw e}:2===t?function(){return e}:void 0};e.prototype["return"]=e.prototype.thenReturn=function(e){return o&&i(e)?this._then(r(e,2),void 0,void 0,void 0,void 0):this._then(t,void 0,void 0,e,void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return o&&i(e)?this._then(r(e,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,e,void 0)}}},{"./util.js":35}],9:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce;e.prototype.each=function(e){return n(this,e,null,t)},e.each=function(e,r){return n(e,r,null,t)}}},{}],10:[function(e,t,n){"use strict";function r(e){try{f(e,"isOperational",!0)}catch(t){}}function i(e){return null==e?!1:e instanceof u||e.isOperational===!0}function o(e){return e instanceof Error}function a(e){return o(e)}function s(e,t){function n(r){return this instanceof n?(this.message="string"==typeof r?r:t,this.name=e,void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new n(r)}return p(n,Error),n}function u(e){this.name="OperationalError",this.message=e,this.cause=e,this.isOperational=!0,e instanceof Error?(this.message=e.message,this.stack=e.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var l,c,h=e("./es5.js").freeze,d=e("./util.js"),p=d.inherits,f=d.notEnumerableProp,g=s("CancellationError","cancellation error"),v=s("TimeoutError","timeout error"),y=s("AggregateError","aggregate error");try{l=TypeError,c=RangeError}catch(m){l=s("TypeError","type error"),c=s("RangeError","range error")}for(var b="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),w=0;w<b.length;++w)"function"==typeof Array.prototype[b[w]]&&(y.prototype[b[w]]=Array.prototype[b[w]]);y.prototype.length=0,y.prototype.isOperational=!0;var x=0;y.prototype.toString=function(){var e=Array(4*x+1).join(" "),t="\n"+e+"AggregateError of:\n";x++,e=Array(4*x+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];r=i.join("\n"),t+=r+"\n"}return x--,t},p(u,Error);var _="__BluebirdErrorTypes__",E=Error[_];E||(E=h({CancellationError:g,TimeoutError:v,OperationalError:u,RejectionError:u,AggregateError:y}),f(Error,_,E)),t.exports={Error:Error,TypeError:l,RangeError:c,CancellationError:E.CancellationError,OperationalError:E.OperationalError,TimeoutError:E.TimeoutError,AggregateError:E.AggregateError,originatesFromRejection:i,markAsOriginatingFromRejection:r,canAttach:a}},{"./es5.js":12,"./util.js":35}],11:[function(e,t,n){"use strict";t.exports=function(t){function n(e){var n=new r(e),i=t.rejected(n),o=i._peekContext();return null!=o&&o._attachExtraTrace(n),i}var r=e("./errors.js").TypeError;return n}},{"./errors.js":10}],12:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},u=function(e,t,n){return e[t]=n.value,e},l=function(e){return e},c=function(e){try{return Object(e).constructor.prototype}catch(t){return a}},h=function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}};t.exports={isArray:h,keys:s,defineProperty:u,freeze:l,getPrototypeOf:c,isES5:r}}},{}],13:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],14:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(){return this}function o(){throw this}function a(e){return function(){return e}}function s(e){return function(){throw e}}function u(e,t,n){var r;return r=d&&p(t)?n?a(t):s(t):n?i:o,e._then(r,f,void 0,t,void 0)}function l(e){var i=this.promise,o=this.handler,a=i._isBound()?o.call(i._boundTo):o();if(void 0!==a){var s=r(a,void 0);if(s instanceof t)return u(s,e,i.isFulfilled())}return i.isRejected()?(n.e=e,n):e}function c(e){var n=this.promise,i=this.handler,o=n._isBound()?i.call(n._boundTo,e):i(e);if(void 0!==o){var a=r(o,void 0);if(a instanceof t)return u(a,e,!0)}return e}var h=e("./util.js"),d=h.wrapsPrimitiveReceiver,p=h.isPrimitive,f=h.thrower;t.prototype._passThroughHandler=function(e,t){if("function"!=typeof e)return this.then();var n={promise:this,handler:e};return this._then(t?l:c,t?l:void 0,void 0,n,void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThroughHandler(e,!0)},t.prototype.tap=function(e){return this._passThroughHandler(e,!1)}}},{"./util.js":35}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function o(e,n){for(var r=h,a=t,s=n.length,u=0;s>u;++u){var l=d(n[u],void 0,e);if(l===r)return a.reject(r.e);var c=i(l,o);if(c instanceof a)return c}return null}function a(e,n,i){var o=this._promise=new t(r);o._setTrace(void 0),this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p}var s=e("./errors.js"),u=s.TypeError,l=e("./util.js").deprecated,c=e("./util.js"),h=c.errorObj,d=c.tryCatch1,p=[];a.prototype.promise=function(){return this._promise},a.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},a.prototype._continue=function(e){if(e===h){this._generator=void 0;var n=s.canAttach(e.e)?e.e:new Error(e.e+"");return this._promise._attachExtraTrace(n),void this._promise._reject(e.e,n)}var r=e.value;if(e.done===!0)this._generator=void 0,this._promise._tryFollow(r)||this._promise._fulfill(r);else{var a=i(r,void 0);if(!(a instanceof t)&&(a=o(a,this._yieldHandlers),null===a))return void this._throw(new u("A value was yielded that could not be treated as a promise"));a._then(this._next,this._throw,void 0,this,null)}},a.prototype._throw=function(e){s.canAttach(e)&&this._promise._attachExtraTrace(e),this._continue(d(this._generator["throw"],this._generator,e))},a.prototype._next=function(e){this._continue(d(this._generator.next,this._generator,e))},t.coroutine=function(e,t){if("function"!=typeof e)throw new u("generatorFunction must be a function");var n=Object(t).yieldHandler,r=a;return function(){var t=e.apply(this,arguments),i=new r(void 0,void 0,n);return i._generator=t,i._next(void 0),i.promise()}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("fn must be a function");p.push(e)},t.spawn=function(e){if(l("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof e)return n("generatorFunction must be a function");var r=new a(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors.js":10,"./util.js":35}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util.js"),a=o.canEvaluate,s=o.tryCatch1,u=o.errorObj;if(a){for(var l=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))},c=function(e){for(var t=[],n=1;e>=n;++n)t.push("holder.p"+n);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,t.join(", ")))},h=[],d=[void 0],p=1;5>=p;++p)h.push(l(p)),d.push(c(p));var f=function(e,t){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=t,this.total=e,this.now=0};f.prototype.callers=d,f.prototype.checkFulfillment=function(e){var t=this.now;t++;var n=this.total;if(t>=n){var r=this.callers[n],i=s(r,void 0,this);i===u?e._rejectUnchecked(i.e):e._tryFollow(i)||e._fulfillUnchecked(i)}else this.now=t}}t.join=function(){var e,o=arguments.length-1;if(o>0&&"function"==typeof arguments[o]&&(e=arguments[o],6>o&&a)){var s=new t(i);s._setTrace(void 0);for(var u=new f(o,e),l=s._reject,c=h,d=0;o>d;++d){var p=r(arguments[d],void 0);p instanceof t?p.isPending()?p._then(c[d],l,void 0,s,u):p.isFulfilled()?c[d].call(s,p._settledValue,u):(s._reject(p._settledValue),p._unsetRejectionIsUnhandled()):c[d].call(s,p,u)}return s}for(var g=arguments.length,v=new Array(g),y=0;g>y;++y)v[y]=arguments[y];var s=new n(v).promise();return void 0!==e?s.spread(e):s}}},{"./util.js":35}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){function a(e,t,n,r){this.constructor$(e),this._callback=t,this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:d,this._init$(void 0,-2)}function s(e,t,n,r){var i="object"==typeof n&&null!==n?n.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new a(e,t,i,r)}var u=e("./util.js"),l=u.tryCatch3,c=u.errorObj,h={},d=[];u.inherits(a,n),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,n){var r=this._values;if(null!==r){var o=this.length(),a=this._preservedValues,s=this._limit;if(r[n]===h){if(r[n]=e,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(s>=1&&this._inFlight>=s)return r[n]=e,void this._queue.push(n);null!==a&&(a[n]=e);var u=this._callback,d=this._promise._boundTo,p=l(u,d,e,n,o);if(p===c)return this._reject(p.e);var f=i(p,void 0);if(f instanceof t){if(f.isPending())return s>=1&&this._inFlight++,r[n]=h,f._proxyPromiseArray(this,n);if(!f.isFulfilled())return f._unsetRejectionIsUnhandled(),this._reject(f.reason());p=f.value()}r[n]=p}var g=++this._totalResolved;g>=o&&(null!==a?this._filter(r,a):this._resolve(r))}},a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){var r=e.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;n>o;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return"function"!=typeof e?r("fn must be a function"):s(this,e,t,null).promise()},t.map=function(e,t,n,i){return"function"!=typeof t?r("fn must be a function"):s(e,t,n,i).promise()}}},{"./util.js":35}],18:[function(e,t,n){"use strict";t.exports=function(t){function n(e){throw e}function r(e,t){if(!a.isArray(e))return i(e,t);var r=a.tryCatchApply(this,[null].concat(e),t);r===c&&s.invokeLater(n,void 0,r.e)}function i(e,t){var r=this,i=void 0===e?l(r,t,null):u(r,t,null,e);i===c&&s.invokeLater(n,void 0,i.e)}function o(e,t){var r=this,i=l(r,t,e);i===c&&s.invokeLater(n,void 0,i.e)}var a=e("./util.js"),s=e("./async.js"),u=a.tryCatch2,l=a.tryCatch1,c=a.errorObj;t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=i;void 0!==t&&Object(t).spread&&(n=r),this._then(n,o,void 0,e,this._boundTo)}return this}}},{"./async.js":2,"./util.js":35}],19:[function(e,t,n){"use strict";t.exports=function(t,n){var r=e("./util.js"),i=e("./async.js"),o=e("./errors.js"),a=r.tryCatch1,s=r.errorObj;t.prototype.progressed=function(e){return this._then(void 0,void 0,e,void 0,void 0)},t.prototype._progress=function(e){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(e)},t.prototype._progressHandlerAt=function(e){return 0===e?this._progressHandler0:this[(e<<2)+e-5+2]},t.prototype._doProgressWith=function(e){var n=e.value,r=e.handler,i=e.promise,u=e.receiver,l=a(r,u,n);if(l===s){if(null!=l.e&&"StopProgressPropagation"!==l.e.name){var c=o.canAttach(l.e)?l.e:new Error(l.e+"");i._attachExtraTrace(c),i._progress(l.e)}}else l instanceof t?l._then(i._progress,null,null,i,void 0):i._progress(l)},t.prototype._progressUnchecked=function(e){if(this.isPending())for(var r=this._length(),o=this._progress,a=0;r>a;a++){var s=this._progressHandlerAt(a),u=this._promiseAt(a);if(u instanceof t)"function"==typeof s?i.invoke(this._doProgressWith,this,{handler:s,promise:u,receiver:this._receiverAt(a),value:e}):i.invoke(o,u,e);else{var l=this._receiverAt(a);"function"==typeof s?s.call(l,e,u):l instanceof t&&l._isProxied()?l._progressUnchecked(e):l instanceof n&&l._promiseProgressed(e,u)}}}}},{"./async.js":2,"./errors.js":10,"./util.js":35}],20:[function(e,t,n){"use strict";function r(e){try{Promise===e&&(Promise=i)}catch(t){}return e}var i;"undefined"!=typeof Promise&&(i=Promise),t.exports=function(){function t(e){if("function"!=typeof e)throw new w("the promise constructor requires a resolver function");if(this.constructor!==t)throw new w("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,e!==a&&this._resolveFromResolver(e)}var n=e("./util.js"),i=e("./async.js"),o=e("./errors.js"),a=function(){},s={},u={e:null},l=e("./thenables.js")(t,a),c=e("./promise_array.js")(t,a,l),h=e("./captured_trace.js")(),d=e("./catch_filter.js")(u),p=e("./promise_resolver.js"),f=n.isArray,g=n.errorObj,v=n.tryCatch1,y=n.tryCatch2,m=n.tryCatchApply,b=o.RangeError,w=o.TypeError,x=o.CancellationError,_=o.TimeoutError,E=o.OperationalError,k=o.originatesFromRejection,S=o.markAsOriginatingFromRejection,T=o.canAttach,C=n.thrower,N=e("./errors_api_rejection")(t),A=function(){return new w("circular promise resolution chain")};t.prototype.bind=function(e){var n=new t(a);return n._follow(this),n._propagateFrom(this,3),n._setBoundTo(e),n},t.prototype.toString=function(){return"[object Promise]"},t.prototype.caught=t.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),o=0;for(n=0;t-1>n;++n){var a=arguments[n];if("function"!=typeof a){var s=new w("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(s),void i.invoke(this._reject,this,s)}r[o++]=a}r.length=o,e=arguments[n],this._resetTrace();var u=new d(r,e,this);return this._then(void 0,u.doFilter,void 0,u,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},t.prototype.then=function(e,t,n){return this._then(e,t,n,void 0,void 0)},t.prototype.done=function(e,t,n){var r=this._then(e,t,n,void 0,void 0);r._setIsFinal()},t.prototype.spread=function(e,t){return this._then(e,t,void 0,s,void 0)},t.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},t.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this._settledValue,e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this._settledValue,e.isRejected=!0),e},t.prototype.all=function(){return new c(this).promise()},t.is=function(e){return e instanceof t},t.all=function(e){return new c(e).promise()},t.prototype.error=function(e){return this.caught(k,e)},t.prototype._resolveFromSyncValue=function(e){if(e===g)this._cleanValues(),this._setRejected(),this._settledValue=e.e,this._ensurePossibleRejectionHandled();else{var n=l(e,void 0);n instanceof t?this._follow(n):(this._cleanValues(),this._setFulfilled(),this._settledValue=e)}},t.method=function(e){if("function"!=typeof e)throw new w("fn must be a function");return function(){var n;switch(arguments.length){case 0:n=v(e,this,void 0);break;case 1:n=v(e,this,arguments[0]);break;case 2:n=y(e,this,arguments[0],arguments[1]);break;default:for(var r=arguments.length,i=new Array(r),o=0;r>o;++o)i[o]=arguments[o];n=m(e,i,this)}var s=new t(a);return s._setTrace(void 0),s._resolveFromSyncValue(n),s}},t.attempt=t["try"]=function(e,n,r){if("function"!=typeof e)return N("fn must be a function");var i=f(n)?m(e,n,r):v(e,r,n),o=new t(a);return o._setTrace(void 0),o._resolveFromSyncValue(i),o},t.defer=t.pending=function(){var e=new t(a);return e._setTrace(void 0),new p(e)},t.bind=function(e){var n=new t(a);return n._setTrace(void 0),n._setFulfilled(),n._setBoundTo(e),n},t.cast=function(e){var n=l(e,void 0);if(!(n instanceof t)){var r=n;n=new t(a),n._setTrace(void 0),n._setFulfilled(),n._cleanValues(),n._settledValue=r}return n},t.resolve=t.fulfilled=t.cast,t.reject=t.rejected=function(e){var n=new t(a);if(n._setTrace(void 0),S(e),n._cleanValues(),n._setRejected(),n._settledValue=e,!T(e)){var r=new Error(e+"");n._setCarriedStackTrace(r)}return n._ensurePossibleRejectionHandled(),n},t.onPossiblyUnhandledRejection=function(e){h.possiblyUnhandledRejection="function"==typeof e?e:void 0};var P;t.onUnhandledRejectionHandled=function(e){P="function"==typeof e?e:void 0};var D=!1||!("undefined"==typeof process||"string"!=typeof process.execPath||"object"!=typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);t.longStackTraces=function(){if(i.haveItemsQueued()&&D===!1)throw new Error("cannot enable long stack traces after promises have been created");D=h.isSupported()},t.hasLongStackTraces=function(){return D&&h.isSupported()},t.prototype._then=function(e,n,r,o,s){var u=void 0!==s,l=u?s:new t(a);if(!u){if(D){var c=this._peekContext()===this._traceParent;l._traceParent=c?this._traceParent:this}l._propagateFrom(this,7)}var h=this._addCallbacks(e,n,r,l,o);return this.isResolved()&&i.invoke(this._queueSettleAt,this,h),l},t.prototype._length=function(){return 262143&this._bitField},t.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},t.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},t.prototype._setLength=function(e){this._bitField=-262144&this._bitField|262143&e},t.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},t.prototype._setRejected=function(){this._bitField=134217728|this._bitField},t.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},t.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},t.prototype._isFinal=function(){return(33554432&this._bitField)>0},t.prototype._cancellable=function(){return(67108864&this._bitField)>0},t.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},t.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},t.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},t.prototype._setCarriedStackTrace=function(e){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=e},t.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},t.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},t.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},t.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[(e<<2)+e-5+4];return this._isBound()&&void 0===t?this._boundTo:t},t.prototype._promiseAt=function(e){return 0===e?this._promise0:this[(e<<2)+e-5+3]},t.prototype._fulfillmentHandlerAt=function(e){return 0===e?this._fulfillmentHandler0:this[(e<<2)+e-5+0]},t.prototype._rejectionHandlerAt=function(e){return 0===e?this._rejectionHandler0:this[(e<<2)+e-5+1]},t.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=262138&&(o=0,this._setLength(0)),0===o)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof e||this._isCarryingStackTrace()||(this._fulfillmentHandler0=e),"function"==typeof t&&(this._rejectionHandler0=t),"function"==typeof n&&(this._progressHandler0=n);else{var a=(o<<2)+o-5;this[a+3]=r,this[a+4]=i,this[a+0]="function"==typeof e?e:void 0,this[a+1]="function"==typeof t?t:void 0,this[a+2]="function"==typeof n?n:void 0}return this._setLength(o+1),o},t.prototype._setProxyHandlers=function(e,t){var n=this._length();if(n>=262138&&(n=0,this._setLength(0)),0===n)this._promise0=t,this._receiver0=e;else{var r=(n<<2)+n-5;this[r+3]=t,this[r+4]=e,this[r+0]=this[r+1]=this[r+2]=void 0}this._setLength(n+1)},t.prototype._proxyPromiseArray=function(e,t){this._setProxyHandlers(e,t)},t.prototype._proxyPromise=function(e){e._setProxied(),this._setProxyHandlers(e,-1)},t.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=8388608|this._bitField,this._boundTo=e):this._bitField=-8388609&this._bitField},t.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},t.prototype._resolveFromResolver=function(e){function t(e){r._tryFollow(e)||r._fulfill(e)}function n(e){var t=T(e)?e:new Error(e+"");r._attachExtraTrace(t),S(e),r._reject(e,t===e?void 0:t)}var r=this;this._setTrace(void 0),this._pushContext();var i=y(e,void 0,t,n);if(this._popContext(),void 0!==i&&i===g){var o=i.e,a=T(o)?o:new Error(o+"");r._reject(o,a)}},t.prototype._spreadSlowCase=function(e,t,n,r){var i=new c(n).promise(),o=i._then(function(){return e.apply(r,arguments)},void 0,void 0,s,void 0);t._follow(o)},t.prototype._callSpread=function(e,n,r){var i=this._boundTo;if(f(r))for(var o=0,a=r.length;a>o;++o)if(l(r[o],void 0)instanceof t)return void this._spreadSlowCase(e,n,r,i);return n._pushContext(),m(e,r,i)},t.prototype._callHandler=function(e,t,n,r){var i;return t!==s||this.isRejected()?(n._pushContext(),i=v(e,t,r)):i=this._callSpread(e,n,r),n._popContext(),i},t.prototype._settlePromiseFromHandler=function(e,n,r,i){if(!(i instanceof t))return void e.call(n,r,i);var o=this._callHandler(e,n,i,r);if(!i._isFollowing())if(o===g||o===i||o===u){var a=o===i?A():o.e,s=T(a)?a:new Error(a+"");o!==u&&i._attachExtraTrace(s),i._rejectUnchecked(a,s)}else{var c=l(o,i);if(c instanceof t){if(c.isRejected()&&!c._isCarryingStackTrace()&&!T(c._settledValue)){var s=new Error(c._settledValue+"");i._attachExtraTrace(s),c._setCarriedStackTrace(s)}i._follow(c),i._propagateFrom(c,1)}else i._fulfillUnchecked(o)}},t.prototype._follow=function(e){this._setFollowing(),e.isPending()?(this._propagateFrom(e,1),e._proxyPromise(this)):e.isFulfilled()?this._fulfillUnchecked(e._settledValue):this._rejectUnchecked(e._settledValue,e._getCarriedStackTrace()),e._isRejectionUnhandled()&&e._unsetRejectionIsUnhandled(),D&&null==e._traceParent&&(e._traceParent=this)},t.prototype._tryFollow=function(e){if(this._isFollowingOrFulfilledOrRejected()||e===this)return!1;var n=l(e,void 0);return n instanceof t?(this._follow(n),!0):!1},t.prototype._resetTrace=function(){D&&(this._trace=new h(void 0===this._peekContext()))},t.prototype._setTrace=function(e){if(D){var t=this._peekContext();this._traceParent=t;var n=void 0===t;this._trace=void 0!==e&&e._traceParent===t?e._trace:new h(n)}return this},t.prototype._attachExtraTrace=function(e){if(D){var t=this,n=e.stack;n="string"==typeof n?n.split("\n"):[],h.protectErrorMessageNewlines(n);for(var r=1,i=1;null!=t&&null!=t._trace;)n=h.combine(n,t._trace.stack.split("\n")),t=t._traceParent,i++;var o=Error.stackTraceLimit||10,a=(o+r)*i,s=n.length;s>a&&(n.length=a),s>0&&(n[0]=n[0].split("\x00").join("\n")),e.stack=n.length<=r?"(No stack trace)":n.join("\n")}},t.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},t.prototype._propagateFrom=function(e,t){(1&t)>0&&e._cancellable()&&(this._setCancellable(),this._cancellationParent=e),(4&t)>0&&this._setBoundTo(e._boundTo),(2&t)>0&&this._setTrace(e)},t.prototype._fulfill=function(e){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(e)},t.prototype._reject=function(e,t){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(e,t)},t.prototype._settlePromiseAt=function(e){var n=this.isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e),r=this._settledValue,i=this._receiverAt(e),o=this._promiseAt(e);if("function"==typeof n)this._settlePromiseFromHandler(n,i,r,o);else{var a=!1,s=this.isFulfilled();void 0!==i&&(i instanceof t&&i._isProxied()?(i._unsetProxied(),s?i._fulfillUnchecked(r):i._rejectUnchecked(r,this._getCarriedStackTrace()),a=!0):i instanceof c&&(s?i._promiseFulfilled(r,o):i._promiseRejected(r,o),a=!0)),a||(s?o._fulfill(r):o._reject(r,this._getCarriedStackTrace()))}e>=256&&this._queueGC()},t.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},t.prototype._setProxied=function(){this._bitField=4194304|this._bitField},t.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},t.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},t.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},t.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},t.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),i.invokeLater(this._gc,this,void 0))},t.prototype._gc=function(){for(var e=5*this._length(),t=0;e>t;t++)delete this[t];this._setLength(0),this._unsetGcQueued()},t.prototype._queueSettleAt=function(e){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),i.invoke(this._settlePromiseAt,this,e)},t.prototype._fulfillUnchecked=function(e){if(this.isPending()){if(e===this){var t=A();return this._attachExtraTrace(t),this._rejectUnchecked(t,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=e;var n=this._length();n>0&&i.invoke(this._settlePromises,this,n)}},t.prototype._rejectUncheckedCheckError=function(e){var t=T(e)?e:new Error(e+"");this._rejectUnchecked(e,t===e?void 0:t)},t.prototype._rejectUnchecked=function(e,t){if(this.isPending()){if(e===this){var n=A();return this._attachExtraTrace(n),this._rejectUnchecked(n)}if(this._cleanValues(),this._setRejected(),this._settledValue=e,this._isFinal())return void i.invokeLater(C,void 0,void 0===t?e:t);var r=this._length();void 0!==t&&this._setCarriedStackTrace(t),r>0?i.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},t.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},t.prototype._settlePromises=function(){for(var e=this._length(),t=0;e>t;t++)this._settlePromiseAt(t)},t.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==h.possiblyUnhandledRejection&&i.invokeLater(this._notifyUnhandledRejection,this,void 0)},t.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof P&&i.invokeLater(P,void 0,this)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue,t=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==t&&(this._unsetCarriedStackTrace(),e=t),"function"==typeof h.possiblyUnhandledRejection&&h.possiblyUnhandledRejection(e,this)}};var $=[];return t.prototype._peekContext=function(){var e=$.length-1;return e>=0?$[e]:void 0},t.prototype._pushContext=function(){D&&$.push(this)},t.prototype._popContext=function(){D&&$.pop()},t.noConflict=function(){return r(t)},t.setScheduler=function(e){if("function"!=typeof e)throw new w("fn must be a function");i._schedule=e},h.isSupported()||(t.longStackTraces=function(){},D=!1),t._makeSelfResolutionError=A,e("./finally.js")(t,u,l),e("./direct_resolve.js")(t),e("./synchronous_inspection.js")(t),e("./join.js")(t,c,l,a),t.RangeError=b,t.CancellationError=x,t.TimeoutError=_,t.TypeError=w,t.OperationalError=E,t.RejectionError=E,t.AggregateError=o.AggregateError,
n.toFastProperties(t),n.toFastProperties(t.prototype),t.Promise=t,e("./timers.js")(t,a,l),e("./race.js")(t,a,l),e("./call_get.js")(t),e("./generators.js")(t,N,a,l),e("./map.js")(t,c,N,l,a),e("./nodeify.js")(t),e("./promisify.js")(t,a),e("./props.js")(t,c,l),e("./reduce.js")(t,c,N,l,a),e("./settle.js")(t,c),e("./some.js")(t,c,N),e("./progress.js")(t,c),e("./cancel.js")(t,a),e("./filter.js")(t,a),e("./any.js")(t,c),e("./each.js")(t,a),e("./using.js")(t,N,l),t.prototype=t.prototype,t}},{"./any.js":1,"./async.js":2,"./call_get.js":4,"./cancel.js":5,"./captured_trace.js":6,"./catch_filter.js":7,"./direct_resolve.js":8,"./each.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./join.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,"./promise_array.js":21,"./promise_resolver.js":22,"./promisify.js":23,"./props.js":24,"./race.js":26,"./reduce.js":27,"./settle.js":29,"./some.js":30,"./synchronous_inspection.js":31,"./thenables.js":32,"./timers.js":33,"./using.js":34,"./util.js":35}],21:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){switch(e){case-1:return void 0;case-2:return[];case-3:return{}}}function o(e){var r=this._promise=new t(n),i=void 0;e instanceof t&&(i=e,r._propagateFrom(i,5)),r._setTrace(i),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=e("./errors.js").canAttach,s=e("./util.js"),u=s.isArray;return o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function l(e,n){var o=r(this._values,void 0);if(o instanceof t){if(this._values=o,o._setBoundTo(this._promise._boundTo),!o.isFulfilled())return o.isPending()?void o._then(l,this._reject,void 0,this,n):(o._unsetRejectionIsUnhandled(),void this._reject(o._settledValue));if(o=o._settledValue,!u(o)){var a=new t.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(a)}}else if(!u(o)){var a=new t.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(a)}if(0===o.length)return void(-5===n?this._resolveEmptyArray():this._resolve(i(n)));for(var s=this.getActualLength(o.length),c=s,h=this.shouldCopyValues()?new Array(s):this._values,d=!1,p=0;s>p;++p){var f=r(o[p],void 0);f instanceof t?f.isPending()?f._proxyPromiseArray(this,p):(f._unsetRejectionIsUnhandled(),d=!0):d=!0,h[p]=f}this._values=h,this._length=c,d&&this._scanDirectValues(s)},o.prototype._settlePromiseAt=function(e){var n=this._values[e];n instanceof t?n.isFulfilled()?this._promiseFulfilled(n._settledValue,e):n.isRejected()&&this._promiseRejected(n._settledValue,e):this._promiseFulfilled(n,e)},o.prototype._scanDirectValues=function(e){for(var t=0;e>t&&!this._isResolved();++t)this._settlePromiseAt(t)},o.prototype._isResolved=function(){return null===this._values},o.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},o.prototype.__hardReject__=o.prototype._reject=function(e){this._values=null;var t=a(e)?e:new Error(e+"");this._promise._attachExtraTrace(t),this._promise._reject(e,t)},o.prototype._promiseProgressed=function(e,t){this._isResolved()||this._promise._progress({index:t,value:e})},o.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){this._values[t]=e;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)}},o.prototype._promiseRejected=function(e,t){this._isResolved()||(this._totalResolved++,this._reject(e))},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(e){return e},o}},{"./errors.js":10,"./util.js":35}],22:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&f.getPrototypeOf(e)===Error.prototype}function i(e){var t;return t=r(e)?new h(e):e,l.markAsOriginatingFromRejection(t),t}function o(e){function t(t,n){if(null!==e){if(t){var r=i(u(t));e._attachExtraTrace(r),e._reject(r)}else if(arguments.length>2){for(var o=arguments.length,a=new Array(o-1),s=1;o>s;++s)a[s-1]=arguments[s];e._fulfill(a)}else e._fulfill(n);e=null}}return t}var a,s=e("./util.js"),u=s.maybeWrapAsError,l=e("./errors.js"),c=l.TimeoutError,h=l.OperationalError,d=e("./async.js"),p=s.haveGetters,f=e("./es5.js");if(a=p?function(e){this.promise=e}:function(e){this.promise=e,this.asCallback=o(e),this.callback=this.asCallback},p){var g={get:function(){return o(this.promise)}};f.defineProperty(a.prototype,"asCallback",g),f.defineProperty(a.prototype,"callback",g)}a._nodebackForPromise=o,a.prototype.toString=function(){return"[object PromiseResolver]"},a.prototype.resolve=a.prototype.fulfill=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var t=this.promise;t._tryFollow(e)||d.invoke(t._fulfill,t,e)},a.prototype.reject=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var t=this.promise;l.markAsOriginatingFromRejection(e);var n=l.canAttach(e)?e:new Error(e+"");t._attachExtraTrace(n),d.invoke(t._reject,t,e),n!==e&&d.invoke(this._setCarriedStackTrace,this,n)},a.prototype.progress=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");d.invoke(this.promise._progress,this.promise,e)},a.prototype.cancel=function(){d.invoke(this.promise.cancel,this.promise,void 0)},a.prototype.timeout=function(){this.reject(new c("timeout"))},a.prototype.isResolved=function(){return this.promise.isResolved()},a.prototype.toJSON=function(){return this.promise.toJSON()},a.prototype._setCarriedStackTrace=function(e){this.promise.isRejected()&&this.promise._setCarriedStackTrace(e)},t.exports=a},{"./async.js":2,"./errors.js":10,"./es5.js":12,"./util.js":35}],23:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return e.replace(/([$])/,"\\$")}function i(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function o(e,t,n){var r=m.getDataPropertyOrDefault(e,t+n,T);return r?i(r):!1}function a(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new E("Cannot promisify an API that has normal methods with '"+t+"'-suffix")}}function s(e,t,n,r){for(var s=m.inheritedDataKeys(e),u=[],l=0;l<s.length;++l){var c=s[l],h=e[c];"function"!=typeof h||i(h)||o(e,c,t)||!r(c,h,e)||u.push(c,h)}return a(u,t,n),u}function u(e){for(var t=[e],n=Math.max(0,e-1-5),r=e-1;r>=n;--r)r!==e&&t.push(r);for(var r=e+1;5>=r;++r)t.push(r);return t}function l(e){return m.filledRange(e,"arguments[","]")}function c(e){return m.filledRange(e,"_arg","")}function h(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0}function d(e){return m.isIdentifier(e)?"."+e:"['"+e.replace(/(['\\])/g,"\\$1")+"']"}function p(e,r,i,o,a){function s(t){var n,i=l(t).join(", "),o=t>0?", ":"";return n="string"==typeof e?"                                                          \n                this.method(args, fn);                                       \n                break;                                                       \n            ".replace(".method",d(e)):r===y?"                                                         \n                callback.call(this, args, fn);                               \n                break;                                                       \n            ":void 0!==r?"                                                         \n                callback.call(receiver, args, fn);                           \n                break;                                                       \n            ":"                                                         \n                callback(args, fn);                                          \n                break;                                                       \n            ",n.replace("args",i).replace(", ",o)}function p(){for(var t="",n=0;n<g.length;++n)t+="case "+g[n]+":"+s(g[n]);var i;return i="string"==typeof e?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",d(e)):r===y?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ",t+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",i)}var f=Math.max(0,h(o)-1),g=u(f),v="string"==typeof i&&m.isIdentifier(i)?i+a:"promisified";return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function FunctionName(Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(void 0);                                       \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",v).replace("Parameters",c(f)).replace("[CodeForSwitchCase]",p()))(t,e,r,w,x,b,n)}function f(e,r){function i(){var i=r;r===y&&(i=this),"string"==typeof e&&(e=i[e]);var o=new t(n);o._setTrace(void 0);var a=b(o);try{e.apply(i,w(arguments,a))}catch(s){var u=x(s);o._attachExtraTrace(u),o._reject(u)}return o}return i.__isPromisified__=!0,i}function g(e,t,n,i){for(var o=new RegExp(r(t)+"$"),a=s(e,t,o,n),u=0,l=a.length;l>u;u+=2){var c=a[u],h=a[u+1],d=c+t;e[d]=i===C?C(c,y,c,h,t):i(h)}return m.toFastProperties(e),e}function v(e,t){return C(e,t,void 0,e)}var y={},m=e("./util.js"),b=e("./promise_resolver.js")._nodebackForPromise,w=m.withAppended,x=m.maybeWrapAsError,_=m.canEvaluate,E=e("./errors").TypeError,k="Async",S=function(e,t){return m.isIdentifier(e)&&"_"!==e.charAt(0)&&!m.isClass(t)},T={__isPromisified__:!0},C=_?p:f;t.promisify=function(e,t){if("function"!=typeof e)throw new E("fn must be a function");return i(e)?e:v(e,arguments.length<2?y:t)},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new E("the target of promisifyAll must be an object or a function");t=Object(t);var n=t.suffix;"string"!=typeof n&&(n=k);var r=t.filter;"function"!=typeof r&&(r=S);var i=t.promisifier;if("function"!=typeof i&&(i=C),!m.isIdentifier(n))throw new RangeError("suffix must be a valid identifier");for(var o=m.inheritedDataKeys(e,{includeHidden:!0}),a=0;a<o.length;++a){var s=e[o[a]];"constructor"!==o[a]&&m.isClass(s)&&(g(s.prototype,n,r,i),g(s,n,r,i))}return g(e,n,r,i)}}},{"./errors":10,"./promise_resolver.js":22,"./util.js":35}],24:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){for(var t=l.keys(e),n=t.length,r=new Array(2*n),i=0;n>i;++i){var o=t[i];r[i]=e[o],r[i+n]=o}this.constructor$(r)}function o(e){var n,o=r(e,void 0);return u(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new i(o).promise(),o instanceof t&&n._propagateFrom(o,4),n):s("cannot await properties of a non-object")}var a=e("./util.js"),s=e("./errors_api_rejection")(t),u=a.isObject,l=e("./es5.js");a.inherits(i,n),i.prototype._init=function(){this._init$(void 0,-3)},i.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){for(var r={},i=this.length(),o=0,a=this.length();a>o;++o)r[this._values[o+i]]=this._values[o];this._resolve(r)}}},i.prototype._promiseProgressed=function(e,t){this._isResolved()||this._promise._progress({key:this._values[t+this.length()],value:e})},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return o(this)},t.props=function(e){return o(e)}}},{"./errors_api_rejection":11,"./es5.js":12,"./util.js":35}],25:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var o=0;i>o;++o)n[o+r]=e[o+t]}function i(e){this._capacity=e,this._length=0,this._front=0,this._makeCapacity()}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._makeCapacity=function(){for(var e=this._capacity,t=0;e>t;++t)this[t]=void 0},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<3)},i.prototype._resizeTo=function(e){var t=this._front,n=this._capacity,i=new Array(n),o=this.length();if(r(this,0,i,0,n),this._capacity=e,this._makeCapacity(),this._front=0,n>=t+o)r(i,t,this,0,o);else{var a=o-(t+o&n-1);r(i,t,this,0,a),r(i,0,this,a,o-a)}},t.exports=i},{}],26:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e,i){var l=r(e,void 0);if(l instanceof t)return s(l);if(!a(e))return o("expecting an array, a promise or a thenable");var c=new t(n);void 0!==i?c._propagateFrom(i,7):c._setTrace(void 0);for(var h=c._fulfill,d=c._reject,p=0,f=e.length;f>p;++p){var g=e[p];(void 0!==g||u.call(e,p))&&t.cast(g)._then(h,d,void 0,c,null)}return c}var o=e("./errors_api_rejection.js")(t),a=e("./util.js").isArray,s=function(e){return e.then(function(t){return i(t,e)})},u={}.hasOwnProperty;t.race=function(e){return i(e,void 0)},t.prototype.race=function(){return i(this,void 0)}}},{"./errors_api_rejection.js":11,"./util.js":35}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){function a(e,n,r,a){this.constructor$(e),this._preservedValues=a===o?[]:null,this._zerothIsAccum=void 0===r,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var s=i(r,void 0),u=!1,l=s instanceof t;l&&(s.isPending()?s._proxyPromiseArray(this,-1):s.isFulfilled()?(r=s.value(),this._gotAccum=!0):(s._unsetRejectionIsUnhandled(),this._reject(s.reason()),u=!0)),l||this._zerothIsAccum||(this._gotAccum=!0),this._callback=n,this._accum=r,u||this._init$(void 0,-5)}function s(e,t,n,i){if("function"!=typeof t)return r("fn must be a function");var o=new a(e,t,n,i);return o.promise()}var u=e("./util.js"),l=u.tryCatch4,c=u.tryCatch3,h=u.errorObj;u.inherits(a,n),a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},a.prototype._promiseFulfilled=function(e,n){var r=this._values;if(null!==r){var o,a=this.length(),s=this._preservedValues,u=null!==s,d=this._gotAccum,p=this._valuesPhase;if(!p)for(p=this._valuesPhase=Array(a),o=0;a>o;++o)p[o]=0;if(o=p[n],0===n&&this._zerothIsAccum?(d||(this._accum=e,this._gotAccum=d=!0),p[n]=0===o?1:2):-1===n?d||(this._accum=e,this._gotAccum=d=!0):0===o?p[n]=1:(p[n]=2,d&&(this._accum=e)),d){for(var f,g=this._callback,v=this._promise._boundTo,y=this._reducingIndex;a>y;++y)if(o=p[y],2!==o){if(1!==o)return;if(e=r[y],e instanceof t){if(!e.isFulfilled())return e.isPending()?void 0:(e._unsetRejectionIsUnhandled(),this._reject(e.reason()));e=e._settledValue}if(u?(s.push(e),f=c(g,v,e,y,a)):f=l(g,v,this._accum,e,y,a),f===h)return this._reject(f.e);var m=i(f,void 0);if(m instanceof t){if(m.isPending())return p[y]=4,m._proxyPromiseArray(this,y);if(!m.isFulfilled())return m._unsetRejectionIsUnhandled(),this._reject(m.reason());f=m.value()}this._reducingIndex=y+1,this._accum=f}else this._reducingIndex=y+1;this._reducingIndex<a||this._resolve(u?s:this._accum)}}},t.prototype.reduce=function(e,t){return s(this,e,t,null)},t.reduce=function(e,t,n,r){return s(e,t,n,r)}}},{"./util.js":35}],28:[function(e,t,n){"use strict";var r,i;if("object"==typeof process&&"string"==typeof process.version)r=function(e){process.nextTick(e)};else if("undefined"!=typeof MutationObserver&&(i=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(i=WebKitMutationObserver))r=function(){var e=document.createElement("div"),t=void 0,n=new i(function(){var e=t;t=void 0,e()});return n.observe(e,{attributes:!0}),function(n){t=n,e.setAttribute("class","foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");r=function(e){setTimeout(e,0)}}t.exports=r},{}],29:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){this.constructor$(e)}var i=t.PromiseInspection,o=e("./util.js");o.inherits(r,n),r.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){var n=new i;n._bitField=268435456,n._settledValue=e,this._promiseResolved(t,n)}},r.prototype._promiseRejected=function(e,t){if(!this._isResolved()){var n=new i;n._bitField=134217728,n._settledValue=e,this._promiseResolved(t,n)}},t.settle=function(e){return new r(e).promise()},t.prototype.settle=function(){return new r(this).promise()}}},{"./util.js":35}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||0>t)return r("expecting a positive integer");var n=new i(e),o=n.promise();return o.isRejected()?o:(n.setHowMany(t),n.init(),o)}var a=e("./util.js"),s=e("./errors.js").RangeError,u=e("./errors.js").AggregateError,l=a.isArray;a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=l(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._isResolved()||(this._howMany=e)},i.prototype._promiseFulfilled=function(e){this._isResolved()||(this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values)))},i.prototype._promiseRejected=function(e){if(!this._isResolved()&&(this._addRejected(e),this.howMany()>this._canPossiblyFulfill())){for(var t=new u,n=this.length();n<this._values.length;++n)t.push(this._values[n]);this._reject(t)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}},{"./errors.js":10,"./util.js":35}],31:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(this._bitField=e._bitField,this._settledValue=e.isResolved()?e._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}t.prototype.isFulfilled=e.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},t.prototype.isRejected=e.prototype.isRejected=function(){return(134217728&this._bitField)>0},t.prototype.isPending=e.prototype.isPending=function(){return 0===(402653184&this._bitField)},t.prototype.value=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},t.prototype.error=t.prototype.reason=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},t.prototype.isResolved=e.prototype.isResolved=function(){return(402653184&this._bitField)>0},e.PromiseInspection=t}},{}],32:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){try{return e.then}catch(t){return l.e=t,l}}function i(e,i){if(c(e)){if(e instanceof t)return e;if(o(e)){var s=new t(n);return s._setTrace(void 0),e._then(s._fulfillUnchecked,s._rejectUncheckedCheckError,s._progressUnchecked,s,null),s._setFollowing(),s}var h=r(e);if(h===l)return void 0!==i&&u(h.e)&&i._attachExtraTrace(h.e),t.reject(h.e);if("function"==typeof h)return a(e,h,i)}return e}function o(e){return h.call(e,"_promise0")}function a(e,n,r){function i(n){if(!l){if(l=!0,e===n){var i=t._makeSelfResolutionError();return void 0!==r&&r._attachExtraTrace(i),void s.promise._reject(i,void 0)}s.resolve(n)}}function o(e){if(!l){l=!0;var t=u(e)?e:new Error(e+"");void 0!==r&&r._attachExtraTrace(t),s.promise._reject(e,t)}}function a(e){if(!l){var t=s.promise;"function"==typeof t._progress&&t._progress(e)}}var s=t.defer(),l=!1;try{n.call(e,i,o,a)}catch(c){if(!l){l=!0;var h=u(c)?c:new Error(c+"");void 0!==r&&r._attachExtraTrace(h),s.promise._reject(c,h)}}return s.promise}var s=e("./util.js"),u=e("./errors.js").canAttach,l=s.errorObj,c=s.isObject,h={}.hasOwnProperty;return i}},{"./errors.js":10,"./util.js":35}],33:[function(e,t,n){"use strict";var r=function(e,t){var n=arguments.length,r=arguments[2],i=arguments[3],o=n>=5?arguments[4]:void 0;setTimeout(function(){e(r,i,o)},t)};t.exports=function(t,n,i){var o=(e("./util.js"),e("./errors.js")),a=(e("./errors_api_rejection")(t),t.TimeoutError),s=function(e,t,n){if(e.isPending()){"string"!=typeof t&&(t="operation timed out after "+n+" ms");var r=new a(t);o.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._cancel(r)}},u=function(e,t){t._fulfill(e)},l=t.delay=function(e,o){void 0===o&&(o=e,e=void 0),o=+o;var a=i(e,void 0),s=new t(n);return a instanceof t?(s._propagateFrom(a,7),s._follow(a),s.then(function(e){return t.delay(e,o)})):(s._setTrace(void 0),r(u,o,e,s),s)};t.prototype.delay=function(e){return l(this,e)},t.prototype.timeout=function(e,i){e=+e;var o=new t(n);return o._propagateFrom(this,7),o._follow(this),r(s,e,o,i,e),o.cancellable()}}},{"./errors.js":10,"./errors_api_rejection":11,"./util.js":35}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){for(var n=e.length,r=0;n>r;++r){var i=e[r];if(i.isRejected())return t.reject(i.error());e[r]=i.value()}return e}function o(e){setTimeout(function(){throw e},0)}function a(e,n){function i(){if(a>=s)return u.resolve();var l=r(e[a++],void 0);if(l instanceof t&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),void 0)}catch(c){return o(c)}if(l instanceof t)return l._then(i,o,null,null,null)}i()}var a=0,s=e.length,u=t.defer();return i(),u.promise}function s(e){var t=new p;return t._settledValue=e,t._bitField=268435456,a(this,t).thenReturn(e)}function u(e){var t=new p;return t._settledValue=e,t._bitField=134217728,a(this,t).thenThrow(e)}function l(e,t){this._data=e,this._promise=t}function c(e,t){this.constructor$(e,t)}var h=e("./errors.js").TypeError,d=e("./util.js").inherits,p=t.PromiseInspection;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},l.prototype.tryDispose=function(e){var t=this.resource(),n=null!==t?this.doDispose(t,e):null;return this._promise._unsetDisposable(),this._data=this._promise=null,n},d(c,l),c.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},t.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var r=arguments[e-1];if("function"!=typeof r)return n("fn must be a function");e--;for(var o=new Array(e),a=0;e>a;++a){var c=arguments[a];if(c instanceof l){var h=c;c=c.promise(),c._setDisposable(h)}o[a]=c}return t.settle(o).then(i).spread(r)._then(s,u,void 0,o,void 0)},t.prototype._setDisposable=function(e){this._bitField=262144|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(262144&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new c(e,this);throw new h}}},{"./errors.js":10,"./util.js":35}],35:[function(e,t,n){"use strict";function r(e,t,n){try{return e.call(t,n)}catch(r){return E.e=r,E}}function i(e,t,n,r){try{return e.call(t,n,r)}catch(i){return E.e=i,E}}function o(e,t,n,r,i){try{return e.call(t,n,r,i)}catch(o){return E.e=o,E}}function a(e,t,n,r,i,o){try{return e.call(t,n,r,i,o)}catch(a){return E.e=a,E}}function s(e,t,n){try{return e.apply(n,t)}catch(r){return E.e=r,E}}function u(e){return"string"==typeof e?e:""+e}function l(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function c(e){return!l(e)}function h(e){return l(e)?new Error(u(e)):e}function d(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=e[n];return i[n]=t,i}function p(e,t,n){if(!w.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function f(e,t,n){if(l(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return w.defineProperty(e,t,r),e}function g(e){throw e}function v(e){try{if("function"==typeof e){var t=w.keys(e.prototype);return t.length>0&&!(1===t.length&&"constructor"===t[0])}return!1}catch(n){return!1}}function y(e){function t(){}return t.prototype=e,t}function m(e){return C.test(e)}function b(e,t,n){for(var r=new Array(e),i=0;e>i;++i)r[i]=t+i+n;return r}var w=e("./es5.js"),x=function(){try{var e={};return w.defineProperty(e,"f",{get:function(){return 3}}),3===e.f}catch(t){return!1}}(),_="undefined"==typeof navigator,E={e:{}},k=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},S=function(){return"string"!==this}.call("string"),T=function(){return w.isES5?function(e,t){for(var n=[],r=Object.create(null),i=Object(t).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=e;){var o;try{o=i(e)}catch(a){return n}for(var s=0;s<o.length;++s){var u=o[s];if(!r[u]){r[u]=!0;var l=Object.getOwnPropertyDescriptor(e,u);null!=l&&null==l.get&&null==l.set&&n.push(u)}}e=w.getPrototypeOf(e)}return n}:function(e){var t=[];for(var n in e)t.push(n);return t}}(),C=/^[a-z$_][a-z$_0-9]*$/i,N={isClass:v,isIdentifier:m,inheritedDataKeys:T,getDataPropertyOrDefault:p,thrower:g,isArray:w.isArray,haveGetters:x,notEnumerableProp:f,isPrimitive:l,isObject:c,canEvaluate:_,errorObj:E,tryCatch1:r,tryCatch2:i,tryCatch3:o,tryCatch4:a,tryCatchApply:s,inherits:k,withAppended:d,asString:u,maybeWrapAsError:h,wrapsPrimitiveReceiver:S,toFastProperties:y,filledRange:b};t.exports=N},{"./es5.js":12}]},{},[3])(3)});var cola;!function(e){function t(e){e.fixed|=2,e.px=e.x,e.py=e.y}function n(e){e.fixed&=-7}function r(e){e.fixed|=4,e.px=e.x,e.py=e.y}function a(e){e.fixed&=-5}return e.d3adaptor=function(){var r=d3.dispatch("start","tick","end"),i=e.adaptor({trigger:function(e){r[e.type](e)},on:function(e,t){return r.on(e,t)},kick:function(e){d3.timer(e)},drag:function(){var e=d3.behavior.drag().origin(function(e){return e}).on("dragstart.d3adaptor",t).on("drag.d3adaptor",function(e){e.px=d3.event.x,e.py=d3.event.y,i.resume()}).on("dragend.d3adaptor",n);return arguments.length?void this.call(e):e}});return i},e.adaptor=function(s){function u(e){return"function"==typeof b?+b.call(null,e):b}function l(e,t){e.length=t}function c(e){return"function"==typeof w?w(e):0}function h(e){return"number"==typeof e.source?e.source:e.source.index}function d(e){return"number"==typeof e.target?e.target:e.target.index}var p,f,g={},v=s.trigger,y=s.kick,m=[1,1],b=20,w=null,x=!1,_=!0,E=!1,k=[],S=[],T=[],C=null,N=[],A=[],P=null,D=null,$=null,M=.01,I=10,O=null;g.on=s.on,g.drag=s.drag,g.dragstart=t,g.dragend=n,g.mouseover=r,g.mouseout=a,g.tick=function(){if(M>p)return v({type:"end",alpha:p=0}),delete f,E=!1,!0;{var e,t=k.length;N.length}for(D.locks.clear(),i=0;i<t;++i)if(e=k[i],e.fixed){("undefined"==typeof e.px||"undefined"==typeof e.py)&&(e.px=e.x,e.py=e.y);var n=[e.px,e.py];D.locks.add(i,n)}var r=D.rungeKutta();for(0===r?p=0:"undefined"!=typeof f&&(p=Math.abs(Math.abs(f/r)-1)),f=r,i=0;i<t;++i)e=k[i],e.fixed?(e.x=e.px,e.y=e.py):(e.x=D.x[0][i],e.y=D.x[1][i]);v({type:"tick",alpha:p})},g.nodes=function(e){if(!arguments.length){if(0===k.length&&N.length>0){var t=0;N.forEach(function(e){t=Math.max(t,e.source,e.target)}),k=new Array(++t);for(var n=0;t>n;++n)k[n]={}}return k}return k=e,g},g.groups=function(e){return arguments.length?(S=e,C={},S.forEach(function(e){"undefined"==typeof e.padding&&(e.padding=1),"undefined"!=typeof e.leaves&&e.leaves.forEach(function(t,n){(e.leaves[n]=k[t]).parent=e}),"undefined"!=typeof e.groups&&e.groups.forEach(function(t,n){(e.groups[n]=S[t]).parent=e})}),C.leaves=k.filter(function(e){return"undefined"==typeof e.parent}),C.groups=S.filter(function(e){return"undefined"==typeof e.parent}),g):S},g.powerGraphGroups=function(t){var n=e.powergraph.getGroups(k,N,L);return this.groups(n.groups),t(n),g},g.avoidOverlaps=function(e){return arguments.length?(x=e,g):x},g.handleDisconnected=function(e){return arguments.length?(_=e,g):_},g.flowLayout=function(e,t){
return arguments.length||(e="y"),$={axis:e,getMinSeparation:"number"==typeof t?function(){return t}:t},g},g.links=function(e){return arguments.length?(N=e,g):N},g.constraints=function(e){return arguments.length?(A=e,g):A},g.distanceMatrix=function(e){return arguments.length?(P=e,g):P},g.size=function(e){return arguments.length?(m=e,g):m},g.defaultNodeSize=function(e){return arguments.length?(I=e,g):I},g.linkDistance=function(e){return arguments.length?(b="function"==typeof e?e:+e,g):"function"==typeof b?b():b},g.linkType=function(e){return w=e,g},g.convergenceThreshold=function(e){return arguments.length?(M="function"==typeof e?e:+e,g):M},g.alpha=function(e){return arguments.length?(e=+e,p?p=e>0?e:0:e>0&&(E||(E=!0,v({type:"start",alpha:p=e}),y(g.tick))),g):p};var L={getSourceIndex:h,getTargetIndex:d,setLength:l,getType:c};return g.symmetricDiffLinkLengths=function(t,n){return e.symmetricDiffLinkLengths(N,L,n),this.linkDistance(function(e){return t*e.length}),g},g.jaccardLinkLengths=function(t,n){return e.jaccardLinkLengths(N,L,n),this.linkDistance(function(e){return t*e.length}),g},g.start=function(){var t,n=this.nodes().length,r=n+2*S.length,i=(N.length,m[0]),a=m[1],s=new Array(r),l=new Array(r);T=new Array(r);var c=null,p=this.avoidOverlaps();k.forEach(function(e,t){e.index=t,"undefined"==typeof e.x&&(e.x=i/2,e.y=a/2),s[t]=e.x,l[t]=e.y});var f;P?f=P:(f=new e.shortestpaths.Calculator(r,N,h,d,u).DistanceMatrix(),c=e.Descent.createSquareMatrix(r,function(){return 2}),N.forEach(function(e){var t=h(e),n=d(e);c[t][n]=c[n][t]=1}));var v=e.Descent.createSquareMatrix(r,function(e,t){return f[e][t]});if(C&&"undefined"!=typeof C.groups){var t=n;S.forEach(function(e){c[t][t+1]=c[t+1][t]=1e-6,v[t][t+1]=v[t+1][t]=.1,s[t]=0,l[t++]=0,s[t]=0,l[t++]=0})}else C={leaves:k,groups:[]};var y=A||[];$&&(L.getMinSeparation=$.getMinSeparation,y=y.concat(e.generateDirectedEdgeConstraints(n,N,$.axis,L)));var b=arguments.length>0?arguments[0]:0,w=arguments.length>1?arguments[1]:0,x=arguments.length>2?arguments[2]:0;for(this.avoidOverlaps(!1),D=new e.Descent([s,l],v),D.locks.clear(),t=0;n>t;++t)if(o=k[t],o.fixed){o.px=o.x,o.py=o.y;var E=[o.x,o.y];D.locks.add(t,E)}return D.threshold=M,D.run(b),y.length>0&&(D.project=new e.vpsc.Projection(k,S,C,y).projectFunctions()),D.run(w),this.avoidOverlaps(p),p&&(D.project=new e.vpsc.Projection(k,S,C,y,!0).projectFunctions()),D.G=c,D.run(x),N.forEach(function(e){"number"==typeof e.source&&(e.source=k[e.source]),"number"==typeof e.target&&(e.target=k[e.target])}),k.forEach(function(e,t){e.x=s[t],e.y=l[t]}),!P&&_&&(e.applyPacking(e.separateGraphs(k,N),i,a,I),k.forEach(function(e,t){D.x[0][t]=e.x,D.x[1][t]=e.y})),g.resume()},g.resume=function(){return g.alpha(.1)},g.stop=function(){return g.alpha(0)},g.prepareEdgeRouting=function(t){O=new e.geom.TangentVisibilityGraph(k.map(function(e){return e.bounds.inflate(-t).vertices()}))},g.routeEdge=function(t,n){var r=[];10===t.source.id&&11===t.target.id;var i=new e.geom.TangentVisibilityGraph(O.P,{V:O.V,E:O.E}),o={x:t.source.x,y:t.source.y},a={x:t.target.x,y:t.target.y},s=i.addPoint(o,t.source.id),u=i.addPoint(a,t.target.id);i.addEdgeIfVisible(o,a,t.source.id,t.target.id),"undefined"!=typeof n&&n(i);var l=function(e){return e.source.id},c=function(e){return e.target.id},p=function(e){return e.length()},f=new e.shortestpaths.Calculator(i.V.length,i.E,l,c,p),g=f.PathFromNodeToNode(s.id,u.id);if(1===g.length||g.length===i.V.length)e.vpsc.makeEdgeBetween(t,t.source.innerBounds,t.target.innerBounds,5),r=[{x:t.sourceIntersection.x,y:t.sourceIntersection.y},{x:t.arrowStart.x,y:t.arrowStart.y}];else{for(var v=g.length-2,y=i.V[g[v]].p,m=i.V[g[0]].p,r=[t.source.innerBounds.rayIntersection(y.x,y.y)],b=v;b>=0;--b)r.push(i.V[g[b]].p);r.push(e.vpsc.makeEdgeTo(m,t.target.innerBounds,5))}return r.forEach(function(e,n){if(n>0){var i=r[n-1];k.forEach(function(n){if(n.id!==h(t)&&n.id!==d(t)){var r=n.innerBounds.lineIntersections(i.x,i.y,e.x,e.y);r.length>0}})}}),r},g.linkId=function(e){return h(e)+"-"+d(e)},g},e}(cola||(cola={}));var cola;!function(e){var t=function(){function e(){this.locks={}}return e.prototype.add=function(e,t){isNaN(t[0])||isNaN(t[1]),this.locks[e]=t},e.prototype.clear=function(){this.locks={}},e.prototype.isEmpty=function(){for(var e in this.locks)return!1;return!0},e.prototype.apply=function(e){for(var t in this.locks)e(t,this.locks[t])},e}();e.Locks=t;var n=function(){function e(e,n,i){"undefined"==typeof i&&(i=null),this.D=n,this.G=i,this.threshold=1e-4,this.random=new r,this.project=null,this.x=e,this.k=e.length;var o=this.n=e[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new t,this.minD=Number.MAX_VALUE;for(var a,s=o;s--;)for(a=o;--a>s;){var u=n[s][a];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(o),this.H[s]=new Array(o),a=o;a--;)this.H[s][a]=new Array(o);this.Hd[s]=new Array(o),this.a[s]=new Array(o),this.b[s]=new Array(o),this.c[s]=new Array(o),this.d[s]=new Array(o),this.e[s]=new Array(o),this.ia[s]=new Array(o),this.ib[s]=new Array(o),this.xtmp[s]=new Array(o)}}return e.createSquareMatrix=function(e,t){for(var n=new Array(e),r=0;e>r;++r){n[r]=new Array(e);for(var i=0;e>i;++i)n[r][i]=t(r,i)}return n},e.prototype.offsetDir=function(){for(var e=this,t=new Array(this.k),n=0,r=0;r<this.k;++r){var i=t[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),t.map(function(t){return t*=e.minD/n})},e.prototype.computeDerivatives=function(e){var t=this,n=this.n;if(!(1>n)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,u=0;n>u;++u){for(r=0;r<this.k;++r)a[r]=this.g[r][u]=0;for(var l=0;n>l;++l)if(u!==l){for(;;){var c=0;for(r=0;r<this.k;++r){var h=i[r]=e[r][u]-e[r][l];c+=o[r]=h*h}if(c>1e-9)break;var d=this.offsetDir();for(r=0;r<this.k;++r)e[r][l]+=d[r]}var p=Math.sqrt(c),f=this.D[u][l],g=null!=this.G?this.G[u][l]:1;if(g>1&&p>f||!isFinite(f))for(r=0;r<this.k;++r)this.H[r][u][l]=0;else{g>1&&(g=1);var v=f*f,y=g*(p-f)/(v*p),m=-g/(v*p*p*p);for(isFinite(y)||console.log(y),r=0;r<this.k;++r)this.g[r][u]+=i[r]*y,a[r]-=this.H[r][u][l]=m*(f*(o[r]-c)+p*c)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][u][u]=a[r])}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<t.k;++r)t.H[r][n][n]+=s,t.g[r][n]-=s*(i[r]-e[r][n])})}},e.dotProd=function(e,t){for(var n=0,r=e.length;r--;)n+=e[r]*t[r];return n},e.rightMultiply=function(t,n,r){for(var i=t.length;i--;)r[i]=e.dotProd(t[i],n)},e.prototype.computeStepSize=function(t){for(var n=0,r=0,i=0;2>i;++i)n+=e.dotProd(this.g[i],t[i]),e.rightMultiply(this.H[i],t[i],this.Hd[i]),r+=e.dotProd(t[i],this.Hd[i]);return 0!==r&&isFinite(r)?n/r:0},e.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var e=this.computeStepSize(this.g),t=0;t<this.k;++t)this.takeDescentStep(this.x[t],this.g[t],e);return this.computeStress()},e.copy=function(e,t){for(var n=e.length,r=t[0].length,i=0;n>i;++i)for(var o=0;r>o;++o)t[i][o]=e[i][o]},e.prototype.stepAndProject=function(t,n,r,i){e.copy(t,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](t[0],t[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],t[1],n[1])},e.mApply=function(e,t,n){for(var r=e;r-->0;)for(var i=t;i-->0;)n(r,i)},e.prototype.matrixApply=function(t){e.mApply(this.k,this.n,t)},e.prototype.computeNextPosition=function(e,t){var n=this;this.computeDerivatives(e);var r=this.computeStepSize(this.g);this.stepAndProject(e,t,this.g,r);for(var i=0;i<this.n;++i)for(var o=0;o<this.k;++o)isNaN(t[o][i]);if(this.project){this.matrixApply(function(r,i){return n.e[r][i]=e[r][i]-t[r][i]});var a=this.computeStepSize(this.e);a=Math.max(.2,Math.min(a,1)),this.stepAndProject(e,t,this.e,a)}},e.prototype.run=function(e){for(var t=Number.MAX_VALUE,n=!1;!n&&e-->0;){var r=this.rungeKutta();n=Math.abs(t/r-1)<this.threshold,t=r}return t},e.prototype.rungeKutta=function(){var t=this;this.computeNextPosition(this.x,this.a),e.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),e.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(e,r){var i=(t.a[e][r]+2*t.b[e][r]+2*t.c[e][r]+t.d[e][r])/6,o=t.x[e][r]-i;n+=o*o,t.x[e][r]=i}),n},e.mid=function(t,n,r){e.mApply(t.length,t[0].length,function(e,i){return r[e][i]=t[e][i]+(n[e][i]-t[e][i])/2})},e.prototype.takeDescentStep=function(e,t,n){for(var r=0;r<this.n;++r)e[r]=e[r]-n*t[r]},e.prototype.computeStress=function(){for(var e=0,t=0,n=this.n-1;n>t;++t)for(var r=t+1,i=this.n;i>r;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][t]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var u=this.D[t][r];if(isFinite(u)){var l=u-o,c=u*u;e+=l*l/c}}return e},e.zeroDistance=1e-10,e}();e.Descent=n;var r=function(){function e(e){"undefined"==typeof e&&(e=1),this.seed=e,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return e.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},e.prototype.getNextBetween=function(e,t){return e+this.getNext()*(t-e)},e}();e.PseudoRandom=r}(cola||(cola={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},cola;!function(e){!function(t){function n(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function r(e,t,r){return n(e,t,r)>0}function i(e,t,r){return n(e,t,r)<0}function o(e){var t,r=e.slice(0).sort(function(e,t){return e.x!==t.x?t.x-e.x:t.y-e.y}),i=e.length,o=0,a=r[0].x;for(t=1;i>t&&r[t].x===a;++t);var s=t-1,u=[];if(u.push(r[o]),s===i-1)r[s].y!==r[o].y&&u.push(r[s]);else{var l,c=i-1,h=r[i-1].x;for(t=i-2;t>=0&&r[t].x===h;t--);for(l=t+1,t=s;++t<=l;)if(!(n(r[o],r[l],r[t])>=0&&l>t)){for(;u.length>1&&!(n(u[u.length-2],u[u.length-1],r[t])>0);)u.length-=1;t!=o&&u.push(r[t])}c!=l&&u.push(r[c]);var d=u.length;for(t=l;--t>=s;)if(!(n(r[c],r[s],r[t])>=0&&t>s)){for(;u.length>d&&!(n(u[u.length-2],u[u.length-1],r[t])>0);)u.length-=1;t!=o&&u.push(r[t])}}return u}function a(e,t,n){t.slice(0).sort(function(t,n){return Math.atan2(t.y-e.y,t.x-e.x)-Math.atan2(n.y-e.y,n.x-e.x)}).forEach(n)}function s(e,t){return{rtan:u(e,t),ltan:l(e,t)}}function u(e,t){var n,o,a,s,u,l=t.length-1;if(i(e,t[1],t[0])&&!r(e,t[l-1],t[0]))return 0;for(n=0,o=l;;){if(o-n===1)return r(e,t[n],t[o])?n:o;if(a=Math.floor((n+o)/2),u=i(e,t[a+1],t[a]),u&&!r(e,t[a-1],t[a]))return a;s=r(e,t[n+1],t[n]),s?u?o=a:r(e,t[n],t[a])?o=a:n=a:u&&i(e,t[n],t[a])?o=a:n=a}}function l(e,t){var n,o,a,s,u,l=t.length-1;if(r(e,t[l-1],t[0])&&!i(e,t[1],t[0]))return 0;for(n=0,o=l;;){if(o-n===1)return i(e,t[n],t[o])?n:o;if(a=Math.floor((n+o)/2),u=i(e,t[a+1],t[a]),r(e,t[a-1],t[a])&&!u)return a;s=i(e,t[n+1],t[n]),s?u?i(e,t[n],t[a])?o=a:n=a:o=a:u?n=a:r(e,t[n],t[a])?o=a:n=a}}function c(e,t,n,r,i,o){var a,s;a=n(t[0],e),s=r(e[a],t);for(var u=!1;!u;){for(u=!0;;){if(a===e.length-1&&(a=0),i(t[s],e[a],e[a+1]))break;++a}for(;;){if(0===s&&(s=t.length-1),o(e[a],t[s],t[s-1]))break;--s,u=!1}}return{t1:a,t2:s}}function h(e,t){var n=d(t,e);return{t1:n.t2,t2:n.t1}}function d(e,t){return c(e,t,u,l,r,i)}function p(e,t){return c(e,t,l,l,i,i)}function f(e,t){return c(e,t,u,u,r,r)}function g(t,n){for(var r=[],i=1,o=n.length;o>i;++i){var a=e.vpsc.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,n[i-1].x,n[i-1].y,n[i].x,n[i].y);a&&r.push(a)}return r}function v(e,t){for(var r=e.length-1,i=t.length-1,o=new k,a=0;r>a;++a)for(var s=0;i>s;++s){var u=e[0==a?r-1:a-1],l=e[a],c=e[a+1],h=t[0==s?i-1:s-1],d=t[s],p=t[s+1],f=n(u,l,d),g=n(l,h,d),v=n(l,d,p),y=n(h,d,l),m=n(d,u,l),b=n(d,l,c);f>=0&&g>=0&&0>v&&y>=0&&m>=0&&0>b?o.ll=new E(a,s):0>=f&&0>=g&&v>0&&0>=y&&0>=m&&b>0?o.rr=new E(a,s):0>=f&&g>0&&0>=v&&y>=0&&0>m&&b>=0?o.rl=new E(a,s):f>=0&&0>g&&v>=0&&0>=y&&m>0&&0>=b&&(o.lr=new E(a,s))}return o}function y(e,t){for(var n=1,r=t.length;r>n;++n)if(i(t[n-1],t[n],e))return!1;return!0}function m(e,t){return!e.every(function(e){return!y(e,t)})}function b(e,t){if(m(e,t))return!0;if(m(t,e))return!0;for(var n=1,r=e.length;r>n;++n){var i=e[n],o=e[n-1];if(g(new x(o.x,o.y,i.x,i.y),t).length>0)return!0}return!1}var w=function(){function e(){}return e}();t.Point=w;var x=function(){function e(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r}return e}();t.LineSegment=x;var _=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(w);t.PolyPoint=_,t.isLeft=n,t.ConvexHull=o,t.clockwiseRadialSweep=a,t.tangent_PolyPolyC=c,t.LRtangent_PolyPolyC=h,t.RLtangent_PolyPolyC=d,t.LLtangent_PolyPolyC=p,t.RRtangent_PolyPolyC=f;var E=function(){function e(e,t){this.t1=e,this.t2=t}return e}();t.BiTangent=E;var k=function(){function e(){}return e}();t.BiTangents=k;var S=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(w);t.TVGPoint=S;var T=function(){function e(e,t,n,r){this.id=e,this.polyid=t,this.polyvertid=n,this.p=r,r.vv=this}return e}();t.VisibilityVertex=T;var C=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.length=function(){var e=this.source.p.x-this.target.p.x,t=this.source.p.y-this.target.p.y;return Math.sqrt(e*e+t*t)},e}();t.VisibilityEdge=C;var N=function(){function e(e,n){if(this.P=e,this.V=[],this.E=[],n)this.V=n.V.slice(0),this.E=n.E.slice(0);else{for(var r=e.length,i=0;r>i;i++)for(var o=e[i],a=0;a<o.length;++a){var s=o[a],u=new T(this.V.length,i,a,s);this.V.push(u),a>0&&this.E.push(new C(o[a-1].vv,u))}for(var i=0;r-1>i;i++)for(var l=e[i],a=i+1;r>a;a++){var c=e[a],h=t.tangents(l,c);for(var d in h){var p=h[d],f=l[p.t1],g=c[p.t2];this.addEdgeIfVisible(f,g,i,a)}}}}return e.prototype.addEdgeIfVisible=function(e,t,n,r){this.intersectsPolys(new x(e.x,e.y,t.x,t.y),n,r)||this.E.push(new C(e.vv,t.vv))},e.prototype.addPoint=function(e,t){var n=this.P.length;this.V.push(new T(this.V.length,n,0,e));for(var r=0;n>r;++r)if(r!==t){var i=this.P[r],o=s(e,i);this.addEdgeIfVisible(e,i[o.ltan],t,r),this.addEdgeIfVisible(e,i[o.rtan],t,r)}return e.vv},e.prototype.intersectsPolys=function(e,t,n){for(var r=0,i=this.P.length;i>r;++r)if(r!=t&&r!=n&&g(e,this.P[r]).length>0)return!0;return!1},e}();t.TangentVisibilityGraph=N,t.tangents=v,t.polysOverlap=b}(e.geom||(e.geom={}));e.geom}(cola||(cola={}));var cola;!function(e){!function(e){var t=function(){function e(e){this.scale=e,this.AB=0,this.AD=0,this.A2=0}return e.prototype.addVariable=function(e){var t=this.scale/e.scale,n=e.offset/e.scale,r=e.weight;this.AB+=r*t*n,this.AD+=r*t*e.desiredPosition,this.A2+=r*t*t},e.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},e}();e.PositionStats=t;var n=function(){function e(e,t,n,r){"undefined"==typeof r&&(r=!1),this.left=e,this.right=t,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=e,this.right=t,this.gap=n,this.equality=r}return e.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},e}();e.Constraint=n;var r=function(){function e(e,t,n){"undefined"==typeof t&&(t=1),"undefined"==typeof n&&(n=1),this.desiredPosition=e,this.weight=t,this.scale=n,this.offset=0}return e.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},e.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},e.prototype.visitNeighbours=function(e,t){var n=function(n,r){return n.active&&e!==r&&t(n,r)};this.cOut.forEach(function(e){return n(e,e.right)}),this.cIn.forEach(function(e){return n(e,e.left)})},e}();e.Variable=r;var i=function(){function e(e){this.vars=[],e.offset=0,this.ps=new t(e.scale),this.addVariable(e)}return e.prototype.addVariable=function(e){e.block=this,this.vars.push(e),this.ps.addVariable(e),this.posn=this.ps.getPosn()},e.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var e=0,t=this.vars.length;t>e;++e)this.ps.addVariable(this.vars[e]);this.posn=this.ps.getPosn()},e.prototype.compute_lm=function(e,t,n){var r=this,i=e.dfdv();return e.visitNeighbours(t,function(t,o){var a=r.compute_lm(o,e,n);o===t.right?(i+=a*t.left.scale,t.lm=a):(i+=a*t.right.scale,t.lm=-a),n(t)}),i/e.scale},e.prototype.populateSplitBlock=function(e,t){var n=this;e.visitNeighbours(t,function(t,r){r.offset=e.offset+(r===t.right?t.gap:-t.gap),n.addVariable(r),n.populateSplitBlock(r,e)})},e.prototype.traverse=function(e,t,n,r){var i=this;"undefined"==typeof n&&(n=this.vars[0]),"undefined"==typeof r&&(r=null),n.visitNeighbours(r,function(r,o){t.push(e(r)),i.traverse(e,t,o,n)})},e.prototype.findMinLM=function(){var e=null;return this.compute_lm(this.vars[0],null,function(t){!t.equality&&(null===e||t.lm<e.lm)&&(e=t)}),e},e.prototype.findMinLMBetween=function(e,t){this.compute_lm(e,null,function(){});var n=null;return this.findPath(e,null,t,function(e,t){!e.equality&&e.right===t&&(null===n||e.lm<n.lm)&&(n=e)}),n},e.prototype.findPath=function(e,t,n,r){var i=this,o=!1;return e.visitNeighbours(t,function(t,a){o||a!==n&&!i.findPath(a,e,n,r)||(o=!0,r(t,a))}),o},e.prototype.isActiveDirectedPathBetween=function(e,t){if(e===t)return!0;for(var n=e.cOut.length;n--;){var r=e.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,t))return!0}return!1},e.split=function(t){return t.active=!1,[e.createSplitBlock(t.left),e.createSplitBlock(t.right)]},e.createSplitBlock=function(t){var n=new e(t);return n.populateSplitBlock(t,null),n},e.prototype.splitBetween=function(t,n){var r=this.findMinLMBetween(t,n);if(null!==r){var i=e.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},e.prototype.mergeAcross=function(e,t,n){t.active=!0;for(var r=0,i=e.vars.length;i>r;++r){var o=e.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},e.prototype.cost=function(){for(var e=0,t=this.vars.length;t--;){var n=this.vars[t],r=n.position()-n.desiredPosition;e+=r*r*n.weight}return e},e}();e.Block=i;var o=function(){function e(e){this.vs=e;var t=e.length;for(this.list=new Array(t);t--;){var n=new i(e[t]);this.list[t]=n,n.blockInd=t}}return e.prototype.cost=function(){for(var e=0,t=this.list.length;t--;)e+=this.list[t].cost();return e},e.prototype.insert=function(e){e.blockInd=this.list.length,this.list.push(e)},e.prototype.remove=function(e){var t=this.list.length-1,n=this.list[t];this.list.length=t,e!==n&&(this.list[e.blockInd]=n,n.blockInd=e.blockInd)},e.prototype.merge=function(e){var t=e.left.block,n=e.right.block,r=e.right.offset-e.left.offset-e.gap;t.vars.length<n.vars.length?(n.mergeAcross(t,e,r),this.remove(t)):(t.mergeAcross(n,e,-r),this.remove(n))},e.prototype.forEach=function(e){this.list.forEach(e)},e.prototype.updateBlockPositions=function(){this.list.forEach(function(e){return e.updateWeightedPosition()})},e.prototype.split=function(e){var t=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<a.LAGRANGIAN_TOLERANCE&&(n=r.left.block,i.split(r).forEach(function(e){return t.insert(e)}),t.remove(n),e.push(r))})},e}();e.Blocks=o;var a=function(){function e(e,t){this.vs=e,this.cs=t,this.vs=e,e.forEach(function(e){e.cIn=[],e.cOut=[]}),this.cs=t,t.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),this.inactive=t.map(function(e){return e.active=!1,e}),this.bs=null}return e.prototype.cost=function(){return this.bs.cost()},e.prototype.setStartingPositions=function(e){this.inactive=this.cs.map(function(e){return e.active=!1,e}),this.bs=new o(this.vs),this.bs.forEach(function(t,n){return t.posn=e[n]})},e.prototype.setDesiredPositions=function(e){this.vs.forEach(function(t,n){return t.desiredPosition=e[n]})},e.prototype.mostViolated=function(){for(var t=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;i>a;++a){var s=r[a];if(!s.unsatisfiable){var u=s.slack();if((s.equality||t>u)&&(t=u,n=s,o=a,s.equality))break}}return o!==i&&(t<e.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},e.prototype.satisfy=function(){null==this.bs&&(this.bs=new o(this.vs)),this.bs.split(this.inactive);for(var t=null;(t=this.mostViolated())&&(t.equality||t.slack()<e.ZERO_UPPERBOUND&&!t.active);){var n=t.left.block,r=t.right.block;if(n!==r)this.bs.merge(t);else{if(n.isActiveDirectedPathBetween(t.right,t.left)){t.unsatisfiable=!0;continue}var i=n.splitBetween(t.left,t.right);if(null===i){t.unsatisfiable=!0;continue}this.bs.insert(i.lb),this.bs.insert(i.rb),this.bs.remove(n),this.inactive.push(i.constraint),t.slack()>=0?this.inactive.push(t):this.bs.merge(t)}}},e.prototype.solve=function(){this.satisfy();for(var e=Number.MAX_VALUE,t=this.bs.cost();Math.abs(e-t)>1e-4;)this.satisfy(),e=t,t=this.bs.cost();return t},e.LAGRANGIAN_TOLERANCE=-1e-4,e.ZERO_UPPERBOUND=-1e-10,e}();e.Solver=a}(e.vpsc||(e.vpsc={}));e.vpsc}(cola||(cola={}));var cola;!function(e){!function(t){function n(e){return e.bounds="undefined"!=typeof e.leaves?e.leaves.reduce(function(e,t){return t.bounds.union(e)},v.empty()):v.empty(),"undefined"!=typeof e.groups&&(e.bounds=e.groups.reduce(function(e,t){return n(t).union(e)},e.bounds)),e.bounds=e.bounds.inflate(e.padding),e.bounds}function r(e,t,n,r){var i=t.rayIntersection(n.cx(),n.cy());i||(i={x:t.cx(),y:t.cy()});var o=n.rayIntersection(t.cx(),t.cy());o||(o={x:n.cx(),y:n.cy()});var a=o.x-i.x,s=o.y-i.y,u=Math.sqrt(a*a+s*s),l=u-r;e.sourceIntersection=i,e.targetIntersection=o,e.arrowStart={x:i.x+l*a/u,y:i.y+l*s/u}}function i(e,t,n){var r=t.rayIntersection(e.x,e.y);r||(r={x:t.cx(),y:t.cy()});var i=r.x-e.x,o=r.y-e.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}}function o(e,t){return e.pos>t.pos?1:e.pos<t.pos?-1:e.isOpen?-1:0}function a(){return new RBTree(function(e,t){return e.pos-t.pos})}function s(e,t,n,r){"undefined"==typeof r&&(r=!1);var i=e.padding,o="undefined"!=typeof e.groups?e.groups.length:0,a="undefined"!=typeof e.leaves?e.leaves.length:0,l=o?e.groups.reduce(function(e,r){return e.concat(s(r,t,n,!0))},[]):[],c=(r?2:0)+a+o,h=new Array(c),d=new Array(c),p=0,f=function(e,t){d[p]=e,h[p++]=t};if(r){var g=e.bounds,v=t.getCentre(g),y=t.getSize(g)/2,m=t.getOpen(g),b=t.getClose(g),w=v-y+i/2,x=v+y-i/2;e.minVar.desiredPosition=w,f(t.makeRect(m,b,w,i),e.minVar),e.maxVar.desiredPosition=x,f(t.makeRect(m,b,x,i),e.maxVar)}a&&e.leaves.forEach(function(e){return f(e.bounds,e.variable)}),o&&e.groups.forEach(function(e){var n=e.bounds;f(t.makeRect(t.getOpen(n),t.getClose(n),t.getCentre(n),t.getSize(n)),e.minVar)});var _=u(d,h,t,n);return o&&(h.forEach(function(e){e.cOut=[],e.cIn=[]}),_.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),e.groups.forEach(function(e){var n=(e.padding-t.getSize(e.bounds))/2;e.minVar.cIn.forEach(function(e){return e.gap+=n}),e.minVar.cOut.forEach(function(t){t.left=e.maxVar,t.gap+=n})})),l.concat(_)}function u(t,n,r,i){var s,u=t.length,l=2*u;console.assert(n.length>=u);var c=new Array(l);for(s=0;u>s;++s){var h=t[s],d=new y(n[s],h,r.getCentre(h));c[s]=new m(!0,d,r.getOpen(h)),c[s+u]=new m(!1,d,r.getClose(h))}c.sort(o);var p=new Array,f=a();for(s=0;l>s;++s){var g=c[s],d=g.v;if(g.isOpen)f.insert(d),r.findNeighbours(d,f);else{f.remove(d);var v=function(t,n){var o=(r.getSize(t.r)+r.getSize(n.r))/2+i;p.push(new e.vpsc.Constraint(t.v,n.v,o))},b=function(e,t,n){for(var r,i=d[e].iterator();null!==(r=i[e]());)n(r,d),r[t].remove(d)};b("prev","next",function(e,t){return v(e,t)}),b("next","prev",function(e,t){return v(t,e)})}}return console.assert(0===f.size),p}function l(e,t){var n=function(n,r){for(var i,o=t.findIter(e);null!==(i=o[n]());){var a=i.r.overlapX(e.r);if((0>=a||a<=i.r.overlapY(e.r))&&(e[n].insert(i),i[r].insert(e)),0>=a)break}};n("next","prev"),n("prev","next")}function c(e,t){var n=function(n,r){var i=t.findIter(e)[n]();null!==i&&i.r.overlapX(e.r)>0&&(e[n].insert(i),i[r].insert(e))};n("next","prev"),n("prev","next")}function h(e,t){return u(e,t,b,1e-6)}function d(e,t){return u(e,t,w,1e-6)}function p(e){return s(e,b,1e-6)}function f(e){return s(e,w,1e-6)}function g(t){var n=t.map(function(t){return new e.vpsc.Variable(t.cx())}),r=e.vpsc.generateXConstraints(t,n),i=new e.vpsc.Solver(n,r);i.solve(),n.forEach(function(e,n){return t[n].setXCentre(e.position())}),n=t.map(function(t){return new e.vpsc.Variable(t.cy())}),r=e.vpsc.generateYConstraints(t,n),i=new e.vpsc.Solver(n,r),i.solve(),n.forEach(function(e,n){return t[n].setYCentre(e.position())})}t.computeGroupBounds=n;var v=function(){function e(e,t,n,r){this.x=e,this.X=t,this.y=n,this.Y=r}return e.empty=function(){return new e(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},e.prototype.cx=function(){return(this.x+this.X)/2},e.prototype.cy=function(){return(this.y+this.Y)/2},e.prototype.overlapX=function(e){var t=this.cx(),n=e.cx();return n>=t&&e.x<this.X?this.X-e.x:t>=n&&this.x<e.X?e.X-this.x:0},e.prototype.overlapY=function(e){var t=this.cy(),n=e.cy();return n>=t&&e.y<this.Y?this.Y-e.y:t>=n&&this.y<e.Y?e.Y-this.y:0},e.prototype.setXCentre=function(e){var t=e-this.cx();this.x+=t,this.X+=t},e.prototype.setYCentre=function(e){var t=e-this.cy();this.y+=t,this.Y+=t},e.prototype.width=function(){return this.X-this.x},e.prototype.height=function(){return this.Y-this.y},e.prototype.union=function(t){return new e(Math.min(this.x,t.x),Math.max(this.X,t.X),Math.min(this.y,t.y),Math.max(this.Y,t.Y))},e.prototype.lineIntersections=function(t,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;4>s;++s){var u=e.lineIntersection(t,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==u&&a.push({x:u.x,y:u.y})}return a},e.prototype.rayIntersection=function(e,t){var n=this.lineIntersections(this.cx(),this.cy(),e,t);return n.length>0?n[0]:null},e.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y},{x:this.x,y:this.y}]},e.lineIntersection=function(e,t,n,r,i,o,a,s){var u=n-e,l=a-i,c=r-t,h=s-o,d=h*u-l*c;if(0==d)return null;var p=e-i,f=t-o,g=l*f-h*p,v=g/d,y=u*f-c*p,m=y/d;return v>=0&&1>=v&&m>=0&&1>=m?{x:e+v*u,y:t+v*c}:null},e.prototype.inflate=function(t){return new e(this.x-t,this.X+t,this.y-t,this.Y+t)},e}();t.Rectangle=v,t.makeEdgeBetween=r,t.makeEdgeTo=i;var y=function(){function e(e,t,n){this.v=e,this.r=t,this.pos=n,this.prev=a(),this.next=a()}return e}(),m=function(){function e(e,t,n){this.isOpen=e,this.v=t,this.pos=n}return e}(),b={getCentre:function(e){return e.cx()},getOpen:function(e){return e.y},getClose:function(e){return e.Y},getSize:function(e){return e.width()},makeRect:function(e,t,n,r){return new v(n-r/2,n+r/2,e,t)},findNeighbours:l},w={getCentre:function(e){return e.cy()},getOpen:function(e){return e.x},getClose:function(e){return e.X},getSize:function(e){return e.height()},makeRect:function(e,t,n,r){return new v(e,t,n-r/2,n+r/2)},findNeighbours:c};t.generateXConstraints=h,t.generateYConstraints=d,t.generateXGroupConstraints=p,t.generateYGroupConstraints=f,t.removeOverlaps=g;var x=function(e){function t(t,n){e.call(this,0,n),this.index=t}return __extends(t,e),t}(e.vpsc.Variable),_=function(){function t(t,r,i,o,a){"undefined"==typeof i&&(i=null),"undefined"==typeof o&&(o=null),"undefined"==typeof a&&(a=!1);var s=this;if(this.nodes=t,this.groups=r,this.rootGroup=i,this.avoidOverlaps=a,this.variables=t.map(function(e,t){return e.variable=new x(t,1)}),o&&this.createConstraints(o),a&&i&&"undefined"!=typeof i.groups){t.forEach(function(t){if(!t.width||!t.height)return void(t.bounds=new e.vpsc.Rectangle(t.x,t.x,t.y,t.y));var n=t.width/2,r=t.height/2;t.bounds=new e.vpsc.Rectangle(t.x-n,t.x+n,t.y-r,t.y+r)}),n(i);var u=t.length;r.forEach(function(e){s.variables[u]=e.minVar=new x(u++,.01),s.variables[u]=e.maxVar=new x(u++,.01)})}}return t.prototype.createSeparation=function(t){return new e.vpsc.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,"undefined"!=typeof t.equality?t.equality:!1)},t.prototype.makeFeasible=function(e){var t=this;if(this.avoidOverlaps){var n="x",r="width";"x"===e.axis&&(n="y",r="height");var i=e.offsets.map(function(e){return t.nodes[e.node]}).sort(function(e,t){return e[n]-t[n]}),o=null;i.forEach(function(e){o&&(e[n]=o[n]+o[r]+1),o=e})}},t.prototype.createAlignment=function(t){var n=this,r=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var i="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){var o=n.nodes[t.node].variable;i.push(new e.vpsc.Constraint(r,o,t.offset,!0))})},t.prototype.createConstraints=function(e){var t=this,n=function(e){return"undefined"==typeof e.type||"separation"===e.type};this.xConstraints=e.filter(function(e){return"x"===e.axis&&n(e)}).map(function(e){return t.createSeparation(e)}),this.yConstraints=e.filter(function(e){return"y"===e.axis&&n(e)}).map(function(e){return t.createSeparation(e)}),e.filter(function(e){return"alignment"===e.type}).forEach(function(e){return t.createAlignment(e)})},t.prototype.setupVariablesAndBounds=function(e,t,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,s=(i.height||0)/2,u=e[o],l=t[o];i.bounds=new v(u-a,u+a,l-s,l+s)})},t.prototype.xProject=function(e,t,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(e,t,e,n,function(e){return e.px},this.xConstraints,p,function(e){return e.bounds.setXCentre(n[e.variable.index]=e.variable.position())},function(e){var t=n[e.minVar.index]=e.minVar.position(),r=n[e.maxVar.index]=e.maxVar.position(),i=e.padding/2;e.bounds.x=t-i,e.bounds.X=r+i})},t.prototype.yProject=function(e,t,n){(this.rootGroup||this.yConstraints)&&this.project(e,t,t,n,function(e){return e.py},this.yConstraints,f,function(e){return e.bounds.setYCentre(n[e.variable.index]=e.variable.position())},function(e){var t=n[e.minVar.index]=e.minVar.position(),r=n[e.maxVar.index]=e.maxVar.position(),i=e.padding/2;e.bounds.y=t-i,e.bounds.Y=r+i})},t.prototype.projectFunctions=function(){var e=this;return[function(t,n,r){return e.xProject(t,n,r)},function(t,n,r){return e.yProject(t,n,r)}]},t.prototype.project=function(e,t,r,i,o,a,s,u,l){this.setupVariablesAndBounds(e,t,i,o),this.rootGroup&&this.avoidOverlaps&&(n(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,r,i),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&this.groups.forEach(l)},t.prototype.solve=function(t,n,r,i){var o=new e.vpsc.Solver(t,n);o.setStartingPositions(r),o.setDesiredPositions(i),o.solve()},t}();t.Projection=_}(e.vpsc||(e.vpsc={}));e.vpsc}(cola||(cola={}));var PairingHeap=function(){function e(e){this.elem=e,this.subheaps=[]}return e.prototype.toString=function(e){for(var t="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(t+=","),t+=i.toString(e),n=!0):n=!1}return""!==t&&(t="("+t+")"),(this.elem?e(this.elem):"")+t},e.prototype.forEach=function(e){this.empty()||(e(this.elem,this),this.subheaps.forEach(function(t){return t.forEach(e)}))},e.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(e,t){return e+t.count()},0)},e.prototype.min=function(){return this.elem},e.prototype.empty=function(){return null==this.elem},e.prototype.contains=function(e){if(this===e)return!0;for(var t=0;t<this.subheaps.length;t++)if(this.subheaps[t].contains(e))return!0;return!1},e.prototype.isHeap=function(e){var t=this;return this.subheaps.every(function(n){return e(t.elem,n.elem)&&n.isHeap(e)})},e.prototype.insert=function(t,n){return this.merge(new e(t),n)},e.prototype.merge=function(e,t){return this.empty()?e:e.empty()?this:t(this.elem,e.elem)?(this.subheaps.push(e),this):(e.subheaps.push(this),e)},e.prototype.removeMin=function(e){return this.empty()?null:this.mergePairs(e)},e.prototype.mergePairs=function(t){if(0==this.subheaps.length)return new e(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),t),r=this.mergePairs(t);

return n.merge(r,t)},e.prototype.decreaseKey=function(t,n,r,i){var o=t.removeMin(i);t.elem=o.elem,t.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(t.elem,t);var a=new e(n);return null!==r&&r(n,a),this.merge(a,i)},e}(),PriorityQueue=function(){function e(e){this.lessThan=e}return e.prototype.top=function(){return this.empty()?null:this.root.elem},e.prototype.push=function(){for(var e=[],t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];for(var n,r,i=0;r=e[i];++i)n=new PairingHeap(r),this.root=this.empty()?n:this.root.merge(n,this.lessThan);return n},e.prototype.empty=function(){return!this.root||!this.root.elem},e.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},e.prototype.forEach=function(e){this.root.forEach(e)},e.prototype.pop=function(){if(this.empty())return null;var e=this.root.min();return this.root=this.root.removeMin(this.lessThan),e},e.prototype.reduceKey=function(e,t,n){"undefined"==typeof n&&(n=null),this.root=this.root.decreaseKey(e,t,n,this.lessThan)},e.prototype.toString=function(e){return this.root.toString(e)},e.prototype.count=function(){return this.root.count()},e}(),cola;!function(e){!function(e){var t=function(){function e(e,t){this.id=e,this.distance=t}return e}(),n=function(){function e(e){this.id=e,this.neighbours=[]}return e}(),r=function(){function e(e,t,n){this.node=e,this.prev=t,this.d=n}return e}(),i=function(){function e(e,r,i,o,a){this.n=e,this.es=r,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new n(s);for(s=this.es.length;s--;){var u=this.es[s],l=i(u),c=o(u),h=a(u);this.neighbours[l].neighbours.push(new t(c,h)),this.neighbours[c].neighbours.push(new t(l,h))}}return e.prototype.DistanceMatrix=function(){for(var e=new Array(this.n),t=0;t<this.n;++t)e[t]=this.dijkstraNeighbours(t);return e},e.prototype.DistancesFromNode=function(e){return this.dijkstraNeighbours(e)},e.prototype.PathFromNodeToNode=function(e,t){return this.dijkstraNeighbours(e,t)},e.prototype.PathFromNodeToNodeWithPrevCost=function(e,t,n){var i=new PriorityQueue(function(e,t){return e.d<=t.d}),o=this.neighbours[e],a=new r(o,null,0),s={};for(i.push(a);!i.empty()&&(a=i.pop(),o=a.node,o.id!==t);)for(var u=o.neighbours.length;u--;){var l=o.neighbours[u],c=this.neighbours[l.id];if(!a.prev||c.id!==a.prev.node.id){var h=c.id+","+o.id;if(!(h in s&&s[h]<=a.d)){var d=a.prev?n(a.prev.node.id,o.id,c.id):0,p=a.d+l.distance+d;s[h]=p,i.push(new r(c,a,p))}}}for(var f=[];a.prev;)a=a.prev,f.push(a.node.id);return f},e.prototype.dijkstraNeighbours=function(e,t){"undefined"==typeof t&&(t=-1);for(var n=new PriorityQueue(function(e,t){return e.d<=t.d}),r=this.neighbours.length,i=new Array(r);r--;){var o=this.neighbours[r];o.d=r===e?0:Number.POSITIVE_INFINITY,o.q=n.push(o)}for(;!n.empty();){var a=n.pop();if(i[a.id]=a.d,a.id===t){for(var s=[],u=a;"undefined"!=typeof u.prev;)s.push(u.prev.id),u=u.prev;return s}for(r=a.neighbours.length;r--;){var l=a.neighbours[r],u=this.neighbours[l.id],c=a.d+l.distance;a.d!==Number.MAX_VALUE&&u.d>c&&(u.d=c,u.prev=a,n.reduceKey(u.q,u,function(e,t){return e.q=t}))}}return i},e}();e.Calculator=i}(e.shortestpaths||(e.shortestpaths={}));e.shortestpaths}(cola||(cola={}));var cola;!function(e){var t=function(){function e(e,t,n){this.id=e,this.rect=t,this.children=n,this.leaf="undefined"==typeof n||0===n.length}return e}();e.NodeWrapper=t;var n=function(){function e(e,t,n,r,i){"undefined"==typeof r&&(r=null),"undefined"==typeof i&&(i=null),this.id=e,this.x=t,this.y=n,this.node=r,this.line=i}return e}();e.Vert=n;var r=function(){function e(t,n){this.s=t,this.t=n;var r=e.findMatch(t,n),i=n.slice(0).reverse(),o=e.findMatch(t,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return e.findMatch=function(e,t){for(var n=e.length,r=t.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;n>a;a++){o[a]=new Array(r);for(var s=0;r>s;s++)if(e[a]===t[s]){var u=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;u>i.length&&(i.length=u,i.si=a-u+1,i.ti=s-u+1)}else o[a][s]=0}return i},e.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},e}();e.LongestCommonSubsequence=r;var i=function(){function r(r,i){var o=this;this.originalnodes=r,this.groupPadding=12,this.leaves=null,this.nodes=r.map(function(e,n){return new t(n,i.getBounds(e),i.getChildren(e))}),this.leaves=this.nodes.filter(function(e){return e.leaf}),this.groups=this.nodes.filter(function(e){return!e.leaf}),this.cols=this.getGridDim("x"),this.rows=this.getGridDim("y"),this.groups.forEach(function(e){return e.children.forEach(function(t){return o.nodes[t].parent=e})}),this.root={children:[]},this.nodes.forEach(function(e){"undefined"==typeof e.parent&&(e.parent=o.root,o.root.children.push(e.id)),e.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(e,t){return o.getDepth(e)-o.getDepth(t)});var a=this.backToFront.slice(0).reverse().filter(function(e){return!e.leaf});a.forEach(function(t){var n=e.vpsc.Rectangle.empty();t.children.forEach(function(e){return n=n.union(o.nodes[e].rect)}),t.rect=n.inflate(o.groupPadding)});var s=this.midPoints(this.cols.map(function(e){return e.x})),u=this.midPoints(this.rows.map(function(e){return e.y})),l=s[0],c=s[s.length-1],h=u[0],d=u[u.length-1],p=this.rows.map(function(e){return{x1:l,x2:c,y1:e.y,y2:e.y}}).concat(u.map(function(e){return{x1:l,x2:c,y1:e,y2:e}})),f=this.cols.map(function(e){return{x1:e.x,x2:e.x,y1:h,y2:d}}).concat(s.map(function(e){return{x1:e,x2:e,y1:h,y2:d}})),g=p.concat(f);g.forEach(function(e){return e.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(e){return f.forEach(function(t){var r=new n(o.verts.length,t.x1,e.y1);e.verts.push(r),t.verts.push(r),o.verts.push(r);for(var i=o.backToFront.length;i-->0;){var a=o.backToFront[i],s=a.rect,u=Math.abs(r.x-s.cx()),l=Math.abs(r.y-s.cy());if(u<s.width()/2&&l<s.height()/2){r.node=a;break}}})}),g.forEach(function(e,t){o.nodes.forEach(function(t,r){t.rect.lineIntersections(e.x1,e.y1,e.x2,e.y2).forEach(function(r,i){var a=new n(o.verts.length,r.x,r.y,t,e);o.verts.push(a),e.verts.push(a),t.ports.push(a)})});var r=Math.abs(e.y1-e.y2)<.1,i=function(e,t){return r?t.x-e.x:t.y-e.y};e.verts.sort(i);for(var a=1;a<e.verts.length;a++){var s=e.verts[a-1],u=e.verts[a];s.node&&s.node===u.node&&s.node.leaf||o.edges.push({source:s.id,target:u.id,length:Math.abs(i(s,u))})}})}return r.prototype.avg=function(e){return e.reduce(function(e,t){return e+t})/e.length},r.prototype.getGridDim=function(e){for(var t=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n[0].rect,i=n.filter(function(t){return t.rect["overlap"+e.toUpperCase()](r)});t.push(i),i.forEach(function(e){return n.splice(n.indexOf(e),1)}),i[e]=this.avg(i.map(function(t){return t.rect["c"+e]()}))}return t.sort(function(t,n){return t[e]-n[e]}),t},r.prototype.getDepth=function(e){for(var t=0;e.parent!==this.root;)t++,e=e.parent;return t},r.prototype.midPoints=function(e){for(var t=e[1]-e[0],n=[e[0]-t/2],r=1;r<e.length;r++)n.push((e[r]+e[r-1])/2);return n.push(e[e.length-1]+t/2),n},r.prototype.findLineage=function(e){var t=[e];do e=e.parent,t.push(e);while(e!==this.root);return t.reverse()},r.prototype.findAncestorPathBetween=function(e,t){for(var n=this.findLineage(e),r=this.findLineage(t),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},r.prototype.siblingObstacles=function(e,t){var n=this,r=this.findAncestorPathBetween(e,t),i={};r.lineages.forEach(function(e){return i[e.id]={}});var o=r.commonAncestor.children.filter(function(e){return!(e in i)});return r.lineages.filter(function(e){return e.parent!==r.commonAncestor}).forEach(function(e){return o=o.concat(e.parent.children.filter(function(t){return t!==e.id}))}),o.map(function(e){return n.nodes[e]})},r.getSegmentSets=function(e,t,n){for(var r=[],i=0;i<e.length;i++)for(var o=e[i],a=0;a<o.length;a++){var s=o[a];s.edgeid=i,s.i=a;var u=s[1][t]-s[0][t];Math.abs(u)<.1&&r.push(s)}r.sort(function(e,n){return e[0][t]-n[0][t]});for(var l=[],c=null,h=0;h<r.length;h++){var s=r[h];(!c||Math.abs(s[0][t]-c.pos)>.1)&&(c={pos:s[0][t],segments:[]},l.push(c)),c.segments.push(s)}return l},r.nudgeSegs=function(t,n,r,i,o,a){var s=i.length;if(!(1>=s)){for(var u=i.map(function(n){return new e.vpsc.Variable(n[0][t])}),l=[],c=0;s>c;c++)for(var h=0;s>h;h++)if(c!==h){var d=i[c],p=i[h],f=d.edgeid,g=p.edgeid,v=-1,y=-1;"x"==t?o(f,g)&&(console.log("s1: "+d[0][t]+","+d[0][n]+"-"+d[1][t]+","+d[1][n]),d[0][n]<d[1][n]?(v=h,y=c):(v=c,y=h)):o(f,g)&&(d[0][n]<d[1][n]?(v=c,y=h):(v=h,y=c)),v>=0&&(console.log(t+" constraint: "+v+"<"+y),l.push(new e.vpsc.Constraint(u[v],u[y],a)))}var m=new e.vpsc.Solver(u,l);m.solve(),u.forEach(function(e,n){var o=i[n],a=e.position();o[0][t]=o[1][t]=a;var s=r[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)})}},r.nudgeSegments=function(e,t,n,i,o){for(var a=r.getSegmentSets(e,t,n),s=0;s<a.length;s++){for(var u=a[s],l=[],c=0;c<u.segments.length;c++){var h=u.segments[c];l.push({type:0,s:h,pos:Math.min(h[0][n],h[1][n])}),l.push({type:1,s:h,pos:Math.max(h[0][n],h[1][n])})}l.sort(function(e,t){return e.pos-t.pos+e.type-t.type});var d=[],p=0;l.forEach(function(a){0===a.type?(d.push(a.s),p++):p--,0==p&&(r.nudgeSegs(t,n,e,d,i,o),d=[])})}},r.prototype.routeEdges=function(e,t,n){var r=this,i=e.map(function(e){return r.route(t(e),n(e))});return i},r.angleBetween2Lines=function(e,t){var n=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),r=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},r.isLeft=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)<=0},r.getOrder=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];"undefined"==typeof t[r.l]&&(t[r.l]={}),t[r.l][r.r]=!0}return function(e,n){return"undefined"!=typeof t[e]&&t[e][n]}},r.orderEdges=function(t){for(var n=[],i=0;i<t.length-1;i++)for(var o=i+1;o<t.length;o++){var a=t[i],s=t[o],u=new e.LongestCommonSubsequence(a,s);if(u.reversed){u.s.forEach(function(e,t){console.log("s["+t+"]="+e.id)}),u.t.forEach(function(e,t){console.log("t["+t+"]="+e.id)});var l=a[u.si],c=a[u.si-1],h=s[u.ti+u.length];n.push(r.isLeft(l,c,h)?{l:o,r:i}:{l:i,r:o})}else{var l=a[u.si+u.length-2],c=a[u.si+u.length],h=s[u.ti+u.length];n.push(r.isLeft(l,c,h)?{l:o,r:i}:{l:i,r:o})}}return n.forEach(function(e){console.log("l:"+e.l+",r:"+e.r)}),e.GridRouter.getOrder(n)},r.makeSegments=function(e){function t(e){return{x:e.x,y:e.y}}for(var n=function(e,t,n){return Math.abs((t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x))<.001},r=[],i=t(e[0]),o=1;o<e.length;o++){var a=t(e[o]),s=o<e.length-1?e[o+1]:null;s&&n(i,a,s)||(r.push([i,a]),i=a)}return r},r.prototype.route=function(t,n){var r=this,i=this.nodes[t],o=this.nodes[n];this.obstacles=this.siblingObstacles(i,o);var a={};this.obstacles.forEach(function(e){return a[e.id]=e}),this.passableEdges=this.edges.filter(function(e){var t=r.verts[e.source],n=r.verts[e.target];return!(t.node&&t.node.id in a||n.node&&n.node.id in a)});for(var s=1;s<i.ports.length;s++){var u=i.ports[0].id,l=i.ports[s].id;this.passableEdges.push({source:u,target:l,length:0})}for(var s=1;s<o.ports.length;s++){var u=o.ports[0].id,l=o.ports[s].id;this.passableEdges.push({source:u,target:l,length:0})}for(var c=function(e){return e.source},h=function(e){return e.target},d=function(e){return e.length},p=new e.shortestpaths.Calculator(this.verts.length,this.passableEdges,c,h,d),f=function(e,t,n){var a=r.verts[e],s=r.verts[t],u=r.verts[n],l=Math.abs(u.x-a.x),c=Math.abs(u.y-a.y);return a.node===i&&a.node===s.node||s.node===o&&s.node===u.node?0:l>1&&c>1?1e3:0},g=p.PathFromNodeToNodeWithPrevCost(i.ports[0].id,o.ports[0].id,f),v=[],s=0;s<g.length;s++){var y=0===s?this.nodes[o.id].ports[0]:this.verts[g[s-1]],m=this.verts[g[s]];(y.node!==i||m.node!==i)&&(y.node!==o||m.node!==o)&&v.push([y,m])}for(var b=[],y=v[0][0],s=0;s<v.length;s++){var m=v[s][1],w=s<v.length-1?v[s+1][1]:null;(!w||w&&f(y.id,m.id,w.id)>0)&&(b.push([y,m]),y=m)}b=v;var x=b.map(function(e){return[{x:e[1].x,y:e[1].y},{x:e[0].x,y:e[0].y}]});return x.reverse(),x},r}();e.GridRouter=i}(cola||(cola={}));var cola;!function(e){function t(e,t){var n={};for(var r in e)n[r]={};for(var r in t)n[r]={};return Object.keys(n).length}function n(e,t){var n=0;for(var r in e)"undefined"!=typeof t[r]&&++n;return n}function r(e,t){var n={},r=function(e,t){"undefined"==typeof n[e]&&(n[e]={}),n[e][t]={}};return e.forEach(function(e){var n=t.getSourceIndex(e),i=t.getTargetIndex(e);r(n,i),r(i,n)}),n}function i(e,t,n,i){var o=r(e,i);e.forEach(function(e){var r=o[i.getSourceIndex(e)],a=o[i.getTargetIndex(e)];i.setLength(e,1+t*n(r,a))})}function o(e,r,o){"undefined"==typeof o&&(o=1),i(e,o,function(e,r){return Math.sqrt(t(e,r)-n(e,r))},r)}function a(e,r,o){"undefined"==typeof o&&(o=1),i(e,o,function(e,r){return Math.min(Object.keys(e).length,Object.keys(r).length)<1.1?0:n(e,r)/t(e,r)},r)}function s(e,t,n,r){var i=u(e,t,r),o={};i.filter(function(e){return e.length>1}).forEach(function(e){return e.forEach(function(t){return o[t]=e})});var a=[];return t.forEach(function(e){var t=r.getSourceIndex(e),i=r.getTargetIndex(e),s=o[t],u=o[i];s&&u&&s.component===u.component||a.push({axis:n,left:t,right:i,gap:r.getMinSeparation(e)})}),a}function u(e,t,n){function r(e){o[e]=l,a[e]=l,s[e]=!0,l+=1,c.push(e);for(var t=i[e],n=0;n<t.length;++n){var u=t[n];o[u]<0?(r(u),a[e]=0|Math.min(a[e],a[u])):s[u]&&(a[e]=Math.min(a[e],a[u]))}if(a[e]===o[e]){for(var d=[],n=c.length-1;n>=0;--n){var p=c[n];if(s[p]=!1,d.push(p),p===e){c.length=n;break}}h.push(d)}}for(var i=new Array(e),o=new Array(e),a=new Array(e),s=new Array(e),u=0;e>u;++u)i[u]=[],o[u]=-1,a[u]=0,s[u]=!1;for(var u=0;u<t.length;++u)i[n.getSourceIndex(t[u])].push(n.getTargetIndex(t[u]));for(var l=0,c=[],h=[],u=0;e>u;++u)o[u]<0&&r(u);return h}e.symmetricDiffLinkLengths=o,e.jaccardLinkLengths=a,e.generateDirectedEdgeConstraints=s}(cola||(cola={}));var cola;!function(e){!function(e){function t(e,n,r){e.forAll(function(e){if(e.isLeaf())n.leaves||(n.leaves=[]),n.leaves.push(e.id);else{var i=n;e.gid=r.length,e.isIsland()||(i={id:e.gid},n.groups||(n.groups=[]),n.groups.push(e.gid),r.push(i)),t(e.children,i,r)}})}function n(e,t){var n={};for(var r in e)r in t&&(n[r]=e[r]);return n}function r(t,n,r){for(var i=t.length,o=new e.Configuration(i,n,r);o.greedyMerge(););var a=[],s=o.getGroupHierarchy(a);return a.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:s,powerEdges:a}}var i=function(){function e(e,t,n){this.source=e,this.target=t,this.type=n}return e}();e.PowerEdge=i;var o=function(){function e(e,t,n){var r=this;this.linkAccessor=n,this.modules=new Array(e),this.roots=new s;for(var i=0;e>i;++i)this.roots.add(this.modules[i]=new a(i));this.R=t.length,t.forEach(function(e){var t=r.modules[n.getSourceIndex(e)],i=r.modules[n.getTargetIndex(e)],o=n.getType(e);t.outgoing.add(o,i),i.incoming.add(o,t)})}return e.prototype.merge=function(e,t){var n=e.incoming.intersection(t.incoming),r=e.outgoing.intersection(t.outgoing),i=new s;i.add(e),i.add(t);var o=new a(this.modules.length,r,n,i);this.modules.push(o);var u=function(n,r,i){n.forAll(function(n,a){n.forAll(function(n){var s=n[r];s.add(a,o),s.remove(a,e),s.remove(a,t),e[i].remove(a,n),t[i].remove(a,n)})})};return u(r,"incoming","outgoing"),u(n,"outgoing","incoming"),this.R-=n.count()+r.count(),this.roots.remove(e),this.roots.remove(t),this.roots.add(o),o},e.prototype.rootMerges=function(){for(var e=this.roots.modules(),t=e.length,n=new Array(t*(t-1)),r=0,i=0,o=t-1;o>i;++i)for(var a=i+1;t>a;++a){var s=e[i],u=e[a];n[r++]={nEdges:this.nEdges(s,u),a:s,b:u}}return n},e.prototype.greedyMerge=function(){var e=this.rootMerges().sort(function(e,t){return e.nEdges-t.nEdges}),t=e[0];return t.nEdges>=this.R?!1:(this.merge(t.a,t.b),!0)},e.prototype.nEdges=function(e,t){var n=e.incoming.intersection(t.incoming),r=e.outgoing.intersection(t.outgoing);return this.R-n.count()-r.count()},e.prototype.getGroupHierarchy=function(e){var n=this,r=[],o={};t(this.roots,o,r);var a=this.allEdges();return a.forEach(function(t){var o=n.modules[t.source],a=n.modules[t.target];e.push(new i("undefined"==typeof o.gid?t.source:r[o.gid],"undefined"==typeof a.gid?t.target:r[a.gid],t.type))}),r},e.prototype.allEdges=function(){var t=[];return e.getEdges(this.roots,t),t},e.getEdges=function(t,n){t.forAll(function(t){t.getEdges(n),e.getEdges(t.children,n)})},e}();e.Configuration=o;var a=function(){function e(e,t,n,r){"undefined"==typeof t&&(t=new u),"undefined"==typeof n&&(n=new u),"undefined"==typeof r&&(r=new s),this.id=e,this.outgoing=t,this.incoming=n,this.children=r}return e.prototype.getEdges=function(e){var t=this;this.outgoing.forAll(function(n,r){n.forAll(function(n){e.push(new i(t.id,n.id,r))})})},e.prototype.isLeaf=function(){return 0===this.children.count()},e.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},e}();e.Module=a;var s=function(){function e(){this.table={}}return e.prototype.count=function(){return Object.keys(this.table).length},e.prototype.intersection=function(t){var r=new e;return r.table=n(this.table,t.table),r},e.prototype.intersectionCount=function(e){return this.intersection(e).count()},e.prototype.contains=function(e){return e in this.table},e.prototype.add=function(e){this.table[e.id]=e},e.prototype.remove=function(e){delete this.table[e.id]},e.prototype.forAll=function(e){for(var t in this.table)e(this.table[t])},e.prototype.modules=function(){var e=[];return this.forAll(function(t){return e.push(t)}),e},e}();e.ModuleSet=s;var u=function(){function e(){this.sets={},this.n=0}return e.prototype.count=function(){return this.n},e.prototype.contains=function(e){var t=!1;return this.forAllModules(function(n){t||n.id!=e||(t=!0)}),t},e.prototype.add=function(e,t){var n=e in this.sets?this.sets[e]:this.sets[e]=new s;n.add(t),++this.n},e.prototype.remove=function(e,t){var n=this.sets[e];n.remove(t),0===n.count()&&delete this.sets[e],--this.n},e.prototype.forAll=function(e){for(var t in this.sets)e(this.sets[t],t)},e.prototype.forAllModules=function(e){this.forAll(function(t,n){return t.forAll(e)})},e.prototype.intersection=function(t){var n=new e;return this.forAll(function(e,r){if(r in t.sets){var i=e.intersection(t.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},e}();e.LinkSets=u,e.getGroups=r}(e.powergraph||(e.powergraph={}));e.powergraph}(cola||(cola={}));var cola;!function(e){function t(e){e.fixed|=2,e.px=e.x,e.py=e.y}function n(e){e.fixed&=-7}function r(e){e.fixed|=4,e.px=e.x,e.py=e.y}function a(e){e.fixed&=-5}return e.d3adaptor=function(){var r=d3.dispatch("start","tick","end"),i=e.adaptor({trigger:function(e){r[e.type](e)},on:function(e,t){return r.on(e,t)},kick:function(e){d3.timer(e)},drag:function(){var e=d3.behavior.drag().origin(function(e){return e}).on("dragstart.d3adaptor",t).on("drag.d3adaptor",function(e){e.px=d3.event.x,e.py=d3.event.y,i.resume()}).on("dragend.d3adaptor",n);return arguments.length?void this.call(e):e}});return i},e.adaptor=function(s){function u(e){return"function"==typeof b?+b.call(null,e):b}function l(e,t){e.length=t}function c(e){return"function"==typeof w?w(e):0}function h(e){return"number"==typeof e.source?e.source:e.source.index}function d(e){return"number"==typeof e.target?e.target:e.target.index}var p,f,g={},v=s.trigger,y=s.kick,m=[1,1],b=20,w=null,x=!1,_=!0,E=!1,k=[],S=[],T=[],C=null,N=[],A=[],P=null,D=null,$=null,M=.01,I=10,O=null;g.on=s.on,g.drag=s.drag,g.dragstart=t,g.dragend=n,g.mouseover=r,g.mouseout=a,g.tick=function(){if(M>p)return v({type:"end",alpha:p=0}),delete f,E=!1,!0;{var e,t=k.length;N.length}for(D.locks.clear(),i=0;i<t;++i)if(e=k[i],e.fixed){("undefined"==typeof e.px||"undefined"==typeof e.py)&&(e.px=e.x,e.py=e.y);var n=[e.px,e.py];D.locks.add(i,n)}var r=D.rungeKutta();for(0===r?p=0:"undefined"!=typeof f&&(p=Math.abs(Math.abs(f/r)-1)),f=r,i=0;i<t;++i)e=k[i],e.fixed?(e.x=e.px,e.y=e.py):(e.x=D.x[0][i],e.y=D.x[1][i]);v({type:"tick",alpha:p})},g.nodes=function(e){if(!arguments.length){if(0===k.length&&N.length>0){var t=0;N.forEach(function(e){t=Math.max(t,e.source,e.target)}),k=new Array(++t);for(var n=0;t>n;++n)k[n]={}}return k}return k=e,g},g.groups=function(e){return arguments.length?(S=e,C={},S.forEach(function(e){"undefined"==typeof e.padding&&(e.padding=1),"undefined"!=typeof e.leaves&&e.leaves.forEach(function(t,n){(e.leaves[n]=k[t]).parent=e}),"undefined"!=typeof e.groups&&e.groups.forEach(function(t,n){(e.groups[n]=S[t]).parent=e})}),C.leaves=k.filter(function(e){return"undefined"==typeof e.parent}),C.groups=S.filter(function(e){return"undefined"==typeof e.parent}),g):S},g.powerGraphGroups=function(t){var n=e.powergraph.getGroups(k,N,L);return this.groups(n.groups),t(n),g},g.avoidOverlaps=function(e){return arguments.length?(x=e,g):x},g.handleDisconnected=function(e){return arguments.length?(_=e,g):_},g.flowLayout=function(e,t){return arguments.length||(e="y"),$={axis:e,getMinSeparation:"number"==typeof t?function(){return t}:t},g},g.links=function(e){return arguments.length?(N=e,g):N},g.constraints=function(e){return arguments.length?(A=e,g):A},g.distanceMatrix=function(e){return arguments.length?(P=e,g):P},g.size=function(e){return arguments.length?(m=e,g):m},g.defaultNodeSize=function(e){return arguments.length?(I=e,g):I},g.linkDistance=function(e){return arguments.length?(b="function"==typeof e?e:+e,g):"function"==typeof b?b():b},g.linkType=function(e){return w=e,g},g.convergenceThreshold=function(e){return arguments.length?(M="function"==typeof e?e:+e,g):M},g.alpha=function(e){return arguments.length?(e=+e,p?p=e>0?e:0:e>0&&(E||(E=!0,v({type:"start",alpha:p=e}),y(g.tick))),g):p};var L={getSourceIndex:h,getTargetIndex:d,setLength:l,getType:c};return g.symmetricDiffLinkLengths=function(t,n){return e.symmetricDiffLinkLengths(N,L,n),this.linkDistance(function(e){return t*e.length}),g},g.jaccardLinkLengths=function(t,n){return e.jaccardLinkLengths(N,L,n),this.linkDistance(function(e){return t*e.length}),g},g.start=function(){var t,n=this.nodes().length,r=n+2*S.length,i=(N.length,m[0]),a=m[1],s=new Array(r),l=new Array(r);T=new Array(r);var c=null,p=this.avoidOverlaps();k.forEach(function(e,t){e.index=t,"undefined"==typeof e.x&&(e.x=i/2,e.y=a/2),s[t]=e.x,l[t]=e.y});var f;P?f=P:(f=new e.shortestpaths.Calculator(r,N,h,d,u).DistanceMatrix(),c=e.Descent.createSquareMatrix(r,function(){return 2}),N.forEach(function(e){var t=h(e),n=d(e);c[t][n]=c[n][t]=1}));var v=e.Descent.createSquareMatrix(r,function(e,t){return f[e][t]});if(C&&"undefined"!=typeof C.groups){var t=n;S.forEach(function(e){c[t][t+1]=c[t+1][t]=1e-6,v[t][t+1]=v[t+1][t]=.1,s[t]=0,l[t++]=0,s[t]=0,l[t++]=0})}else C={leaves:k,groups:[]};var y=A||[];$&&(L.getMinSeparation=$.getMinSeparation,y=y.concat(e.generateDirectedEdgeConstraints(n,N,$.axis,L)));var b=arguments.length>0?arguments[0]:0,w=arguments.length>1?arguments[1]:0,x=arguments.length>2?arguments[2]:0;for(this.avoidOverlaps(!1),D=new e.Descent([s,l],v),D.locks.clear(),t=0;n>t;++t)if(o=k[t],o.fixed){o.px=o.x,o.py=o.y;var E=[o.x,o.y];D.locks.add(t,E)}return D.threshold=M,D.run(b),y.length>0&&(D.project=new e.vpsc.Projection(k,S,C,y).projectFunctions()),D.run(w),this.avoidOverlaps(p),p&&(k.forEach(function(e,t){e.x=s[t],e.y=l[t]}),D.project=new e.vpsc.Projection(k,S,C,y,!0).projectFunctions(),k.forEach(function(e,t){s[t]=e.x,l[t]=e.y})),D.G=c,D.run(x),N.forEach(function(e){"number"==typeof e.source&&(e.source=k[e.source]),"number"==typeof e.target&&(e.target=k[e.target])}),k.forEach(function(e,t){e.x=s[t],e.y=l[t]}),!P&&_&&(e.applyPacking(e.separateGraphs(k,N),i,a,I),k.forEach(function(e,t){D.x[0][t]=e.x,D.x[1][t]=e.y})),g.resume()},g.resume=function(){return g.alpha(.1)},g.stop=function(){return g.alpha(0)},g.prepareEdgeRouting=function(t){O=new e.geom.TangentVisibilityGraph(k.map(function(e){return e.bounds.inflate(-t).vertices()}))},g.routeEdge=function(t,n){var r=[],i=new e.geom.TangentVisibilityGraph(O.P,{V:O.V,E:O.E}),o={x:t.source.x,y:t.source.y},a={x:t.target.x,y:t.target.y},s=i.addPoint(o,t.source.id),u=i.addPoint(a,t.target.id);i.addEdgeIfVisible(o,a,t.source.id,t.target.id),"undefined"!=typeof n&&n(i);var l=function(e){return e.source.id},c=function(e){return e.target.id},h=function(e){return e.length()},d=new e.shortestpaths.Calculator(i.V.length,i.E,l,c,h),p=d.PathFromNodeToNode(s.id,u.id);if(1===p.length||p.length===i.V.length)e.vpsc.makeEdgeBetween(t,t.source.innerBounds,t.target.innerBounds,5),r=[{x:t.sourceIntersection.x,y:t.sourceIntersection.y},{x:t.arrowStart.x,y:t.arrowStart.y}];else{for(var f=p.length-2,g=i.V[p[f]].p,v=i.V[p[0]].p,r=[t.source.innerBounds.rayIntersection(g.x,g.y)],y=f;y>=0;--y)r.push(i.V[p[y]].p);r.push(e.vpsc.makeEdgeTo(v,t.target.innerBounds,5))}return r},g.linkId=function(e){return h(e)+"-"+d(e)},g},e}(cola||(cola={})),RBTree=function(e){var t=function(e){var n=t.m[e];if(n.mod)return n.mod.exports;var r=n.mod={exports:{}};return n(r,r.exports),r.exports};return t.m={},t.m["./treebase"]=function(e,t){function n(){}function r(e){this._tree=e,this._ancestors=[],this._cursor=null}n.prototype.clear=function(){this._root=null,this.size=0},n.prototype.find=function(e){for(var t=this._root;null!==t;){var n=this._comparator(e,t.data);if(0===n)return t.data;t=t.get_child(n>0)}return null},n.prototype.findIter=function(e){for(var t=this._root,n=this.iterator();null!==t;){var r=this._comparator(e,t.data);if(0===r)return n._cursor=t,n;n._ancestors.push(t),t=t.get_child(r>0)}return null},n.prototype.lowerBound=function(e){return this._bound(e,this._comparator)},n.prototype.upperBound=function(e){function t(e,t){return n(t,e)}var n=this._comparator;return this._bound(e,t)},n.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},n.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},n.prototype.iterator=function(){return new r(this)},n.prototype.each=function(e){for(var t,n=this.iterator();null!==(t=n.next());)e(t)},n.prototype.reach=function(e){for(var t,n=this.iterator();null!==(t=n.prev());)e(t)},n.prototype._bound=function(e,t){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(e,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(n=r._ancestors[o],t(e,n.data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},r.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},r.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else if(null===this._cursor.right){var t;do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},r.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else if(null===this._cursor.left){var t;do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},r.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},r.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e.exports=n},t.m.__main__=function(e,n){function r(e){this.data=e,this.left=null,this.right=null,this.red=!0}function i(e){this._root=null,this._comparator=e,this.size=0}function o(e){return null!==e&&e.red}function a(e,t){var n=e.get_child(!t);return e.set_child(!t,n.get_child(t)),n.set_child(t,e),e.red=!0,n.red=!1,n}function s(e,t){return e.set_child(!t,a(e.get_child(!t),!t)),a(e,t)}var u=t("./treebase");r.prototype.get_child=function(e){return e?this.right:this.left},r.prototype.set_child=function(e,t){e?this.right=t:this.left=t},i.prototype=new u,i.prototype.insert=function(e){var t=!1;if(null===this._root)this._root=new r(e),t=!0,this.size++;else{var n=new r(void 0),i=0,u=0,l=null,c=n,h=null,d=this._root;for(c.right=this._root;;){if(null===d?(d=new r(e),h.set_child(i,d),t=!0,this.size++):o(d.left)&&o(d.right)&&(d.red=!0,d.left.red=!1,d.right.red=!1),o(d)&&o(h)){var p=c.right===l;d===h.get_child(u)?c.set_child(p,a(l,!u)):c.set_child(p,s(l,!u))}var f=this._comparator(d.data,e);if(0===f)break;u=i,i=0>f,null!==l&&(c=l),l=h,h=d,d=d.get_child(i)}this._root=n.right}return this._root.red=!1,t},i.prototype.remove=function(e){if(null===this._root)return!1;var t=new r(void 0),n=t;n.right=this._root;for(var i=null,u=null,l=null,c=1;null!==n.get_child(c);){var h=c;u=i,i=n,n=n.get_child(c);var d=this._comparator(e,n.data);if(c=d>0,0===d&&(l=n),!o(n)&&!o(n.get_child(c)))if(o(n.get_child(!c))){var p=a(n,c);i.set_child(h,p),i=p}else if(!o(n.get_child(!c))){var f=i.get_child(!h);if(null!==f)if(o(f.get_child(!h))||o(f.get_child(h))){var g=u.right===i;o(f.get_child(h))?u.set_child(g,s(i,h)):o(f.get_child(!h))&&u.set_child(g,a(i,h));var v=u.get_child(g);v.red=!0,n.red=!0,v.left.red=!1,v.right.red=!1}else i.red=!1,f.red=!0,n.red=!0}}return null!==l&&(l.data=n.data,i.set_child(i.right===n,n.get_child(null===n.left)),this.size--),this._root=t.right,null!==this._root&&(this._root.red=!1),null!==l},e.exports=i},t("__main__")}(window);var cola;!function(e){var t={};return t.PADDING=10,t.GOLDEN_SECTION=(1+Math.sqrt(5))/2,t.FLOAT_EPSILON=1e-4,t.MAX_INERATIONS=100,e.applyPacking=function(e,n,r,i,o){function a(e){function t(e){var t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=0,o=0;e.array.forEach(function(e){var a="undefined"!=typeof e.width?e.width:i,s="undefined"!=typeof e.height?e.height:i;a/=2,s/=2,r=Math.max(e.x+a,r),t=Math.min(e.x-a,t),o=Math.max(e.y+s,o),n=Math.min(e.y-s,n)}),e.width=r-t,e.height=o-n}e.forEach(function(e){t(e)})}function s(e){e.forEach(function(e){var t={x:0,y:0};e.array.forEach(function(e){t.x+=e.x,t.y+=e.y}),t.x/=e.array.length,t.y/=e.array.length;var n={x:t.x-e.width/2,y:t.y-e.height/2},r={x:e.x-n.x,y:e.y-n.y};e.array.forEach(function(e){e.x=e.x+r.x+g/2-y/2,e.y=e.y+r.y+v/2-m/2})})}function u(e,n){var r=Number.POSITIVE_INFINITY,i=0;e.sort(function(e,t){return t.height-e.height}),b=e.reduce(function(e,t){return e.width<t.width?e.width:t.width});for(var o=g=b,a=v=h(e),s=0,u=Number.MAX_VALUE,c=Number.MAX_VALUE,d=-1,p=Number.MAX_VALUE,f=Number.MAX_VALUE;p>b||f>t.FLOAT_EPSILON;){if(1!=d)var g=a-(a-o)/t.GOLDEN_SECTION,u=l(e,g);if(0!=d)var v=o+(a-o)/t.GOLDEN_SECTION,c=l(e,v);if(p=Math.abs(g-v),f=Math.abs(u-c),r>u&&(r=u,i=g),r>c&&(r=c,i=v),u>c?(o=g,g=v,u=c,d=1):(a=v,v=g,c=u,d=0),s++>100)break}l(e,i)}function l(e,t){x=[],y=0,m=0,w=f;for(var n=0;n<e.length;n++){var r=e[n];c(r,t)}return Math.abs(d()-o)}function c(e,n){for(var r=void 0,i=0;i<x.length;i++)if(x[i].space_left>=e.height&&x[i].x+x[i].width+e.width+t.PADDING-n<=t.FLOAT_EPSILON){r=x[i];break}x.push(e),void 0!==r?(e.x=r.x+r.width+t.PADDING,e.y=r.bottom,e.space_left=e.height,e.bottom=e.y,r.space_left-=e.height+t.PADDING,r.bottom+=e.height+t.PADDING):(e.y=w,w+=e.height+t.PADDING,e.x=p,e.bottom=e.y,e.space_left=e.height),e.y+e.height-m>-t.FLOAT_EPSILON&&(m=e.y+e.height-f),e.x+e.width-y>-t.FLOAT_EPSILON&&(y=e.x+e.width-p)}function h(e){var n=0;return e.forEach(function(e){return n+=e.width+t.PADDING}),n}function d(){return y/m}var p=0,f=0,g=n,v=r,o="undefined"!=typeof o?o:1,i="undefined"!=typeof i?i:0,y=0,m=0,b=0,w=0,x=[];0!=e.length&&(a(e),u(e),s(e))},e.separateGraphs=function(e,t){function n(e,t){if(void 0===r[e.index]){t&&(o++,graphs.push({array:[]})),r[e.index]=o,graphs[o-1].array.push(e);var a=i[e.index];if(a)for(var s=0;s<a.length;s++)n(a[s],!1)}}var r={},i={};graphs=[];for(var o=0,a=0;a<t.length;a++){var s=t[a],u=s.source,l=s.target;i[u.index]?i[u.index].push(l):i[u.index]=[l],i[l.index]?i[l.index].push(u):i[l.index]=[u];

}for(var a=0;a<e.length;a++){var c=e[a];r[c.index]||n(c,!0)}return graphs},e}(cola||(cola={})),function(){var e,t,n,r,i,o,a,s,u,l,c,h={}.hasOwnProperty,d=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};if(c=function(){function e(){throw new Error("Not implemented. Did you mean to use Dropbox.Client?")}return e}(),c.Util=function(){function e(){}return e}(),c.Http=function(){function e(){}return e}(),c.File=function(){function e(){}return e}(),"undefined"!=typeof global&&"undefined"!=typeof module&&"exports"in module)t=global,n=module.require.bind(module),module.exports=c;else if("undefined"!=typeof window&&"undefined"!=typeof navigator)t=window,n=null,window.Dropbox&&!function(){var e,t,n,r;n=window.Dropbox,r=[];for(e in n)h.call(n,e)&&(t=n[e],r.push(c[e]=t));return r}(),window.Dropbox=c;else{if("undefined"==typeof self||"undefined"==typeof navigator)throw new Error("dropbox.js loaded in an unsupported JavaScript environment.");t=self,n=self.importScripts.bind(self),self.Dropbox=c}if(c.Env=function(){function e(){}return e.global=t,e.require=n,e}(),c.Util.EventSource=function(){function e(e){this._cancelable=e&&e.cancelable,this._listeners=[]}return e.prototype.addListener=function(e){if("function"!=typeof e)throw new TypeError("Invalid listener type; expected function");return d.call(this._listeners,e)<0&&this._listeners.push(e),this},e.prototype.removeListener=function(e){var t,n,r,i,o,a;if(this._listeners.indexOf)n=this._listeners.indexOf(e),-1!==n&&this._listeners.splice(n,1);else for(a=this._listeners,t=i=0,o=a.length;o>i;t=++i)if(r=a[t],r===e){this._listeners.splice(t,1);break}return this},e.prototype.dispatch=function(e){var t,n,r,i,o;for(o=this._listeners,r=0,i=o.length;i>r;r++)if(t=o[r],n=t(e),this._cancelable&&n===!1)return!1;return!0},e}(),c.AccountInfo=function(){function e(e){var t;this._json=e,this.name=e.display_name,this.email=e.email,this.countryCode=e.country||null,this.uid=e.uid.toString(),e.public_app_url?(this.publicAppUrl=e.public_app_url,t=this.publicAppUrl.length-1,t>=0&&"/"===this.publicAppUrl.substring(t)&&(this.publicAppUrl=this.publicAppUrl.substring(0,t))):this.publicAppUrl=null,this.referralUrl=e.referral_link,this.quota=e.quota_info.quota,this.privateBytes=e.quota_info.normal||0,this.sharedBytes=e.quota_info.shared||0,this.usedQuota=this.privateBytes+this.sharedBytes}return e.parse=function(e){return e&&"object"==typeof e?new c.AccountInfo(e):e},e.prototype.name=null,e.prototype.email=null,e.prototype.countryCode=null,e.prototype.uid=null,e.prototype.referralUrl=null,e.prototype.publicAppUrl=null,e.prototype.quota=null,e.prototype.usedQuota=null,e.prototype.privateBytes=null,e.prototype.sharedBytes=null,e.prototype.json=function(){return this._json},e}(),c.ApiError=function(){function e(e,t,n){var r,i;if(this.method=t,this.url=n,this.status=e.status,e.responseType)try{r=e.response||e.responseText}catch(o){i=o;try{r=e.responseText}catch(o){i=o,r=null}}else try{r=e.responseText}catch(o){i=o,r=null}if(r)try{this.responseText=r.toString(),this.response=JSON.parse(r)}catch(o){i=o,this.response=null}else this.responseText="(no response)",this.response=null}return e.prototype.status=null,e.prototype.method=null,e.prototype.url=null,e.prototype.responseText=null,e.prototype.response=null,e.NETWORK_ERROR=0,e.NO_CONTENT=304,e.INVALID_PARAM=400,e.INVALID_TOKEN=401,e.OAUTH_ERROR=403,e.NOT_FOUND=404,e.INVALID_METHOD=405,e.NOT_ACCEPTABLE=406,e.CONFLICT=409,e.RATE_LIMITED=429,e.SERVER_ERROR=503,e.OVER_QUOTA=507,e.prototype.toString=function(){return"Dropbox API error "+this.status+" from "+this.method+" "+this.url+" :: "+this.responseText},e.prototype.inspect=function(){return this.toString()},e}(),c.AuthDriver=function(){function e(){}return e.prototype.authType=function(){return"code"},e.prototype.url=function(){return"https://some.url"},e.prototype.doAuthorize=function(e,t,n,r){return r({code:"access-code"})},e.prototype.getStateParam=function(e,t){return t(c.Util.Oauth.randomAuthStateParam())},e.prototype.resumeAuthorize=function(e,t,n){return n({code:"access-code"})},e.prototype.onAuthStateChange=function(e,t){return t()},e.oauthQueryParams=["access_token","expires_in","scope","token_type","code","error","error_description","error_uri","mac_key","mac_algorithm"].sort(),e}(),c.AuthDriver.autoConfigure=function(e){if("undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id)return void e.authDriver(chrome.tabs&&chrome.tabs.create?new c.AuthDriver.ChromeExtension:new c.AuthDriver.ChromeApp);if("undefined"!=typeof window){if(window.cordova)return void e.authDriver(new c.AuthDriver.Cordova);window&&window.navigator&&e.authDriver(new c.AuthDriver.Redirect)}},c.AuthDriver.BrowserBase=function(){function e(e){e?(this.rememberUser="rememberUser"in e?e.rememberUser:!0,this.scope=e.scope||"default"):(this.rememberUser=!0,this.scope="default"),this.storageKey=null,this.storage=c.AuthDriver.BrowserBase.localStorage(),this.stateRe=/^[^#]+\#(.*&)?state=([^&]+)(&|$)/}return e.prototype.authType=function(){return"token"},e.prototype.onAuthStepChange=function(e,t){var n=this;switch(this.setStorageKey(e),e.authStep){case c.Client.RESET:return this.loadCredentials(function(r){return r?(e.setCredentials(r),e.authStep!==c.Client.DONE?t():n.rememberUser?(e.setCredentials(r),t()):n.forgetCredentials(t)):t()});case c.Client.DONE:return this.rememberUser?this.storeCredentials(e.credentials(),t):this.forgetCredentials(t);case c.Client.SIGNED_OUT:return this.forgetCredentials(t);case c.Client.ERROR:return this.forgetCredentials(t);default:return t(),this}},e.prototype.setStorageKey=function(e){return this.storageKey="dropbox-auth:"+this.scope+":"+e.appHash(),this},e.prototype.storeCredentials=function(e,t){var n,r,i,o;n=JSON.stringify(e);try{this.storage.setItem(this.storageKey,n)}catch(a){i=a,r=encodeURIComponent(this.storageKey),o=encodeURIComponent(n),document.cookie=""+r+"="+o+"; path=/"}return t(),this},e.prototype.loadCredentials=function(e){var t,n,r,i,o,a,s;try{r=this.storage.getItem(this.storageKey)}catch(u){s=u,r=null}if(null===r&&(o=encodeURIComponent(this.storageKey),a=o.replace(/[.*+()]/g,"\\$&"),t=new RegExp("(^|(;\\s*))"+o+"=([^;]*)(;|$)"),(i=t.exec(document.cookie))&&(r=decodeURIComponent(i[3]))),!r)return e(null),this;try{e(JSON.parse(r))}catch(u){n=u,e(null)}return this},e.prototype.forgetCredentials=function(e){var t,n,r;try{this.storage.removeItem(this.storageKey)}catch(i){r=i,n=encodeURIComponent(this.storageKey),t=new Date(0).toGMTString(),document.cookie=""+n+"={}; expires="+t+"; path=/"}return e(),this},e.prototype.locationStateParam=function(e){var t,n;return t=e||c.AuthDriver.BrowserBase.currentLocation(),n=this.stateRe.exec(t),n?decodeURIComponent(n[2]):null},e.prototype.replaceUrlBasename=function(e,t){var n,r,i;return r=e.indexOf("#"),-1!==r&&(e=e.substring(0,r)),i=e.indexOf("?"),-1!==i&&(e=e.substring(0,i)),n=e.split("/"),n[n.length-1]=t,n.join("/")},e.localStorage=function(){return"undefined"!=typeof window?window.localStorage:null},e.currentLocation=function(){return window.location.href},e.cleanupLocation=function(){var e,t;window.history&&window.history.replaceState?(t=this.currentLocation(),e=t.indexOf("#"),window.history.replaceState({},document.title,t.substring(0,e))):window.location.hash=""},e}(),c.AuthDriver.Redirect=function(e){function t(e){t.__super__.constructor.call(this,e),this.receiverUrl=this.baseUrl(e)}return p(t,e),t.prototype.baseUrl=function(e){var t,n;if(n=c.AuthDriver.BrowserBase.currentLocation(),e){if(e.redirectUrl)return e.redirectUrl;if(e.redirectFile)return this.replaceUrlBasename(n,e.redirectFile)}return t=n.indexOf("#"),-1!==t&&(n=n.substring(0,t)),n},t.prototype.url=function(){return this.receiverUrl},t.prototype.doAuthorize=function(e,t,n){return this.storeCredentials(n.credentials(),function(){return window.location.assign(e)})},t.prototype.resumeAuthorize=function(e,t,n){var r;return this.locationStateParam()===e?(r=c.AuthDriver.BrowserBase.currentLocation(),c.AuthDriver.BrowserBase.cleanupLocation(),n(c.Util.Oauth.queryParamsFromUrl(r))):this.forgetCredentials(function(){return n({error:"Authorization error"})})},t}(c.AuthDriver.BrowserBase),c.AuthDriver.Popup=function(e){function t(e){t.__super__.constructor.call(this,e),this.receiverUrl=this.baseUrl(e)}return p(t,e),t.prototype.url=function(){return this.receiverUrl},t.prototype.doAuthorize=function(e,t,n,r){return this.listenForMessage(t,r),this.openWindow(e)},t.prototype.baseUrl=function(e){var t;if(t=c.AuthDriver.BrowserBase.currentLocation(),e){if(e.receiverUrl)return e.receiverUrl;if(e.receiverFile)return this.replaceUrlBasename(t,e.receiverFile)}return t},t.prototype.openWindow=function(e){return window.open(e,"_dropboxOauthSigninWindow",this.popupWindowSpec(980,700))},t.prototype.popupWindowSpec=function(e,t){var n,r,i,o,a,s,u,l,c,h;return a=null!=(u=window.screenX)?u:window.screenLeft,s=null!=(l=window.screenY)?l:window.screenTop,o=null!=(c=window.outerWidth)?c:document.documentElement.clientWidth,n=null!=(h=window.outerHeight)?h:document.documentElement.clientHeight,r=Math.round(a+(o-e)/2),i=Math.round(s+(n-t)/2.5),a>r&&(r=a),s>i&&(i=s),"width="+e+",height="+t+","+("left="+r+",top="+i)+"dialog=yes,dependent=yes,scrollbars=yes,location=yes"},t.prototype.listenForMessage=function(e,t){var n,r=this;return n=function(i){var o,a,s;o=i.data?i.data:i;try{s=JSON.parse(o)._dropboxjs_oauth_info}catch(u){return void(a=u)}if(s)return r.locationStateParam(s)===e?(e=!1,window.removeEventListener("message",n),c.AuthDriver.Popup.onMessage.removeListener(n),t(c.Util.Oauth.queryParamsFromUrl(o))):void 0},window.addEventListener("message",n,!1),c.AuthDriver.Popup.onMessage.addListener(n)},t.locationOrigin=function(e){var t;return(t=/^(file:\/\/[^\?\#]*)(\?|\#|$)/.exec(e))?t[1]:(t=/^([^\:]+\:\/\/[^\/\?\#]*)(\/|\?|\#|$)/.exec(e),t?t[1]:e)},t.oauthReceiver=function(){window.addEventListener("load",function(){var e,t,n,r,i,o;if(o=window.location.href,n=JSON.stringify({_dropboxjs_oauth_info:o}),c.AuthDriver.BrowserBase.cleanupLocation(),r=window.opener,window.parent!==window.top&&(r||(r=window.parent)),r){try{i=window.location.origin||locationOrigin(o),r.postMessage(n,i),window.close()}catch(a){t=a}try{return r.Dropbox.AuthDriver.Popup.onMessage.dispatch(n),window.close()}catch(a){e=a}}})},t.onMessage=new c.Util.EventSource,t}(c.AuthDriver.BrowserBase),c.AuthDriver.ChromeBase=function(e){function t(e){t.__super__.constructor.call(this,e),this.storageKey="dropbox_js_"+this.scope+"_credentials"}return p(t,e),t.prototype.onAuthStepChange=function(e,t){switch(e.authStep){case c.Client.RESET:return this.loadCredentials(function(n){return n&&e.setCredentials(n),t()});case c.Client.DONE:return this.storeCredentials(e.credentials(),t);case c.Client.SIGNED_OUT:return this.forgetCredentials(t);case c.Client.ERROR:return this.forgetCredentials(t);default:return t()}},t.prototype.url=function(){return this.receiverUrl},t.prototype.storeCredentials=function(e,t){var n;return n={},n[this.storageKey]=e,chrome.storage.local.set(n,t),this},t.prototype.loadCredentials=function(e){var t=this;return chrome.storage.local.get(this.storageKey,function(n){return e(n[t.storageKey]||null)}),this},t.prototype.forgetCredentials=function(e){return chrome.storage.local.remove(this.storageKey,e),this},t}(c.AuthDriver.BrowserBase),c.AuthDriver.ChromeApp=function(e){function t(e){t.__super__.constructor.call(this,e),this.receiverUrl="https://"+chrome.runtime.id+".chromiumapp.org/"}return p(t,e),t.prototype.doAuthorize=function(e,t,n,r){var i=this;return chrome.identity.launchWebAuthFlow({url:e,interactive:!0},function(e){return i.locationStateParam(e)===t?(t=!1,r(c.Util.Oauth.queryParamsFromUrl(e))):void 0})},t}(c.AuthDriver.ChromeBase),c.AuthDriver.ChromeExtension=function(e){function t(e){var n;t.__super__.constructor.call(this,e),n=e&&e.receiverPath||"chrome_oauth_receiver.html",this.receiverUrl=chrome.runtime.getURL(n)}return p(t,e),t.prototype.doAuthorize=function(e,t,n,r){var i,o,a=this;return o=null,i=function(e,n){var s;if((!n||!n.tab||n.tab.url.substring(0,a.receiverUrl.length)===a.receiverUrl)&&e.dropbox_oauth_receiver_href)return s=e.dropbox_oauth_receiver_href,a.locationStateParam(s)===t?(t=!1,o&&chrome.tabs.remove(o.id),chrome.runtime.onMessage.removeListener(i),r(c.Util.Oauth.queryParamsFromUrl(s))):void 0},chrome.runtime.onMessage.addListener(i),chrome.tabs.create({url:e,active:!0,pinned:!1},function(e){return o=e})},t.oauthReceiver=function(){return window.addEventListener("load",function(){var e;return e=window.location.href,window.location.hash="",chrome.runtime.sendMessage({dropbox_oauth_receiver_href:e}),window.close?window.close():void 0})},t}(c.AuthDriver.ChromeBase),c.AuthDriver.Cordova=function(e){function t(e){t.__super__.constructor.call(this,e)}return p(t,e),t.prototype.url=function(){return"https://www.dropbox.com/1/oauth2/redirect_receiver"},t.prototype.doAuthorize=function(e,t,n,r){var i,o,a,s,u,l=this;return o=window.open(e,"_blank","location=yes,closebuttoncaption=Cancel"),s=!1,i=/^[^\/]*\/\/[^\/]*\//.exec(e)[0],u=!1,a=function(e){if(e.url&&l.locationStateParam(e.url)===t){if(u)return;return o.removeEventListener("loadstart",a),o.removeEventListener("loaderror",a),o.removeEventListener("loadstop",a),o.removeEventListener("exit",a),u=!0,window.setTimeout(function(){return o.close()},10),void r(c.Util.Oauth.queryParamsFromUrl(e.url))}if("exit"===e.type){if(u)return;o.removeEventListener("loadstart",a),o.removeEventListener("loaderror",a),o.removeEventListener("loadstop",a),o.removeEventListener("exit",a),u=!0,r(new AuthError("error=access_denied&error_description=User+closed+browser+window"))}},o.addEventListener("loadstart",a),o.addEventListener("loaderror",a),o.addEventListener("loadstop",a),o.addEventListener("exit",a)},t}(c.AuthDriver.BrowserBase),c.AuthDriver.NodeServer=function(){function e(e){this._port=(null!=e?e.port:void 0)||8912,(null!=e?e.tls:void 0)?(this._tlsOptions=e.tls,("string"==typeof this._tlsOptions||this._tlsOptions instanceof Buffer)&&(this._tlsOptions={key:this._tlsOptions,cert:this._tlsOptions})):this._tlsOptions=null,this._fs=c.Env.require("fs"),this._http=c.Env.require("http"),this._https=c.Env.require("https"),this._open=c.Env.require("open"),this._callbacks={},this._nodeUrl=c.Env.require("url"),this.createApp()}return e.prototype.authType=function(){return"code"},e.prototype.url=function(){var e;return e=null===this._tlsOptions?"http":"https",""+e+"://localhost:"+this._port+"/oauth_callback"},e.prototype.doAuthorize=function(e,t,n,r){return this._callbacks[t]=r,this.openBrowser(e)},e.prototype.openBrowser=function(e){if(!e.match(/^https?:\/\//))throw new Error("Not a http/https URL: "+e);return"BROWSER"in process.env?this._open(e,process.env.BROWSER):this._open(e)},e.prototype.createApp=function(){var e=this;return this._app=this._tlsOptions?this._https.createServer(this._tlsOptions,function(t,n){return e.doRequest(t,n)}):this._http.createServer(function(t,n){return e.doRequest(t,n)}),this._app.listen(this._port)},e.prototype.closeServer=function(){return this._app.close()},e.prototype.doRequest=function(e,t){var n,r,i,o=this;return i=this._nodeUrl.parse(e.url,!0),"/oauth_callback"===i.pathname&&(r=i.query.state,this._callbacks[r]&&(this._callbacks[r](i.query),delete this._callbacks[r])),n="",e.on("data",function(e){return n+=e}),e.on("end",function(){return o.closeBrowser(t)})},e.prototype.closeBrowser=function(e){var t;return t='<!doctype html>\n<script type="text/javascript">window.close();</script>\n<p>Please close this window.</p>',e.writeHead(200,{"Content-Length":t.length,"Content-Type":"text/html"}),e.write(t),e.end()},e}(),c.AuthError=function(){function e(e){var t;if(!e.error)throw new Error("Not an OAuth 2.0 error: "+JSON.stringify(e));t="object"==typeof e.error&&e.error.error?e.error:e,this.code=t.error,this.description=t.error_description||null,this.uri=t.error_uri||null}return e.prototype.code=null,e.prototype.description=null,e.prototype.uri=null,e.ACCESS_DENIED="access_denied",e.INVALID_REQUEST="invalid_request",e.UNAUTHORIZED_CLIENT="unauthorized_client",e.INVALID_GRANT="invalid_grant",e.INVALID_SCOPE="invalid_scope",e.UNSUPPORTED_GRANT_TYPE="unsupported_grant_type",e.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",e.SERVER_ERROR="server_error",e.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",e.prototype.toString=function(){return"Dropbox OAuth error "+this.code+" :: "+this.description},e.prototype.inspect=function(){return this.toString()},e}(),c.Client=function(){function t(e){var t=this;this._serverRoot=e.server||this._defaultServerRoot(),this._maxApiServer="maxApiServer"in e?e.maxApiServer:this._defaultMaxApiServer(),this._authServer=e.authServer||this._defaultAuthServer(),this._fileServer=e.fileServer||this._defaultFileServer(),this._downloadServer=e.downloadServer||this._defaultDownloadServer(),this._notifyServer=e.notifyServer||this._defaultNotifyServer(),this.onXhr=new c.Util.EventSource({cancelable:!0}),this.onError=new c.Util.EventSource,this.onAuthStepChange=new c.Util.EventSource,this._xhrOnErrorHandler=function(e,n){return t._handleXhrError(e,n)},this._oauth=new c.Util.Oauth(e),this._uid=e.uid||null,this.authStep=this._oauth.step(),this._driver=null,this.authError=null,this._credentials=null,this.setupUrls()}return t.prototype.onXhr=null,t.prototype.onError=null,t.prototype.onAuthStepChange=null,t.prototype.authDriver=function(e){return this._driver=e,this},t.prototype.dropboxUid=function(){return this._uid},t.prototype.credentials=function(){return this._credentials||this._computeCredentials(),this._credentials},t.prototype.authenticate=function(t,n){var r,i,o,a,s,u=this;if(n||"function"!=typeof t||(n=t,t=null),r=t&&"interactive"in t?t.interactive:!0,!this._driver&&this.authStep!==e.DONE&&(c.AuthDriver.autoConfigure(this),!this._driver))throw new Error("OAuth driver auto-configuration failed. Call authDriver.");if(this.authStep===e.ERROR)throw new Error("Client got in an error state. Call reset() to reuse it!");return a=function(){return u.authStep=u._oauth.step(),u.authStep===e.ERROR&&(u.authError=u._oauth.error()),u._credentials=null,u.onAuthStepChange.dispatch(u),s()},o=function(){return u.authStep=e.ERROR,u._credentials=null,u.onAuthStepChange.dispatch(u),s()},i=null,s=function(){var t;if(i!==u.authStep&&(i=u.authStep,u._driver&&u._driver.onAuthStepChange))return void u._driver.onAuthStepChange(u,s);switch(u.authStep){case e.RESET:return r?(u._driver.getStateParam&&u._driver.getStateParam(function(t){return u.client.authStep===e.RESET&&u._oauth.setAuthStateParam(t),a()}),u._oauth.setAuthStateParam(c.Util.Oauth.randomAuthStateParam()),a()):void(n&&n(null,u));case e.PARAM_SET:return r?(t=u.authorizeUrl(),u._driver.doAuthorize(t,u._oauth.authStateParam(),u,function(e){return u._oauth.processRedirectParams(e),e.uid&&(u._uid=e.uid),a()})):void(n&&n(null,u));case e.PARAM_LOADED:return u._driver.resumeAuthorize?u._driver.resumeAuthorize(u._oauth.authStateParam(),u,function(e){return u._oauth.processRedirectParams(e),e.uid&&(u._uid=e.uid),a()}):(u._oauth.setAuthStateParam(u._oauth.authStateParam()),void a());case e.AUTHORIZED:return u.getAccessToken(function(e,t){return e?(u.authError=e,o()):(u._oauth.processRedirectParams(t),u._uid=t.uid,a())});case e.DONE:n&&n(null,u);break;case e.SIGNED_OUT:return u.authStep=e.RESET,u.reset(),s();case e.ERROR:n&&n(u.authError,u)}},s(),this},t.prototype.isAuthenticated=function(){return this.authStep===e.DONE},t.prototype.signOut=function(t,n){var r,i,o=this;if(n||"function"!=typeof t||(n=t,t=null),r=t&&t.mustInvalidate,this.authStep!==e.DONE)throw new Error("This client doesn't have a user's token");return i=new c.Util.Xhr("POST",this._urls.signOut),i.signWithOauth(this._oauth),this._dispatchXhr(i,function(t){if(t)if(t.status===c.ApiError.INVALID_TOKEN)t=null;else if(r)return void(n&&n(t));return o.authStep=e.RESET,o.reset(),o.authStep=e.SIGNED_OUT,o.onAuthStepChange.dispatch(o),o._driver&&o._driver.onAuthStepChange?o._driver.onAuthStepChange(o,function(){return n?n(null):void 0}):n?n(null):void 0})},t.prototype.signOff=function(e,t){return this.signOut(e,t)},t.prototype.getAccountInfo=function(e,t){var n,r;return t||"function"!=typeof e||(t=e,e=null),n=!1,e&&e.httpCache&&(n=!0),r=new c.Util.Xhr("GET",this._urls.accountInfo),r.signWithOauth(this._oauth,n),this._dispatchXhr(r,function(e,n){return t(e,c.AccountInfo.parse(n),n)})},t.prototype.getUserInfo=function(e,t){return this.getAccountInfo(e,t)},t.prototype.readFile=function(e,t,n){var r,i,o,a,s,u,l;return n||"function"!=typeof t||(n=t,t=null),i={},u="text",a=null,r=!1,t&&(t.versionTag?i.rev=t.versionTag:t.rev&&(i.rev=t.rev),t.arrayBuffer?u="arraybuffer":t.blob?u="blob":t.buffer?u="buffer":t.binary&&(u="b"),t.length?(null!=t.start?(s=t.start,o=t.start+t.length-1):(s="",o=t.length),a="bytes="+s+"-"+o):null!=t.start&&(a="bytes="+t.start+"-"),t.httpCache&&(r=!0)),l=new c.Util.Xhr("GET",""+this._urls.getFile+"/"+this._urlEncodePath(e)),l.setParams(i).signWithOauth(this._oauth,r),l.setResponseType(u),a&&(a&&l.setHeader("Range",a),l.reportResponseHeaders()),this._dispatchXhr(l,function(e,t,r,i){var o;return o=i?c.Http.RangeInfo.parse(i["content-range"]):null,n(e,t,c.File.Stat.parse(r),o)})},t.prototype.writeFile=function(e,t,n,r){var i;return r||"function"!=typeof n||(r=n,n=null),i=c.Util.Xhr.canSendForms&&"object"==typeof t,i?this._writeFileUsingForm(e,t,n,r):this._writeFileUsingPut(e,t,n,r)},t.prototype._writeFileUsingForm=function(e,t,n,r){var i,o,a,s;return a=e.lastIndexOf("/"),-1===a?(i=e,e=""):(i=e.substring(a),e=e.substring(0,a)),o={file:i},n&&(n.noOverwrite&&(o.overwrite="false"),n.lastVersionTag?o.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(o.parent_rev=n.parentRev||n.parent_rev)),s=new c.Util.Xhr("POST",""+this._urls.postFile+"/"+this._urlEncodePath(e)),s.setParams(o).signWithOauth(this._oauth).setFileField("file",i,t,"application/octet-stream"),delete o.file,this._dispatchXhr(s,function(e,t){return r?r(e,c.File.Stat.parse(t)):void 0})},t.prototype._writeFileUsingPut=function(e,t,n,r){var i,o;return i={},n&&(n.noOverwrite&&(i.overwrite="false"),n.lastVersionTag?i.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(i.parent_rev=n.parentRev||n.parent_rev)),o=new c.Util.Xhr("POST",""+this._urls.putFile+"/"+this._urlEncodePath(e)),o.setBody(t).setParams(i).signWithOauth(this._oauth),this._dispatchXhr(o,function(e,t){return r?r(e,c.File.Stat.parse(t)):void 0})},t.prototype.resumableUploadStep=function(e,t,n){var r,i;return t?(r={offset:t.offset},t.tag&&(r.upload_id=t.tag)):r={offset:0},i=new c.Util.Xhr("POST",this._urls.chunkedUpload),i.setBody(e).setParams(r).signWithOauth(this._oauth),this._dispatchXhr(i,function(e,t){return e&&e.status===c.ApiError.INVALID_PARAM&&e.response&&e.response.upload_id&&e.response.offset?n(null,c.Http.UploadCursor.parse(e.response)):n(e,c.Http.UploadCursor.parse(t))})},t.prototype.resumableUploadFinish=function(e,t,n,r){var i,o;return r||"function"!=typeof n||(r=n,n=null),i={upload_id:t.tag},n&&(n.lastVersionTag?i.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(i.parent_rev=n.parentRev||n.parent_rev),n.noOverwrite&&(i.overwrite="false")),o=new c.Util.Xhr("POST",""+this._urls.commitChunkedUpload+"/"+this._urlEncodePath(e)),o.setParams(i).signWithOauth(this._oauth),this._dispatchXhr(o,function(e,t){return r?r(e,c.File.Stat.parse(t)):void 0})},t.prototype.stat=function(e,t,n){var r,i,o;return n||"function"!=typeof t||(n=t,t=null),i={},r=!1,t&&(t.versionTag?i.rev=t.versionTag:t.rev&&(i.rev=t.rev),t.contentHash?i.hash=t.contentHash:t.hash&&(i.hash=t.hash),(t.removed||t.deleted)&&(i.include_deleted="true"),t.readDir&&(i.list="true",t.readDir!==!0&&(i.file_limit=t.readDir.toString())),t.cacheHash&&(i.hash=t.cacheHash),t.httpCache&&(r=!0)),i.include_deleted||(i.include_deleted="false"),i.list||(i.list="false"),o=new c.Util.Xhr("GET",""+this._urls.metadata+"/"+this._urlEncodePath(e)),o.setParams(i).signWithOauth(this._oauth,r),this._dispatchXhr(o,function(e,t){var r,i,o;return o=c.File.Stat.parse(t),r=(null!=t?t.contents:void 0)?function(){var e,n,r,o;for(r=t.contents,o=[],e=0,n=r.length;n>e;e++)i=r[e],o.push(c.File.Stat.parse(i));return o}():void 0,n(e,o,r)})},t.prototype.readdir=function(e,t,n){var r;return n||"function"!=typeof t||(n=t,t=null),r={readDir:!0},t&&(null!=t.limit&&(r.readDir=t.limit),t.versionTag?r.versionTag=t.versionTag:t.rev&&(r.versionTag=t.rev),t.contentHash?r.contentHash=t.contentHash:t.hash&&(r.contentHash=t.hash),(t.removed||t.deleted)&&(r.removed=t.removed||t.deleted),t.httpCache&&(r.httpCache=t.httpCache)),this.stat(e,r,function(e,t,r){var i,o;return i=r?function(){var e,t,n;for(n=[],e=0,t=r.length;t>e;e++)o=r[e],n.push(o.name);return n}():null,n(e,i,t,r)})},t.prototype.metadata=function(e,t,n){return this.stat(e,t,n)},t.prototype.makeUrl=function(e,t,n){var r,i,o,a,s,u=this;return n||"function"!=typeof t||(n=t,t=null),i=t&&(t["long"]||t.longUrl||t.downloadHack)?{short_url:"false"}:{},e=this._urlEncodePath(e),o=""+this._urls.shares+"/"+e,r=!1,a=!1,t&&(t.downloadHack?(r=!0,a=!0):t.download&&(r=!0,o=""+this._urls.media+"/"+e)),s=new c.Util.Xhr("POST",o).setParams(i).signWithOauth(this._oauth),this._dispatchXhr(s,function(e,t){return a&&(null!=t?t.url:void 0)&&(t.url=t.url.replace(u._authServer,u._downloadServer)),n(e,c.File.ShareUrl.parse(t,r))})},t.prototype.history=function(e,t,n){var r,i,o;return n||"function"!=typeof t||(n=t,t=null),i={},r=!1,t&&(null!=t.limit&&(i.rev_limit=t.limit),t.httpCache&&(r=!0)),o=new c.Util.Xhr("GET",""+this._urls.revisions+"/"+this._urlEncodePath(e)),o.setParams(i).signWithOauth(this._oauth,r),this._dispatchXhr(o,function(e,t){var r,i;return i=t?function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(c.File.Stat.parse(r));return i}():void 0,n(e,i)})},t.prototype.revisions=function(e,t,n){return this.history(e,t,n)},t.prototype.thumbnailUrl=function(e,t){var n;return n=this.thumbnailXhr(e,t),n.paramsToUrl().url},t.prototype.readThumbnail=function(e,t,n){var r,i;return n||"function"!=typeof t||(n=t,t=null),r="b",t&&(t.blob&&(r="blob"),t.arrayBuffer&&(r="arraybuffer"),t.buffer&&(r="buffer")),i=this.thumbnailXhr(e,t),i.setResponseType(r),this._dispatchXhr(i,function(e,t,r){return n(e,t,c.File.Stat.parse(r))})},t.prototype.thumbnailXhr=function(e,t){var n,r;return n={},t&&(t.format?n.format=t.format:t.png&&(n.format="png"),t.size&&(n.size=t.size)),r=new c.Util.Xhr("GET",""+this._urls.thumbnails+"/"+this._urlEncodePath(e)),r.setParams(n).signWithOauth(this._oauth)},t.prototype.revertFile=function(e,t,n){var r;return r=new c.Util.Xhr("POST",""+this._urls.restore+"/"+this._urlEncodePath(e)),r.setParams({rev:t}).signWithOauth(this._oauth),this._dispatchXhr(r,function(e,t){return n?n(e,c.File.Stat.parse(t)):void 0})},t.prototype.restore=function(e,t,n){return this.revertFile(e,t,n)},t.prototype.findByName=function(e,t,n,r){var i,o,a;return r||"function"!=typeof n||(r=n,n=null),o={query:t},i=!1,n&&(null!=n.limit&&(o.file_limit=n.limit),(n.removed||n.deleted)&&(o.include_deleted=!0),n.httpCache&&(i=!0)),a=new c.Util.Xhr("GET",""+this._urls.search+"/"+this._urlEncodePath(e)),a.setParams(o).signWithOauth(this._oauth,i),this._dispatchXhr(a,function(e,t){var n,i;return i=t?function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(c.File.Stat.parse(n));return i}():void 0,r(e,i)})},t.prototype.search=function(e,t,n,r){return this.findByName(e,t,n,r)},t.prototype.makeCopyReference=function(e,t){var n;return n=new c.Util.Xhr("GET",""+this._urls.copyRef+"/"+this._urlEncodePath(e)),n.signWithOauth(this._oauth),this._dispatchXhr(n,function(e,n){return t(e,c.File.CopyReference.parse(n))})},t.prototype.copyRef=function(e,t){return this.makeCopyReference(e,t)},t.prototype.pullChanges=function(e,t){var n,r;return t||"function"!=typeof e||(t=e,e=null),n=e?e.cursorTag?{cursor:e.cursorTag}:{cursor:e}:{},r=new c.Util.Xhr("POST",this._urls.delta),r.setParams(n).signWithOauth(this._oauth),this._dispatchXhr(r,function(e,n){return t(e,c.Http.PulledChanges.parse(n))})},t.prototype.delta=function(e,t){return this.pullChanges(e,t)},t.prototype.pollForChanges=function(e,t,n){var r,i;return n||"function"!=typeof t||(n=t,t=null),r=e.cursorTag?{cursor:e.cursorTag}:{cursor:e},t&&"timeout"in t&&(r.timeout=t.timeout),i=new c.Util.Xhr("GET",this._urls.longpollDelta),i.setParams(r),this._dispatchXhr(i,function(e,t){var r;if("string"==typeof t)try{t=JSON.parse(t)}catch(i){r=i,t=null}return n(e,c.Http.PollResult.parse(t))})},t.prototype.mkdir=function(e,t){var n;return n=new c.Util.Xhr("POST",this._urls.fileopsCreateFolder),n.setParams({root:"auto",path:this._normalizePath(e)}).signWithOauth(this._oauth),this._dispatchXhr(n,function(e,n){return t?t(e,c.File.Stat.parse(n)):void 0})},t.prototype.remove=function(e,t){var n;return n=new c.Util.Xhr("POST",this._urls.fileopsDelete),n.setParams({root:"auto",path:this._normalizePath(e)}).signWithOauth(this._oauth),this._dispatchXhr(n,function(e,n){return t?t(e,c.File.Stat.parse(n)):void 0})},t.prototype.unlink=function(e,t){return this.remove(e,t)},t.prototype["delete"]=function(e,t){return this.remove(e,t)},t.prototype.copy=function(e,t,n){var r,i,o;return n||"function"!=typeof r||(n=r,r=null),i={root:"auto",to_path:this._normalizePath(t)},e instanceof c.File.CopyReference?i.from_copy_ref=e.tag:i.from_path=this._normalizePath(e),o=new c.Util.Xhr("POST",this._urls.fileopsCopy),o.setParams(i).signWithOauth(this._oauth),this._dispatchXhr(o,function(e,t){return n?n(e,c.File.Stat.parse(t)):void 0})},t.prototype.move=function(e,t,n){var r,i;return n||"function"!=typeof r||(n=r,r=null),i=new c.Util.Xhr("POST",this._urls.fileopsMove),i.setParams({root:"auto",from_path:this._normalizePath(e),to_path:this._normalizePath(t)}).signWithOauth(this._oauth),this._dispatchXhr(i,function(e,t){return n?n(e,c.File.Stat.parse(t)):void 0})},t.prototype.appInfo=function(e,t){var n;return t||"function"!=typeof e||(t=e,e=this._oauth.credentials().key),n=new c.Util.Xhr("GET",this._urls.appsInfo),n.setParams({app_key:e}),this._dispatchXhr(n,function(n,r){return t(n,c.Http.AppInfo.parse(r,e))})},t.prototype.isAppDeveloper=function(e,t,n){var r;return"object"==typeof e&&"uid"in e&&(e=e.uid),n||"function"!=typeof t?"object"==typeof t&&"key"in t&&(t=t.key):(n=t,t=this._oauth.credentials().key),r=new c.Util.Xhr("GET",this._urls.appsCheckDeveloper),r.setParams({app_key:t,uid:e}),this._dispatchXhr(r,function(e,t){return t?n(e,t.is_developer):n(e)})},t.prototype.hasOauthRedirectUri=function(e,t,n){var r;return n||"function"!=typeof t?"object"==typeof t&&"key"in t&&(t=t.key):(n=t,t=this._oauth.credentials().key),r=new c.Util.Xhr("GET",this._urls.appsCheckRedirectUri),r.setParams({app_key:t,redirect_uri:e}),this._dispatchXhr(r,function(e,t){return t?n(e,t.has_redirect_uri):n(e)})},t.prototype.reset=function(){var e;return this._uid=null,this._oauth.reset(),e=this.authStep,this.authStep=this._oauth.step(),e!==this.authStep&&this.onAuthStepChange.dispatch(this),this.authError=null,this._credentials=null,this},t.prototype.setCredentials=function(e){var t;return t=this.authStep,this._oauth.setCredentials(e),this.authStep=this._oauth.step(),this._uid=e.uid||null,this.authError=null,this._credentials=null,t!==this.authStep&&this.onAuthStepChange.dispatch(this),this},t.prototype.appHash=function(){return this._oauth.appHash()},t.prototype.setupUrls=function(){return this._apiServer=this._chooseApiServer(),this._urls={authorize:""+this._authServer+"/1/oauth2/authorize",token:""+this._apiServer+"/1/oauth2/token",signOut:""+this._apiServer+"/1/unlink_access_token",accountInfo:""+this._apiServer+"/1/account/info",getFile:""+this._fileServer+"/1/files/auto",postFile:""+this._fileServer+"/1/files/auto",putFile:""+this._fileServer+"/1/files_put/auto",
metadata:""+this._apiServer+"/1/metadata/auto",delta:""+this._apiServer+"/1/delta",longpollDelta:""+this._notifyServer+"/1/longpoll_delta",revisions:""+this._apiServer+"/1/revisions/auto",restore:""+this._apiServer+"/1/restore/auto",search:""+this._apiServer+"/1/search/auto",shares:""+this._apiServer+"/1/shares/auto",media:""+this._apiServer+"/1/media/auto",copyRef:""+this._apiServer+"/1/copy_ref/auto",thumbnails:""+this._fileServer+"/1/thumbnails/auto",chunkedUpload:""+this._fileServer+"/1/chunked_upload",commitChunkedUpload:""+this._fileServer+"/1/commit_chunked_upload/auto",fileopsCopy:""+this._apiServer+"/1/fileops/copy",fileopsCreateFolder:""+this._apiServer+"/1/fileops/create_folder",fileopsDelete:""+this._apiServer+"/1/fileops/delete",fileopsMove:""+this._apiServer+"/1/fileops/move",appsInfo:""+this._apiServer+"/1/apps/info",appsCheckDeveloper:""+this._apiServer+"/1/apps/check_developer",appsCheckRedirectUri:""+this._apiServer+"/1/apps/check_redirect_uri"}},t.prototype._chooseApiServer=function(){var e,t;return t=Math.floor(Math.random()*(this._maxApiServer+1)),e=0===t?"":t.toString(),this._serverRoot.replace("$",e)},t.prototype.authStep=null,t.ERROR=0,t.RESET=1,t.PARAM_SET=2,t.PARAM_LOADED=3,t.AUTHORIZED=4,t.DONE=5,t.SIGNED_OUT=6,t.prototype._urlEncodePath=function(e){return c.Util.Xhr.urlEncodeValue(this._normalizePath(e)).replace(/%2F/gi,"/")},t.prototype._normalizePath=function(e){var t;if("/"===e.substring(0,1)){for(t=1;"/"===e.substring(t,t+1);)t+=1;return e.substring(t)}return e},t.prototype.authorizeUrl=function(){var e;return e=this._oauth.authorizeUrlParams(this._driver.authType(),this._driver.url()),this._urls.authorize+"?"+c.Util.Xhr.urlEncode(e)},t.prototype.getAccessToken=function(e){var t,n;return t=this._oauth.accessTokenParams(this._driver.url()),n=new c.Util.Xhr("POST",this._urls.token).setParams(t).addOauthParams(this._oauth),this._dispatchXhr(n,function(t,n){return t&&t.status===c.ApiError.INVALID_PARAM&&t.response&&t.response.error&&(t=new c.AuthError(t.response)),e(t,n)})},t.prototype._dispatchXhr=function(e,t){var n;return e.setCallback(t),e.onError=this._xhrOnErrorHandler,e.prepare(),n=e.xhr,this.onXhr.dispatch(e)&&e.send(),n},t.prototype._handleXhrError=function(t,n){var r=this;return t.status===c.ApiError.INVALID_TOKEN&&this.authStep===e.DONE&&(this.authError=t,this.authStep=e.ERROR,this.onAuthStepChange.dispatch(this),this._driver&&this._driver.onAuthStepChange)?(this._driver.onAuthStepChange(this,function(){return r.onError.dispatch(t),n(t)}),null):(this.onError.dispatch(t),void n(t))},t.prototype._defaultServerRoot=function(){return"https://api$.dropbox.com"},t.prototype._defaultAuthServer=function(){return this._serverRoot.replace("api$","www")},t.prototype._defaultFileServer=function(){return this._serverRoot.replace("api$","api-content")},t.prototype._defaultDownloadServer=function(){return"https://dl.dropboxusercontent.com"},t.prototype._defaultNotifyServer=function(){return this._serverRoot.replace("api$","api-notify")},t.prototype._defaultMaxApiServer=function(){return 30},t.prototype._computeCredentials=function(){var e;e=this._oauth.credentials(),this._uid&&(e.uid=this._uid),this._serverRoot!==this._defaultServerRoot()&&(e.server=this._serverRoot),this._maxApiServer!==this._defaultMaxApiServer()&&(e.maxApiServer=this._maxApiServer),this._authServer!==this._defaultAuthServer()&&(e.authServer=this._authServer),this._fileServer!==this._defaultFileServer()&&(e.fileServer=this._fileServer),this._downloadServer!==this._defaultDownloadServer()&&(e.downloadServer=this._downloadServer),this._notifyServer!==this._defaultNotifyServer()&&(e.notifyServer=this._notifyServer),this._credentials=e},t}(),e=c.Client,c.File.ShareUrl=function(){function e(e,t){this.url=e.url,this.expiresAt=c.Util.parseDate(e.expires),this.isDirect=t===!0?!0:t===!1?!1:"direct"in e?e.direct:Date.now()-this.expiresAt<=864e5,this.isPreview=!this.isDirect,this._json=null}return e.parse=function(e,t){return e&&"object"==typeof e?new c.File.ShareUrl(e,t):e},e.prototype.url=null,e.prototype.expiresAt=null,e.prototype.isDirect=null,e.prototype.isPreview=null,e.prototype.json=function(){return this._json||(this._json={url:this.url,expires:this.expiresAt.toUTCString(),direct:this.isDirect})},e}(),c.File.CopyReference=function(){function e(e){"object"==typeof e?(this.tag=e.copy_ref,this.expiresAt=c.Util.parseDate(e.expires),this._json=e):(this.tag=e,this.expiresAt=new Date(1e3*Math.ceil(Date.now()/1e3)),this._json=null)}return e.parse=function(e){return!e||"object"!=typeof e&&"string"!=typeof e?e:new c.File.CopyReference(e)},e.prototype.tag=null,e.prototype.expiresAt=null,e.prototype.json=function(){return this._json||(this._json={copy_ref:this.tag,expires:this.expiresAt.toUTCString()})},e}(),c.File.Stat=function(){function e(e){var t,n,r,i;switch(this._json=e,this.path=e.path,"/"!==this.path.substring(0,1)&&(this.path="/"+this.path),t=this.path.length-1,t>=0&&"/"===this.path.substring(t)&&(this.path=this.path.substring(0,t)),n=this.path.lastIndexOf("/"),this.name=this.path.substring(n+1),this.isFolder=e.is_dir||!1,this.isFile=!this.isFolder,this.isRemoved=e.is_deleted||!1,this.typeIcon=e.icon,this.modifiedAt=(null!=(r=e.modified)?r.length:void 0)?c.Util.parseDate(e.modified):null,this.clientModifiedAt=(null!=(i=e.client_mtime)?i.length:void 0)?c.Util.parseDate(e.client_mtime):null,e.root){case"dropbox":this.inAppFolder=!1;break;case"app_folder":this.inAppFolder=!0;break;default:this.inAppFolder=null}this.size=e.bytes||0,this.humanSize=e.size||"",this.hasThumbnail=e.thumb_exists||!1,this.versionTag=e.rev,this.contentHash=e.hash||null,this.mimeType=this.isFolder?e.mime_type||"inode/directory":e.mime_type||"application/octet-stream"}return e.parse=function(e){return e&&"object"==typeof e?new c.File.Stat(e):e},e.prototype.path=null,e.prototype.name=null,e.prototype.inAppFolder=null,e.prototype.isFolder=null,e.prototype.isFile=null,e.prototype.isRemoved=null,e.prototype.typeIcon=null,e.prototype.versionTag=null,e.prototype.contentHash=null,e.prototype.mimeType=null,e.prototype.size=null,e.prototype.humanSize=null,e.prototype.hasThumbnail=null,e.prototype.modifiedAt=null,e.prototype.clientModifiedAt=null,e.prototype.json=function(){return this._json},e}(),c.Http.AppInfo=function(){function e(e,t){var n;this.name=e.name,this._icons=e.icons,n=e.permissions||{},this.canUseDatastores=!!n.datastores,this.canUseFiles=!!n.files,this.canUseFullDropbox="full_dropbox"===n.files,this.hasAppFolder="app_folder"===n.files,this.key=t?t:e.key||null}return e.parse=function(e,t){return e?new c.Http.AppInfo(e,t):e},e.prototype.name=void 0,e.prototype.key=void 0,e.prototype.canUseDatastores=void 0,e.prototype.canUseFiles=void 0,e.prototype.hasAppFolder=void 0,e.prototype.canUseFullDropbox=void 0,e.prototype.icon=function(e,t){return t||(t=e),this._icons[""+e+"x"+t]||null},e.ICON_SMALL=64,e.ICON_LARGE=256,e}(),c.Http.PulledChanges=function(){function e(e){var t;this.blankSlate=e.reset||!1,this.cursorTag=e.cursor,this.shouldPullAgain=e.has_more,this.shouldBackOff=!this.shouldPullAgain,this.changes=e.cursor&&e.cursor.length?function(){var n,r,i,o;for(i=e.entries,o=[],n=0,r=i.length;r>n;n++)t=i[n],o.push(c.Http.PulledChange.parse(t));return o}():[]}return e.parse=function(e){return e&&"object"==typeof e?new c.Http.PulledChanges(e):e},e.prototype.blankSlate=void 0,e.prototype.cursorTag=void 0,e.prototype.changes=void 0,e.prototype.shouldPullAgain=void 0,e.prototype.shouldBackOff=void 0,e.prototype.cursor=function(){return this.cursorTag},e}(),c.Http.PulledChange=function(){function e(e){this.path=e[0],this.stat=c.File.Stat.parse(e[1]),this.stat?this.wasRemoved=!1:(this.stat=null,this.wasRemoved=!0)}return e.parse=function(e){return e&&"object"==typeof e?new c.Http.PulledChange(e):e},e.prototype.path=void 0,e.prototype.wasRemoved=void 0,e.prototype.stat=void 0,e}(),c.Http.PollResult=function(){function e(e){this.hasChanges=e.changes,this.retryAfter=e.backoff||0}return e.parse=function(e){return e?new c.Http.PollResult(e):e},e.prototype.hasChanges=void 0,e.prototype.retryAfter=void 0,e}(),c.Http.RangeInfo=function(){function e(e){var t;(t=/^bytes (\d*)-(\d*)\/(.*)$/.exec(e))?(this.start=parseInt(t[1]),this.end=parseInt(t[2]),this.size="*"===t[3]?null:parseInt(t[3])):(this.start=0,this.end=0,this.size=null)}return e.parse=function(e){return"string"==typeof e?new c.Http.RangeInfo(e):e},e.prototype.start=null,e.prototype.size=null,e.prototype.end=null,e}(),c.Http.UploadCursor=function(){function e(e){this.replace(e)}return e.parse=function(e){return!e||"object"!=typeof e&&"string"!=typeof e?e:new c.Http.UploadCursor(e)},e.prototype.tag=null,e.prototype.offset=null,e.prototype.expiresAt=null,e.prototype.json=function(){return this._json||(this._json={upload_id:this.tag,offset:this.offset,expires:this.expiresAt.toUTCString()})},e.prototype.replace=function(e){return"object"==typeof e?(this.tag=e.upload_id||null,this.offset=e.offset||0,this.expiresAt=c.Util.parseDate(e.expires)||Date.now(),this._json=e):(this.tag=e||null,this.offset=0,this.expiresAt=new Date(1e3*Math.floor(Date.now()/1e3)),this._json=null),this},e}(),"function"==typeof c.Env.global.atob&&"function"==typeof c.Env.global.btoa?(c.Util.atob=function(e){return c.Env.global.atob(e)},c.Util.btoa=function(e){return c.Env.global.btoa(e)}):c.Env.global.require&&c.Env.global.Buffer?(c.Util.atob=function(e){var t,n;return t=new Buffer(e,"base64"),function(){var e,r,i;for(i=[],n=e=0,r=t.length;r>=0?r>e:e>r;n=r>=0?++e:--e)i.push(String.fromCharCode(t[n]));return i}().join("")},c.Util.btoa=function(e){var t,n;return t=new Buffer(function(){var t,r,i;for(i=[],n=t=0,r=e.length;r>=0?r>t:t>r;n=r>=0?++t:--t)i.push(e.charCodeAt(n));return i}()),t.toString("base64")}):!function(){var e,t,n;return t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(e,n,r){var i,o;for(o=3-n,e<<=8*o,i=3;i>=o;)r.push(t.charAt(e>>6*i&63)),i-=1;for(i=n;3>i;)r.push("="),i+=1;return null},e=function(e,t,n){var r,i;for(i=4-t,e<<=6*i,r=2;r>=i;)n.push(String.fromCharCode(e>>8*r&255)),r-=1;return null},c.Util.btoa=function(e){var t,r,i,o,a,s;for(o=[],t=0,r=0,i=a=0,s=e.length;s>=0?s>a:a>s;i=s>=0?++a:--a)t=t<<8|e.charCodeAt(i),r+=1,3===r&&(n(t,r,o),t=r=0);return r>0&&n(t,r,o),o.join("")},c.Util.atob=function(n){var r,i,o,a,s,u,l;for(s=[],r=0,o=0,a=u=0,l=n.length;(l>=0?l>u:u>l)&&(i=n.charAt(a),"="!==i);a=l>=0?++u:--u)r=r<<6|t.indexOf(i),o+=1,4===o&&(e(r,o,s),r=o=0);return o>0&&e(r,o,s),s.join("")}}(),function(){var e,t,n,r,i,o,a,s,u,l,h;if(c.Util.hmac=function(t,r){return e(n(u(t),u(r),t.length,r.length))},c.Util.sha1=function(t){return e(i(u(t),t.length))},c.Util.sha256=function(t){return e(o(u(t),t.length))},c.Env.require)try{t=c.Env.require("crypto"),t.createHmac&&t.createHash&&(c.Util.hmac=function(e,n){var r;return r=t.createHmac("sha1",n),r.update(e),r.digest("base64")},c.Util.sha1=function(e){var n;return n=t.createHash("sha1"),n.update(e),n.digest("base64")},c.Util.sha256=function(e){var n;return n=t.createHash("sha256"),n.update(e),n.digest("base64")})}catch(d){r=d}return n=function(e,t,n,r){var o,a,s,u;return t.length>16&&(t=i(t,r)),s=function(){var e,n;for(n=[],a=e=0;16>e;a=++e)n.push(909522486^t[a]);return n}(),u=function(){var e,n;for(n=[],a=e=0;16>e;a=++e)n.push(1549556828^t[a]);return n}(),o=i(s.concat(e),64+n),i(u.concat(o),84)},i=function(e,t){var n,r,i,o,a,s,u,l,c,h,d,p,f,g,v,y,m;for(e[t>>2]|=1<<31-((3&t)<<3),e[(t+8>>6<<4)+15]=t<<3,v=Array(80),n=1732584193,i=4023233417,a=2562383102,u=271733878,c=3285377520,d=0,f=e.length;f>d;){for(r=n,o=i,s=a,l=u,h=c,p=m=0;80>m;p=++m)16>p?v[p]=0|e[d+p<<2>>2]:(g=(0|v[p-3<<2>>2])^(0|v[p-8<<2>>2])^(0|v[p-14<<2>>2])^(0|v[p-16<<2>>2]),v[p]=g<<1|g>>>31),y=((n<<5|n>>>27)+c|0)+v[p<<2>>2]|0,y=20>p?y+((i&a|~i&u)+1518500249|0)|0:40>p?y+((i^a^u)+1859775393|0)|0:60>p?y+((i&a|i&u|a&u)-1894007588)|0|0:y+((i^a^u)-899497514|0)|0,c=u,u=a,a=i<<30|i>>>2,i=n,n=y;n=r+n|0,i=o+i|0,a=s+a|0,u=l+u|0,c=h+c|0,d=d+16|0}return[n,i,a,u,c]},o=function(e,t){var n,r,i,o,u,l,c,h,d,p,f,g,v,y,m,b,w,x,_,E,k,S,T,C,N,A,P,D,$,M,I,O;for(e[t>>2]|=1<<31-((3&t)<<3),e[(t+8>>6<<4)+15]=t<<3,$=Array(80),n=a[0],i=a[1],u=a[2],h=a[3],p=a[4],g=a[5],y=a[6],E=a[7],S=0,C=e.length;C>S;){for(r=n,o=i,l=u,d=h,f=p,v=g,m=y,k=E,T=O=0;64>O;T=++O)16>T?D=$[T]=0|e[S+T<<2>>2]:(w=0|$[T-15<<2>>2],b=(w<<25|w>>>7)^(w<<14|w>>>18)^w>>>3,_=0|$[T-2<<2>>2],x=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10,D=$[T]=(b+(0|$[T-7<<2>>2])|0)+(x+(0|$[T-16<<2>>2])|0)|0),c=p&g^~p&y,N=n&i^n&u^i&u,A=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),P=(p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25),M=((E+P|0)+(c+D|0)|0)+(0|s[T<<2>>2])|0,I=A+N|0,E=y,y=g,g=p,p=h+M|0,h=u,u=i,i=n,n=M+I|0;n=r+n|0,i=o+i|0,u=l+u|0,h=d+h|0,p=f+p|0,g=v+g|0,y=m+y|0,E=k+E|0,S+=16}return[n,i,u,h,p,g,y,E]},l=function(e){return 0>e&&(e=4*(1<<30)+e),e.toString(16)},a=[],s=[],function(){var e,t,n,r,i,o,u;for(t=function(e){return 4294967296*(e-Math.floor(e))|0},i=2,u=[],n=o=0;64>o;n=++o){for(;;){for(r=!0,e=2;i>=e*e;){if(i%e===0){r=!1;break}e+=1}if(r)break;i+=1}8>n&&(a[n]=t(Math.pow(i,.5))),s[n]=t(Math.pow(i,1/3)),u.push(i+=1)}return u}(),e=function(e){var t,n,r,i,o;for(i="",t=0,r=4*e.length;r>t;)n=t,o=(e[n>>2]>>(3-(3&n)<<3)&255)<<16,n+=1,o|=(e[n>>2]>>(3-(3&n)<<3)&255)<<8,n+=1,o|=e[n>>2]>>(3-(3&n)<<3)&255,i+=h[o>>18&63],i+=h[o>>12&63],t+=1,i+=t>=r?"=":h[o>>6&63],t+=1,i+=t>=r?"=":h[63&o],t+=1;return i},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(e){var t,n,r,i,o;for(t=[],r=255,n=i=0,o=e.length;o>=0?o>i:i>o;n=o>=0?++i:--i)t[n>>2]|=(e.charCodeAt(n)&r)<<(3-(3&n)<<3);return t}}(),c.Util.Oauth=function(){function e(e){this._id=null,this._secret=null,this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this._appHash=null,this._loaded=null,this.setCredentials(e)}return e.prototype.setCredentials=function(e){if(e.key)this._id=e.key;else{if(!e.token)throw new Error("No API key supplied");this._id=null}return this._secret=e.secret||null,this._appHash=null,this._error=null,this._loaded=!0,this.reset(),e.token?(this._token=e.token,e.tokenKey&&(this._tokenKey=e.tokenKey,this._tokenKid=e.tokenKid)):e.oauthCode?this._authCode=e.oauthCode:e.oauthStateParam&&(this._stateParam=e.oauthStateParam),this},e.prototype.credentials=function(){var e;return e={},this._id&&(e.key=this._id),this._secret&&(e.secret=this._secret),null!==this._token?(e.token=this._token,this._tokenKey&&(e.tokenKey=this._tokenKey,e.tokenKid=this._tokenKid)):null!==this._authCode?e.oauthCode=this._authCode:null!==this._stateParam&&(e.oauthStateParam=this._stateParam),e},e.prototype.step=function(){return null!==this._token?c.Client.DONE:null!==this._authCode?c.Client.AUTHORIZED:null!==this._stateParam?this._loaded?c.Client.PARAM_LOADED:c.Client.PARAM_SET:null!==this._error?c.Client.ERROR:c.Client.RESET},e.prototype.setAuthStateParam=function(e){if(null===this._id)throw new Error("No API key supplied, cannot do authorization");return this.reset(),this._loaded=!1,this._stateParam=e,this},e.prototype.checkAuthStateParam=function(e){return this._stateParam===e&&null!==this._stateParam},e.prototype.authStateParam=function(){return this._stateParam},e.prototype.error=function(){return this._error},e.prototype.processRedirectParams=function(e){var t;if(e.error){if(null===this._id)throw new Error("No API key supplied, cannot process errors");return this.reset(),this._error=new c.AuthError(e),!0}if(e.code){if(null===this._id)throw new Error("No API key supplied, cannot do Authorization Codes");return this.reset(),this._loaded=!1,this._authCode=e.code,!0}if(t=e.token_type){if(t=t.toLowerCase(),"bearer"!==t&&"mac"!==t)throw new Error("Unimplemented token type "+t);if(this.reset(),this._loaded=!1,"mac"===t){if("hmac-sha-1"!==e.mac_algorithm)throw new Error("Unimplemented MAC algorithms "+e.mac_algorithm);this._tokenKey=e.mac_key,this._tokenKid=e.kid}return this._token=e.access_token,!0}return!1},e.prototype.authHeader=function(e,t,n){var r,i;return null===this._token?(i=c.Util.btoa(null===this._secret?""+this._id+":":""+this._id+":"+this._secret),"Basic "+i):null===this._tokenKey?"Bearer "+this._token:(r=this.macParams(e,t,n),"MAC kid="+r.kid+" ts="+r.ts+" "+("access_token="+this._token+" mac="+r.mac))},e.prototype.addAuthParams=function(e,t,n){var r;return null===this._token?(n.client_id=this._id,null!==this._secret&&(n.client_secret=this._secret)):(null!==this._tokenKey&&(r=this.macParams(e,t,n),n.kid=r.kid,n.ts=r.ts,n.mac=r.mac),n.access_token=this._token),n},e.prototype.authorizeUrlParams=function(e,t){var n;if("token"!==e&&"code"!==e)throw new Error("Unimplemented /authorize response type "+e);return n={client_id:this._id,state:this._stateParam,response_type:e},t&&(n.redirect_uri=t),n},e.prototype.accessTokenParams=function(e){var t;return t={grant_type:"authorization_code",code:this._authCode},e&&(t.redirect_uri=e),t},e.queryParamsFromUrl=function(e){var t,n,r,i,o,a,s,u,l,c;if(i=/^[^?#]+(\?([^\#]*))?(\#(.*))?$/.exec(e),!i)return{};for(s=i[2]||"","/"===s.substring(0,1)&&(s=s.substring(1)),t=i[4]||"",n=t.indexOf("?"),-1!==n&&(t=t.substring(n+1)),"/"===t.substring(0,1)&&(t=t.substring(1)),a={},c=s.split("&").concat(t.split("&")),u=0,l=c.length;l>u;u++)r=c[u],o=r.indexOf("="),-1!==o&&(a[decodeURIComponent(r.substring(0,o))]=decodeURIComponent(r.substring(o+1)));return a},e.prototype.macParams=function(e,t,n){var r,i;return r={kid:this._tokenKid,ts:c.Util.Oauth.timestamp()},i=e.toUpperCase()+"&"+c.Util.Xhr.urlEncodeValue(t)+"&"+c.Util.Xhr.urlEncodeValue(c.Util.Xhr.urlEncode(n)),r.mac=c.Util.hmac(i,this._tokenKey),r},e.prototype.appHash=function(){return this._appHash?this._appHash:this._appHash=c.Util.sha1("oauth2-"+this._id).replace(/[\/+=]/g,"")},e.prototype.reset=function(){return this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this},e.timestamp=function(){return Math.floor(Date.now()/1e3)},e.randomAuthStateParam=function(){return["oas",Date.now().toString(36),Math.random().toString(36)].join("_")},e}(),null==Date.now&&(c.Util.Oauth.timestamp=function(){return Math.floor((new Date).getTime()/1e3)}),2274814865e3===new Date("Fri, 31 Jan 2042 21:01:05 +0000").valueOf()?c.Util.parseDate=function(e){return new Date(e)}:2274814865e3===Date.parse("Fri, 31 Jan 2042 21:01:05 +0000")?c.Util.parseDate=function(e){return new Date(Date.parse(e))}:!function(){var e,t;return t=/^\w+\, (\d+) (\w+) (\d+) (\d+)\:(\d+)\:(\d+) (\+\d+|UTC|GMT)$/,e={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},c.Util.parseDate=function(n){var r;return(r=t.exec(n))?new Date(Date.UTC(parseInt(r[3]),e[r[2]],parseInt(r[1]),parseInt(r[4]),parseInt(r[5]),parseInt(r[6]),0)):0/0}}(),c.Env.global.XMLHttpRequest?(!c.Env.global.XDomainRequest||"withCredentials"in new XMLHttpRequest?(s=XMLHttpRequest,a=!1,i="undefined"!=typeof FormData&&-1===navigator.userAgent.indexOf("Firefox")):(s=XDomainRequest,a=!0,i=!1),o=!0):(s=c.Env.require("xhr2"),a=!1,i=!1,o=!1),c.Env.global.Uint8Array)if(Object.getPrototypeOf?r=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array(0))).constructor:Object.__proto__&&(r=new Uint8Array(0).__proto__.__proto__.constructor),c.Env.global.Blob){try{!function(){return 2===new Blob([new Uint8Array(2)]).size?(l=!0,u=!0):(u=!1,l=2===new Blob([new ArrayBuffer(2)]).size)}()}catch(f){u=!1,l=!1,c.Env.global.WebKitBlobBuilder&&-1!==navigator.userAgent.indexOf("Android")&&(i=!1)}r===Object&&(u=!1)}else l=!1,u=!0;else r=null,l=!1,u=!1;c.Util.Xhr=function(){function e(e,t){this.method=e,this.isGet="GET"===this.method,this.url=t,this.wantHeaders=!1,this.headers={},this.params=null,this.body=null,this.preflight=!(this.isGet||"POST"===this.method),this.signed=!1,this.completed=!1,this.responseType=null,this.callback=null,this.xhr=null,this.onError=null}return e.Request=s,e.ieXdr=a,e.canSendForms=i,e.doesPreflight=o,e.ArrayBufferView=r,e.sendArrayBufferView=u,e.wrapBlob=l,e.prototype.xhr=null,e.prototype.onError=null,e.prototype.setParams=function(e){if(this.signed)throw new Error("setParams called after addOauthParams or addOauthHeader");if(this.params)throw new Error("setParams cannot be called twice");return this.params=e,this},e.prototype.setCallback=function(e){return this.callback=e,this},e.prototype.signWithOauth=function(e,t){return c.Util.Xhr.ieXdr?this.addOauthParams(e):this.preflight||!c.Util.Xhr.doesPreflight?this.addOauthHeader(e):this.isGet&&t?this.addOauthHeader(e):this.addOauthParams(e)},e.prototype.addOauthParams=function(e){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),e.addAuthParams(this.method,this.url,this.params),this.signed=!0,this},e.prototype.addOauthHeader=function(e){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),this.signed=!0,this.setHeader("Authorization",e.authHeader(this.method,this.url,this.params))},e.prototype.setBody=function(e){if(this.isGet)throw new Error("setBody cannot be called on GET requests");if(null!==this.body)throw new Error("Request already has a body");return"string"==typeof e||"undefined"!=typeof FormData&&e instanceof FormData||(this.headers["Content-Type"]="application/octet-stream",this.preflight=!0),this.body=e,this},e.prototype.setResponseType=function(e){return this.responseType=e,this},e.prototype.setHeader=function(e,t){var n;if(this.headers[e])throw n=this.headers[e],new Error("HTTP header "+e+" already set to "+n);if("Content-Type"===e)throw new Error("Content-Type is automatically computed based on setBody");return this.preflight=!0,this.headers[e]=t,this},e.prototype.reportResponseHeaders=function(){return this.wantHeaders=!0},e.prototype.setFileField=function(e,t,n,r){var i,o,a,s,u;if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("setFileField cannot be called on GET requests");if("object"==typeof n){"undefined"!=typeof ArrayBuffer&&(n instanceof ArrayBuffer?c.Util.Xhr.sendArrayBufferView&&(n=new Uint8Array(n)):!c.Util.Xhr.sendArrayBufferView&&0===n.byteOffset&&n.buffer instanceof ArrayBuffer&&(n=n.buffer)),r||(r="application/octet-stream");try{n=new Blob([n],{type:r})}catch(l){o=l,window.WebKitBlobBuilder&&(s=new WebKitBlobBuilder,s.append(n),(i=s.getBlob(r))&&(n=i))}"undefined"!=typeof File&&n instanceof File&&(n=new Blob([n],{type:n.type})),u=n instanceof Blob}else u=!1;return u?(this.body=new FormData,this.body.append(e,n,t)):(r||(r="application/octet-stream"),a=this.multipartBoundary(),this.headers["Content-Type"]="multipart/form-data; boundary="+a,this.body=["--",a,"\r\n",'Content-Disposition: form-data; name="',e,'"; filename="',t,'"\r\n',"Content-Type: ",r,"\r\n","Content-Transfer-Encoding: binary\r\n\r\n",n,"\r\n","--",a,"--","\r\n"].join(""))},e.prototype.multipartBoundary=function(){return[Date.now().toString(36),Math.random().toString(36)].join("----")},e.prototype.paramsToUrl=function(){var e;return this.params&&(e=c.Util.Xhr.urlEncode(this.params),0!==e.length&&(this.url=[this.url,"?",e].join("")),this.params=null),this},e.prototype.paramsToBody=function(){if(this.params){if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("paramsToBody cannot be called on GET requests");this.headers["Content-Type"]="application/x-www-form-urlencoded",this.body=c.Util.Xhr.urlEncode(this.params),this.params=null}return this},e.prototype.prepare=function(){var e,t,n,r,i=this;if(t=c.Util.Xhr.ieXdr,this.isGet||null!==this.body||t?(this.paramsToUrl(),null!==this.body&&"string"==typeof this.body&&(this.headers["Content-Type"]="text/plain; charset=utf8")):this.paramsToBody(),this.xhr=new c.Util.Xhr.Request,t?(this.xhr.onload=function(){return i.onXdrLoad()},this.xhr.onerror=function(){return i.onXdrError()},this.xhr.ontimeout=function(){return i.onXdrError()},this.xhr.onprogress=function(){}):this.xhr.onreadystatechange=function(){return i.onReadyStateChange()},this.xhr.open(this.method,this.url,!0),!t){r=this.headers;for(e in r)h.call(r,e)&&(n=r[e],this.xhr.setRequestHeader(e,n))}return this.responseType&&("b"===this.responseType?this.xhr.overrideMimeType&&this.xhr.overrideMimeType("text/plain; charset=x-user-defined"):this.xhr.responseType=this.responseType),this},e.prototype.send=function(e){var t,n;if(this.callback=e||this.callback,null!==this.body){t=this.body,c.Util.Xhr.sendArrayBufferView?t instanceof ArrayBuffer&&(t=new Uint8Array(t)):0===t.byteOffset&&t.buffer instanceof ArrayBuffer&&(t=t.buffer);try{this.xhr.send(t)}catch(r){if(n=r,c.Util.Xhr.sendArrayBufferView||!c.Util.Xhr.wrapBlob)throw n;t=new Blob([t],{type:"application/octet-stream"}),this.xhr.send(t)}}else this.xhr.send();return this},e.urlEncode=function(e){var t,n,r;t=[];for(n in e)r=e[n],t.push(this.urlEncodeValue(n)+"="+this.urlEncodeValue(r));return t.sort().join("&")},e.urlEncodeValue=function(e){return encodeURIComponent(e.toString()).replace(/\!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},e.urlDecode=function(e){var t,n,r,i,o,a;for(n={},a=e.split("&"),i=0,o=a.length;o>i;i++)r=a[i],t=r.split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n},e.prototype.onReadyStateChange=function(){var e,t,n,r,i,o,a,s,u,l,h,d,p,f,g;if(4!==this.xhr.readyState)return!0;if(this.completed)return!0;if(this.completed=!0,this.xhr.status<200||this.xhr.status>=300)return t=new c.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(t,this.callback):this.callback(t),!0;if(this.wantHeaders?(e=this.xhr.getAllResponseHeaders(),a=e?c.Util.Xhr.parseResponseHeaders(e):this.guessResponseHeaders(),h=a["x-dropbox-metadata"]):(a=void 0,h=this.xhr.getResponseHeader("x-dropbox-metadata")),null!=h?h.length:void 0)try{l=JSON.parse(h)}catch(v){if(u=v,o=h.search(/\}\,\s*\{/),-1!==o)try{h=h.substring(0,o+1),l=JSON.parse(h)}catch(v){u=v,l=void 0}else l=void 0}else l=void 0;if(this.responseType){if("b"===this.responseType){for(i=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,n=[],s=f=0,g=i.length;g>=0?g>f:f>g;s=g>=0?++f:--f)n.push(String.fromCharCode(255&i.charCodeAt(s)));p=n.join(""),this.callback(null,p,l,a)}else this.callback(null,this.xhr.response,l,a);return!0}switch(p=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,r=this.xhr.getResponseHeader("Content-Type"),r&&(d=r.indexOf(";"),-1!==d&&(r=r.substring(0,d))),r){case"application/x-www-form-urlencoded":this.callback(null,c.Util.Xhr.urlDecode(p),l,a);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(p),l,a);break;default:this.callback(null,p,l,a)}return!0},e.parseResponseHeaders=function(e){var t,n,r,i,o,a,s,u;for(r={},n=e.split("\n"),s=0,u=n.length;u>s;s++)i=n[s],t=i.indexOf(":"),o=i.substring(0,t).trim().toLowerCase(),a=i.substring(t+1).trim(),r[o]=a;return r},e.prototype.guessResponseHeaders=function(){var e,t,n,r,i,o;for(e={},o=["cache-control","content-language","content-range","content-type","expires","last-modified","pragma","x-dropbox-metadata"],r=0,i=o.length;i>r;r++)t=o[r],n=this.xhr.getResponseHeader(t),n&&(e[t]=n);return e},e.prototype.onXdrLoad=function(){var e,t,n;if(this.completed)return!0;if(this.completed=!0,n=this.xhr.responseText,e=this.wantHeaders?{"content-type":this.xhr.contentType}:void 0,t=void 0,this.responseType)return this.callback(null,n,t,e),!0;switch(this.xhr.contentType){case"application/x-www-form-urlencoded":this.callback(null,c.Util.Xhr.urlDecode(n),t,e);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(n),t,e);break;default:this.callback(null,n,t,e)}return!0},e.prototype.onXdrError=function(){var e;return this.completed?!0:(this.completed=!0,e=new c.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(e,this.callback):this.callback(e),!0)},e}()}.call(this),function(e){var t,n={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},r='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',i=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],o=e(r).data("autosize",!0)[0];o.style.lineHeight="99px","99px"===e(o).css("lineHeight")&&i.push("lineHeight"),o.style.lineHeight="",e.fn.autosize=function(r){return this.length?(r=e.extend({},n,r||{}),o.parentNode!==document.body&&e(document.body).append(o),this.each(function(){function n(){var t,n=window.getComputedStyle?window.getComputedStyle(d,null):!1;n?(t=d.getBoundingClientRect().width,(0===t||"number"!=typeof t)&&(t=parseInt(n.width,10)),e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,r){t-=parseInt(n[r],10)})):t=p.width(),o.style.width=Math.max(t,0)+"px"}function a(){var a={};if(t=d,o.className=r.className,o.id=r.id,l=parseInt(p.css("maxHeight"),10),e.each(i,function(e,t){a[t]=p.css(t)}),e(o).css(a).attr("wrap",p.attr("wrap")),n(),window.chrome){var s=d.style.width;d.style.width="0px";{d.offsetWidth}d.style.width=s}}function s(){var e,i;t!==d?a():n(),o.value=!d.value&&r.placeholder?(p.attr("placeholder")||"")+r.append:d.value+r.append,o.style.overflowY=d.style.overflowY,i=parseInt(d.style.height,10),o.scrollTop=0,o.scrollTop=9e4,e=o.scrollTop,l&&e>l?(d.style.overflowY="scroll",e=l):(d.style.overflowY="hidden",c>e&&(e=c)),e+=f,i!==e&&(d.style.height=e+"px",g&&r.callback.call(d,d))}function u(){clearTimeout(h),h=setTimeout(function(){var e=p.width();e!==y&&(y=e,s())},parseInt(r.resizeDelay,10))}var l,c,h,d=this,p=e(d),f=0,g=e.isFunction(r.callback),v={height:d.style.height,overflow:d.style.overflow,overflowY:d.style.overflowY,wordWrap:d.style.wordWrap,resize:d.style.resize},y=p.width(),m=p.css("resize");p.data("autosize")||(p.data("autosize",!0),("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))&&(f=p.outerHeight()-p.height()),c=Math.max(parseInt(p.css("minHeight"),10)-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===m?p.css("resize","none"):"both"===m&&p.css("resize","horizontal"),"onpropertychange"in d?"oninput"in d?p.on("input.autosize keyup.autosize",s):p.on("propertychange.autosize",function(){"value"===event.propertyName&&s()}):p.on("input.autosize",s),r.resizeDelay!==!1&&e(window).on("resize.autosize",u),p.on("autosize.resize",s),p.on("autosize.resizeIncludeStyle",function(){t=null,s()}),p.on("autosize.destroy",function(){t=null,clearTimeout(h),e(window).off("resize",u),p.off("autosize").off(".autosize").css(v).removeData("autosize")}),s())})):this}}(window.jQuery||window.$),function(e,t,n){!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):jQuery&&!jQuery.fn.qtip&&e(jQuery)}(function(r){"use strict";function i(e,t,n,i){this.id=n,this.target=e,this.tooltip=D,this.elements={target:e},this._id=U+"-"+n,this.timers={img:{}},this.options=t,this.plugins={},this.cache={event:{},target:r(),disabled:P,attr:i,onTooltip:P,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=P}function o(e){return e===D||"object"!==r.type(e)}function a(e){return!(r.isFunction(e)||e&&e.attr||e.length||"object"===r.type(e)&&(e.jquery||e.then))}function s(e){var t,n,i,s;return o(e)?P:(o(e.metadata)&&(e.metadata={type:e.metadata}),"content"in e&&(t=e.content,o(t)||t.jquery||t.done?t=e.content={text:n=a(t)?P:t}:n=t.text,"ajax"in t&&(i=t.ajax,s=i&&i.once!==P,delete t.ajax,t.text=function(e,t){var o=n||r(this).attr(t.options.content.attr)||"Loading...",a=r.ajax(r.extend({},i,{context:t})).then(i.success,D,i.error).then(function(e){return e&&s&&t.set("content.text",e),
e},function(e,n,r){t.destroyed||0===e.status||t.set("content.text",n+": "+r)});return s?o:(t.set("content.text",o),a)}),"title"in t&&(o(t.title)||(t.button=t.title.button,t.title=t.title.text),a(t.title||P)&&(t.title=P))),"position"in e&&o(e.position)&&(e.position={my:e.position,at:e.position}),"show"in e&&o(e.show)&&(e.show=e.show.jquery?{target:e.show}:e.show===A?{ready:A}:{event:e.show}),"hide"in e&&o(e.hide)&&(e.hide=e.hide.jquery?{target:e.hide}:{event:e.hide}),"style"in e&&o(e.style)&&(e.style={classes:e.style}),r.each(z,function(){this.sanitize&&this.sanitize(e)}),e)}function u(e,t){for(var n,r=0,i=e,o=t.split(".");i=i[o[r++]];)r<o.length&&(n=i);return[n||e,o.pop()]}function l(e,t){var n,r,i;for(n in this.checks)for(r in this.checks[n])(i=new RegExp(r,"i").exec(e))&&(t.push(i),("builtin"===n||this.plugins[n])&&this.checks[n][r].apply(this.plugins[n]||this,t))}function c(e){return Y.concat("").join(e?"-"+e+" ":" ")}function h(n){return n&&{type:n.type,pageX:n.pageX,pageY:n.pageY,target:n.target,relatedTarget:n.relatedTarget,scrollX:n.scrollX||e.pageXOffset||t.body.scrollLeft||t.documentElement.scrollLeft,scrollY:n.scrollY||e.pageYOffset||t.body.scrollTop||t.documentElement.scrollTop}||{}}function d(e,t){return t>0?setTimeout(r.proxy(e,this),t):void e.call(this)}function p(e){return this.tooltip.hasClass(ee)?P:(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),void(this.timers.show=d.call(this,function(){this.toggle(A,e)},this.options.show.delay)))}function f(e){if(this.tooltip.hasClass(ee))return P;var t=r(e.relatedTarget),n=t.closest(X)[0]===this.tooltip[0],i=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&"mouse"===this.options.position.target&&n||this.options.hide.fixed&&/mouse(out|leave|move)/.test(e.type)&&(n||i))try{e.preventDefault(),e.stopImmediatePropagation()}catch(o){}else this.timers.hide=d.call(this,function(){this.toggle(P,e)},this.options.hide.delay,this)}function g(e){return this.tooltip.hasClass(ee)||!this.options.hide.inactive?P:(clearTimeout(this.timers.inactive),void(this.timers.inactive=d.call(this,function(){this.hide(e)},this.options.hide.inactive)))}function v(e){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(e)}function y(e,n,i){r(t.body).delegate(e,(n.split?n:n.join(se+" "))+se,function(){var e=k.api[r.attr(this,H)];e&&!e.disabled&&i.apply(e,arguments)})}function m(e,n,o){var a,u,l,c,h,d=r(t.body),p=e[0]===t?d:e,f=e.metadata?e.metadata(o.metadata):D,g="html5"===o.metadata.type&&f?f[o.metadata.name]:D,v=e.data(o.metadata.name||"qtipopts");try{v="string"==typeof v?r.parseJSON(v):v}catch(y){}if(c=r.extend(A,{},k.defaults,o,"object"==typeof v?s(v):D,s(g||f)),u=c.position,c.id=n,"boolean"==typeof c.content.text){if(l=e.attr(c.content.attr),c.content.attr===P||!l)return P;c.content.text=l}if(u.container.length||(u.container=d),u.target===P&&(u.target=p),c.show.target===P&&(c.show.target=p),c.show.solo===A&&(c.show.solo=u.container.closest("body")),c.hide.target===P&&(c.hide.target=p),c.position.viewport===A&&(c.position.viewport=u.container),u.container=u.container.eq(0),u.at=new T(u.at,A),u.my=new T(u.my),e.data(U))if(c.overwrite)e.qtip("destroy",!0);else if(c.overwrite===P)return P;return e.attr(V,n),c.suppress&&(h=e.attr("title"))&&e.removeAttr("title").attr(ne,h).attr("title",""),a=new i(e,c,n,!!l),e.data(U,a),e.one("remove.qtip-"+n+" removeqtip.qtip-"+n,function(){var e;(e=r(this).data(U))&&e.destroy(!0)}),a}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function w(e,t){var r,i,o=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+me.join(o+" ")+o).split(" "),s=0;if(ye[t])return e.css(ye[t]);for(;r=a[s++];)if((i=e.css(r))!==n)return ye[t]=r,i}function x(e,t){return Math.ceil(parseFloat(w(e,t)))}function _(e,t){this._ns="tip",this.options=t,this.offset=t.offset,this.size=[t.width,t.height],this.init(this.qtip=e)}function E(e,t){this.options=t,this._ns="-modal",this.init(this.qtip=e)}var k,S,T,C,N,A=!0,P=!1,D=null,$="x",M="y",I="width",O="height",L="top",j="left",R="bottom",q="right",F="center",B="flipinvert",G="shift",z={},U="qtip",V="data-hasqtip",H="data-qtip-id",Y=["ui-widget","ui-tooltip"],X="."+U,W="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Z=U+"-fixed",Q=U+"-default",J=U+"-focus",K=U+"-hover",ee=U+"-disabled",te="_replacedByqTip",ne="oldtitle",re={ie:function(){for(var e=3,n=t.createElement("div");(n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n.getElementsByTagName("i")[0];);return e>4?e:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||P};S=i.prototype,S._when=function(e){return r.when.apply(r,e)},S.render=function(e){if(this.rendered||this.destroyed)return this;var t,n=this,i=this.options,o=this.cache,a=this.elements,s=i.content.text,u=i.content.title,l=i.content.button,c=i.position,h=("."+this._id+" ",[]);return r.attr(this.target[0],"aria-describedby",this._id),this.tooltip=a.tooltip=t=r("<div/>",{id:this._id,"class":[U,Q,i.style.classes,U+"-pos-"+i.position.my.abbrev()].join(" "),width:i.style.width||"",height:i.style.height||"",tracking:"mouse"===c.target&&c.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":P,"aria-describedby":this._id+"-content","aria-hidden":A}).toggleClass(ee,this.disabled).attr(H,this.id).data(U,this).appendTo(c.container).append(a.content=r("<div />",{"class":U+"-content",id:this._id+"-content","aria-atomic":A})),this.rendered=-1,this.positioning=A,u&&(this._createTitle(),r.isFunction(u)||h.push(this._updateTitle(u,P))),l&&this._createButton(),r.isFunction(s)||h.push(this._updateContent(s,P)),this.rendered=A,this._setWidget(),r.each(z,function(e){var t;"render"===this.initialize&&(t=this(n))&&(n.plugins[e]=t)}),this._unassignEvents(),this._assignEvents(),this._when(h).then(function(){n._trigger("render"),n.positioning=P,n.hiddenDuringWait||!i.show.ready&&!e||n.toggle(A,o.event,P),n.hiddenDuringWait=P}),k.api[this.id]=this,this},S.destroy=function(e){function t(){if(!this.destroyed){this.destroyed=A;var e=this.target,t=e.attr(ne);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),r.each(this.plugins,function(e){this.destroy&&this.destroy()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),e.removeData(U).removeAttr(H).removeAttr(V).removeAttr("aria-describedby"),this.options.suppress&&t&&e.attr("title",t).removeAttr(ne),this._unbind(e),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=D,delete k.api[this.id]}}return this.destroyed?this.target:(e===A&&"hide"!==this.triggering||!this.rendered?t.call(this):(this.tooltip.one("tooltiphidden",r.proxy(t,this)),!this.triggering&&this.hide()),this.target)},C=S.checks={builtin:{"^id$":function(e,t,n,i){var o=n===A?k.nextid:n,a=U+"-"+o;o!==P&&o.length>0&&!r("#"+a).length?(this._id=a,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):e[t]=i},"^prerender":function(e,t,n){n&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(e,t,n){this._updateContent(n)},"^content.attr$":function(e,t,n,r){this.options.content.text===this.target.attr(r)&&this._updateContent(this.target.attr(n))},"^content.title$":function(e,t,n){return n?(n&&!this.elements.title&&this._createTitle(),void this._updateTitle(n)):this._removeTitle()},"^content.button$":function(e,t,n){this._updateButton(n)},"^content.title.(text|button)$":function(e,t,n){this.set("content."+t,n)},"^position.(my|at)$":function(e,t,n){"string"==typeof n&&(e[t]=new T(n,"at"===t))},"^position.container$":function(e,t,n){this.rendered&&this.tooltip.appendTo(n)},"^show.ready$":function(e,t,n){n&&(!this.rendered&&this.render(A)||this.toggle(A))},"^style.classes$":function(e,t,n,r){this.rendered&&this.tooltip.removeClass(r).addClass(n)},"^style.(width|height)":function(e,t,n){this.rendered&&this.tooltip.css(t,n)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(e,t,n){this.rendered&&this.tooltip.toggleClass(Q,!!n)},"^events.(render|show|move|hide|focus|blur)$":function(e,t,n){this.rendered&&this.tooltip[(r.isFunction(n)?"":"un")+"bind"]("tooltip"+t,n)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var e=this.options.position;this.tooltip.attr("tracking","mouse"===e.target&&e.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},S.get=function(e){if(this.destroyed)return this;var t=u(this.options,e.toLowerCase()),n=t[0][t[1]];return n.precedance?n.string():n};var ie=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,oe=/^prerender|show\.ready/i;S.set=function(e,t){if(this.destroyed)return this;{var n,i=this.rendered,o=P,a=this.options;this.checks}return"string"==typeof e?(n=e,e={},e[n]=t):e=r.extend({},e),r.each(e,function(t,n){if(i&&oe.test(t))return void delete e[t];var s,l=u(a,t.toLowerCase());s=l[0][l[1]],l[0][l[1]]=n&&n.nodeType?r(n):n,o=ie.test(t)||o,e[t]=[l[0],l[1],n,s]}),s(a),this.positioning=A,r.each(e,r.proxy(l,this)),this.positioning=P,this.rendered&&this.tooltip[0].offsetWidth>0&&o&&this.reposition("mouse"===a.position.target?D:this.cache.event),this},S._update=function(e,t,n){var i=this,o=this.cache;return this.rendered&&e?(r.isFunction(e)&&(e=e.call(this.elements.target,o.event,this)||""),r.isFunction(e.then)?(o.waiting=A,e.then(function(e){return o.waiting=P,i._update(e,t)},D,function(e){return i._update(e,t)})):e===P||!e&&""!==e?P:(e.jquery&&e.length>0?t.empty().append(e.css({display:"block",visibility:"visible"})):t.html(e),this._waitForContent(t).then(function(e){e.images&&e.images.length&&i.rendered&&i.tooltip[0].offsetWidth>0&&i.reposition(o.event,!e.length)}))):P},S._waitForContent=function(e){var t=this.cache;return t.waiting=A,(r.fn.imagesLoaded?e.imagesLoaded():r.Deferred().resolve([])).done(function(){t.waiting=P}).promise()},S._updateContent=function(e,t){this._update(e,this.elements.content,t)},S._updateTitle=function(e,t){this._update(e,this.elements.title,t)===P&&this._removeTitle(P)},S._createTitle=function(){var e=this.elements,t=this._id+"-title";e.titlebar&&this._removeTitle(),e.titlebar=r("<div />",{"class":U+"-titlebar "+(this.options.style.widget?c("header"):"")}).append(e.title=r("<div />",{id:t,"class":U+"-title","aria-atomic":A})).insertBefore(e.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(e){r(this).toggleClass("ui-state-active ui-state-focus","down"===e.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(e){r(this).toggleClass("ui-state-hover","mouseover"===e.type)}),this.options.content.button&&this._createButton()},S._removeTitle=function(e){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=D,e!==P&&this.reposition())},S.reposition=function(n,i){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=A;var o,a,s=this.cache,u=this.tooltip,l=this.options.position,c=l.target,h=l.my,d=l.at,p=l.viewport,f=l.container,g=l.adjust,v=g.method.split(" "),y=u.outerWidth(P),m=u.outerHeight(P),b=0,w=0,x=u.css("position"),_={left:0,top:0},E=u[0].offsetWidth>0,k=n&&"scroll"===n.type,S=r(e),T=f[0].ownerDocument,C=this.mouse;if(r.isArray(c)&&2===c.length)d={x:j,y:L},_={left:c[0],top:c[1]};else if("mouse"===c)d={x:j,y:L},!C||!C.pageX||!g.mouse&&n&&n.pageX?n&&n.pageX||((!g.mouse||this.options.show.distance)&&s.origin&&s.origin.pageX?n=s.origin:(!n||n&&("resize"===n.type||"scroll"===n.type))&&(n=s.event)):n=C,"static"!==x&&(_=f.offset()),T.body.offsetWidth!==(e.innerWidth||T.documentElement.clientWidth)&&(a=r(t.body).offset()),_={left:n.pageX-_.left+(a&&a.left||0),top:n.pageY-_.top+(a&&a.top||0)},g.mouse&&k&&C&&(_.left-=(C.scrollX||0)-S.scrollLeft(),_.top-=(C.scrollY||0)-S.scrollTop());else{if("event"===c?n&&n.target&&"scroll"!==n.type&&"resize"!==n.type?s.target=r(n.target):n.target||(s.target=this.elements.target):"event"!==c&&(s.target=r(c.jquery?c:this.elements.target)),c=s.target,c=r(c).eq(0),0===c.length)return this;c[0]===t||c[0]===e?(b=re.iOS?e.innerWidth:c.width(),w=re.iOS?e.innerHeight:c.height(),c[0]===e&&(_={top:(p||c).scrollTop(),left:(p||c).scrollLeft()})):z.imagemap&&c.is("area")?o=z.imagemap(this,c,d,z.viewport?v:P):z.svg&&c&&c[0].ownerSVGElement?o=z.svg(this,c,d,z.viewport?v:P):(b=c.outerWidth(P),w=c.outerHeight(P),_=c.offset()),o&&(b=o.width,w=o.height,a=o.offset,_=o.position),_=this.reposition.offset(c,_,f),(re.iOS>3.1&&re.iOS<4.1||re.iOS>=4.3&&re.iOS<4.33||!re.iOS&&"fixed"===x)&&(_.left-=S.scrollLeft(),_.top-=S.scrollTop()),(!o||o&&o.adjustable!==P)&&(_.left+=d.x===q?b:d.x===F?b/2:0,_.top+=d.y===R?w:d.y===F?w/2:0)}return _.left+=g.x+(h.x===q?-y:h.x===F?-y/2:0),_.top+=g.y+(h.y===R?-m:h.y===F?-m/2:0),z.viewport?(_.adjusted=z.viewport(this,_,l,b,w,y,m),a&&_.adjusted.left&&(_.left+=a.left),a&&_.adjusted.top&&(_.top+=a.top)):_.adjusted={left:0,top:0},this._trigger("move",[_,p.elem||p],n)?(delete _.adjusted,i===P||!E||isNaN(_.left)||isNaN(_.top)||"mouse"===c||!r.isFunction(l.effect)?u.css(_):r.isFunction(l.effect)&&(l.effect.call(u,this,r.extend({},_)),u.queue(function(e){r(this).css({opacity:"",height:""}),re.ie&&this.style.removeAttribute("filter"),e()})),this.positioning=P,this):this},S.reposition.offset=function(e,n,i){function o(e,t){n.left+=t*e.scrollLeft(),n.top+=t*e.scrollTop()}if(!i[0])return n;var a,s,u,l,c=r(e[0].ownerDocument),h=!!re.ie&&"CSS1Compat"!==t.compatMode,d=i[0];do"static"!==(s=r.css(d,"position"))&&("fixed"===s?(u=d.getBoundingClientRect(),o(c,-1)):(u=r(d).position(),u.left+=parseFloat(r.css(d,"borderLeftWidth"))||0,u.top+=parseFloat(r.css(d,"borderTopWidth"))||0),n.left-=u.left+(parseFloat(r.css(d,"marginLeft"))||0),n.top-=u.top+(parseFloat(r.css(d,"marginTop"))||0),a||"hidden"===(l=r.css(d,"overflow"))||"visible"===l||(a=r(d)));while(d=d.offsetParent);return a&&(a[0]!==c[0]||h)&&o(a,1),n};var ae=(T=S.reposition.Corner=function(e,t){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,F).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var n=e.charAt(0);this.precedance="t"===n||"b"===n?M:$}).prototype;ae.invert=function(e,t){this[e]=this[e]===j?q:this[e]===q?j:t||this[e]},ae.string=function(){var e=this.x,t=this.y;return e===t?e:this.precedance===M||this.forceY&&"center"!==t?t+" "+e:e+" "+t},ae.abbrev=function(){var e=this.string().split(" ");return e[0].charAt(0)+(e[1]&&e[1].charAt(0)||"")},ae.clone=function(){return new T(this.string(),this.forceY)},S.toggle=function(e,n){var i=this.cache,o=this.options,a=this.tooltip;if(n){if(/over|enter/.test(n.type)&&/out|leave/.test(i.event.type)&&o.show.target.add(n.target).length===o.show.target.length&&a.has(n.relatedTarget).length)return this;i.event=h(n)}if(this.waiting&&!e&&(this.hiddenDuringWait=A),!this.rendered)return e?this.render(1):this;if(this.destroyed||this.disabled)return this;var s,u,l,c=e?"show":"hide",d=this.options[c],p=(this.options[e?"hide":"show"],this.options.position),f=this.options.content,g=this.tooltip.css("width"),v=this.tooltip.is(":visible"),y=e||1===d.target.length,m=!n||d.target.length<2||i.target[0]===n.target;return(typeof e).search("boolean|number")&&(e=!v),s=!a.is(":animated")&&v===e&&m,u=s?D:!!this._trigger(c,[90]),this.destroyed?this:(u!==P&&e&&this.focus(n),!u||s?this:(r.attr(a[0],"aria-hidden",!e),e?(i.origin=h(this.mouse),r.isFunction(f.text)&&this._updateContent(f.text,P),r.isFunction(f.title)&&this._updateTitle(f.title,P),!N&&"mouse"===p.target&&p.adjust.mouse&&(r(t).bind("mousemove."+U,this._storeMouse),N=A),g||a.css("width",a.outerWidth(P)),this.reposition(n,arguments[2]),g||a.css("width",""),d.solo&&("string"==typeof d.solo?r(d.solo):r(X,d.solo)).not(a).not(d.target).qtip("hide",r.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete i.origin,N&&!r(X+'[tracking="true"]:visible',d.solo).not(a).length&&(r(t).unbind("mousemove."+U),N=P),this.blur(n)),l=r.proxy(function(){e?(re.ie&&a[0].style.removeAttribute("filter"),a.css("overflow",""),"string"==typeof d.autofocus&&r(this.options.show.autofocus,a).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):a.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(e?"visible":"hidden")},this),d.effect===P||y===P?(a[c](),l()):r.isFunction(d.effect)?(a.stop(1,1),d.effect.call(a,this),a.queue("fx",function(e){l(),e()})):a.fadeTo(90,e?1:0,l),e&&d.target.trigger("qtip-"+this.id+"-inactive"),this))},S.show=function(e){return this.toggle(A,e)},S.hide=function(e){return this.toggle(P,e)},S.focus=function(e){if(!this.rendered||this.destroyed)return this;var t=r(X),n=this.tooltip,i=parseInt(n[0].style.zIndex,10),o=k.zindex+t.length;return n.hasClass(J)||this._trigger("focus",[o],e)&&(i!==o&&(t.each(function(){this.style.zIndex>i&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+J).qtip("blur",e)),n.addClass(J)[0].style.zIndex=o),this},S.blur=function(e){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(J),this._trigger("blur",[this.tooltip.css("zIndex")],e),this)},S.disable=function(e){return this.destroyed?this:("toggle"===e?e=!(this.rendered?this.tooltip.hasClass(ee):this.disabled):"boolean"!=typeof e&&(e=A),this.rendered&&this.tooltip.toggleClass(ee,e).attr("aria-disabled",e),this.disabled=!!e,this)},S.enable=function(){return this.disable(P)},S._createButton=function(){var e=this,t=this.elements,n=t.tooltip,i=this.options.content.button,o="string"==typeof i,a=o?i:"Close tooltip";t.button&&t.button.remove(),t.button=i.jquery?i:r("<a />",{"class":"qtip-close "+(this.options.style.widget?"":U+"-icon"),title:a,"aria-label":a}).prepend(r("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),t.button.appendTo(t.titlebar||n).attr("role","button").click(function(t){return n.hasClass(ee)||e.hide(t),P})},S._updateButton=function(e){if(!this.rendered)return P;var t=this.elements.button;e?this._createButton():t.remove()},S._setWidget=function(){var e=this.options.style.widget,t=this.elements,n=t.tooltip,r=n.hasClass(ee);n.removeClass(ee),ee=e?"ui-state-disabled":"qtip-disabled",n.toggleClass(ee,r),n.toggleClass("ui-helper-reset "+c(),e).toggleClass(Q,this.options.style.def&&!e),t.content&&t.content.toggleClass(c("content"),e),t.titlebar&&t.titlebar.toggleClass(c("header"),e),t.button&&t.button.toggleClass(U+"-icon",!e)},S._storeMouse=function(e){(this.mouse=h(e)).type="mousemove"},S._bind=function(e,t,n,i,o){var a="."+this._id+(i?"-"+i:"");t.length&&r(e).bind((t.split?t:t.join(a+" "))+a,r.proxy(n,o||this))},S._unbind=function(e,t){r(e).unbind("."+this._id+(t?"-"+t:""))};var se="."+U;r(function(){y(X,["mouseenter","mouseleave"],function(e){var t="mouseenter"===e.type,n=r(e.currentTarget),i=r(e.relatedTarget||e.target),o=this.options;t?(this.focus(e),n.hasClass(Z)&&!n.hasClass(ee)&&clearTimeout(this.timers.hide)):"mouse"===o.position.target&&o.hide.event&&o.show.target&&!i.closest(o.show.target[0]).length&&this.hide(e),n.toggleClass(K,t)}),y("["+H+"]",W,g)}),S._trigger=function(e,t,n){var i=r.Event("tooltip"+e);return i.originalEvent=n&&r.extend({},n)||this.cache.event||D,this.triggering=e,this.tooltip.trigger(i,[this].concat(t||[])),this.triggering=P,!i.isDefaultPrevented()},S._bindEvents=function(e,t,n,i,o,a){if(i.add(n).length===i.length){var s=[];t=r.map(t,function(t){var n=r.inArray(t,e);return n>-1?void s.push(e.splice(n,1)[0]):t}),s.length&&this._bind(n,s,function(e){var t=this.rendered?this.tooltip[0].offsetWidth>0:!1;(t?a:o).call(this,e)})}this._bind(n,e,o),this._bind(i,t,a)},S._assignInitialEvents=function(e){function t(e){return this.disabled||this.destroyed?P:(this.cache.event=h(e),this.cache.target=e?r(e.target):[n],clearTimeout(this.timers.show),void(this.timers.show=d.call(this,function(){this.render("object"==typeof e||i.show.ready)},i.show.delay)))}var i=this.options,o=i.show.target,a=i.hide.target,s=i.show.event?r.trim(""+i.show.event).split(" "):[],u=i.hide.event?r.trim(""+i.hide.event).split(" "):[];/mouse(over|enter)/i.test(i.show.event)&&!/mouse(out|leave)/i.test(i.hide.event)&&u.push("mouseleave"),this._bind(o,"mousemove",function(e){this._storeMouse(e),this.cache.onTarget=A}),this._bindEvents(s,u,o,a,t,function(){clearTimeout(this.timers.show)}),(i.show.ready||i.prerender)&&t.call(this,e)},S._assignEvents=function(){var n=this,i=this.options,o=i.position,a=this.tooltip,s=i.show.target,u=i.hide.target,l=o.container,c=o.viewport,h=r(t),d=(r(t.body),r(e)),y=i.show.event?r.trim(""+i.show.event).split(" "):[],m=i.hide.event?r.trim(""+i.hide.event).split(" "):[];r.each(i.events,function(e,t){n._bind(a,"toggle"===e?["tooltipshow","tooltiphide"]:["tooltip"+e],t,null,a)}),/mouse(out|leave)/i.test(i.hide.event)&&"window"===i.hide.leave&&this._bind(h,["mouseout","blur"],function(e){/select|option/.test(e.target.nodeName)||e.relatedTarget||this.hide(e)}),i.hide.fixed?u=u.add(a.addClass(Z)):/mouse(over|enter)/i.test(i.show.event)&&this._bind(u,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+i.hide.event).indexOf("unfocus")>-1&&this._bind(l.closest("html"),["mousedown","touchstart"],function(e){var t=r(e.target),n=this.rendered&&!this.tooltip.hasClass(ee)&&this.tooltip[0].offsetWidth>0,i=t.parents(X).filter(this.tooltip[0]).length>0;t[0]===this.target[0]||t[0]===this.tooltip[0]||i||this.target.has(t[0]).length||!n||this.hide(e)}),"number"==typeof i.hide.inactive&&(this._bind(s,"qtip-"+this.id+"-inactive",g),this._bind(u.add(a),k.inactiveEvents,g,"-inactive")),this._bindEvents(y,m,s,u,p,f),this._bind(s.add(a),"mousemove",function(e){if("number"==typeof i.hide.distance){var t=this.cache.origin||{},n=this.options.hide.distance,r=Math.abs;(r(e.pageX-t.pageX)>=n||r(e.pageY-t.pageY)>=n)&&this.hide(e)}this._storeMouse(e)}),"mouse"===o.target&&o.adjust.mouse&&(i.hide.event&&this._bind(s,["mouseenter","mouseleave"],function(e){this.cache.onTarget="mouseenter"===e.type}),this._bind(h,"mousemove",function(e){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(ee)&&this.tooltip[0].offsetWidth>0&&this.reposition(e)})),(o.adjust.resize||c.length)&&this._bind(r.event.special.resize?c:d,"resize",v),o.adjust.scroll&&this._bind(d.add(o.container),"scroll",v)},S._unassignEvents=function(){var n=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],e,t];this._unbind(r([]).pushStack(r.grep(n,function(e){return"object"==typeof e})))},k=r.fn.qtip=function(e,t,i){var o=(""+e).toLowerCase(),a=D,u=r.makeArray(arguments).slice(1),l=u[u.length-1],c=this[0]?r.data(this[0],U):D;return!arguments.length&&c||"api"===o?c:"string"==typeof e?(this.each(function(){var e=r.data(this,U);if(!e)return A;if(l&&l.timeStamp&&(e.cache.event=l),!t||"option"!==o&&"options"!==o)e[o]&&e[o].apply(e,u);else{if(i===n&&!r.isPlainObject(t))return a=e.get(t),P;e.set(t,i)}}),a!==D?a:this):"object"!=typeof e&&arguments.length?void 0:(c=s(r.extend(A,{},e)),this.each(function(e){var t,n;return n=r.isArray(c.id)?c.id[e]:c.id,n=!n||n===P||n.length<1||k.api[n]?k.nextid++:n,t=m(r(this),n,c),t===P?A:(k.api[n]=t,r.each(z,function(){"initialize"===this.initialize&&this(t)}),void t._assignInitialEvents(l))}))},r.qtip=i,k.api={},r.each({attr:function(e,t){if(this.length){var n=this[0],i="title",o=r.data(n,"qtip");if(e===i&&o&&"object"==typeof o&&o.options.suppress)return arguments.length<2?r.attr(n,ne):(o&&o.options.content.attr===i&&o.cache.attr&&o.set("content.text",t),this.attr(ne,t))}return r.fn["attr"+te].apply(this,arguments)},clone:function(e){var t=(r([]),r.fn["clone"+te].apply(this,arguments));return e||t.filter("["+ne+"]").attr("title",function(){return r.attr(this,ne)}).removeAttr(ne),t}},function(e,t){if(!t||r.fn[e+te])return A;var n=r.fn[e+te]=r.fn[e];r.fn[e]=function(){return t.apply(this,arguments)||n.apply(this,arguments)}}),r.ui||(r["cleanData"+te]=r.cleanData,r.cleanData=function(e){for(var t,n=0;(t=r(e[n])).length;n++)if(t.attr(V))try{t.triggerHandler("removeqtip")}catch(i){}r["cleanData"+te].apply(this,arguments)}),k.version="2.2.0",k.nextid=0,k.inactiveEvents=W,k.zindex=15e3,k.defaults={prerender:P,id:P,overwrite:A,suppress:A,content:{text:A,attr:"title",title:P,button:P},position:{my:"top left",at:"bottom right",target:P,container:P,viewport:P,adjust:{x:0,y:0,mouse:A,scroll:A,resize:A,method:"flipinvert flipinvert"},effect:function(e,t,n){r(this).animate(t,{duration:200,queue:P})}},show:{target:P,event:"mouseenter",effect:A,delay:90,solo:P,ready:P,autofocus:P},hide:{target:P,event:"mouseleave",effect:A,delay:0,fixed:P,inactive:P,leave:"window",distance:P},style:{classes:"",widget:P,width:P,height:P,def:A},events:{render:D,move:D,show:D,hide:D,toggle:D,visible:D,hidden:D,focus:D,blur:D}};var ue,le="margin",ce="border",he="color",de="background-color",pe="transparent",fe=" !important",ge=!!t.createElement("canvas").getContext,ve=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ye={},me=["Webkit","O","Moz","ms"];if(ge)var be=e.devicePixelRatio||1,we=function(){var e=t.createElement("canvas").getContext("2d");return e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1}(),xe=be/we;else var _e=function(e,t,n){return"<qtipvml:"+e+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(n||"")+'" />'};r.extend(_.prototype,{init:function(e){var t,n;n=this.element=e.elements.tip=r("<div />",{"class":U+"-tip"}).prependTo(e.tooltip),ge?(t=r("<canvas />").appendTo(this.element)[0].getContext("2d"),t.lineJoin="miter",t.miterLimit=1e5,t.save()):(t=_e("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(t+t),e._bind(r("*",n).add(n),["click","mousedown"],function(e){e.stopPropagation()},this._ns)),e._bind(e.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(e){var t=this.qtip.elements.titlebar;return t&&(e.y===L||e.y===F&&this.element.position().top+this.size[1]/2+this.options.offset<t.outerHeight(A))},_parseCorner:function(e){var t=this.qtip.options.position.my;return e===P||t===P?e=P:e===A?e=new T(t.string()):e.string||(e=new T(e),e.fixed=A),e},_parseWidth:function(e,t,n){var r=this.qtip.elements,i=ce+b(t)+"Width";return(n?x(n,i):x(r.content,i)||x(this._useTitle(e)&&r.titlebar||r.content,i)||x(r.tooltip,i))||0},_parseRadius:function(e){var t=this.qtip.elements,n=ce+b(e.y)+b(e.x)+"Radius";return re.ie<9?0:x(this._useTitle(e)&&t.titlebar||t.content,n)||x(t.tooltip,n)||0},_invalidColour:function(e,t,n){var r=e.css(t);return!r||n&&r===e.css(n)||ve.test(r)?P:r},_parseColours:function(e){var t=this.qtip.elements,n=this.element.css("cssText",""),i=ce+b(e[e.precedance])+b(he),o=this._useTitle(e)&&t.titlebar||t.content,a=this._invalidColour,s=[];return s[0]=a(n,de)||a(o,de)||a(t.content,de)||a(t.tooltip,de)||n.css(de),s[1]=a(n,i,he)||a(o,i,he)||a(t.content,i,he)||a(t.tooltip,i,he)||t.tooltip.css(i),r("*",n).add(n).css("cssText",de+":"+pe+fe+";"+ce+":0"+fe+";"),s},_calculateSize:function(e){var t,n,r,i=e.precedance===M,o=this.options.width,a=this.options.height,s="c"===e.abbrev(),u=(i?o:a)*(s?.5:1),l=Math.pow,c=Math.round,h=Math.sqrt(l(u,2)+l(a,2)),d=[this.border/u*h,this.border/a*h];return d[2]=Math.sqrt(l(d[0],2)-l(this.border,2)),d[3]=Math.sqrt(l(d[1],2)-l(this.border,2)),t=h+d[2]+d[3]+(s?0:d[0]),n=t/h,r=[c(n*o),c(n*a)],i?r:r.reverse()},_calculateTip:function(e,t,n){n=n||1,t=t||this.size;var r=t[0]*n,i=t[1]*n,o=Math.ceil(r/2),a=Math.ceil(i/2),s={br:[0,0,r,i,r,0],bl:[0,0,r,0,0,i],tr:[0,i,r,0,r,i],tl:[0,0,0,i,r,i],tc:[0,i,o,0,r,i],bc:[0,0,r,0,o,i],rc:[0,0,r,a,0,i],lc:[r,0,r,i,0,a]};return s.lt=s.br,s.rt=s.bl,s.lb=s.tr,s.rb=s.tl,s[e.abbrev()]},_drawCoords:function(e,t){e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.closePath()},create:function(){var e=this.corner=(ge||re.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=e.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,n){if(!this.enabled)return this;var i,o,a,s,u,l,c,h,d=this.qtip.elements,p=this.element,f=p.children(),g=this.options,v=this.size,y=g.mimic,m=Math.round;t||(t=this.qtip.cache.corner||this.corner),y===P?y=t:(y=new T(y),y.precedance=t.precedance,"inherit"===y.x?y.x=t.x:"inherit"===y.y?y.y=t.y:y.x===y.y&&(y[t.precedance]=t[t.precedance])),o=y.precedance,t.precedance===$?this._swapDimensions():this._resetDimensions(),i=this.color=this._parseColours(t),i[1]!==pe?(h=this.border=this._parseWidth(t,t[t.precedance]),g.border&&1>h&&!ve.test(i[1])&&(i[0]=i[1]),this.border=h=g.border!==A?g.border:h):this.border=h=0,c=this.size=this._calculateSize(t),p.css({width:c[0],height:c[1],lineHeight:c[1]+"px"}),l=t.precedance===M?[m(y.x===j?h:y.x===q?c[0]-v[0]-h:(c[0]-v[0])/2),m(y.y===L?c[1]-v[1]:0)]:[m(y.x===j?c[0]-v[0]:0),m(y.y===L?h:y.y===R?c[1]-v[1]-h:(c[1]-v[1])/2)],ge?(a=f[0].getContext("2d"),a.restore(),a.save(),a.clearRect(0,0,6e3,6e3),s=this._calculateTip(y,v,xe),u=this._calculateTip(y,this.size,xe),f.attr(I,c[0]*xe).attr(O,c[1]*xe),f.css(I,c[0]).css(O,c[1]),this._drawCoords(a,u),a.fillStyle=i[1],a.fill(),a.translate(l[0]*xe,l[1]*xe),this._drawCoords(a,s),a.fillStyle=i[0],a.fill()):(s=this._calculateTip(y),s="m"+s[0]+","+s[1]+" l"+s[2]+","+s[3]+" "+s[4]+","+s[5]+" xe",l[2]=h&&/^(r|b)/i.test(t.string())?8===re.ie?2:1:0,f.css({coordsize:c[0]+h+" "+(c[1]+h),antialias:""+(y.string().indexOf(F)>-1),left:l[0]-l[2]*Number(o===$),top:l[1]-l[2]*Number(o===M),width:c[0]+h,height:c[1]+h}).each(function(e){var t=r(this);t[t.prop?"prop":"attr"]({coordsize:c[0]+h+" "+(c[1]+h),path:s,fillcolor:i[0],filled:!!e,stroked:!e}).toggle(!(!h&&!e)),!e&&t.html(_e("stroke",'weight="'+2*h+'px" color="'+i[1]+'" miterlimit="1000" joinstyle="miter"'))})),e.opera&&setTimeout(function(){d.tip.css({display:"inline-block",visibility:"visible"})},1),n!==P&&this.calculate(t,c)},calculate:function(e,t){if(!this.enabled)return P;var n,i,o=this,a=this.qtip.elements,s=this.element,u=this.options.offset,l=(a.tooltip.hasClass("ui-widget"),{});return e=e||this.corner,n=e.precedance,t=t||this._calculateSize(e),i=[e.x,e.y],n===$&&i.reverse(),r.each(i,function(r,i){var s,c,h;i===F?(s=n===M?j:L,l[s]="50%",l[le+"-"+s]=-Math.round(t[n===M?0:1]/2)+u):(s=o._parseWidth(e,i,a.tooltip),c=o._parseWidth(e,i,a.content),h=o._parseRadius(e),l[i]=Math.max(-o.border,r?c:u+(h>s?h:-s)))}),l[e[n]]-=t[n===$?0:1],s.css({margin:"",top:"",bottom:"",left:"",right:""}).css(l),l},reposition:function(e,t,r,i){function o(e,t,n,r,i){e===G&&c.precedance===t&&h[r]&&c[n]!==F?c.precedance=c.precedance===$?M:$:e!==G&&h[r]&&(c[t]=c[t]===F?h[r]>0?r:i:c[t]===r?i:r)}function a(e,t,i){c[e]===F?v[le+"-"+t]=g[e]=s[le+"-"+t]-h[t]:(u=s[i]!==n?[h[t],-s[t]]:[-h[t],s[t]],(g[e]=Math.max(u[0],u[1]))>u[0]&&(r[t]-=h[t],g[t]=P),v[s[i]!==n?i:t]=g[e])}if(this.enabled){var s,u,l=t.cache,c=this.corner.clone(),h=r.adjusted,d=t.options.position.adjust.method.split(" "),p=d[0],f=d[1]||d[0],g={left:P,top:P,x:0,y:0},v={};this.corner.fixed!==A&&(o(p,$,M,j,q),o(f,M,$,L,R),c.string()===l.corner.string()||l.cornerTop===h.top&&l.cornerLeft===h.left||this.update(c,P)),s=this.calculate(c),s.right!==n&&(s.left=-s.right),s.bottom!==n&&(s.top=-s.bottom),s.user=this.offset,(g.left=p===G&&!!h.left)&&a($,j,q),(g.top=f===G&&!!h.top)&&a(M,L,R),this.element.css(v).toggle(!(g.x&&g.y||c.x===F&&g.y||c.y===F&&g.x)),r.left-=s.left.charAt?s.user:p!==G||g.top||!g.left&&!g.top?s.left+this.border:0,
r.top-=s.top.charAt?s.user:f!==G||g.left||!g.left&&!g.top?s.top+this.border:0,l.cornerLeft=h.left,l.cornerTop=h.top,l.corner=c.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),ue=z.tip=function(e){return new _(e,e.options.style.tip)},ue.initialize="render",ue.sanitize=function(e){if(e.style&&"tip"in e.style){var t=e.style.tip;"object"!=typeof t&&(t=e.style.tip={corner:t}),/string|boolean/i.test(typeof t.corner)||(t.corner=A)}},C.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(e){this.size=[e.width,e.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},r.extend(A,k.defaults,{style:{tip:{corner:A,mimic:P,width:6,height:6,border:A,offset:0}}}),z.viewport=function(n,r,i,o,a,s,u){function l(e,t,n,i,o,a,s,u,l){var c=r[o],d=x[e],b=_[e],w=n===G,E=d===o?l:d===a?-l:-l/2,k=b===o?u:b===a?-u:-u/2,S=y[o]+m[o]-(f?0:p[o]),T=S-c,C=c+l-(s===I?g:v)-S,N=E-(x.precedance===e||d===x[t]?k:0)-(b===F?u/2:0);return w?(N=(d===o?1:-1)*E,r[o]+=T>0?T:C>0?-C:0,r[o]=Math.max(-p[o]+m[o],c-N,Math.min(Math.max(-p[o]+m[o]+(s===I?g:v),c+N),r[o],"center"===d?c-E:1e9))):(i*=n===B?2:0,T>0&&(d!==o||C>0)?(r[o]-=N+i,h.invert(e,o)):C>0&&(d!==a||T>0)&&(r[o]-=(d===F?-N:N)+i,h.invert(e,a)),r[o]<y&&-r[o]>C&&(r[o]=c,h=x.clone())),r[o]-c}var c,h,d,p,f,g,v,y,m,b=i.target,w=n.elements.tooltip,x=i.my,_=i.at,E=i.adjust,k=E.method.split(" "),S=k[0],T=k[1]||k[0],C=i.viewport,N=i.container,A=n.cache,D={left:0,top:0};return C.jquery&&b[0]!==e&&b[0]!==t.body&&"none"!==E.method?(p=N.offset()||D,f="static"===N.css("position"),c="fixed"===w.css("position"),g=C[0]===e?C.width():C.outerWidth(P),v=C[0]===e?C.height():C.outerHeight(P),y={left:c?0:C.scrollLeft(),top:c?0:C.scrollTop()},m=C.offset()||D,("shift"!==S||"shift"!==T)&&(h=x.clone()),D={left:"none"!==S?l($,M,S,E.x,j,q,I,o,s):0,top:"none"!==T?l(M,$,T,E.y,L,R,O,a,u):0},h&&A.lastClass!==(d=U+"-pos-"+h.abbrev())&&w.removeClass(n.cache.lastClass).addClass(n.cache.lastClass=d),D):D},z.polys={polygon:function(e,t){var n,r,i,o={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:P},a=0,s=[],u=1,l=1,c=0,h=0;for(a=e.length;a--;)n=[parseInt(e[--a],10),parseInt(e[a+1],10)],n[0]>o.position.right&&(o.position.right=n[0]),n[0]<o.position.left&&(o.position.left=n[0]),n[1]>o.position.bottom&&(o.position.bottom=n[1]),n[1]<o.position.top&&(o.position.top=n[1]),s.push(n);if(r=o.width=Math.abs(o.position.right-o.position.left),i=o.height=Math.abs(o.position.bottom-o.position.top),"c"===t.abbrev())o.position={left:o.position.left+o.width/2,top:o.position.top+o.height/2};else{for(;r>0&&i>0&&u>0&&l>0;)for(r=Math.floor(r/2),i=Math.floor(i/2),t.x===j?u=r:t.x===q?u=o.width-r:u+=Math.floor(r/2),t.y===L?l=i:t.y===R?l=o.height-i:l+=Math.floor(i/2),a=s.length;a--&&!(s.length<2);)c=s[a][0]-o.position.left,h=s[a][1]-o.position.top,(t.x===j&&c>=u||t.x===q&&u>=c||t.x===F&&(u>c||c>o.width-u)||t.y===L&&h>=l||t.y===R&&l>=h||t.y===F&&(l>h||h>o.height-l))&&s.splice(a,1);o.position={left:s[0][0],top:s[0][1]}}return o},rect:function(e,t,n,r){return{width:Math.abs(n-e),height:Math.abs(r-t),position:{left:Math.min(e,n),top:Math.min(t,r)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(e,t,n,r,i){var o=z.polys._angles[i.abbrev()],a=0===o?0:n*Math.cos(o*Math.PI),s=r*Math.sin(o*Math.PI);return{width:2*n-Math.abs(a),height:2*r-Math.abs(s),position:{left:e+a,top:t+s},adjustable:P}},circle:function(e,t,n,r){return z.polys.ellipse(e,t,n,n,r)}},z.imagemap=function(e,t,n,i){t.jquery||(t=r(t));var o,a,s,u,l,c=t.attr("shape").toLowerCase().replace("poly","polygon"),h=r('img[usemap="#'+t.parent("map").attr("name")+'"]'),d=r.trim(t.attr("coords")),p=d.replace(/,$/,"").split(",");if(!h.length)return P;if("polygon"===c)u=z.polys.polygon(p,n);else{if(!z.polys[c])return P;for(s=-1,l=p.length,a=[];++s<l;)a.push(parseInt(p[s],10));u=z.polys[c].apply(this,a.concat(n))}return o=h.offset(),o.left+=Math.ceil((h.outerWidth(P)-h.width())/2),o.top+=Math.ceil((h.outerHeight(P)-h.height())/2),u.position.left+=o.left,u.position.top+=o.top,u},z.svg=function(e,n,i){for(var o,a,s,u,l,c,h,d,p,f,g,v=r(t),y=n[0],m=r(y.ownerSVGElement),b=1,w=1,x=!0;!y.getBBox;)y=y.parentNode;if(!y.getBBox||!y.parentNode)return P;o=m.attr("width")||m.width()||parseInt(m.css("width"),10),a=m.attr("height")||m.height()||parseInt(m.css("height"),10);var _=(parseInt(n.css("stroke-width"),10)||0)/2;switch(_&&(b+=_/o,w+=_/a),y.nodeName){case"ellipse":case"circle":f=z.polys.ellipse(y.cx.baseVal.value,y.cy.baseVal.value,(y.rx||y.r).baseVal.value+_,(y.ry||y.r).baseVal.value+_,i);break;case"line":case"polygon":case"polyline":for(p=y.points||[{x:y.x1.baseVal.value,y:y.y1.baseVal.value},{x:y.x2.baseVal.value,y:y.y2.baseVal.value}],f=[],d=-1,c=p.numberOfItems||p.length;++d<c;)h=p.getItem?p.getItem(d):p[d],f.push.apply(f,[h.x,h.y]);f=z.polys.polygon(f,i);break;default:f=y.getBoundingClientRect(),f={width:f.width,height:f.height,position:{left:f.left,top:f.top}},x=!1}return g=f.position,m=m[0],x&&(m.createSVGPoint&&(s=y.getScreenCTM(),p=m.createSVGPoint(),p.x=g.left,p.y=g.top,u=p.matrixTransform(s),g.left=u.x,g.top=u.y),m.viewBox&&(l=m.viewBox.baseVal)&&l.width&&l.height&&(b*=o/l.width,w*=a/l.height)),g.left+=v.scrollLeft(),g.top+=v.scrollTop(),f};var Ee,ke,Se="qtip-modal",Te="."+Se;ke=function(){function e(e){if(r.expr[":"].focusable)return r.expr[":"].focusable;var t,n,i,o=!isNaN(r.attr(e,"tabindex")),a=e.nodeName&&e.nodeName.toLowerCase();return"area"===a?(t=e.parentNode,n=t.name,e.href&&n&&"map"===t.nodeName.toLowerCase()?(i=r("img[usemap=#"+n+"]")[0],!!i&&i.is(":visible")):!1):/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||o:o}function n(e){c.length<1&&e.length?e.not("body").blur():c.first().focus()}function i(e){if(u.is(":visible")){var t,i=r(e.target),s=o.tooltip,l=i.closest(X);t=l.length<1?P:parseInt(l[0].style.zIndex,10)>parseInt(s[0].style.zIndex,10),t||i.closest(X)[0]===s[0]||n(i),a=e.target===c[c.length-1]}}var o,a,s,u,l=this,c={};r.extend(l,{init:function(){return u=l.elem=r("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return P}}).hide(),r(t.body).bind("focusin"+Te,i),r(t).bind("keydown"+Te,function(e){o&&o.options.show.modal.escape&&27===e.keyCode&&o.hide(e)}),u.bind("click"+Te,function(e){o&&o.options.show.modal.blur&&o.hide(e)}),l},update:function(t){o=t,c=t.options.show.modal.stealfocus!==P?t.tooltip.find("*").filter(function(){return e(this)}):[]},toggle:function(e,i,a){var c=(r(t.body),e.tooltip),h=e.options.show.modal,d=h.effect,p=i?"show":"hide",f=u.is(":visible"),g=r(Te).filter(":visible:not(:animated)").not(c);return l.update(e),i&&h.stealfocus!==P&&n(r(":focus")),u.toggleClass("blurs",h.blur),i&&u.appendTo(t.body),u.is(":animated")&&f===i&&s!==P||!i&&g.length?l:(u.stop(A,P),r.isFunction(d)?d.call(u,i):d===P?u[p]():u.fadeTo(parseInt(a,10)||90,i?1:0,function(){i||u.hide()}),i||u.queue(function(e){u.css({left:"",top:""}),r(Te).length||u.detach(),e()}),s=i,o.destroyed&&(o=D),l)}}),l.init()},ke=new ke,r.extend(E.prototype,{init:function(e){var t=e.tooltip;return this.options.on?(e.elements.overlay=ke.elem,t.addClass(Se).css("z-index",k.modal_zindex+r(Te).length),e._bind(t,["tooltipshow","tooltiphide"],function(e,n,i){var o=e.originalEvent;if(e.target===t[0])if(o&&"tooltiphide"===e.type&&/mouse(leave|enter)/.test(o.type)&&r(o.relatedTarget).closest(ke.elem[0]).length)try{e.preventDefault()}catch(a){}else(!o||o&&"tooltipsolo"!==o.type)&&this.toggle(e,"tooltipshow"===e.type,i)},this._ns,this),e._bind(t,"tooltipfocus",function(e,n){if(!e.isDefaultPrevented()&&e.target===t[0]){var i=r(Te),o=k.modal_zindex+i.length,a=parseInt(t[0].style.zIndex,10);ke.elem[0].style.zIndex=o-1,i.each(function(){this.style.zIndex>a&&(this.style.zIndex-=1)}),i.filter("."+J).qtip("blur",e.originalEvent),t.addClass(J)[0].style.zIndex=o,ke.update(n);try{e.preventDefault()}catch(s){}}},this._ns,this),void e._bind(t,"tooltiphide",function(e){e.target===t[0]&&r(Te).filter(":visible").not(t).last().qtip("focus",e)},this._ns,this)):this},toggle:function(e,t,n){return e&&e.isDefaultPrevented()?this:void ke.toggle(this.qtip,!!t,n)},destroy:function(){this.qtip.tooltip.removeClass(Se),this.qtip._unbind(this.qtip.tooltip,this._ns),ke.toggle(this.qtip,P),delete this.qtip.elements.overlay}}),Ee=z.modal=function(e){return new E(e,e.options.show.modal)},Ee.sanitize=function(e){e.show&&("object"!=typeof e.show.modal?e.show.modal={on:!!e.show.modal}:"undefined"==typeof e.show.modal.on&&(e.show.modal.on=A))},k.modal_zindex=k.zindex-200,Ee.initialize="render",C.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},r.extend(A,k.defaults,{show:{modal:{on:P,effect:A,blur:A,stealfocus:A,escape:A}}})})}(window,document),function(e){function t(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var n=function(e,t){return new n.fn.init(e,t)};n.isWindow=function(e){return null!=e&&e==e.window},n.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[a.call(e)]||"object":typeof e},n.isArray=Array.isArray||function(e){return"array"===n.type(e)},n.isPlainObject=function(e){var t;if(!e||"object"!==n.type(e)||e.nodeType||n.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}for(t in e);return void 0===t||o.call(e,t)},n.each=function(e,n,r){var i,o=0,a=e.length,s=t(e);if(r){if(s)for(;a>o&&(i=n.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=n.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=n.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=n.call(e[o],o,e[o]),i===!1)break;return e},n.data=function(e,t,i){if(void 0===i){var o=e[n.expando],a=o&&r[o];if(void 0===t)return a;if(a&&t in a)return a[t]}else if(void 0!==t){var o=e[n.expando]||(e[n.expando]=++n.uuid);return r[o]=r[o]||{},r[o][t]=i,i}},n.removeData=function(e,t){var i=e[n.expando],o=i&&r[i];o&&n.each(t,function(e,t){delete o[t]})},n.extend=function(){var e,t,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[u]||{},u++),"object"!=typeof s&&"function"!==n.type(s)&&(s={}),u===l&&(s=this,u--);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(n.isPlainObject(r)||(t=n.isArray(r)))?(t?(t=!1,a=e&&n.isArray(e)?e:[]):a=e&&n.isPlainObject(e)?e:{},s[i]=n.extend(c,a,r)):void 0!==r&&(s[i]=r));return s},n.queue=function(e,r,i){function o(e,n){var r=n||[];return null!=e&&(t(Object(e))?!function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e}(r,"string"==typeof e?[e]:e):[].push.call(r,e)),r}if(e){r=(r||"fx")+"queue";var a=n.data(e,r);return i?(!a||n.isArray(i)?a=n.data(e,r,o(i)):a.push(i),a):a||[]}},n.dequeue=function(e,t){n.each(e.nodeType?[e]:e,function(e,r){t=t||"fx";var i=n.queue(r,t),o=i.shift();"inprogress"===o&&(o=i.shift()),o&&("fx"===t&&i.unshift("inprogress"),o.call(r,function(){n.dequeue(r,t)}))})},n.fn=n.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),r=this.offset(),i=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:n(e).offset();return r.top-=parseFloat(t.style.marginTop)||0,r.left-=parseFloat(t.style.marginLeft)||0,e.style&&(i.top+=parseFloat(e.style.borderTopWidth)||0,i.left+=parseFloat(e.style.borderLeftWidth)||0),{top:r.top-i.top,left:r.left-i.left}}};var r={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var i={},o=i.hasOwnProperty,a=i.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),u=0;u<s.length;u++)i["[object "+s[u]+"]"]=s[u].toLowerCase();n.fn.init.prototype=n.fn,e.Velocity={Utilities:n}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,n,r){function i(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}function o(e){return g.isWrapped(e)?e=[].slice.call(e):g.isNode(e)&&(e=[e]),e}function a(e){var t=d.data(e,"velocity");return null===t?r:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function u(e,n,r,i){function o(e,t){return 1-3*t+3*e}function a(e,t){return 3*t-6*e}function s(e){return 3*e}function u(e,t,n){return((o(t,n)*e+a(t,n))*e+s(t))*e}function l(e,t,n){return 3*o(t,n)*e*e+2*a(t,n)*e+s(t)}function c(t,n){for(var i=0;g>i;++i){var o=l(n,e,r);if(0===o)return n;var a=u(n,e,r)-t;n-=a/o}return n}function h(){for(var t=0;b>t;++t)E[t]=u(t*w,e,r)}function d(t,n,i){var o,a,s=0;do a=n+(i-n)/2,o=u(a,e,r)-t,o>0?i=a:n=a;while(Math.abs(o)>y&&++s<m);return a}function p(t){for(var n=0,i=1,o=b-1;i!=o&&E[i]<=t;++i)n+=w;--i;var a=(t-E[i])/(E[i+1]-E[i]),s=n+a*w,u=l(s,e,r);return u>=v?c(t,s):0==u?s:d(t,n,n+w)}function f(){k=!0,(e!=n||r!=i)&&h()}var g=4,v=.001,y=1e-7,m=10,b=11,w=1/(b-1),x="Float32Array"in t;if(4!==arguments.length)return!1;for(var _=0;4>_;++_)if("number"!=typeof arguments[_]||isNaN(arguments[_])||!isFinite(arguments[_]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var E=x?new Float32Array(b):new Array(b),k=!1,S=function(t){return k||f(),e===n&&r===i?t:0===t?0:1===t?1:u(p(t),n,i)};S.getControlPoints=function(){return[{x:e,y:n},{x:r,y:i}]};var T="generateBezier("+[e,n,r,i]+")";return S.toString=function(){return T},S}function l(e,t){var n=e;return g.isString(e)?b.Easings[e]||(n=!1):n=g.isArray(e)&&1===e.length?s.apply(null,e):g.isArray(e)&&2===e.length?w.apply(null,e.concat([t])):g.isArray(e)&&4===e.length?u.apply(null,e):!1,n===!1&&(n=b.Easings[b.defaults.easing]?b.defaults.easing:m),n}function c(e){if(e)for(var t=(new Date).getTime(),n=0,i=b.State.calls.length;i>n;n++)if(b.State.calls[n]){var o=b.State.calls[n],s=o[0],u=o[2],l=o[3],p=!!l;l||(l=b.State.calls[n][3]=t-16);for(var f=Math.min((t-l)/u.duration,1),v=0,y=s.length;y>v;v++){var m=s[v],w=m.element;if(a(w)){var _=!1;if(u.display!==r&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var k=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];d.each(k,function(e,t){x.setPropertyValue(w,"display",t)})}x.setPropertyValue(w,"display",u.display)}u.visibility!==r&&"hidden"!==u.visibility&&x.setPropertyValue(w,"visibility",u.visibility);for(var S in m)if("element"!==S){var T,C=m[S],N=g.isString(C.easing)?b.Easings[C.easing]:C.easing;if(1===f)T=C.endValue;else if(T=C.startValue+(C.endValue-C.startValue)*N(f),!p&&T===C.currentValue)continue;if(C.currentValue=T,x.Hooks.registered[S]){var A=x.Hooks.getRoot(S),P=a(w).rootPropertyValueCache[A];P&&(C.rootPropertyValue=P)}var D=x.setPropertyValue(w,S,C.currentValue+(0===parseFloat(T)?"":C.unitType),C.rootPropertyValue,C.scrollData);x.Hooks.registered[S]&&(a(w).rootPropertyValueCache[A]=x.Normalizations.registered[A]?x.Normalizations.registered[A]("extract",null,D[1]):D[1]),"transform"===D[0]&&(_=!0)}u.mobileHA&&a(w).transformCache.translate3d===r&&(a(w).transformCache.translate3d="(0px, 0px, 0px)",_=!0),_&&x.flushTransformCache(w)}}u.display!==r&&"none"!==u.display&&(b.State.calls[n][2].display=!1),u.visibility!==r&&"hidden"!==u.visibility&&(b.State.calls[n][2].visibility=!1),u.progress&&u.progress.call(o[1],o[1],f,Math.max(0,l+u.duration-t),l),1===f&&h(n)}b.State.isTicking&&E(c)}function h(e,t){if(!b.State.calls[e])return!1;for(var n=b.State.calls[e][0],i=b.State.calls[e][1],o=b.State.calls[e][2],s=b.State.calls[e][4],u=!1,l=0,c=n.length;c>l;l++){var h=n[l].element;if(t||o.loop||("none"===o.display&&x.setPropertyValue(h,"display",o.display),"hidden"===o.visibility&&x.setPropertyValue(h,"visibility",o.visibility)),o.loop!==!0&&(d.queue(h)[1]===r||!/\.velocityQueueEntryFlag/i.test(d.queue(h)[1]))&&a(h)){a(h).isAnimating=!1,a(h).rootPropertyValueCache={};var p=!1;d.each(x.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,i=a(h).transformCache[t];a(h).transformCache[t]!==r&&new RegExp("^\\("+n+"[^.]").test(i)&&(p=!0,delete a(h).transformCache[t])}),o.mobileHA&&(p=!0,delete a(h).transformCache.translate3d),p&&x.flushTransformCache(h),x.Values.removeClass(h,"velocity-animating")}if(!t&&o.complete&&!o.loop&&l===c-1)try{o.complete.call(i,i)}catch(f){setTimeout(function(){throw f},1)}s&&o.loop!==!0&&s(i),o.loop!==!0||t||(d.each(a(h).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360)}),b(h,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&d.dequeue(h,o.queue)}b.State.calls[e]=!1;for(var g=0,v=b.State.calls.length;v>g;g++)if(b.State.calls[g]!==!1){u=!0;break}u===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var d,p=function(){if(n.documentMode)return n.documentMode;for(var e=7;e>4;e--){var t=n.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return r}(),f=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var n,r=(new Date).getTime();return n=Math.max(0,16-(r-e)),e=r+n,setTimeout(function(){t(r+n)},n)}}(),g={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==r&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},v=!1;if(e.fn&&e.fn.jquery?(d=e,v=!0):d=t.Velocity.Utilities,8>=p&&!v)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=p)return void(jQuery.fn.velocity=jQuery.fn.animate);var y=400,m="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:d,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:y,easing:m,begin:r,complete:r,progress:r,display:r,visibility:r,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){d.data(e,"velocity",{isSVG:g.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:1,patch:0},debug:!1};t.pageYOffset!==r?(b.State.scrollAnchor=t,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var w=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function r(e,t,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0,h=1e-4,d=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,i=i||null,u.tension=e,u.friction=t,o=null!==i,o?(c=r(e,t),a=c/i*d):a=d;;)if(s=n(s||u,a),l.push(1+s.x),c+=16,!(Math.abs(s.x)>h&&Math.abs(s.v)>h))break;return o?function(e){return l[e*(l.length-1)|0]}:c}}();b.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},d.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){b.Easings[t[0]]=u.apply(null,t[1])});var x=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<x.Lists.colors.length;e++){var t="color"===x.Lists.colors[e]?"0 0 0 1":"255 255 255 1";x.Hooks.templates[x.Lists.colors[e]]=["Red Green Blue Alpha",t]}var n,r,i;if(p)for(n in x.Hooks.templates){r=x.Hooks.templates[n],i=r[0].split(" ");var o=r[1].match(x.RegEx.valueSplit);"Color"===i[0]&&(i.push(i.shift()),o.push(o.shift()),x.Hooks.templates[n]=[i.join(" "),o.join(" ")])}for(n in x.Hooks.templates){r=x.Hooks.templates[n],i=r[0].split(" ");for(var e in i){var a=n+i[e],s=e;x.Hooks.registered[a]=[n,s]}}},getRoot:function(e){var t=x.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return x.RegEx.valueUnwrap.test(t)&&(t=t.match(x.RegEx.valueUnwrap)[1]),x.Values.isCSSNullValue(t)&&(t=x.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=x.Hooks.registered[e];if(n){var r=n[0],i=n[1];return t=x.Hooks.cleanRootPropertyValue(r,t),t.toString().match(x.RegEx.valueSplit)[i]}return t},injectValue:function(e,t,n){var r=x.Hooks.registered[e];if(r){var i,o,a=r[0],s=r[1];return n=x.Hooks.cleanRootPropertyValue(a,n),i=n.toString().match(x.RegEx.valueSplit),i[s]=t,o=i.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var r;return x.RegEx.wrappedValueAlreadyExtracted.test(n)?r=n:(r=n.toString().match(x.RegEx.valueUnwrap),r=r?r[1].replace(/,(\s+)?/g," "):n),r;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var i=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=i?i[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(8>=p)switch(e){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=r?r[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":return n;case"inject":return n}}},register:function(){9>=p||b.State.isGingerbread||(x.Lists.transformsBase=x.Lists.transformsBase.concat(x.Lists.transforms3D));for(var e=0;e<x.Lists.transformsBase.length;e++)!function(){var t=x.Lists.transformsBase[e];x.Normalizations.registered[t]=function(e,n,i){switch(e){case"name":return"transform";case"extract":return a(n)===r||a(n).transformCache[t]===r?/^scale/i.test(t)?1:0:a(n).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":b.State.isAndroid&&a(n).transformCache[t]===r&&1>i&&(i=1),o=!/(\d)$/i.test(i);break;case"skew":o=!/(deg|\d)$/i.test(i);break;case"rotate":o=!/(deg|\d)$/i.test(i)}return o||(a(n).transformCache[t]="("+i+")"),a(n).transformCache[t]}}}();for(var e=0;e<x.Lists.colors.length;e++)!function(){var t=x.Lists.colors[e];x.Normalizations.registered[t]=function(e,n,i){switch(e){case"name":return t;case"extract":var o;if(x.RegEx.wrappedValueAlreadyExtracted.test(i))o=i;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?a=s[i]!==r?s[i]:s.black:x.RegEx.isHex.test(i)?a="rgb("+x.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(a=s.black),o=(a||i).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=p||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=p?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(8>=p?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(p||b.State.isAndroid&&!b.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(b.State.prefixMatches[e])return[b.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,r=t.length;r>n;n++){var i;if(i=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase()}),g.isString(b.State.prefixElement.style[i]))return b.State.prefixMatches[e]=i,[i,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(n,function(e,t,n,r){return t+t+n+n+r+r}),t=r.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,n,i,o){function s(e,n){function i(){l&&x.setPropertyValue(e,"display","none")}var u=0;if(8>=p)u=d.css(e,n);else{var l=!1;if(/^(width|height)$/.test(n)&&0===x.getPropertyValue(e,"display")&&(l=!0,x.setPropertyValue(e,"display",x.Values.getDisplayType(e))),!o){if("height"===n&&"border-box"!==x.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(x.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(x.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(x.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(x.getPropertyValue(e,"paddingBottom"))||0);return i(),c}if("width"===n&&"border-box"!==x.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var h=e.offsetWidth-(parseFloat(x.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(x.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(x.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(x.getPropertyValue(e,"paddingRight"))||0);return i(),h}}var f;f=a(e)===r?t.getComputedStyle(e,null):a(e).computedStyle?a(e).computedStyle:a(e).computedStyle=t.getComputedStyle(e,null),(p||b.State.isFirefox)&&"borderColor"===n&&(n="borderTopColor"),u=9===p&&"filter"===n?f.getPropertyValue(n):f[n],(""===u||null===u)&&(u=e.style[n]),i()}if("auto"===u&&/^(top|right|bottom|left)$/i.test(n)){var g=s(e,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(u=d(e).position()[n]+"px")}return u}var u;if(x.Hooks.registered[n]){var l=n,c=x.Hooks.getRoot(l);i===r&&(i=x.getPropertyValue(e,x.Names.prefixCheck(c)[0])),x.Normalizations.registered[c]&&(i=x.Normalizations.registered[c]("extract",e,i)),u=x.Hooks.extractValue(l,i)}else if(x.Normalizations.registered[n]){var h,f;h=x.Normalizations.registered[n]("name",e),"transform"!==h&&(f=s(e,x.Names.prefixCheck(h)[0]),x.Values.isCSSNullValue(f)&&x.Hooks.templates[n]&&(f=x.Hooks.templates[n][1])),u=x.Normalizations.registered[n]("extract",e,f)}return/^[\d-]/.test(u)||(u=a(e)&&a(e).isSVG&&x.Names.SVGAttribute(n)?/^(height|width)$/i.test(n)?e.getBBox()[n]:e.getAttribute(n):s(e,x.Names.prefixCheck(n)[0])),x.Values.isCSSNullValue(u)&&(u=0),b.debug>=2&&console.log("Get "+n+": "+u),u},setPropertyValue:function(e,n,r,i,o){var s=n;if("scroll"===n)o.container?o.container["scroll"+o.direction]=r:"Left"===o.direction?t.scrollTo(r,o.alternateValue):t.scrollTo(o.alternateValue,r);else if(x.Normalizations.registered[n]&&"transform"===x.Normalizations.registered[n]("name",e))x.Normalizations.registered[n]("inject",e,r),s="transform",r=a(e).transformCache[n];else{if(x.Hooks.registered[n]){var u=n,l=x.Hooks.getRoot(n);i=i||x.getPropertyValue(e,l),r=x.Hooks.injectValue(u,r,i),n=l}if(x.Normalizations.registered[n]&&(r=x.Normalizations.registered[n]("inject",e,r),n=x.Normalizations.registered[n]("name",e)),s=x.Names.prefixCheck(n)[0],8>=p)try{e.style[s]=r}catch(c){b.debug&&console.log("Browser does not support ["+r+"] for ["+s+"]")}else a(e)&&a(e).isSVG&&x.Names.SVGAttribute(n)?e.setAttribute(n,r):e.style[s]=r;b.debug>=2&&console.log("Set "+n+" ("+s+"): "+r)}return[s,r]},flushTransformCache:function(e){function t(t){return parseFloat(x.getPropertyValue(e,t))}var n="";if((p||b.State.isAndroid&&!b.State.isChrome)&&a(e).isSVG){var r={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};d.each(a(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),r[e]&&(n+=e+"("+r[e].join(" ")+") ",delete r[e])})}else{var i,o;d.each(a(e).transformCache,function(t){return i=a(e).transformCache[t],"transformPerspective"===t?(o=i,!0):(9===p&&"rotateZ"===t&&(t="rotate"),void(n+=t+i+" "))}),o&&(n="perspective"+o+" "+n)}x.setPropertyValue(e,"transform",n)}};x.Hooks.register(),x.Normalizations.register(),b.hook=function(e,t,n){var i=r;return e=o(e),d.each(e,function(e,o){if(a(o)===r&&b.init(o),n===r)i===r&&(i=b.CSS.getPropertyValue(o,t));else{var s=b.CSS.setPropertyValue(o,t,n);"transform"===s[0]&&b.CSS.flushTransformCache(o),i=s}}),i};var _=function(){
function e(){return u?N.promise||null:p}function s(){function e(e){function p(e,t){var n=r,i=r,o=r;return g.isArray(e)?(n=e[0],!g.isArray(e[1])&&/^[\d-]/.test(e[1])||g.isFunction(e[1])||x.RegEx.isHex.test(e[1])?o=e[1]:(g.isString(e[1])&&!x.RegEx.isHex.test(e[1])||g.isArray(e[1]))&&(i=t?e[1]:l(e[1],u.duration),e[2]!==r&&(o=e[2]))):n=e,t||(i=i||u.easing),g.isFunction(n)&&(n=n.call(s,S,k)),g.isFunction(o)&&(o=o.call(s,S,k)),[n||0,i,o]}function f(e,t){var n,r;return r=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n||(n=x.Values.getUnitType(e)),[r,n]}function y(){var e={myParent:s.parentNode||n.body,position:x.getPropertyValue(s,"position"),fontSize:x.getPropertyValue(s,"fontSize")},r=e.position===O.lastPosition&&e.myParent===O.lastParent,i=e.fontSize===O.lastFontSize;O.lastParent=e.myParent,O.lastPosition=e.position,O.lastFontSize=e.fontSize;var o=100,u={};if(i&&r)u.emToPx=O.lastEmToPx,u.percentToPxWidth=O.lastPercentToPxWidth,u.percentToPxHeight=O.lastPercentToPxHeight;else{var l=a(s).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");b.init(l),e.myParent.appendChild(l),d.each(["overflow","overflowX","overflowY"],function(e,t){b.CSS.setPropertyValue(l,t,"hidden")}),b.CSS.setPropertyValue(l,"position",e.position),b.CSS.setPropertyValue(l,"fontSize",e.fontSize),b.CSS.setPropertyValue(l,"boxSizing","content-box"),d.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){b.CSS.setPropertyValue(l,t,o+"%")}),b.CSS.setPropertyValue(l,"paddingLeft",o+"em"),u.percentToPxWidth=O.lastPercentToPxWidth=(parseFloat(x.getPropertyValue(l,"width",null,!0))||1)/o,u.percentToPxHeight=O.lastPercentToPxHeight=(parseFloat(x.getPropertyValue(l,"height",null,!0))||1)/o,u.emToPx=O.lastEmToPx=(parseFloat(x.getPropertyValue(l,"paddingLeft"))||1)/o,e.myParent.removeChild(l)}return null===O.remToPx&&(O.remToPx=parseFloat(x.getPropertyValue(n.body,"fontSize"))||16),null===O.vwToPx&&(O.vwToPx=parseFloat(t.innerWidth)/100,O.vhToPx=parseFloat(t.innerHeight)/100),u.remToPx=O.remToPx,u.vwToPx=O.vwToPx,u.vhToPx=O.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(u),s),u}if(u.begin&&0===S)try{u.begin.call(v,v)}catch(_){setTimeout(function(){throw _},1)}if("scroll"===A){var E,T,C,P=/^x$/i.test(u.axis)?"Left":"Top",D=parseFloat(u.offset)||0;u.container?g.isWrapped(u.container)||g.isNode(u.container)?(u.container=u.container[0]||u.container,E=u.container["scroll"+P],C=E+d(s).position()[P.toLowerCase()]+D):u.container=null:(E=b.State.scrollAnchor[b.State["scrollProperty"+P]],T=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===P?"Top":"Left")]],C=d(s).offset()[P.toLowerCase()]+D),h={scroll:{rootPropertyValue:!1,startValue:E,currentValue:E,endValue:C,unitType:"",easing:u.easing,scrollData:{container:u.container,direction:P,alternateValue:T}},element:s},b.debug&&console.log("tweensContainer (scroll): ",h.scroll,s)}else if("reverse"===A){if(!a(s).tweensContainer)return void d.dequeue(s,u.queue);"none"===a(s).opts.display&&(a(s).opts.display="auto"),"hidden"===a(s).opts.visibility&&(a(s).opts.visibility="visible"),a(s).opts.loop=!1,a(s).opts.begin=null,a(s).opts.complete=null,w.easing||delete u.easing,w.duration||delete u.duration,u=d.extend({},a(s).opts,u);var $=d.extend(!0,{},a(s).tweensContainer);for(var M in $)if("element"!==M){var I=$[M].startValue;$[M].startValue=$[M].currentValue=$[M].endValue,$[M].endValue=I,g.isEmptyObject(w)||($[M].easing=u.easing),b.debug&&console.log("reverse tweensContainer ("+M+"): "+JSON.stringify($[M]),s)}h=$}else if("start"===A){var $;a(s).tweensContainer&&a(s).isAnimating===!0&&($=a(s).tweensContainer),d.each(m,function(e,t){if(RegExp("^"+x.Lists.colors.join("$|^")+"$").test(e)){var n=p(t,!0),i=n[0],o=n[1],a=n[2];if(x.RegEx.isHex.test(i)){for(var s=["Red","Green","Blue"],u=x.Values.hexToRgb(i),l=a?x.Values.hexToRgb(a):r,c=0;c<s.length;c++){var h=[u[c]];o&&h.push(o),l!==r&&h.push(l[c]),m[e+s[c]]=h}delete m[e]}}});for(var j in m){var R=p(m[j]),q=R[0],F=R[1],B=R[2];j=x.Names.camelCase(j);var G=x.Hooks.getRoot(j),z=!1;if(a(s).isSVG||x.Names.prefixCheck(G)[1]!==!1||x.Normalizations.registered[G]!==r){(u.display!==r&&null!==u.display&&"none"!==u.display||u.visibility!==r&&"hidden"!==u.visibility)&&/opacity|filter/.test(j)&&!B&&0!==q&&(B=0),u._cacheValues&&$&&$[j]?(B===r&&(B=$[j].endValue+$[j].unitType),z=a(s).rootPropertyValueCache[G]):x.Hooks.registered[j]?B===r?(z=x.getPropertyValue(s,G),B=x.getPropertyValue(s,j,z)):z=x.Hooks.templates[G][1]:B===r&&(B=x.getPropertyValue(s,j));var U,V,H,Y=!1;if(U=f(j,B),B=U[0],H=U[1],U=f(j,q),q=U[0].replace(/^([+-\/*])=/,function(e,t){return Y=t,""}),V=U[1],B=parseFloat(B)||0,q=parseFloat(q)||0,"%"===V&&(/^(fontSize|lineHeight)$/.test(j)?(q/=100,V="em"):/^scale/.test(j)?(q/=100,V=""):/(Red|Green|Blue)$/i.test(j)&&(q=q/100*255,V="")),/[\/*]/.test(Y))V=H;else if(H!==V&&0!==B)if(0===q)V=H;else{o=o||y();var X=/margin|padding|left|right|width|text|word|letter/i.test(j)||/X$/.test(j)||"x"===j?"x":"y";switch(H){case"%":B*="x"===X?o.percentToPxWidth:o.percentToPxHeight;break;case"px":break;default:B*=o[H+"ToPx"]}switch(V){case"%":B*=1/("x"===X?o.percentToPxWidth:o.percentToPxHeight);break;case"px":break;default:B*=1/o[V+"ToPx"]}}switch(Y){case"+":q=B+q;break;case"-":q=B-q;break;case"*":q=B*q;break;case"/":q=B/q}h[j]={rootPropertyValue:z,startValue:B,currentValue:B,endValue:q,unitType:V,easing:F},b.debug&&console.log("tweensContainer ("+j+"): "+JSON.stringify(h[j]),s)}else b.debug&&console.log("Skipping ["+G+"] due to a lack of browser support.")}h.element=s}h.element&&(x.Values.addClass(s,"velocity-animating"),L.push(h),""===u.queue&&(a(s).tweensContainer=h,a(s).opts=u),a(s).isAnimating=!0,S===k-1?(b.State.calls.length>1e4&&(b.State.calls=i(b.State.calls)),b.State.calls.push([L,v,u,null,N.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,c())):S++)}var o,s=this,u=d.extend({},b.defaults,w),h={};switch(a(s)===r&&b.init(s),parseFloat(u.delay)&&u.queue!==!1&&d.queue(s,u.queue,function(e){b.velocityQueueEntryFlag=!0,a(s).delayTimer={setTimeout:setTimeout(e,parseFloat(u.delay)),next:e}}),u.duration.toString().toLowerCase()){case"fast":u.duration=200;break;case"normal":u.duration=y;break;case"slow":u.duration=600;break;default:u.duration=parseFloat(u.duration)||1}b.mock!==!1&&(b.mock===!0?u.duration=u.delay=1:(u.duration*=parseFloat(b.mock)||1,u.delay*=parseFloat(b.mock)||1)),u.easing=l(u.easing,u.duration),u.begin&&!g.isFunction(u.begin)&&(u.begin=null),u.progress&&!g.isFunction(u.progress)&&(u.progress=null),u.complete&&!g.isFunction(u.complete)&&(u.complete=null),u.display!==r&&null!==u.display&&(u.display=u.display.toString().toLowerCase(),"auto"===u.display&&(u.display=b.CSS.Values.getDisplayType(s))),u.visibility!==r&&null!==u.visibility&&(u.visibility=u.visibility.toString().toLowerCase()),u.mobileHA=u.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,u.queue===!1?u.delay?setTimeout(e,u.delay):e():d.queue(s,u.queue,function(t,n){return n===!0?(N.promise&&N.resolver(v),!0):(b.velocityQueueEntryFlag=!0,void e(t))}),""!==u.queue&&"fx"!==u.queue||"inprogress"===d.queue(s)[0]||d.dequeue(s)}var u,p,f,v,m,w,E=arguments[0]&&(d.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties));if(g.isWrapped(this)?(u=!1,f=0,v=this,p=this):(u=!0,f=1,v=E?arguments[0].elements:arguments[0]),v=o(v)){E?(m=arguments[0].properties,w=arguments[0].options):(m=arguments[f],w=arguments[f+1]);var k=v.length,S=0;if("stop"!==m&&!d.isPlainObject(w)){var T=f+1;w={};for(var C=T;C<arguments.length;C++)g.isArray(arguments[C])||!/^(fast|normal|slow)$/i.test(arguments[C])&&!/^\d/.test(arguments[C])?g.isString(arguments[C])||g.isArray(arguments[C])?w.easing=arguments[C]:g.isFunction(arguments[C])&&(w.complete=arguments[C]):w.duration=arguments[C]}var N={promise:null,resolver:null,rejecter:null};u&&b.Promise&&(N.promise=new b.Promise(function(e,t){N.resolver=e,N.rejecter=t}));var A;switch(m){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"stop":d.each(v,function(e,t){a(t)&&a(t).delayTimer&&(clearTimeout(a(t).delayTimer.setTimeout),a(t).delayTimer.next&&a(t).delayTimer.next(),delete a(t).delayTimer)});var P=[];return d.each(b.State.calls,function(e,t){t&&d.each(t[1],function(n,i){var o=g.isString(w)?w:"";return w!==r&&t[2].queue!==o?!0:void d.each(v,function(t,n){n===i&&(w!==r&&(d.each(d.queue(n,o),function(e,t){g.isFunction(t)&&t(null,!0)}),d.queue(n,o,[])),a(n)&&""===o&&d.each(a(n).tweensContainer,function(e,t){t.endValue=t.currentValue}),P.push(e))})})}),d.each(P,function(e,t){h(t,!0)}),N.promise&&N.resolver(v),e();default:if(!d.isPlainObject(m)||g.isEmptyObject(m)){if(g.isString(m)&&b.Redirects[m]){var D=d.extend({},w),$=D.duration,M=D.delay||0;return D.backwards===!0&&(v=d.extend(!0,[],v).reverse()),d.each(v,function(e,t){parseFloat(D.stagger)?D.delay=M+parseFloat(D.stagger)*e:g.isFunction(D.stagger)&&(D.delay=M+D.stagger.call(t,e,k)),D.drag&&(D.duration=parseFloat($)||(/^(callout|transition)/.test(m)?1e3:y),D.duration=Math.max(D.duration*(D.backwards?1-e/k:(e+1)/k),.75*D.duration,200)),b.Redirects[m].call(t,t,D||{},e,k,v,N.promise?N:r)}),e()}var I="Velocity: First argument ("+m+") was not a property map, a known action, or a registered redirect. Aborting.";return N.promise?N.rejecter(new Error(I)):console.log(I),e()}A="start"}var O={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},L=[];d.each(v,function(e,t){g.isNode(t)&&s.call(t)});var j,D=d.extend({},b.defaults,w);if(D.loop=parseInt(D.loop),j=2*D.loop-1,D.loop)for(var R=0;j>R;R++){var q={delay:D.delay,progress:D.progress};R===j-1&&(q.display=D.display,q.visibility=D.visibility,q.complete=D.complete),_(v,"reverse",q)}return e()}};b=d.extend(_,b),b.animate=_;var E=t.requestAnimationFrame||f;return b.State.isMobile||n.hidden===r||n.addEventListener("visibilitychange",function(){n.hidden?(E=function(e){return setTimeout(function(){e(!0)},16)},c()):E=t.requestAnimationFrame||f}),e.Velocity=b,e!==t&&(e.fn.velocity=_,e.fn.velocity.defaults=b.defaults),d.each(["Down","Up"],function(e,t){b.Redirects["slide"+t]=function(e,n,i,o,a,s){var u=d.extend({},n),l=u.begin,c=u.complete,h={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},p={};u.display===r&&(u.display="Down"===t?"inline"===b.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),u.begin=function(){l&&l.call(a,a);for(var n in h){p[n]=e.style[n];var r=b.CSS.getPropertyValue(e,n);h[n]="Down"===t?[r,0]:[0,r]}p.overflow=e.style.overflow,e.style.overflow="hidden"},u.complete=function(){for(var t in p)e.style[t]=p[t];c&&c.call(a,a),s&&s.resolver(a)},b(e,h,u)}}),d.each(["In","Out"],function(e,t){b.Redirects["fade"+t]=function(e,n,i,o,a,s){var u=d.extend({},n),l={opacity:"In"===t?1:0},c=u.complete;u.complete=i!==o-1?u.begin=null:function(){c&&c.call(a,a),s&&s.resolver(a)},u.display===r&&(u.display="In"===t?"auto":"none"),b(this,l,u)}}),b}(window.jQuery||window.Zepto||window,window,document)}),function(){var e,t,n,r;!function(){var i={},o={};e=function(e,t,n){i[e]={deps:t,callback:n}},r=n=t=function(e){function n(t){if("."!==t.charAt(0))return t;for(var n=t.split("/"),r=e.split("/").slice(0,-1),i=0,o=n.length;o>i;i++){var a=n[i];if(".."===a)r.pop();else{if("."===a)continue;r.push(a)}}return r.join("/")}if(r._eak_seen=i,o[e])return o[e];if(o[e]={},!i[e])throw new Error("Could not find module "+e);for(var a,s=i[e],u=s.deps,l=s.callback,c=[],h=0,d=u.length;d>h;h++)c.push("exports"===u[h]?a={}:t(n(u[h])));var p=l.apply(this,c);return o[e]=a||p}}(),e("promise/all",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to all.");return new t(function(t,n){function r(e){return function(t){o(e,t)}}function o(e,n){s[e]=n,0===--u&&t(s)}var a,s=[],u=e.length;0===u&&t([]);for(var l=0;l<e.length;l++)a=e[l],a&&i(a.then)?a.then(r(l),n):o(l,a)})}var r=e.isArray,i=e.isFunction;t.all=n}),e("promise/asap",["exports"],function(e){"use strict";function t(){return function(){process.nextTick(i)}}function n(){var e=0,t=new u(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function r(){return function(){l.setTimeout(i,1)}}function i(){for(var e=0;e<c.length;e++){var t=c[e],n=t[0],r=t[1];n(r)}c=[]}function o(e,t){var n=c.push([e,t]);1===n&&a()}var a,s="undefined"!=typeof window?window:{},u=s.MutationObserver||s.WebKitMutationObserver,l="undefined"!=typeof global?global:void 0===this?window:this,c=[];a="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():u?n():r(),e.asap=o}),e("promise/config",["exports"],function(e){"use strict";function t(e,t){return 2!==arguments.length?n[e]:void(n[e]=t)}var n={instrument:!1};e.config=n,e.configure=t}),e("promise/polyfill",["./promise","./utils","exports"],function(e,t,n){"use strict";function r(){var e;e="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),o(t)}();t||(e.Promise=i)}var i=e.Promise,o=t.isFunction;n.polyfill=r}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,n,r,i,o,a,s){"use strict";function u(e){if(!x(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof u))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],l(e,this)}function l(e,t){function n(e){f(t,e)}function r(e){v(t,e)}try{e(n,r)}catch(i){r(i)}}function c(e,t,n,r){var i,o,a,s,u=x(n);if(u)try{i=n(r),a=!0}catch(l){s=!0,o=l}else i=r,a=!0;p(t,i)||(u&&a?f(t,i):s?v(t,o):e===A?f(t,i):e===P&&v(t,i))}function h(e,t,n,r){var i=e._subscribers,o=i.length;i[o]=t,i[o+A]=n,i[o+P]=r}function d(e,t){for(var n,r,i=e._subscribers,o=e._detail,a=0;a<i.length;a+=3)n=i[a],r=i[a+t],c(t,n,r,o);e._subscribers=null}function p(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(w(t)&&(r=t.then,x(r)))return r.call(t,function(r){return n?!0:(n=!0,void(t!==r?f(e,r):g(e,r)))},function(t){return n?!0:(n=!0,void v(e,t))}),!0}catch(i){return n?!0:(v(e,i),!0)}return!1}function f(e,t){e===t?g(e,t):p(e,t)||g(e,t)}function g(e,t){e._state===C&&(e._state=N,e._detail=t,b.async(y,e))}function v(e,t){e._state===C&&(e._state=N,e._detail=t,b.async(m,e))}function y(e){d(e,e._state=A)}function m(e){d(e,e._state=P)}var b=e.config,w=(e.configure,t.objectOrFunction),x=t.isFunction,_=(t.now,n.all),E=r.race,k=i.resolve,S=o.reject,T=a.asap;b.async=T;var C=void 0,N=0,A=1,P=2;u.prototype={constructor:u,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,r=new this.constructor(function(){});if(this._state){var i=arguments;b.async(function(){c(n._state,r,i[n._state-1],n._detail)})}else h(this,r,e,t);return r},"catch":function(e){return this.then(null,e)}},u.all=_,u.race=E,u.resolve=k,u.reject=S,s.Promise=u}),e("promise/race",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to race.");return new t(function(t,n){for(var r,i=0;i<e.length;i++)r=e[i],r&&"function"==typeof r.then?r.then(t,n):t(r)})}var r=e.isArray;t.race=n}),e("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,n){n(e)})}e.reject=t}),e("promise/resolve",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.resolve=t}),e("promise/utils",["exports"],function(e){"use strict";function t(e){return n(e)||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}var i=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=n,e.isArray=r,e.now=i}),t("promise/polyfill").polyfill()}(),function(){"use strict";function e(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];return new h(function(e,r){var i=d.open(n.name,n.version);i.onerror=function(){r(i.error)},i.onupgradeneeded=function(){i.result.createObjectStore(n.storeName)},i.onsuccess=function(){n.db=i.result,t._dbInfo=n,e()}})}function t(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new h(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),t(e)},a.onerror=function(){r(a.error)}})["catch"](r)});return l(r,t),r}function n(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new h(function(n,i){r.ready().then(function(){var o=r._dbInfo,a=o.db.transaction(o.storeName,"readwrite").objectStore(o.storeName);null===t&&(t=void 0);var s=a.put(t,e);s.onsuccess=function(){void 0===t&&(t=null),n(t)},s.onerror=function(){i(s.error)}})["catch"](i)});return l(i,n),i}function r(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new h(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readwrite").objectStore(i.storeName),a=o["delete"](e);a.onsuccess=function(){t()},a.onerror=function(){r(a.error)},a.onabort=function(e){var t=e.target.error;"QuotaExceededError"===t&&r(t)}})["catch"](r)});return l(r,t),r}function i(e){var t=this,n=new h(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readwrite").objectStore(r.storeName),o=i.clear();o.onsuccess=function(){e()},o.onerror=function(){n(o.error)}})["catch"](n)});return l(n,e),n}function o(e){var t=this,n=new h(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}})["catch"](n)});return u(n,e),n}function a(e,t){var n=this,r=new h(function(t,r){return 0>e?void t(null):void n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=!1,s=o.openCursor();s.onsuccess=function(){var n=s.result;return n?void(0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))):void t(null)},s.onerror=function(){r(s.error)}})["catch"](r)});return u(r,t),r}function s(e){var t=this,n=new h(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.openCursor(),a=[];o.onsuccess=function(){var t=o.result;return t?(a.push(t.key),void t["continue"]()):void e(a)},o.onerror=function(){n(o.error)}})["catch"](n)});return u(n,e),n}function u(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e,t){t&&e.then(function(e){c(t,e)},function(e){t(e)})}function c(e,t){return e?setTimeout(function(){return e(null,t)},0):void 0}var h="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,d=d||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(d){var p={_driver:"asyncStorage",_initStorage:e,getItem:t,setItem:n,removeItem:r,clear:i,length:o,key:a,keys:s};"function"==typeof define&&define.amd?define("asyncStorage",function(){return p}):"undefined"!=typeof module&&module.exports?module.exports=p:this.asyncStorage=p}}.call(window),function(){"use strict";function e(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",t._dbInfo=n,d.resolve()}function t(e){var t=this,n=new d(function(e,n){t.ready().then(function(){for(var n=t._dbInfo.keyPrefix,r=p.length-1;r>=0;r--){var i=p.key(r);0===i.indexOf(n)&&p.removeItem(i)}e()})["catch"](n)});return h(n,e),n}function n(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new d(function(t,r){n.ready().then(function(){try{var i=n._dbInfo,o=p.getItem(i.keyPrefix+e);o&&(o=s(o)),t(o)}catch(a){r(a)}})["catch"](r)});return h(r,t),r}function r(e,t){var n=this,r=new d(function(t,r){n.ready().then(function(){var r,i=n._dbInfo;try{r=p.key(e)}catch(o){r=null}r&&(r=r.substring(i.keyPrefix.length)),t(r)})["catch"](r)});return h(r,t),r}function i(e){var t=this,n=new d(function(e,n){t.ready().then(function(){for(var n=t._dbInfo,r=p.length,i=[],o=0;r>o;o++)0===p.key(o).indexOf(n.keyPrefix)&&i.push(p.key(o).substring(n.keyPrefix.length));e(i)})["catch"](n)});return h(n,e),n}function o(e){var t=this,n=new d(function(e,n){t.keys().then(function(t){e(t.length)})["catch"](n)});return h(n,e),n}function a(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new d(function(t,r){n.ready().then(function(){var r=n._dbInfo;p.removeItem(r.keyPrefix+e),t()})["catch"](r)});return h(r,t),r}function s(e){if(e.substring(0,v)!==g)return JSON.parse(e);for(var t=e.substring(N),n=e.substring(v,N),r=new ArrayBuffer(2*t.length),i=new Uint16Array(r),o=t.length-1;o>=0;o--)i[o]=t.charCodeAt(o);switch(n){case y:return r;case m:return new Blob([r]);case b:return new Int8Array(r);case w:return new Uint8Array(r);case x:return new Uint8ClampedArray(r);case _:return new Int16Array(r);case k:return new Uint16Array(r);case E:return new Int32Array(r);case S:return new Uint32Array(r);case T:return new Float32Array(r);case C:return new Float64Array(r);default:throw new Error("Unkown type: "+n)}}function u(e){var t="",n=new Uint16Array(e);try{t=String.fromCharCode.apply(null,n)}catch(r){for(var i=0;i<n.length;i++)t+=String.fromCharCode(n[i])}return t}function l(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,i=g;e instanceof ArrayBuffer?(r=e,i+=y):(r=e.buffer,"[object Int8Array]"===n?i+=b:"[object Uint8Array]"===n?i+=w:"[object Uint8ClampedArray]"===n?i+=x:"[object Int16Array]"===n?i+=_:"[object Uint16Array]"===n?i+=k:"[object Int32Array]"===n?i+=E:"[object Uint32Array]"===n?i+=S:"[object Float32Array]"===n?i+=T:"[object Float64Array]"===n?i+=C:t(new Error("Failed to get type for BinaryArray"))),t(i+u(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var e=u(this.result);t(g+m+e)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){window.console.error("Couldn't convert value into a JSON string: ",e),t(a)}}function c(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new d(function(n,i){r.ready().then(function(){void 0===t&&(t=null);var o=t;l(t,function(t,a){if(a)i(a);else{try{var s=r._dbInfo;p.setItem(s.keyPrefix+e,t)}catch(u){("QuotaExceededError"===u.name||"NS_ERROR_DOM_QUOTA_REACHED"===u.name)&&i(u)}n(o)}})})["catch"](i)});return h(i,n),i}function h(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var d="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,p=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;p=this.localStorage}catch(f){return}var g="__lfsc__:",v=g.length,y="arbf",m="blob",b="si08",w="ui08",x="uic8",_="si16",E="si32",k="ur16",S="ui32",T="fl32",C="fl64",N=v+y.length,A={_driver:"localStorageWrapper",_initStorage:e,getItem:n,setItem:c,removeItem:a,clear:t,length:o,key:r,keys:i};"function"==typeof define&&define.amd?define("localStorageWrapper",function(){return A}):"undefined"!=typeof module&&module.exports?module.exports=A:this.localStorageWrapper=A}.call(window),function(){"use strict";function e(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];return new p(function(r,i){try{n.db=f(n.name,String(n.version),n.description,n.size)}catch(o){return t.setDriver("localStorageWrapper").then(function(){return t._initStorage(e)}).then(r)["catch"](i)}n.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,r()},function(e,t){i(t)})})})}function t(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new p(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=l(r)),t(r)},function(e,t){r(t)})})})["catch"](r)});return h(r,t),r}function n(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new p(function(n,i){r.ready().then(function(){void 0===t&&(t=null);var o=t;c(t,function(t,a){if(a)i(a);else{var s=r._dbInfo;s.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(o)},function(e,t){i(t)})},function(e){e.code===e.QUOTA_ERR&&i(e)})}})})["catch"](i)});return h(i,n),i}function r(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new p(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})})["catch"](r)});return h(r,t),r}function i(e){var t=this,n=new p(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return h(n,e),n}function o(e){var t=this,n=new p(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return h(n,e),n}function a(e,t){var n=this,r=new p(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return h(r,t),r}function s(e){var t=this,n=new p(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})})["catch"](n)});return h(n,e),n}function u(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=d[n[t]>>2],r+=d[(3&n[t])<<4|n[t+1]>>4],r+=d[(15&n[t+1])<<2|n[t+2]>>6],r+=d[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function l(e){if(e.substring(0,v)!==g)return JSON.parse(e);var t,n,r,i,o,a=e.substring(N),s=e.substring(v,N),u=.75*a.length,l=a.length,c=0;"="===a[a.length-1]&&(u--,"="===a[a.length-2]&&u--);var h=new ArrayBuffer(u),p=new Uint8Array(h);for(t=0;l>t;t+=4)n=d.indexOf(a[t]),r=d.indexOf(a[t+1]),i=d.indexOf(a[t+2]),o=d.indexOf(a[t+3]),p[c++]=n<<2|r>>4,p[c++]=(15&r)<<4|i>>2,p[c++]=(3&i)<<6|63&o;switch(s){case y:return h;case m:return new Blob([h]);case b:return new Int8Array(h);case w:return new Uint8Array(h);case x:return new Uint8ClampedArray(h);case _:return new Int16Array(h);case k:return new Uint16Array(h);case E:return new Int32Array(h);case S:return new Uint32Array(h);case T:return new Float32Array(h);case C:return new Float64Array(h);default:throw new Error("Unkown type: "+s)}}function c(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,i=g;e instanceof ArrayBuffer?(r=e,i+=y):(r=e.buffer,"[object Int8Array]"===n?i+=b:"[object Uint8Array]"===n?i+=w:"[object Uint8ClampedArray]"===n?i+=x:"[object Int16Array]"===n?i+=_:"[object Uint16Array]"===n?i+=k:"[object Int32Array]"===n?i+=E:"[object Uint32Array]"===n?i+=S:"[object Float32Array]"===n?i+=T:"[object Float64Array]"===n?i+=C:t(new Error("Failed to get type for BinaryArray"))),t(i+u(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var e=u(this.result);t(g+m+e)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){window.console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}}function h(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,f=this.openDatabase,g="__lfsc__:",v=g.length,y="arbf",m="blob",b="si08",w="ui08",x="uic8",_="si16",E="si32",k="ur16",S="ui32",T="fl32",C="fl64",N=v+y.length;if(f){var A={_driver:"webSQLStorage",_initStorage:e,getItem:t,setItem:n,removeItem:r,clear:i,length:o,key:a,keys:s};"function"==typeof define&&define.amd?define("webSQLStorage",function(){return A}):"undefined"!=typeof module&&module.exports?module.exports=A:this.webSQLStorage=A}}.call(window),function(){"use strict";function e(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function t(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=p(t[n])?t[n].slice():t[n])}return arguments[0]}function n(e){for(var t in a)if(a.hasOwnProperty(t)&&a[t]===e)return!0;return!1}function r(n){this._config=t({},c,n),this._driverSet=null,this._ready=!1,this._dbInfo=null;for(var r=0;r<u.length;r++)e(this,u[r]);this.setDriver(this._config.driver)}var i="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,o={},a={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},s=[a.INDEXEDDB,a.WEBSQL,a.LOCALSTORAGE],u=["clear","getItem","key","keys","length","removeItem","setItem"],l={DEFINE:1,EXPORT:2,WINDOW:3},c={description:"",driver:s.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},h=l.WINDOW;"function"==typeof define&&define.amd?h=l.DEFINE:"undefined"!=typeof module&&module.exports&&(h=l.EXPORT);var d=function(e){var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB,n={};return n[a.WEBSQL]=!!e.openDatabase,n[a.INDEXEDDB]=!!function(){if("undefined"!=typeof e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;try{return t&&"function"==typeof t.open&&"undefined"!=typeof e.IDBKeyRange}catch(n){return!1}}(),n[a.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(t){return!1}}(),n}(this),p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},f=this;r.prototype.INDEXEDDB=a.INDEXEDDB,r.prototype.LOCALSTORAGE=a.LOCALSTORAGE,r.prototype.WEBSQL=a.WEBSQL,r.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},r.prototype.defineDriver=function(e,t,r){var a=new i(function(t,r){try{var a=e._driver,s=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),l=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void r(s);if(n(e._driver))return void r(l);for(var c=u.concat("_initStorage"),h=0;h<c.length;h++){var p=c[h];if(!p||!e[p]||"function"!=typeof e[p])return void r(s)}var f=i.resolve(!0);"_support"in e&&(f=e._support&&"function"==typeof e._support?e._support():i.resolve(!!e._support)),
f.then(function(n){d[a]=n,o[a]=e,t()},r)}catch(g){r(g)}});return a.then(t,r),a},r.prototype.driver=function(){return this._driver||null},r.prototype.ready=function(e){var t=this,n=new i(function(e,n){t._driverSet.then(function(){null===t._ready&&(t._ready=t._initStorage(t._config)),t._ready.then(e,n)})["catch"](n)});return n.then(e,e),n},r.prototype.setDriver=function(e,t,r){function a(){s._config.driver=s.driver()}var s=this;return"string"==typeof e&&(e=[e]),this._driverSet=new i(function(t,r){var a=s._getFirstSupportedDriver(e),u=new Error("No available storage method found.");if(!a)return s._driverSet=i.reject(u),void r(u);if(s._dbInfo=null,s._ready=null,n(a)){if(h===l.DEFINE)return void require([a],function(e){s._extend(e),t()});if(h===l.EXPORT){var c;switch(a){case s.INDEXEDDB:c=require("./drivers/indexeddb");break;case s.LOCALSTORAGE:c=require("./drivers/localstorage");break;case s.WEBSQL:c=require("./drivers/websql")}s._extend(c)}else s._extend(f[a])}else{if(!o[a])return s._driverSet=i.reject(u),void r(u);s._extend(o[a])}t()}),this._driverSet.then(a,a),this._driverSet.then(t,r),this._driverSet},r.prototype.supports=function(e){return!!d[e]},r.prototype._extend=function(e){t(this,e)},r.prototype._getFirstSupportedDriver=function(e){if(e&&p(e))for(var t=0;t<e.length;t++){var n=e[t];if(this.supports(n))return n}return null},r.prototype.createInstance=function(e){return new r(e)};var g=new r;h===l.DEFINE?define("localforage",function(){return g}):h===l.EXPORT?module.exports=g:this.localforage=g}.call(window),function(){function e(e,t,n){for(var r=(n||0)-1,i=e?e.length:0;++r<i;)if(e[r]===t)return r;return-1}function t(t,n){var r=typeof n;if(t=t.cache,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:y+n;return t=(t=t[r])&&t[i],"object"==r?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:y+e,i=t[n]||(t[n]={});"object"==n?(i[r]||(i[r]=[])).push(e):i[r]=!0}}function r(e){return e.charCodeAt(0)}function i(e,t){for(var n=e.criteria,r=t.criteria,i=-1,o=n.length;++i<o;){var a=n[i],s=r[i];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return e.index-t.index}function o(e){var t=-1,r=e.length,i=e[0],o=e[r/2|0],a=e[r-1];if(i&&"object"==typeof i&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var s=u();s["false"]=s["null"]=s["true"]=s.undefined=!1;var l=u();for(l.array=e,l.cache=s,l.push=n;++t<r;)l.push(e[t]);return l}function a(e){return"\\"+Y[e]}function s(){return f.pop()||[]}function u(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(e){e.length=0,f.length<b&&f.push(e)}function c(e){var t=e.cache;t&&c(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,g.length<b&&g.push(e)}function h(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(0>i?0:i);++r<i;)o[r]=e[t+r];return o}function d(n){function f(e){return e&&"object"==typeof e&&!Jn(e)&&In.call(e,"__wrapped__")?e:new g(e)}function g(e,t){this.__chain__=!!t,this.__wrapped__=e}function b(e){function t(){if(r){var e=h(r);On.apply(e,arguments)}if(this instanceof t){var o=W(n.prototype),a=n.apply(o,e||arguments);return Pe(a)?a:o}return n.apply(i,e||arguments)}var n=e[0],r=e[2],i=e[4];return Qn(t,e),t}function Y(e,t,n,r,i){if(n){var o=n(e);if("undefined"!=typeof o)return o}var a=Pe(e);if(!a)return e;var u=Cn.call(e);if(!z[u])return e;var c=Wn[u];switch(u){case L:case j:return new c(+e);case q:case G:return new c(e);case B:return o=c(e.source,S.exec(e)),o.lastIndex=e.lastIndex,o}var d=Jn(e);if(t){var p=!r;r||(r=s()),i||(i=s());for(var f=r.length;f--;)if(r[f]==e)return i[f];o=d?c(e.length):{}}else o=d?h(e):or({},e);return d&&(In.call(e,"index")&&(o.index=e.index),In.call(e,"input")&&(o.input=e.input)),t?(r.push(e),i.push(o),(d?Ze:ur)(e,function(e,a){o[a]=Y(e,t,n,r,i)}),p&&(l(r),l(i)),o):o}function W(e,t){return Pe(e)?Fn(e):{}}function Z(e,t,n){if("function"!=typeof e)return Qt;if("undefined"==typeof t||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(Zn.funcNames&&(r=!e.name),r=r||!Zn.funcDecomp,!r)){var i=$n.call(e);Zn.funcNames||(r=!T.test(i)),r||(r=P.test(i),Qn(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return It(e,t)}function Q(e){function t(){var e=u?a:this;if(i){var f=h(i);On.apply(f,arguments)}if((o||c)&&(f||(f=h(arguments)),o&&On.apply(f,o),c&&f.length<s))return r|=16,Q([n,d?r:-4&r,f,null,a,s]);if(f||(f=arguments),l&&(n=e[p]),this instanceof t){e=W(n.prototype);var g=n.apply(e,f);return Pe(g)?g:e}return n.apply(e,f)}var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=1&r,l=2&r,c=4&r,d=8&r,p=n;return Qn(t,e),t}function J(n,r){var i=-1,a=ue(),s=n?n.length:0,u=s>=m&&a===e,l=[];if(u){var h=o(r);h?(a=t,r=h):u=!1}for(;++i<s;){var d=n[i];a(r,d)<0&&l.push(d)}return u&&c(r),l}function ee(e,t,n,r){for(var i=(r||0)-1,o=e?e.length:0,a=[];++i<o;){var s=e[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Jn(s)||de(s))){t||(s=ee(s,t,n));var u=-1,l=s.length,c=a.length;for(a.length+=l;++u<l;)a[c++]=s[u]}else n||a.push(s)}return a}function te(e,t,n,r,i,o){if(n){var a=n(e,t);if("undefined"!=typeof a)return!!a}if(e===t)return 0!==e||1/e==1/t;var u=typeof e,c=typeof t;if(!(e!==e||e&&H[u]||t&&H[c]))return!1;if(null==e||null==t)return e===t;var h=Cn.call(e),d=Cn.call(t);if(h==I&&(h=F),d==I&&(d=F),h!=d)return!1;switch(h){case L:case j:return+e==+t;case q:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case B:case G:return e==_n(t)}var p=h==O;if(!p){var f=In.call(e,"__wrapped__"),g=In.call(t,"__wrapped__");if(f||g)return te(f?e.__wrapped__:e,g?t.__wrapped__:t,n,r,i,o);if(h!=F)return!1;var v=e.constructor,y=t.constructor;if(v!=y&&!(Ae(v)&&v instanceof v&&Ae(y)&&y instanceof y)&&"constructor"in e&&"constructor"in t)return!1}var m=!i;i||(i=s()),o||(o=s());for(var b=i.length;b--;)if(i[b]==e)return o[b]==t;var w=0;if(a=!0,i.push(e),o.push(t),p){if(b=e.length,w=t.length,a=w==b,a||r)for(;w--;){var x=b,_=t[w];if(r)for(;x--&&!(a=te(e[x],_,n,r,i,o)););else if(!(a=te(e[w],_,n,r,i,o)))break}}else sr(t,function(t,s,u){return In.call(u,s)?(w++,a=In.call(e,s)&&te(e[s],t,n,r,i,o)):void 0}),a&&!r&&sr(e,function(e,t,n){return In.call(n,t)?a=--w>-1:void 0});return i.pop(),o.pop(),m&&(l(i),l(o)),a}function ne(e,t,n,r,i){(Jn(t)?Ze:ur)(t,function(t,o){var a,s,u=t,l=e[o];if(t&&((s=Jn(t))||lr(t))){for(var c=r.length;c--;)if(a=r[c]==t){l=i[c];break}if(!a){var h;n&&(u=n(l,t),(h="undefined"!=typeof u)&&(l=u)),h||(l=s?Jn(l)?l:[]:lr(l)?l:{}),r.push(t),i.push(l),h||ne(l,t,n,r,i)}}else n&&(u=n(l,t),"undefined"==typeof u&&(u=t)),"undefined"!=typeof u&&(l=u);e[o]=l})}function re(e,t){return e+Dn(Xn()*(t-e+1))}function ie(n,r,i){var a=-1,u=ue(),h=n?n.length:0,d=[],p=!r&&h>=m&&u===e,f=i||p?s():d;if(p){var g=o(f);u=t,f=g}for(;++a<h;){var v=n[a],y=i?i(v,a,n):v;(r?!a||f[f.length-1]!==y:u(f,y)<0)&&((i||p)&&f.push(y),d.push(v))}return p?(l(f.array),c(f)):i&&l(f),d}function oe(e){return function(t,n,r){var i={};n=f.createCallback(n,r,3);var o=-1,a=t?t.length:0;if("number"==typeof a)for(;++o<a;){var s=t[o];e(i,s,n(s,o,t),t)}else ur(t,function(t,r,o){e(i,t,n(t,r,o),o)});return i}}function ae(e,t,n,r,i,o){var a=1&t,s=2&t,u=4&t,l=16&t,c=32&t;if(!s&&!Ae(e))throw new En;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var d=e&&e.__bindData__;if(d&&d!==!0)return d=h(d),d[2]&&(d[2]=h(d[2])),d[3]&&(d[3]=h(d[3])),!a||1&d[1]||(d[4]=i),!a&&1&d[1]&&(t|=8),!u||4&d[1]||(d[5]=o),l&&On.apply(d[2]||(d[2]=[]),n),c&&Rn.apply(d[3]||(d[3]=[]),r),d[1]|=t,ae.apply(null,d);var p=1==t||17===t?b:Q;return p([e,t,n,r,i,o])}function se(e){return tr[e]}function ue(){var t=(t=f.indexOf)===yt?e:t;return t}function le(e){return"function"==typeof e&&Nn.test(e)}function ce(e){var t,n;return e&&Cn.call(e)==F&&(t=e.constructor,!Ae(t)||t instanceof t)?(sr(e,function(e,t){n=t}),"undefined"==typeof n||In.call(e,n)):!1}function he(e){return nr[e]}function de(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Cn.call(e)==I||!1}function pe(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),Y(e,t,"function"==typeof n&&Z(n,r,1))}function fe(e,t,n){return Y(e,!0,"function"==typeof t&&Z(t,n,1))}function ge(e,t){var n=W(e);return t?or(n,t):n}function ve(e,t,n){var r;return t=f.createCallback(t,n,3),ur(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function ye(e,t,n){var r;return t=f.createCallback(t,n,3),be(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function me(e,t,n){var r=[];sr(e,function(e,t){r.push(t,e)});var i=r.length;for(t=Z(t,n,3);i--&&t(r[i--],r[i],e)!==!1;);return e}function be(e,t,n){var r=er(e),i=r.length;for(t=Z(t,n,3);i--;){var o=r[i];if(t(e[o],o,e)===!1)break}return e}function we(e){var t=[];return sr(e,function(e,n){Ae(e)&&t.push(n)}),t.sort()}function xe(e,t){return e?In.call(e,t):!1}function _e(e){for(var t=-1,n=er(e),r=n.length,i={};++t<r;){var o=n[t];i[e[o]]=o}return i}function Ee(e){return e===!0||e===!1||e&&"object"==typeof e&&Cn.call(e)==L||!1}function ke(e){return e&&"object"==typeof e&&Cn.call(e)==j||!1}function Se(e){return e&&1===e.nodeType||!1}function Te(e){var t=!0;if(!e)return t;var n=Cn.call(e),r=e.length;return n==O||n==G||n==I||n==F&&"number"==typeof r&&Ae(e.splice)?!r:(ur(e,function(){return t=!1}),t)}function Ce(e,t,n,r){return te(e,t,"function"==typeof n&&Z(n,r,2))}function Ne(e){return Gn(e)&&!zn(parseFloat(e))}function Ae(e){return"function"==typeof e}function Pe(e){return!(!e||!H[typeof e])}function De(e){return Me(e)&&e!=+e}function $e(e){return null===e}function Me(e){return"number"==typeof e||e&&"object"==typeof e&&Cn.call(e)==q||!1}function Ie(e){return e&&"object"==typeof e&&Cn.call(e)==B||!1}function Oe(e){return"string"==typeof e||e&&"object"==typeof e&&Cn.call(e)==G||!1}function Le(e){return"undefined"==typeof e}function je(e,t,n){var r={};return t=f.createCallback(t,n,3),ur(e,function(e,n,i){r[n]=t(e,n,i)}),r}function Re(e){var t=arguments,n=2;if(!Pe(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var r=Z(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(r=t[--n]);for(var i=h(arguments,1,n),o=-1,a=s(),u=s();++o<n;)ne(e,i[o],r,a,u);return l(a),l(u),e}function qe(e,t,n){var r={};if("function"!=typeof t){var i=[];sr(e,function(e,t){i.push(t)}),i=J(i,ee(arguments,!0,!1,1));for(var o=-1,a=i.length;++o<a;){var s=i[o];r[s]=e[s]}}else t=f.createCallback(t,n,3),sr(e,function(e,n,i){t(e,n,i)||(r[n]=e)});return r}function Fe(e){for(var t=-1,n=er(e),r=n.length,i=fn(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function Be(e,t,n){var r={};if("function"!=typeof t)for(var i=-1,o=ee(arguments,!0,!1,1),a=Pe(e)?o.length:0;++i<a;){var s=o[i];s in e&&(r[s]=e[s])}else t=f.createCallback(t,n,3),sr(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function Ge(e,t,n,r){var i=Jn(e);if(null==n)if(i)n=[];else{var o=e&&e.constructor,a=o&&o.prototype;n=W(a)}return t&&(t=f.createCallback(t,r,4),(i?Ze:ur)(e,function(e,r,i){return t(n,e,r,i)})),n}function ze(e){for(var t=-1,n=er(e),r=n.length,i=fn(r);++t<r;)i[t]=e[n[t]];return i}function Ue(e){for(var t=arguments,n=-1,r=ee(t,!0,!1,1),i=t[2]&&t[2][t[1]]===e?1:r.length,o=fn(i);++n<i;)o[n]=e[r[n]];return o}function Ve(e,t,n){var r=-1,i=ue(),o=e?e.length:0,a=!1;return n=(0>n?Vn(0,o+n):n)||0,Jn(e)?a=i(e,t,n)>-1:"number"==typeof o?a=(Oe(e)?e.indexOf(t,n):i(e,t,n))>-1:ur(e,function(e){return++r>=n?!(a=e===t):void 0}),a}function He(e,t,n){var r=!0;t=f.createCallback(t,n,3);var i=-1,o=e?e.length:0;if("number"==typeof o)for(;++i<o&&(r=!!t(e[i],i,e)););else ur(e,function(e,n,i){return r=!!t(e,n,i)});return r}function Ye(e,t,n){var r=[];t=f.createCallback(t,n,3);var i=-1,o=e?e.length:0;if("number"==typeof o)for(;++i<o;){var a=e[i];t(a,i,e)&&r.push(a)}else ur(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Xe(e,t,n){t=f.createCallback(t,n,3);var r=-1,i=e?e.length:0;if("number"!=typeof i){var o;return ur(e,function(e,n,r){return t(e,n,r)?(o=e,!1):void 0}),o}for(;++r<i;){var a=e[r];if(t(a,r,e))return a}}function We(e,t,n){var r;return t=f.createCallback(t,n,3),Qe(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r}function Ze(e,t,n){var r=-1,i=e?e.length:0;if(t=t&&"undefined"==typeof n?t:Z(t,n,3),"number"==typeof i)for(;++r<i&&t(e[r],r,e)!==!1;);else ur(e,t);return e}function Qe(e,t,n){var r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:Z(t,n,3),"number"==typeof r)for(;r--&&t(e[r],r,e)!==!1;);else{var i=er(e);r=i.length,ur(e,function(e,n,o){return n=i?i[--r]:--r,t(o[n],n,o)})}return e}function Je(e,t){var n=h(arguments,2),r=-1,i="function"==typeof t,o=e?e.length:0,a=fn("number"==typeof o?o:0);return Ze(e,function(e){a[++r]=(i?t:e[t]).apply(e,n)}),a}function Ke(e,t,n){var r=-1,i=e?e.length:0;if(t=f.createCallback(t,n,3),"number"==typeof i)for(var o=fn(i);++r<i;)o[r]=t(e[r],r,e);else o=[],ur(e,function(e,n,i){o[++r]=t(e,n,i)});return o}function et(e,t,n){var i=-(1/0),o=i;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Jn(e))for(var a=-1,s=e.length;++a<s;){var u=e[a];u>o&&(o=u)}else t=null==t&&Oe(e)?r:f.createCallback(t,n,3),Ze(e,function(e,n,r){var a=t(e,n,r);a>i&&(i=a,o=e)});return o}function tt(e,t,n){var i=1/0,o=i;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Jn(e))for(var a=-1,s=e.length;++a<s;){var u=e[a];o>u&&(o=u)}else t=null==t&&Oe(e)?r:f.createCallback(t,n,3),Ze(e,function(e,n,r){var a=t(e,n,r);i>a&&(i=a,o=e)});return o}function nt(e,t,n,r){if(!e)return n;var i=arguments.length<3;t=f.createCallback(t,r,4);var o=-1,a=e.length;if("number"==typeof a)for(i&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);else ur(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)});return n}function rt(e,t,n,r){var i=arguments.length<3;return t=f.createCallback(t,r,4),Qe(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function it(e,t,n){return t=f.createCallback(t,n,3),Ye(e,function(e,n,r){return!t(e,n,r)})}function ot(e,t,n){if(e&&"number"!=typeof e.length&&(e=ze(e)),null==t||n)return e?e[re(0,e.length-1)]:p;var r=at(e);return r.length=Hn(Vn(0,t),r.length),r}function at(e){var t=-1,n=e?e.length:0,r=fn("number"==typeof n?n:0);return Ze(e,function(e){var n=re(0,++t);r[t]=r[n],r[n]=e}),r}function st(e){var t=e?e.length:0;return"number"==typeof t?t:er(e).length}function ut(e,t,n){var r;t=f.createCallback(t,n,3);var i=-1,o=e?e.length:0;if("number"==typeof o)for(;++i<o&&!(r=t(e[i],i,e)););else ur(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function lt(e,t,n){var r=-1,o=Jn(t),a=e?e.length:0,h=fn("number"==typeof a?a:0);for(o||(t=f.createCallback(t,n,3)),Ze(e,function(e,n,i){var a=h[++r]=u();o?a.criteria=Ke(t,function(t){return e[t]}):(a.criteria=s())[0]=t(e,n,i),a.index=r,a.value=e}),a=h.length,h.sort(i);a--;){var d=h[a];h[a]=d.value,o||l(d.criteria),c(d)}return h}function ct(e){return e&&"number"==typeof e.length?h(e):ze(e)}function ht(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}function dt(e){return J(e,ee(arguments,!0,!0,1))}function pt(e,t,n){var r=-1,i=e?e.length:0;for(t=f.createCallback(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1}function ft(e,t,n){var r=e?e.length:0;for(t=f.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1}function gt(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=f.createCallback(t,n,3);++o<i&&t(e[o],o,e);)r++}else if(r=t,null==r||n)return e?e[0]:p;return h(e,0,Hn(Vn(0,r),i))}function vt(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(e=Ke(e,n,r)),ee(e,t)}function yt(t,n,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?Vn(0,i+r):r||0}else if(r){var o=Tt(t,n);return t[o]===n?o:-1}return e(t,n,r)}function mt(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=i;for(t=f.createCallback(t,n,3);o--&&t(e[o],o,e);)r++}else r=null==t||n?1:t||r;return h(e,0,Hn(Vn(0,i-r),i))}function bt(){for(var n=[],r=-1,i=arguments.length,a=s(),u=ue(),h=u===e,d=s();++r<i;){var p=arguments[r];(Jn(p)||de(p))&&(n.push(p),a.push(h&&p.length>=m&&o(r?n[r]:d)))}var f=n[0],g=-1,v=f?f.length:0,y=[];e:for(;++g<v;){var b=a[0];if(p=f[g],(b?t(b,p):u(d,p))<0){for(r=i,(b||d).push(p);--r;)if(b=a[r],(b?t(b,p):u(n[r],p))<0)continue e;y.push(p)}}for(;i--;)b=a[i],b&&c(b);return l(a),l(d),y}function wt(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=i;for(t=f.createCallback(t,n,3);o--&&t(e[o],o,e);)r++}else if(r=t,null==r||n)return e?e[i-1]:p;return h(e,Vn(0,i-r))}function xt(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?Vn(0,r+n):Hn(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function _t(e){for(var t=arguments,n=0,r=t.length,i=e?e.length:0;++n<r;)for(var o=-1,a=t[n];++o<i;)e[o]===a&&(jn.call(e,o--,1),i--);return e}function Et(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var r=-1,i=Vn(0,An((t-e)/(n||1))),o=fn(i);++r<i;)o[r]=e,e+=n;return o}function kt(e,t,n){var r=-1,i=e?e.length:0,o=[];for(t=f.createCallback(t,n,3);++r<i;){var a=e[r];t(a,r,e)&&(o.push(a),jn.call(e,r--,1),i--)}return o}function St(e,t,n){if("number"!=typeof t&&null!=t){var r=0,i=-1,o=e?e.length:0;for(t=f.createCallback(t,n,3);++i<o&&t(e[i],i,e);)r++}else r=null==t||n?1:Vn(0,t);return h(e,r)}function Tt(e,t,n,r){var i=0,o=e?e.length:i;for(n=n?f.createCallback(n,r,1):Qt,t=n(t);o>i;){var a=i+o>>>1;n(e[a])<t?i=a+1:o=a}return i}function Ct(){return ie(ee(arguments,!0,!0))}function Nt(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=f.createCallback(n,r,3)),ie(e,t,n)}function At(e){return J(e,h(arguments,1))}function Pt(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Jn(n)||de(n))var r=r?ie(J(r,n).concat(J(n,r))):n}return r||[]}function Dt(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?et(pr(e,"length")):0,r=fn(0>n?0:n);++t<n;)r[t]=pr(e,t);return r}function $t(e,t){var n=-1,r=e?e.length:0,i={};for(t||!r||Jn(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function Mt(e,t){if(!Ae(t))throw new En;return function(){return--e<1?t.apply(this,arguments):void 0}}function It(e,t){return arguments.length>2?ae(e,17,h(arguments,2),null,t):ae(e,1,null,null,t)}function Ot(e){for(var t=arguments.length>1?ee(arguments,!0,!1,1):we(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=ae(e[i],1,null,null,e)}return e}function Lt(e,t){return arguments.length>2?ae(t,19,h(arguments,2),null,e):ae(t,3,null,null,e)}function jt(){for(var e=arguments,t=e.length;t--;)if(!Ae(e[t]))throw new En;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Rt(e,t){return t="number"==typeof t?t:+t||e.length,ae(e,4,null,null,null,t)}function qt(e,t,n){var r,i,o,a,s,u,l,c=0,h=!1,d=!0;if(!Ae(e))throw new En;if(t=Vn(0,t)||0,n===!0){var f=!0;d=!1}else Pe(n)&&(f=n.leading,h="maxWait"in n&&(Vn(t,n.maxWait)||0),d="trailing"in n?n.trailing:d);var g=function(){var n=t-(gr()-a);if(0>=n){i&&Pn(i);var h=l;i=u=l=p,h&&(c=gr(),o=e.apply(s,r),u||i||(r=s=null))}else u=Ln(g,n)},v=function(){u&&Pn(u),i=u=l=p,(d||h!==t)&&(c=gr(),o=e.apply(s,r),u||i||(r=s=null))};return function(){if(r=arguments,a=gr(),s=this,l=d&&(u||!f),h===!1)var n=f&&!u;else{i||f||(c=a);var p=h-(a-c),y=0>=p;y?(i&&(i=Pn(i)),c=a,o=e.apply(s,r)):i||(i=Ln(v,p))}return y&&u?u=Pn(u):u||t===h||(u=Ln(g,t)),n&&(y=!0,o=e.apply(s,r)),!y||u||i||(r=s=null),o}}function Ft(e){if(!Ae(e))throw new En;var t=h(arguments,1);return Ln(function(){e.apply(p,t)},1)}function Bt(e,t){if(!Ae(e))throw new En;var n=h(arguments,2);return Ln(function(){e.apply(p,n)},t)}function Gt(e,t){if(!Ae(e))throw new En;var n=function(){var r=n.cache,i=t?t.apply(this,arguments):y+arguments[0];return In.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return n.cache={},n}function zt(e){var t,n;if(!Ae(e))throw new En;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Ut(e){return ae(e,16,h(arguments,1))}function Vt(e){return ae(e,32,null,h(arguments,1))}function Ht(e,t,n){var r=!0,i=!0;if(!Ae(e))throw new En;return n===!1?r=!1:Pe(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),U.leading=r,U.maxWait=t,U.trailing=i,qt(e,t,U)}function Yt(e,t){return ae(t,16,[e])}function Xt(e){return function(){return e}}function Wt(e,t,n){var r=typeof e;if(null==e||"function"==r)return Z(e,t,n);if("object"!=r)return tn(e);var i=er(e),o=i[0],a=e[o];return 1!=i.length||a!==a||Pe(a)?function(t){for(var n=i.length,r=!1;n--&&(r=te(t[i[n]],e[i[n]],null,!0)););return r}:function(e){var t=e[o];return a===t&&(0!==a||1/a==1/t)}}function Zt(e){return null==e?"":_n(e).replace(ir,se)}function Qt(e){return e}function Jt(e,t,n){var r=!0,i=t&&we(t);t&&(n||i.length)||(null==n&&(n=t),o=g,t=e,e=f,i=we(t)),n===!1?r=!1:Pe(n)&&"chain"in n&&(r=n.chain);var o=e,a=Ae(o);Ze(i,function(n){var i=e[n]=t[n];a&&(o.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,a=[n];On.apply(a,arguments);var s=i.apply(e,a);if(r||t){if(n===s&&Pe(s))return this;s=new o(s),s.__chain__=t}return s})})}function Kt(){return n._=Tn,this}function en(){}function tn(e){return function(t){return t[e]}}function nn(e,t,n){var r=null==e,i=null==t;if(null==n&&("boolean"==typeof e&&i?(n=e,e=1):i||"boolean"!=typeof t||(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=Xn();return Hn(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t)}return re(e,t)}function rn(e,t){if(e){var n=e[t];return Ae(n)?e[t]():n}}function on(e,t,n){var r=f.templateSettings;e=_n(e||""),n=ar({},n,r);var i,o=ar({},n.imports,r.imports),s=er(o),u=ze(o),l=0,c=n.interpolate||A,h="__p += '",d=xn((n.escape||A).source+"|"+c.source+"|"+(c===C?k:A).source+"|"+(n.evaluate||A).source+"|$","g");e.replace(d,function(t,n,r,o,s,u){return r||(r=o),h+=e.slice(l,u).replace(D,a),n&&(h+="' +\n__e("+n+") +\n'"),s&&(i=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),h+="';\n";var g=n.variable,v=g;v||(g="obj",h="with ("+g+") {\n"+h+"\n}\n"),h=(i?h.replace(x,""):h).replace(_,"$1").replace(E,"$1;"),h="function("+g+") {\n"+(v?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+M++ +"]")+"\n*/";try{var m=yn(s,"return "+h+y).apply(p,u)}catch(b){throw b.source=h,b}return t?m(t):(m.source=h,m)}function an(e,t,n){e=(e=+e)>-1?e:0;var r=-1,i=fn(e);for(t=Z(t,n,1);++r<e;)i[r]=t(r);return i}function sn(e){return null==e?"":_n(e).replace(rr,he)}function un(e){var t=++v;return _n(null==e?"":e)+t}function ln(e){return e=new g(e),e.__chain__=!0,e}function cn(e,t){return t(e),e}function hn(){return this.__chain__=!0,this}function dn(){return _n(this.__wrapped__)}function pn(){return this.__wrapped__}n=n?K.defaults(X.Object(),n,K.pick(X,$)):X;var fn=n.Array,gn=n.Boolean,vn=n.Date,yn=n.Function,mn=n.Math,bn=n.Number,wn=n.Object,xn=n.RegExp,_n=n.String,En=n.TypeError,kn=[],Sn=wn.prototype,Tn=n._,Cn=Sn.toString,Nn=xn("^"+_n(Cn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),An=mn.ceil,Pn=n.clearTimeout,Dn=mn.floor,$n=yn.prototype.toString,Mn=le(Mn=wn.getPrototypeOf)&&Mn,In=Sn.hasOwnProperty,On=kn.push,Ln=n.setTimeout,jn=kn.splice,Rn=kn.unshift,qn=function(){try{var e={},t=le(t=wn.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Fn=le(Fn=wn.create)&&Fn,Bn=le(Bn=fn.isArray)&&Bn,Gn=n.isFinite,zn=n.isNaN,Un=le(Un=wn.keys)&&Un,Vn=mn.max,Hn=mn.min,Yn=n.parseInt,Xn=mn.random,Wn={};Wn[O]=fn,Wn[L]=gn,Wn[j]=vn,Wn[R]=yn,Wn[F]=wn,Wn[q]=bn,Wn[B]=xn,Wn[G]=_n,g.prototype=f.prototype;var Zn=f.support={};Zn.funcDecomp=!le(n.WinRTError)&&P.test(d),Zn.funcNames="string"==typeof yn.name,f.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:C,variable:"",imports:{_:f}},Fn||(W=function(){function e(){}return function(t){if(Pe(t)){e.prototype=t;var r=new e;e.prototype=null}return r||n.Object()}}());var Qn=qn?function(e,t){V.value=t,qn(e,"__bindData__",V)}:en,Jn=Bn||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Cn.call(e)==O||!1},Kn=function(e){var t,n=e,r=[];if(!n)return r;if(!H[typeof e])return r;for(t in n)In.call(n,t)&&r.push(t);return r},er=Un?function(e){return Pe(e)?Un(e):[]}:Kn,tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nr=_e(tr),rr=xn("("+er(nr).join("|")+")","g"),ir=xn("["+er(tr).join("")+"]","g"),or=function(e,t,n){var r,i=e,o=i;if(!i)return o;var a=arguments,s=0,u="number"==typeof n?2:a.length;if(u>3&&"function"==typeof a[u-2])var l=Z(a[--u-1],a[u--],2);else u>2&&"function"==typeof a[u-1]&&(l=a[--u]);for(;++s<u;)if(i=a[s],i&&H[typeof i])for(var c=-1,h=H[typeof i]&&er(i),d=h?h.length:0;++c<d;)r=h[c],o[r]=l?l(o[r],i[r]):i[r];return o},ar=function(e,t,n){var r,i=e,o=i;if(!i)return o;for(var a=arguments,s=0,u="number"==typeof n?2:a.length;++s<u;)if(i=a[s],i&&H[typeof i])for(var l=-1,c=H[typeof i]&&er(i),h=c?c.length:0;++l<h;)r=c[l],"undefined"==typeof o[r]&&(o[r]=i[r]);return o},sr=function(e,t,n){var r,i=e,o=i;if(!i)return o;if(!H[typeof i])return o;t=t&&"undefined"==typeof n?t:Z(t,n,3);for(r in i)if(t(i[r],r,e)===!1)return o;return o},ur=function(e,t,n){var r,i=e,o=i;if(!i)return o;if(!H[typeof i])return o;t=t&&"undefined"==typeof n?t:Z(t,n,3);for(var a=-1,s=H[typeof i]&&er(i),u=s?s.length:0;++a<u;)if(r=s[a],t(i[r],r,e)===!1)return o;return o},lr=Mn?function(e){if(!e||Cn.call(e)!=F)return!1;var t=e.valueOf,n=le(t)&&(n=Mn(t))&&Mn(n);return n?e==n||Mn(e)==n:ce(e)}:ce,cr=oe(function(e,t,n){In.call(e,n)?e[n]++:e[n]=1}),hr=oe(function(e,t,n){(In.call(e,n)?e[n]:e[n]=[]).push(t)}),dr=oe(function(e,t,n){e[n]=t}),pr=Ke,fr=Ye,gr=le(gr=vn.now)&&gr||function(){return(new vn).getTime()},vr=8==Yn(w+"08")?Yn:function(e,t){return Yn(Oe(e)?e.replace(N,""):e,t||0)};return f.after=Mt,f.assign=or,f.at=Ue,f.bind=It,f.bindAll=Ot,f.bindKey=Lt,f.chain=ln,f.compact=ht,f.compose=jt,f.constant=Xt,f.countBy=cr,f.create=ge,f.createCallback=Wt,f.curry=Rt,f.debounce=qt,f.defaults=ar,f.defer=Ft,f.delay=Bt,f.difference=dt,f.filter=Ye,f.flatten=vt,f.forEach=Ze,f.forEachRight=Qe,f.forIn=sr,f.forInRight=me,f.forOwn=ur,f.forOwnRight=be,f.functions=we,f.groupBy=hr,f.indexBy=dr,f.initial=mt,f.intersection=bt,f.invert=_e,f.invoke=Je,f.keys=er,f.map=Ke,f.mapValues=je,f.max=et,f.memoize=Gt,f.merge=Re,f.min=tt,f.omit=qe,f.once=zt,f.pairs=Fe,f.partial=Ut,f.partialRight=Vt,f.pick=Be,f.pluck=pr,f.property=tn,f.pull=_t,f.range=Et,f.reject=it,f.remove=kt,f.rest=St,f.shuffle=at,f.sortBy=lt,f.tap=cn,f.throttle=Ht,f.times=an,f.toArray=ct,f.transform=Ge,f.union=Ct,f.uniq=Nt,f.values=ze,f.where=fr,f.without=At,f.wrap=Yt,f.xor=Pt,f.zip=Dt,f.zipObject=$t,f.collect=Ke,f.drop=St,f.each=Ze,f.eachRight=Qe,f.extend=or,f.methods=we,f.object=$t,f.select=Ye,f.tail=St,f.unique=Nt,f.unzip=Dt,Jt(f),f.clone=pe,f.cloneDeep=fe,f.contains=Ve,f.escape=Zt,f.every=He,f.find=Xe,f.findIndex=pt,f.findKey=ve,f.findLast=We,f.findLastIndex=ft,f.findLastKey=ye,f.has=xe,f.identity=Qt,f.indexOf=yt,f.isArguments=de,f.isArray=Jn,f.isBoolean=Ee,f.isDate=ke,f.isElement=Se,f.isEmpty=Te,f.isEqual=Ce,f.isFinite=Ne,f.isFunction=Ae,f.isNaN=De,f.isNull=$e,f.isNumber=Me,f.isObject=Pe,f.isPlainObject=lr,f.isRegExp=Ie,f.isString=Oe,f.isUndefined=Le,f.lastIndexOf=xt,f.mixin=Jt,f.noConflict=Kt,f.noop=en,f.now=gr,f.parseInt=vr,f.random=nn,f.reduce=nt,f.reduceRight=rt,f.result=rn,f.runInContext=d,f.size=st,f.some=ut,f.sortedIndex=Tt,f.template=on,f.unescape=sn,f.uniqueId=un,f.all=He,f.any=ut,f.detect=Xe,f.findWhere=Xe,f.foldl=nt,f.foldr=rt,f.include=Ve,f.inject=nt,Jt(function(){var e={};return ur(f,function(t,n){f.prototype[n]||(e[n]=t)}),e}(),!1),f.first=gt,f.last=wt,f.sample=ot,f.take=gt,f.head=gt,ur(f,function(e,t){var n="sample"!==t;f.prototype[t]||(f.prototype[t]=function(t,r){var i=this.__chain__,o=e(this.__wrapped__,t,r);return i||null!=t&&(!r||n&&"function"==typeof t)?new g(o,i):o})}),f.VERSION="2.4.1",f.prototype.chain=hn,f.prototype.toString=dn,f.prototype.value=pn,f.prototype.valueOf=pn,Ze(["join","pop","shift"],function(e){var t=kn[e];f.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new g(n,e):n}}),Ze(["push","reverse","sort","unshift"],function(e){var t=kn[e];f.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),Ze(["concat","slice","splice"],function(e){var t=kn[e];f.prototype[e]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),f}var p,f=[],g=[],v=0,y=+new Date+"",m=75,b=40,w=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",x=/\b__p \+= '';/g,_=/\b(__p \+=) '' \+/g,E=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,T=/^\s*function[ \n\r\t]+\w/,C=/<%=([\s\S]+?)%>/g,N=RegExp("^["+w+"]*0+(?=.$)"),A=/($^)/,P=/\bthis\b/,D=/['\n\r\t\u2028\u2029\\]/g,$=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],M=0,I="[object Arguments]",O="[object Array]",L="[object Boolean]",j="[object Date]",R="[object Function]",q="[object Number]",F="[object Object]",B="[object RegExp]",G="[object String]",z={};z[R]=!1,z[I]=z[O]=z[L]=z[j]=z[q]=z[F]=z[B]=z[G]=!0;var U={leading:!1,maxWait:0,trailing:!1},V={configurable:!1,enumerable:!1,value:null,writable:!1},H={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},X=H[typeof window]&&window||this,W=H[typeof exports]&&exports&&!exports.nodeType&&exports,Z=H[typeof module]&&module&&!module.nodeType&&module,Q=Z&&Z.exports===W&&W,J=H[typeof global]&&global;!J||J.global!==J&&J.window!==J||(X=J);var K=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(X._=K,define(function(){return K})):W&&Z?Q?(Z.exports=K)._=K:W._=K:X._=K}.call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return In.apply(null,arguments)}function t(e){In=e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function i(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function s(e,t,n,r){return Ne(e,t,n,r,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return null==e._pf&&(e._pf=u()),e._pf}function c(e){if(null==e._isValid){var t=l(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function h(e){var t=s(0/0);return null!=e?a(l(t),e):l(t).userInvalidated=!0,t}function d(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=l(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ln.length>0)for(n in Ln)r=Ln[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);

return e}function p(t){d(this,t),this._d=new Date(null!=t._d?t._d.getTime():0/0),jn===!1&&(jn=!0,e.updateOffset(this),jn=!1)}function f(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=g(t)),n}function y(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&v(e[r])!==v(t[r]))&&a++;return a+o}function m(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,r,i,o=0;o<e.length;){for(i=b(e[o]).split("-"),t=i.length,n=b(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=x(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&y(i,n,!0)>=t-1)break;t--}o++}return null}function x(e){var t=null;if(!Rn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=On._abbr,require("./locale/"+e),_(t)}catch(n){}return Rn[e]}function _(e,t){var n;return e&&(n="undefined"==typeof t?k(e):E(e,t),n&&(On=n)),On._abbr}function E(e,t){return null!==t?(t.abbr=e,Rn[e]=Rn[e]||new m,Rn[e].set(t),_(e),Rn[e]):(delete Rn[e],null)}function k(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return On;if(!n(e)){if(t=x(e))return t;e=[e]}return w(e)}function S(e,t){var n=e.toLowerCase();qn[n]=qn[n+"s"]=qn[t]=e}function T(e){return"string"==typeof e?qn[e]||qn[e.toLowerCase()]:void 0}function C(e){var t,n,r={};for(n in e)o(e,n)&&(t=T(n),t&&(r[t]=e[n]));return r}function N(t,n){return function(r){return null!=r?(P(this,t,r),e.updateOffset(this,n),this):A(this,t)}}function A(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function P(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function D(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=T(e),"function"==typeof this[e])return this[e](t);return this}function $(e,t,n){var r=""+Math.abs(e),i=t-r.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function M(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(zn[e]=i),t&&(zn[t[0]]=function(){return $(i.apply(this,arguments),t[1],t[2])}),n&&(zn[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function I(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function O(e){var t,n,r=e.match(Fn);for(t=0,n=r.length;n>t;t++)r[t]=zn[r[t]]?zn[r[t]]:I(r[t]);return function(i){var o="";for(t=0;n>t;t++)o+=r[t]instanceof Function?r[t].call(i,e):r[t];return o}}function L(e,t){return e.isValid()?(t=j(t,e.localeData()),Gn[t]=Gn[t]||O(t),Gn[t](e)):e.localeData().invalidDate()}function j(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Bn.lastIndex=0;r>=0&&Bn.test(e);)e=e.replace(Bn,n),Bn.lastIndex=0,r-=1;return e}function R(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function q(e,t,n){ir[e]=R(t)?t:function(e){return e&&n?n:t}}function F(e,t){return o(ir,e)?ir[e](t._strict,t._locale):new RegExp(B(e))}function B(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function G(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,n){n[t]=v(e)}),n=0;n<e.length;n++)or[e[n]]=r}function z(e,t){G(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function U(e,t,n){null!=t&&o(or,e)&&or[e](t,n._a,n,e)}function V(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function H(e){return this._months[e.month()]}function Y(e){return this._monthsShort[e.month()]}function X(e,t,n){var r,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=s([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function W(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),V(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function Z(t){return null!=t?(W(this,t),e.updateOffset(this,!0),this):A(this,"Month")}function Q(){return V(this.year(),this.month())}function J(e){var t,n=e._a;return n&&-2===l(e).overflow&&(t=n[sr]<0||n[sr]>11?sr:n[ur]<1||n[ur]>V(n[ar],n[sr])?ur:n[lr]<0||n[lr]>24||24===n[lr]&&(0!==n[cr]||0!==n[hr]||0!==n[dr])?lr:n[cr]<0||n[cr]>59?cr:n[hr]<0||n[hr]>59?hr:n[dr]<0||n[dr]>999?dr:-1,l(e)._overflowDayOfYear&&(ar>t||t>ur)&&(t=ur),l(e).overflow=t),e}function K(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function ee(e,t){var n=!0;return a(function(){return n&&(K(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function te(e,t){gr[e]||(K(t),gr[e]=!0)}function ne(e){var t,n,r=e._i,i=vr.exec(r);if(i){for(l(e).iso=!0,t=0,n=yr.length;n>t;t++)if(yr[t][1].exec(r)){e._f=yr[t][0];break}for(t=0,n=mr.length;n>t;t++)if(mr[t][1].exec(r)){e._f+=(i[6]||" ")+mr[t][0];break}r.match(tr)&&(e._f+="Z"),xe(e)}else e._isValid=!1}function re(t){var n=br.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(ne(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function ie(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return 1970>e&&s.setFullYear(e),s}function oe(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ae(e){return se(e)?366:365}function se(e){return e%4===0&&e%100!==0||e%400===0}function ue(){return se(this.year())}function le(e,t,n){var r,i=n-t,o=n-e.day();return o>i&&(o-=7),i-7>o&&(o+=7),r=Ae(e).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ce(e){return le(e,this._week.dow,this._week.doy).week}function he(){return this._week.dow}function de(){return this._week.doy}function pe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function fe(e){var t=le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ge(e,t,n,r,i){var o,a=6+i-r,s=oe(e,0,1+a),u=s.getUTCDay();return i>u&&(u+=7),n=null!=n?1*n:i,o=1+a+7*(t-1)-u+n,{year:o>0?e:e-1,dayOfYear:o>0?o:ae(e-1)+o}}function ve(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ye(e,t,n){return null!=e?e:null!=t?t:n}function me(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function be(e){var t,n,r,i,o=[];if(!e._d){for(r=me(e),e._w&&null==e._a[ur]&&null==e._a[sr]&&we(e),e._dayOfYear&&(i=ye(e._a[ar],r[ar]),e._dayOfYear>ae(i)&&(l(e)._overflowDayOfYear=!0),n=oe(i,0,e._dayOfYear),e._a[sr]=n.getUTCMonth(),e._a[ur]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[lr]&&0===e._a[cr]&&0===e._a[hr]&&0===e._a[dr]&&(e._nextDay=!0,e._a[lr]=0),e._d=(e._useUTC?oe:ie).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[lr]=24)}}function we(e){var t,n,r,i,o,a,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,a=4,n=ye(t.GG,e._a[ar],le(Ae(),1,4).year),r=ye(t.W,1),i=ye(t.E,1)):(o=e._locale._week.dow,a=e._locale._week.doy,n=ye(t.gg,e._a[ar],le(Ae(),o,a).year),r=ye(t.w,1),null!=t.d?(i=t.d,o>i&&++r):i=null!=t.e?t.e+o:o),s=ge(n,r,i,a,o),e._a[ar]=s.year,e._dayOfYear=s.dayOfYear}function xe(t){if(t._f===e.ISO_8601)return void ne(t);t._a=[],l(t).empty=!0;var n,r,i,o,a,s=""+t._i,u=s.length,c=0;for(i=j(t._f,t._locale).match(Fn)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(F(o,t))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&l(t).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),zn[o]?(r?l(t).empty=!1:l(t).unusedTokens.push(o),U(o,r,t)):t._strict&&!r&&l(t).unusedTokens.push(o);l(t).charsLeftOver=u-c,s.length>0&&l(t).unusedInput.push(s),l(t).bigHour===!0&&t._a[lr]<=12&&t._a[lr]>0&&(l(t).bigHour=void 0),t._a[lr]=_e(t._locale,t._a[lr],t._meridiem),be(t),J(t)}function _e(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function Ee(e){var t,n,r,i,o;if(0===e._f.length)return l(e).invalidFormat=!0,void(e._d=new Date(0/0));for(i=0;i<e._f.length;i++)o=0,t=d({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],xe(t),c(t)&&(o+=l(t).charsLeftOver,o+=10*l(t).unusedTokens.length,l(t).score=o,(null==r||r>o)&&(r=o,n=t));a(e,n||t)}function ke(e){if(!e._d){var t=C(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],be(e)}}function Se(e){var t=new p(J(Te(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Te(e){var t=e._i,i=e._f;return e._locale=e._locale||k(e._l),null===t||void 0===i&&""===t?h({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),f(t)?new p(J(t)):(n(i)?Ee(e):i?xe(e):r(t)?e._d=t:Ce(e),e))}function Ce(t){var o=t._i;void 0===o?t._d=new Date:r(o)?t._d=new Date(+o):"string"==typeof o?re(t):n(o)?(t._a=i(o.slice(0),function(e){return parseInt(e,10)}),be(t)):"object"==typeof o?ke(t):"number"==typeof o?t._d=new Date(o):e.createFromInputFallback(t)}function Ne(e,t,n,r,i){var o={};return"boolean"==typeof n&&(r=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,Se(o)}function Ae(e,t,n,r){return Ne(e,t,n,r,!1)}function Pe(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Ae();for(r=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][e](r))&&(r=t[i]);return r}function De(){var e=[].slice.call(arguments,0);return Pe("isBefore",e)}function $e(){var e=[].slice.call(arguments,0);return Pe("isAfter",e)}function Me(e){var t=C(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*u+36e5*s,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=k(),this._bubble()}function Ie(e){return e instanceof Me}function Oe(e,t){M(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+$(~~(e/60),2)+t+$(~~e%60,2)})}function Le(e){var t=(e||"").match(tr)||[],n=t[t.length-1]||[],r=(n+"").match(kr)||["-",0,0],i=+(60*r[1])+v(r[2]);return"+"===r[0]?i:-i}function je(t,n){var i,o;return n._isUTC?(i=n.clone(),o=(f(t)||r(t)?+t:+Ae(t))-+i,i._d.setTime(+i._d+o),e.updateOffset(i,!1),i):Ae(t).local()}function Re(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function qe(t,n){var r,i=this._offset||0;return null!=t?("string"==typeof t&&(t=Le(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(r=Re(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!n||this._changeInProgress?tt(this,Ze(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Re(this)}function Fe(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Be(e){return this.utcOffset(0,e)}function Ge(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Re(this),"m")),this}function ze(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Le(this._i)),this}function Ue(e){return e=e?Ae(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Ve(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function He(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(d(e,this),e=Te(e),e._a){var t=e._isUTC?s(e._a):Ae(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ye(){return!this._isUTC}function Xe(){return this._isUTC}function We(){return this._isUTC&&0===this._offset}function Ze(e,t){var n,r,i,a=e,s=null;return Ie(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(s=Sr.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:v(s[ur])*n,h:v(s[lr])*n,m:v(s[cr])*n,s:v(s[hr])*n,ms:v(s[dr])*n}):(s=Tr.exec(e))?(n="-"===s[1]?-1:1,a={y:Qe(s[2],n),M:Qe(s[3],n),d:Qe(s[4],n),h:Qe(s[5],n),m:Qe(s[6],n),s:Qe(s[7],n),w:Qe(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=Ke(Ae(a.from),Ae(a.to)),a={},a.ms=i.milliseconds,a.M=i.months),r=new Me(a),Ie(e)&&o(e,"_locale")&&(r._locale=e._locale),r}function Qe(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Je(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ke(e,t){var n;return t=je(t,e),e.isBefore(t)?n=Je(e,t):(n=Je(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function et(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(te(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Ze(n,r),tt(this,i,e),this}}function tt(t,n,r,i){var o=n._milliseconds,a=n._days,s=n._months;i=null==i?!0:i,o&&t._d.setTime(+t._d+o*r),a&&P(t,"Date",A(t,"Date")+a*r),s&&W(t,A(t,"Month")+s*r),i&&e.updateOffset(t,a||s)}function nt(e,t){var n=e||Ae(),r=je(n,this).startOf("day"),i=this.diff(r,"days",!0),o=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,Ae(n)))}function rt(){return new p(this)}function it(e,t){var n;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=f(e)?e:Ae(e),+this>+e):(n=f(e)?+e:+Ae(e),n<+this.clone().startOf(t))}function ot(e,t){var n;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=f(e)?e:Ae(e),+e>+this):(n=f(e)?+e:+Ae(e),+this.clone().endOf(t)<n)}function at(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function st(e,t){var n;return t=T(t||"millisecond"),"millisecond"===t?(e=f(e)?e:Ae(e),+this===+e):(n=+Ae(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function ut(e,t,n){var r,i,o=je(e,this),a=6e4*(o.utcOffset()-this.utcOffset());return t=T(t),"year"===t||"month"===t||"quarter"===t?(i=lt(this,o),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-o,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?i:g(i)}function lt(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return 0>t-o?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)}function ct(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ht(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():L(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):L(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function dt(t){var n=L(this,t||e.defaultFormat);return this.localeData().postformat(n)}function pt(e,t){return this.isValid()?Ze({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ft(e){return this.from(Ae(),e)}function gt(e,t){return this.isValid()?Ze({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function vt(e){return this.to(Ae(),e)}function yt(e){var t;return void 0===e?this._locale._abbr:(t=k(e),null!=t&&(this._locale=t),this)}function mt(){return this._locale}function bt(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wt(e){return e=T(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function xt(){return+this._d-6e4*(this._offset||0)}function _t(){return Math.floor(+this/1e3)}function Et(){return this._offset?new Date(+this):this._d}function kt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function St(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Tt(){return c(this)}function Ct(){return a({},l(this))}function Nt(){return l(this).overflow}function At(e,t){M(0,[e,e.length],0,t)}function Pt(e,t,n){return le(Ae([e,11,31+t-n]),t,n).week}function Dt(e){var t=le(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function $t(e){var t=le(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Mt(){return Pt(this.year(),1,4)}function It(){var e=this.localeData()._week;return Pt(this.year(),e.dow,e.doy)}function Ot(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Lt(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function jt(e){return this._weekdays[e.day()]}function Rt(e){return this._weekdaysShort[e.day()]}function qt(e){return this._weekdaysMin[e.day()]}function Ft(e){var t,n,r;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Ae([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Bt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Lt(e,this.localeData()),this.add(e-t,"d")):t}function Gt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function zt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Ut(e,t){M(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Vt(e,t){return t._meridiemParse}function Ht(e){return"p"===(e+"").toLowerCase().charAt(0)}function Yt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Xt(e,t){t[dr]=v(1e3*("0."+e))}function Wt(){return this._isUTC?"UTC":""}function Zt(){return this._isUTC?"Coordinated Universal Time":""}function Qt(e){return Ae(1e3*e)}function Jt(){return Ae.apply(null,arguments).parseZone()}function Kt(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r}function en(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function tn(){return this._invalidDate}function nn(e){return this._ordinal.replace("%d",e)}function rn(e){return e}function on(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)}function an(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function sn(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function un(e,t,n,r){var i=k(),o=s().set(r,t);return i[n](o,e)}function ln(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return un(e,t,n,i);var o,a=[];for(o=0;r>o;o++)a[o]=un(e,o,n,i);return a}function cn(e,t){return ln(e,t,"months",12,"month")}function hn(e,t){return ln(e,t,"monthsShort",12,"month")}function dn(e,t){return ln(e,t,"weekdays",7,"day")}function pn(e,t){return ln(e,t,"weekdaysShort",7,"day")}function fn(e,t){return ln(e,t,"weekdaysMin",7,"day")}function gn(){var e=this._data;return this._milliseconds=Wr(this._milliseconds),this._days=Wr(this._days),this._months=Wr(this._months),e.milliseconds=Wr(e.milliseconds),e.seconds=Wr(e.seconds),e.minutes=Wr(e.minutes),e.hours=Wr(e.hours),e.months=Wr(e.months),e.years=Wr(e.years),this}function vn(e,t,n,r){var i=Ze(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function yn(e,t){return vn(this,e,t,1)}function mn(e,t){return vn(this,e,t,-1)}function bn(e){return 0>e?Math.floor(e):Math.ceil(e)}function wn(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||0>=o&&0>=a&&0>=s||(o+=864e5*bn(_n(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=g(o/1e3),u.seconds=e%60,t=g(e/60),u.minutes=t%60,n=g(t/60),u.hours=n%24,a+=g(n/24),i=g(xn(a)),s+=i,a-=bn(_n(i)),r=g(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function xn(e){return 4800*e/146097}function _n(e){return 146097*e/4800}function En(e){var t,n,r=this._milliseconds;if(e=T(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+xn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(_n(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function kn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Sn(e){return function(){return this.as(e)}}function Tn(e){return e=T(e),this[e+"s"]()}function Cn(e){return function(){return this._data[e]}}function Nn(){return g(this.days()/7)}function An(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Pn(e,t,n){var r=Ze(e).abs(),i=hi(r.as("s")),o=hi(r.as("m")),a=hi(r.as("h")),s=hi(r.as("d")),u=hi(r.as("M")),l=hi(r.as("y")),c=i<di.s&&["s",i]||1===o&&["m"]||o<di.m&&["mm",o]||1===a&&["h"]||a<di.h&&["hh",a]||1===s&&["d"]||s<di.d&&["dd",s]||1===u&&["M"]||u<di.M&&["MM",u]||1===l&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,An.apply(null,c)}function Dn(e,t){return void 0===di[e]?!1:void 0===t?di[e]:(di[e]=t,!0)}function $n(e){var t=this.localeData(),n=Pn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Mn(){var e,t,n,r=pi(this._milliseconds)/1e3,i=pi(this._days),o=pi(this._months);e=g(r/60),t=g(e/60),r%=60,e%=60,n=g(o/12),o%=12;var a=n,s=o,u=i,l=t,c=e,h=r,d=this.asSeconds();return d?(0>d?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(u?u+"D":"")+(l||c||h?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(h?h+"S":""):"P0D"}var In,On,Ln=e.momentProperties=[],jn=!1,Rn={},qn={},Fn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Bn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Gn={},zn={},Un=/\d/,Vn=/\d\d/,Hn=/\d{3}/,Yn=/\d{4}/,Xn=/[+-]?\d{6}/,Wn=/\d\d?/,Zn=/\d{1,3}/,Qn=/\d{1,4}/,Jn=/[+-]?\d{1,6}/,Kn=/\d+/,er=/[+-]?\d+/,tr=/Z|[+-]\d\d:?\d\d/gi,nr=/[+-]?\d+(\.\d{1,3})?/,rr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ir={},or={},ar=0,sr=1,ur=2,lr=3,cr=4,hr=5,dr=6;M("M",["MM",2],"Mo",function(){return this.month()+1}),M("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),M("MMMM",0,0,function(e){return this.localeData().months(this,e)}),S("month","M"),q("M",Wn),q("MM",Wn,Vn),q("MMM",rr),q("MMMM",rr),G(["M","MM"],function(e,t){t[sr]=v(e)-1}),G(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[sr]=i:l(n).invalidMonth=e});var pr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),fr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),gr={};e.suppressDeprecationWarnings=!1;var vr=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],mr=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],br=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=ee("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),M(0,["YY",2],0,function(){return this.year()%100}),M(0,["YYYY",4],0,"year"),M(0,["YYYYY",5],0,"year"),M(0,["YYYYYY",6,!0],0,"year"),S("year","y"),q("Y",er),q("YY",Wn,Vn),q("YYYY",Qn,Yn),q("YYYYY",Jn,Xn),q("YYYYYY",Jn,Xn),G(["YYYYY","YYYYYY"],ar),G("YYYY",function(t,n){n[ar]=2===t.length?e.parseTwoDigitYear(t):v(t)}),G("YY",function(t,n){n[ar]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var wr=N("FullYear",!1);M("w",["ww",2],"wo","week"),M("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),q("w",Wn),q("ww",Wn,Vn),q("W",Wn),q("WW",Wn,Vn),z(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=v(e)});var xr={dow:0,doy:6};M("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),q("DDD",Zn),q("DDDD",Hn),G(["DDD","DDDD"],function(e,t,n){n._dayOfYear=v(e)}),e.ISO_8601=function(){};var _r=ee("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ae.apply(null,arguments);return this>e?this:e}),Er=ee("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ae.apply(null,arguments);return e>this?this:e});Oe("Z",":"),Oe("ZZ",""),q("Z",tr),q("ZZ",tr),G(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Le(e)});var kr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Sr=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Tr=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ze.fn=Me.prototype;var Cr=et(1,"add"),Nr=et(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ar=ee("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});M(0,["gg",2],0,function(){return this.weekYear()%100}),M(0,["GG",2],0,function(){return this.isoWeekYear()%100}),At("gggg","weekYear"),At("ggggg","weekYear"),At("GGGG","isoWeekYear"),At("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),q("G",er),q("g",er),q("GG",Wn,Vn),q("gg",Wn,Vn),q("GGGG",Qn,Yn),q("gggg",Qn,Yn),q("GGGGG",Jn,Xn),q("ggggg",Jn,Xn),z(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=v(e)}),z(["gg","GG"],function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)}),M("Q",0,0,"quarter"),S("quarter","Q"),q("Q",Un),G("Q",function(e,t){t[sr]=3*(v(e)-1)}),M("D",["DD",2],"Do","date"),S("date","D"),q("D",Wn),q("DD",Wn,Vn),q("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),G(["D","DD"],ur),G("Do",function(e,t){t[ur]=v(e.match(Wn)[0],10)});var Pr=N("Date",!0);M("d",0,"do","day"),M("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),M("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),M("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),M("e",0,0,"weekday"),M("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),q("d",Wn),q("e",Wn),q("E",Wn),q("dd",rr),q("ddd",rr),q("dddd",rr),z(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:l(n).invalidWeekday=e}),z(["d","e","E"],function(e,t,n,r){t[r]=v(e)});var Dr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$r="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mr="Su_Mo_Tu_We_Th_Fr_Sa".split("_");M("H",["HH",2],0,"hour"),M("h",["hh",2],0,function(){return this.hours()%12||12}),Ut("a",!0),Ut("A",!1),S("hour","h"),q("a",Vt),q("A",Vt),q("H",Wn),q("h",Wn),q("HH",Wn,Vn),q("hh",Wn,Vn),G(["H","HH"],lr),G(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),G(["h","hh"],function(e,t,n){t[lr]=v(e),l(n).bigHour=!0});var Ir=/[ap]\.?m?\.?/i,Or=N("Hours",!0);M("m",["mm",2],0,"minute"),S("minute","m"),q("m",Wn),q("mm",Wn,Vn),G(["m","mm"],cr);var Lr=N("Minutes",!1);M("s",["ss",2],0,"second"),S("second","s"),q("s",Wn),q("ss",Wn,Vn),G(["s","ss"],hr);var jr=N("Seconds",!1);M("S",0,0,function(){return~~(this.millisecond()/100)}),M(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),M(0,["SSS",3],0,"millisecond"),M(0,["SSSS",4],0,function(){return 10*this.millisecond()}),M(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),M(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),M(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),M(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),M(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),q("S",Zn,Un),q("SS",Zn,Vn),q("SSS",Zn,Hn);var Rr;for(Rr="SSSS";Rr.length<=9;Rr+="S")q(Rr,Kn);for(Rr="S";Rr.length<=9;Rr+="S")G(Rr,Xt);var qr=N("Milliseconds",!1);M("z",0,0,"zoneAbbr"),M("zz",0,0,"zoneName");var Fr=p.prototype;Fr.add=Cr,Fr.calendar=nt,Fr.clone=rt,Fr.diff=ut,Fr.endOf=wt,Fr.format=dt,Fr.from=pt,Fr.fromNow=ft,Fr.to=gt,Fr.toNow=vt,Fr.get=D,Fr.invalidAt=Nt,Fr.isAfter=it,Fr.isBefore=ot,Fr.isBetween=at,Fr.isSame=st,Fr.isValid=Tt,Fr.lang=Ar,Fr.locale=yt,Fr.localeData=mt,Fr.max=Er,Fr.min=_r,Fr.parsingFlags=Ct,Fr.set=D,Fr.startOf=bt,Fr.subtract=Nr,Fr.toArray=kt,Fr.toObject=St,Fr.toDate=Et,Fr.toISOString=ht,Fr.toJSON=ht,Fr.toString=ct,Fr.unix=_t,Fr.valueOf=xt,Fr.year=wr,Fr.isLeapYear=ue,Fr.weekYear=Dt,Fr.isoWeekYear=$t,Fr.quarter=Fr.quarters=Ot,Fr.month=Z,Fr.daysInMonth=Q,Fr.week=Fr.weeks=pe,Fr.isoWeek=Fr.isoWeeks=fe,Fr.weeksInYear=It,Fr.isoWeeksInYear=Mt,Fr.date=Pr,Fr.day=Fr.days=Bt,Fr.weekday=Gt,Fr.isoWeekday=zt,Fr.dayOfYear=ve,Fr.hour=Fr.hours=Or,Fr.minute=Fr.minutes=Lr,Fr.second=Fr.seconds=jr,Fr.millisecond=Fr.milliseconds=qr,Fr.utcOffset=qe,Fr.utc=Be,Fr.local=Ge,Fr.parseZone=ze,Fr.hasAlignedHourOffset=Ue,Fr.isDST=Ve,Fr.isDSTShifted=He,Fr.isLocal=Ye,Fr.isUtcOffset=Xe,Fr.isUtc=We,Fr.isUTC=We,Fr.zoneAbbr=Wt,Fr.zoneName=Zt,Fr.dates=ee("dates accessor is deprecated. Use date instead.",Pr),Fr.months=ee("months accessor is deprecated. Use month instead",Z),Fr.years=ee("years accessor is deprecated. Use year instead",wr),Fr.zone=ee("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Fe);var Br=Fr,Gr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},zr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ur="Invalid date",Vr="%d",Hr=/\d{1,2}/,Yr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Xr=m.prototype;Xr._calendar=Gr,Xr.calendar=Kt,Xr._longDateFormat=zr,Xr.longDateFormat=en,Xr._invalidDate=Ur,Xr.invalidDate=tn,Xr._ordinal=Vr,Xr.ordinal=nn,Xr._ordinalParse=Hr,Xr.preparse=rn,Xr.postformat=rn,Xr._relativeTime=Yr,Xr.relativeTime=on,Xr.pastFuture=an,Xr.set=sn,Xr.months=H,Xr._months=pr,Xr.monthsShort=Y,Xr._monthsShort=fr,Xr.monthsParse=X,Xr.week=ce,Xr._week=xr,Xr.firstDayOfYear=de,Xr.firstDayOfWeek=he,Xr.weekdays=jt,Xr._weekdays=Dr,Xr.weekdaysMin=qt,Xr._weekdaysMin=Mr,Xr.weekdaysShort=Rt,Xr._weekdaysShort=$r,Xr.weekdaysParse=Ft,Xr.isPM=Ht,Xr._meridiemParse=Ir,Xr.meridiem=Yt,_("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=ee("moment.lang is deprecated. Use moment.locale instead.",_),e.langData=ee("moment.langData is deprecated. Use moment.localeData instead.",k);

var Wr=Math.abs,Zr=Sn("ms"),Qr=Sn("s"),Jr=Sn("m"),Kr=Sn("h"),ei=Sn("d"),ti=Sn("w"),ni=Sn("M"),ri=Sn("y"),ii=Cn("milliseconds"),oi=Cn("seconds"),ai=Cn("minutes"),si=Cn("hours"),ui=Cn("days"),li=Cn("months"),ci=Cn("years"),hi=Math.round,di={s:45,m:45,h:22,d:26,M:11},pi=Math.abs,fi=Me.prototype;fi.abs=gn,fi.add=yn,fi.subtract=mn,fi.as=En,fi.asMilliseconds=Zr,fi.asSeconds=Qr,fi.asMinutes=Jr,fi.asHours=Kr,fi.asDays=ei,fi.asWeeks=ti,fi.asMonths=ni,fi.asYears=ri,fi.valueOf=kn,fi._bubble=wn,fi.get=Tn,fi.milliseconds=ii,fi.seconds=oi,fi.minutes=ai,fi.hours=si,fi.days=ui,fi.weeks=Nn,fi.months=li,fi.years=ci,fi.humanize=$n,fi.toISOString=Mn,fi.toString=Mn,fi.toJSON=Mn,fi.locale=yt,fi.localeData=mt,fi.toIsoString=ee("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mn),fi.lang=Ar,M("X",0,0,"unix"),M("x",0,0,"valueOf"),q("x",er),q("X",nr),G("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),G("x",function(e,t,n){n._d=new Date(v(e))}),e.version="2.10.6",t(Ae),e.fn=Br,e.min=De,e.max=$e,e.utc=s,e.unix=Qt,e.months=cn,e.isDate=r,e.locale=_,e.invalid=h,e.duration=Ze,e.isMoment=f,e.weekdays=dn,e.parseZone=Jt,e.localeData=k,e.isDuration=Ie,e.monthsShort=hn,e.weekdaysMin=fn,e.defineLocale=E,e.weekdaysShort=pn,e.normalizeUnits=T,e.relativeTimeThreshold=Dn;var gi=e;return gi}),function(e,t,n){function r(e,t,n){return e.addEventListener?void e.addEventListener(t,n,!1):void e.attachEvent("on"+t,n)}function i(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return S[e.which]?S[e.which]:T[e.which]?T[e.which]:String.fromCharCode(e.which).toLowerCase()}function o(e,t){return e.sort().join(",")===t.sort().join(",")}function a(e){e=e||{};var t,n=!1;for(t in D)e[t]?n=!0:D[t]=0;n||(I=!1)}function s(e,t,n,r,i,a){var s,u,l=[],c=n.type;if(!A[e])return[];for("keyup"==c&&f(e)&&(t=[e]),s=0;s<A[e].length;++s)if(u=A[e][s],(r||!u.seq||D[u.seq]==u.level)&&c==u.action&&("keypress"==c&&!n.metaKey&&!n.ctrlKey||o(t,u.modifiers))){var h=!r&&u.combo==i,d=r&&u.seq==r&&u.level==a;(h||d)&&A[e].splice(s,1),l.push(u)}return l}function u(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}function c(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}function h(e,t,n,r){L.stopCallback(t,t.target||t.srcElement,n,r)||e(t,n)===!1&&(l(t),c(t))}function d(e,t,n){var r,i=s(e,t,n),o={},u=0,l=!1;for(r=0;r<i.length;++r)i[r].seq&&(u=Math.max(u,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=u)continue;l=!0,o[i[r].seq]=1,h(i[r].callback,n,i[r].combo,i[r].seq)}else l||h(i[r].callback,n,i[r].combo);var c="keypress"==n.type&&M;n.type!=I||f(e)||c||a(o),M=l&&"keydown"==n.type}function p(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=i(e);if(t)return"keyup"==e.type&&$===t?void($=!1):void L.handleKey(t,u(e),e)}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function g(){clearTimeout(k),k=setTimeout(a,1e3)}function v(){if(!E){E={};for(var e in S)e>95&&112>e||S.hasOwnProperty(e)&&(E[S[e]]=e)}return E}function y(e,t,n){return n||(n=v()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function m(e,t,n,r){function o(t){return function(){I=t,++D[e],g()}}function s(t){h(n,t,e),"keyup"!==r&&($=i(t)),setTimeout(a,10)}D[e]=0;for(var u=0;u<t.length;++u){var l=u+1===t.length,c=l?s:o(r||w(t[u+1]).action);x(t[u],c,r,e,u)}}function b(e){return"+"===e?["+"]:e.split("+")}function w(e,t){var n,r,i,o=[];for(n=b(e),i=0;i<n.length;++i)r=n[i],N[r]&&(r=N[r]),t&&"keypress"!=t&&C[r]&&(r=C[r],o.push("shift")),f(r)&&o.push(r);return t=y(r,o,t),{key:r,modifiers:o,action:t}}function x(e,t,n,r,i){P[e+":"+n]=t,e=e.replace(/\s+/g," ");var o,a=e.split(" ");return a.length>1?void m(e,a,t,n):(o=w(e,n),A[o.key]=A[o.key]||[],s(o.key,o.modifiers,{type:o.action},r,e,i),void A[o.key][r?"unshift":"push"]({callback:t,modifiers:o.modifiers,action:o.action,seq:r,level:i,combo:e}))}function _(e,t,n){for(var r=0;r<e.length;++r)x(e[r],t,n)}for(var E,k,S={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},T={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},C={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},N={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},A={},P={},D={},$=!1,M=!1,I=!1,O=1;20>O;++O)S[111+O]="f"+O;for(O=0;9>=O;++O)S[O+96]=O;r(t,"keypress",p),r(t,"keydown",p),r(t,"keyup",p);var L={bind:function(e,t,n){return e=e instanceof Array?e:[e],_(e,t,n),this},unbind:function(e,t){return L.bind(e,function(){},t)},trigger:function(e,t){return P[e+":"+t]&&P[e+":"+t]({},e),this},reset:function(){return A={},P={},this},stopCallback:function(e,t){return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},handleKey:d};e.Mousetrap=L,"function"==typeof define&&define.amd&&define(L)}(window,document),function(){function e(e){this._value=e}function t(e,t,n,r){var i,o,a=Math.pow(10,t);return o=(n(e*a)/a).toFixed(t),r&&(i=new RegExp("0{1,"+r+"}$"),o=o.replace(i,"")),o}function n(e,t,n){var r;return r=t.indexOf("$")>-1?i(e,t,n):t.indexOf("%")>-1?o(e,t,n):t.indexOf(":")>-1?a(e,t):u(e._value,t,n)}function r(e,t){var n,r,i,o,a,u=t,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;if(t.indexOf(":")>-1)e._value=s(t);else if(t===v)e._value=0;else{for("."!==f[g].delimiters.decimal&&(t=t.replace(/\./g,"").replace(f[g].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+f[g].abbreviations.thousand+"(?:\\)|(\\"+f[g].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+f[g].abbreviations.million+"(?:\\)|(\\"+f[g].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+f[g].abbreviations.billion+"(?:\\)|(\\"+f[g].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+f[g].abbreviations.trillion+"(?:\\)|(\\"+f[g].currency.symbol+")?(?:\\))?)?$"),a=0;a<=l.length&&!(c=t.indexOf(l[a])>-1?Math.pow(1024,a+1):!1);a++);e._value=(c?c:1)*(u.match(n)?Math.pow(10,3):1)*(u.match(r)?Math.pow(10,6):1)*(u.match(i)?Math.pow(10,9):1)*(u.match(o)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=c?Math.ceil(e._value):e._value}return e._value}function i(e,t,n){var r,i,o=t.indexOf("$"),a=t.indexOf("("),s=t.indexOf("-"),l="";return t.indexOf(" $")>-1?(l=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(l=" ",t=t.replace("$ ","")):t=t.replace("$",""),i=u(e._value,t,n),1>=o?i.indexOf("(")>-1||i.indexOf("-")>-1?(i=i.split(""),r=1,(a>o||s>o)&&(r=0),i.splice(r,0,f[g].currency.symbol+l),i=i.join("")):i=f[g].currency.symbol+l+i:i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,l+f[g].currency.symbol),i=i.join("")):i=i+l+f[g].currency.symbol,i}function o(e,t,n){var r,i="",o=100*e._value;return t.indexOf(" %")>-1?(i=" ",t=t.replace(" %","")):t=t.replace("%",""),r=u(o,t,n),r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,i+"%"),r=r.join("")):r=r+i+"%",r}function a(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*t*60)/60),r=Math.round(e._value-60*t*60-60*n);return t+":"+(10>n?"0"+n:n)+":"+(10>r?"0"+r:r)}function s(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}function u(e,n,r){var i,o,a,s,u,l,c=!1,h=!1,d=!1,p="",y=!1,m=!1,b=!1,w=!1,x=!1,_="",E="",k=Math.abs(e),S=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],T="",C=!1;if(0===e&&null!==v)return v;if(n.indexOf("(")>-1?(c=!0,n=n.slice(1,-1)):n.indexOf("+")>-1&&(h=!0,n=n.replace(/\+/g,"")),n.indexOf("a")>-1&&(y=n.indexOf("aK")>=0,m=n.indexOf("aM")>=0,b=n.indexOf("aB")>=0,w=n.indexOf("aT")>=0,x=y||m||b||w,n.indexOf(" a")>-1?(p=" ",n=n.replace(" a","")):n=n.replace("a",""),k>=Math.pow(10,12)&&!x||w?(p+=f[g].abbreviations.trillion,e/=Math.pow(10,12)):k<Math.pow(10,12)&&k>=Math.pow(10,9)&&!x||b?(p+=f[g].abbreviations.billion,e/=Math.pow(10,9)):k<Math.pow(10,9)&&k>=Math.pow(10,6)&&!x||m?(p+=f[g].abbreviations.million,e/=Math.pow(10,6)):(k<Math.pow(10,6)&&k>=Math.pow(10,3)&&!x||y)&&(p+=f[g].abbreviations.thousand,e/=Math.pow(10,3))),n.indexOf("b")>-1)for(n.indexOf(" b")>-1?(_=" ",n=n.replace(" b","")):n=n.replace("b",""),a=0;a<=S.length;a++)if(i=Math.pow(1024,a),o=Math.pow(1024,a+1),e>=i&&o>e){_+=S[a],i>0&&(e/=i);break}return n.indexOf("o")>-1&&(n.indexOf(" o")>-1?(E=" ",n=n.replace(" o","")):n=n.replace("o",""),E+=f[g].ordinal(e)),n.indexOf("[.]")>-1&&(d=!0,n=n.replace("[.]",".")),s=e.toString().split(".")[0],u=n.split(".")[1],l=n.indexOf(","),u?(u.indexOf("[")>-1?(u=u.replace("]",""),u=u.split("["),T=t(e,u[0].length+u[1].length,r,u[1].length)):T=t(e,u.length,r),s=T.split(".")[0],T=T.split(".")[1].length?f[g].delimiters.decimal+T.split(".")[1]:"",d&&0===Number(T.slice(1))&&(T="")):s=t(e,null,r),s.indexOf("-")>-1&&(s=s.slice(1),C=!0),l>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f[g].delimiters.thousands)),0===n.indexOf(".")&&(s=""),(c&&C?"(":"")+(!c&&C?"-":"")+(!C&&h?"+":"")+s+T+(E?E:"")+(p?p:"")+(_?_:"")+(c&&C?")":"")}function l(e,t){f[e]=t}function c(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function h(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var n=c(e),r=c(t);return n>r?n:r},-(1/0))}var d,p="1.5.3",f={},g="en",v=null,y="0,0",m="undefined"!=typeof module&&module.exports;d=function(t){return d.isNumeral(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=d.fn.unformat(t)),new e(Number(t))},d.version=p,d.isNumeral=function(t){return t instanceof e},d.language=function(e,t){if(!e)return g;if(e&&!t){if(!f[e])throw new Error("Unknown language : "+e);g=e}return(t||!f[e])&&l(e,t),d},d.languageData=function(e){if(!e)return f[g];if(!f[e])throw new Error("Unknown language : "+e);return f[e]},d.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),d.zeroFormat=function(e){v="string"==typeof e?e:null},d.defaultFormat=function(e){y="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,r,i=this.length>>>0,o=!1;for(1<arguments.length&&(r=t,o=!0),n=0;i>n;++n)this.hasOwnProperty(n)&&(o?r=e(r,this[n],n,this):(r=this[n],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return r}),d.fn=e.prototype={clone:function(){return d(this)},format:function(e,t){return n(this,e?e:y,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:r(this,e?e:y)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t,r,i){return e+n*t}var n=h.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/n,this},subtract:function(e){function t(e,t,r,i){return e-n*t}var n=h.call(null,this._value,e);return this._value=[e].reduce(t,this._value*n)/n,this},multiply:function(e){function t(e,t,n,r){var i=h(e,t);return e*i*t*i/(i*i)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t,n,r){var i=h(e,t);return e*i/(t*i)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(d(this._value).subtract(e).value())}},m&&(module.exports=d),"undefined"==typeof ender&&(this.numeral=d),"function"==typeof define&&define.amd&&define([],function(){return d})}.call(this),angular.module("pragmatic-angular",[]).directive("ngOn",[function(){return{link:function(e,t,n){var r=e.$eval(n.ngOn);Object.keys(r).forEach(function(e){var n=r[e];"function"==typeof n&&(n={handler:n}),t.on(e,n.selector||null,n.data||{},n.handler)})}}}]).directive("ngJqueryPlugin",[function(){return{link:function(e,t,n){var r=e.$eval(n.ngJqueryPlugin),i=$(t);Object.keys(r).forEach(function(e){i[e](r[e])})}}}]),function(e,t){"use strict";"object"==typeof exports&&module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.PubSub=t()}("object"==typeof window&&window||this,function(){"use strict";function e(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function t(e){return function(){throw e}}function n(e,n,r){try{e(n,r)}catch(i){setTimeout(t(i),0)}}function r(e,t,n){e(t,n)}function i(e,t,i,o){var a,s=l[t],u=o?r:n;if(l.hasOwnProperty(t))for(a in s)s.hasOwnProperty(a)&&u(s[a],e,i)}function o(e,t,n){return function(){var r=String(e),o=r.lastIndexOf(".");for(i(e,e,t,n);-1!==o;)r=r.substr(0,o),o=r.lastIndexOf("."),i(e,r,t)}}function a(t){for(var n=String(t),r=Boolean(l.hasOwnProperty(n)&&e(l[n])),i=n.lastIndexOf(".");!r&&-1!==i;)n=n.substr(0,i),i=n.lastIndexOf("."),r=Boolean(l.hasOwnProperty(n)&&e(l[n]));return r}function s(e,t,n,r){var i=o(e,t,r),s=a(e);return s?(n===!0?i():setTimeout(i,0),!0):!1}var u={},l={},c=-1;return u.publish=function(e,t){return s(e,t,!1,u.immediateExceptions)},u.publishSync=function(e,t){return s(e,t,!0,u.immediateExceptions)},u.subscribe=function(e,t){if("function"!=typeof t)return!1;l.hasOwnProperty(e)||(l[e]={});var n="uid_"+String(++c);return l[e][n]=t,n},u.unsubscribe=function(e){var t,n,r,i="string"==typeof e,o=!1;for(t in l)if(l.hasOwnProperty(t)){if(n=l[t],i&&n[e]){delete n[e],o=e;break}if(!i)for(r in n)n.hasOwnProperty(r)&&n[r]===e&&(delete n[r],o=!0)}return o},u}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}function n(e,t){var n=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)}function r(e,t){return t=t||100,function(){if(!e.debouncing){var n=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,n),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}function i(e){return e&&(0===e.offsetWidth||0===e.offsetHeight||e.open===!1)}function o(e){for(var t=[],n=e.parentNode;i(n);)t.push(n),n=n.parentNode;return t}function a(e,t){function n(e){"undefined"!=typeof e.open&&(e.open=e.open?!1:!0)}var r=o(e),i=r.length,a=[],s=e[t];if(i){for(var u=0;i>u;u++)a[u]=r[u].style.cssText,r[u].style.display="block",r[u].style.height="0",r[u].style.overflow="hidden",r[u].style.visibility="hidden",n(r[u]);s=e[t];for(var l=0;i>l;l++)r[l].style.cssText=a[l],n(r[l])}return s}function s(e,t){var n=parseFloat(e);return Number.isNaN(n)?t:n}function u(t,i){if(this.$window=e(window),this.$document=e(document),this.$element=e(t),this.options=e.extend({},d,i),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&h)return!1;this.identifier="js-"+l+"-"+c++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=e('<div class="'+this.options.fillClass+'" />'),this.$handle=e('<div class="'+this.options.handleClass+'" />'),this.$range=e('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=e.proxy(this.handleDown,this),this.handleMove=e.proxy(this.handleMove,this),this.handleEnd=e.proxy(this.handleEnd,this),this.init();var o=this;this.$window.on("resize."+this.identifier,r(function(){n(function(){o.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(e,t){if(!t||t.origin!==o.identifier){var n=e.target.value,r=o.getPositionFromValue(n);o.setPosition(r)}})}Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!==e};var l="rangeslider",c=0,h=t(),d={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};u.prototype.init=function(){this.update(!0),this.$element[0].value=this.value,this.onInit&&"function"==typeof this.onInit&&this.onInit()},u.prototype.update=function(e){e=e||!1,e&&(this.min=s(this.$element[0].getAttribute("min"),0),this.max=s(this.$element[0].getAttribute("max"),100),this.value=s(this.$element[0].value,this.min+(this.max-this.min)/2),this.step=s(this.$element[0].getAttribute("step"),1)),this.handleWidth=a(this.$handle[0],"offsetWidth"),this.rangeWidth=a(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},u.prototype.handleDown=function(e){if(e.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var t=this.getRelativePosition(e),n=this.$range[0].getBoundingClientRect().left,r=this.getPositionFromNode(this.$handle[0])-n;this.setPosition(t-this.grabX),t>=r&&t<r+this.handleWidth&&(this.grabX=t-r)}},u.prototype.handleMove=function(e){e.preventDefault();var t=this.getRelativePosition(e);this.setPosition(t-this.grabX)},u.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},u.prototype.cap=function(e,t,n){return t>e?t:e>n?n:e},u.prototype.setPosition=function(e){var t,n;t=this.getValueFromPosition(this.cap(e,0,this.maxHandleX)),n=this.getPositionFromValue(t),this.$fill[0].style.width=n+this.grabX+"px",this.$handle[0].style.left=n+"px",this.setValue(t),this.position=n,this.value=t,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(n,t)},u.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},u.prototype.getRelativePosition=function(e){var t=this.$range[0].getBoundingClientRect().left,n=0;return"undefined"!=typeof e.pageX?n=e.pageX:"undefined"!=typeof e.originalEvent.clientX?n=e.originalEvent.clientX:e.originalEvent.touches&&e.originalEvent.touches[0]&&"undefined"!=typeof e.originalEvent.touches[0].clientX?n=e.originalEvent.touches[0].clientX:e.currentPoint&&"undefined"!=typeof e.currentPoint.x&&(n=e.currentPoint.x),n-t},u.prototype.getPositionFromValue=function(e){var t,n;return t=(e-this.min)/(this.max-this.min),n=t*this.maxHandleX},u.prototype.getValueFromPosition=function(e){var t,n;return t=e/(this.maxHandleX||1),n=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min,Number(n.toFixed(this.toFixed))},u.prototype.setValue=function(e){e!==this.value&&this.$element.val(e).trigger("input",{origin:this.identifier})},u.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+l),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},e.fn[l]=function(t){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e(this),i=r.data("plugin_"+l);i||r.data("plugin_"+l,i=new u(this,t)),"string"==typeof t&&i[t].apply(i,n)})}});var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,s,u,l,c,h,d,p,f,g,v=n&&n.split("/"),y=E.map,m=y&&y["*"];if(e&&(e=e.split("/"),c=e.length-1,E.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&v&&(g=v.slice(0,v.length-1),e=g.concat(e)),t(e),e=e.join("/")),r&&y&&(v||m)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(l=a.slice(0,s).join("/"),v)for(u=v.length;u>0;u-=1)if(o=getOwn(y,v.slice(0,u).join("/")),o&&(o=getOwn(o,l))){h=o,d=s;break e}!p&&m&&getOwn(m,l)&&(p=getOwn(m,l),f=s)}!h&&p&&(h=p,d=f),h&&(a.splice(0,d,h),e=a.join("/"))}return i=getOwn(E.pkgs,e),i?i:e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(E.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,s,u,l,c=null,h=t?t.name:null,d=e,p=!0,f="";return e||(p=!1,e="_@r"+(D+=1)),l=o(e),c=l[0],e=l[1],c&&(c=n(c,h,i),s=getOwn(N,c)),e&&(c?f=s&&s.normalize?s.normalize(e,function(e){return n(e,h,i)}):-1===e.indexOf("!")?n(e,h,i):e:(f=n(e,h,i),l=o(f),c=l[0],f=l[1],r=!0,a=w.nameToUrl(f))),u=!c||s||r?"":"_unnormalized"+($+=1),{prefix:c,name:f,parentMap:t,unnormalized:!!u,url:a,originalName:d,isDefine:p,id:(c?c+"!"+f:f)+u}}function s(e){var t=e.id,n=getOwn(k,t);return n||(n=k[t]=new w.Module(e)),n}function u(e,t,n){var r=e.id,i=getOwn(k,r);!hasProp(N,r)||i&&!i.defineEmitComplete?(i=s(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(N[r])}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(k,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function c(){globalDefQueue.length&&(apsp.apply(C,[C.length,0].concat(globalDefQueue)),globalDefQueue=[])}function h(e){delete k[e],delete S[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(k,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,N[o]),e.check()):d(a,t,n))}),n[r]=!0)}function p(){var e,t,n=1e3*E.waitSeconds,o=n&&w.startTime+n<(new Date).getTime(),a=[],s=[],u=!1,c=!0;if(!m){if(m=!0,eachProp(S,function(e){var n=e.map,l=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)i(l)?(t=!0,u=!0):(a.push(l),r(l));else if(!e.inited&&e.fetched&&n.isDefine&&(u=!0,!n.prefix))return c=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=w.contextName,l(e);c&&each(s,function(e){d(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||_||(_=setTimeout(function(){_=0,p()},50)),m=!1}}function f(e){hasProp(N,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function g(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function v(e){var t=e.currentTarget||e.srcElement;return g(t,w.onScriptLoad,"load","onreadystatechange"),g(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function y(){var e;for(c();C.length;){if(e=C.shift(),null===e[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var m,b,w,x,_,E={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},k={},S={},T={},C=[],N={},A={},P={},D=1,$=1;return x={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?N[e.map.id]=e.exports:e.exports=N[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(E.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(T,e.id)||{},this.map=e,this.shim=getOwn(E.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;return this.shim?void w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;A[e]||(A[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=w.execCb(n,o,r,i)}catch(a){e=a}else i=w.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&(t=this.module,t?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(N[n]=i,req.onResourceLoad&&req.onResourceLoad(w,this.map,this.depMaps)),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var i,o,c,d=getOwn(P,this.map.id),p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,g=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(p=r.normalize(p,function(e){return n(e,f,!0)})||""),o=a(e.prefix+"!"+p,this.map.parentMap),u(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=getOwn(k,o.id),void(c&&(this.depMaps.push(o),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):d?(this.map.url=w.nameToUrl(d),void this.load()):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(k,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&h(e.map.id)}),l(e)}),i.fromText=bind(this,function(n,r){var o=e.name,u=a(o),c=useInteractive;r&&(n=r),c&&(useInteractive=!1),s(u),hasProp(E.config,t)&&(E.config[o]=E.config[t]);try{req.exec(n)}catch(h){return l(makeError("fromtexteval","fromText eval for "+t+" failed: "+h,h,[t]))}c&&(useInteractive=!0),this.depMaps.push(u),w.completeLoad(o),g([o],i)}),void r.load(e.name,g,i,E))})),w.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(x,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=k[n],hasProp(x,n)||!r||r.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(k,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:E,contextName:e,registry:k,defined:N,urlFetched:A,defQueue:C,Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=E.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(E[t]||(E[t]={}),mixin(E[t],e,!0,!0)):E[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(P[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),t[n]=e}),E.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(E.paths[n]=e.location),E.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(k,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,u){var c,h,d;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?l(makeError("requireargs","Invalid require call"),u):t&&hasProp(x,n)?x[n](k[t.id]):req.get?req.get(w,n,t,o):(h=a(n,t,!1,!0),c=h.id,hasProp(N,c)?N[c]:l(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(y(),w.nextTick(function(){y(),d=s(a(null,t)),d.skipMap=i.skipMap,d.init(n,r,u,{enabled:!0}),p()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),w.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(N,a(e,t,!1,!0).id);

},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(N,e)||hasProp(k,e)}}),t||(o.undef=function(e){c();var n=a(e,t,!0),i=getOwn(k,e);i.undefed=!0,r(e),delete N[e],delete A[n.url],delete T[e],eachReverse(C,function(t,n){t[0]===e&&C.splice(n,1)}),i&&(i.events.defined&&(T[e]=i.events),h(e))}),o},enable:function(e){var t=getOwn(k,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(E.shim,e)||{},a=o.exports;for(c();C.length;){if(n=C.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);f(n)}if(r=getOwn(k,e),!t&&!hasProp(N,e)&&r&&!r.inited){if(!(!E.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:l(makeError("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,n){var r,i,o,a,s,u,l,c=getOwn(E.pkgs,e);if(c&&(e=c),l=getOwn(P,e))return w.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=E.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(a=i.slice(0,o).join("/"),u=getOwn(r,a)){isArray(u)&&(u=u[0]),i.splice(0,o,u);break}s=i.join("/"),s+=t||(/^data\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":E.baseUrl)+s}return E.urlArgs?s+((-1===s.indexOf("?")?"?":"&")+E.urlArgs):s},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=v(e);w.completeLoad(t.id)}},onScriptError:function(e){var t=v(e);return i(t.id)?void 0:l(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.19",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),i.onNodeCreated&&i.onNodeCreated(r,i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),function(){var e=[],t=document.getElementById("responsive.js-stylesheet");t||(t=document.createElement("style"),t.id="responsive.js-stylesheet",document.documentElement.appendChild(t));var n=_.debounce(function(n){for(var r="",i=[],o=0;o<e.length;o++){var a=e[o],s=null;(null==a.getMatchingEles||a.getMatchingEles)&&(s=a.id?[document.getElementById(a.id)]:document.querySelectorAll(a.selector));var u;try{u=a.handler(s,n)}catch(l){console.error("responsive.js detected an error in a style block definition"),console.error(l)}var c=a.id?"#"+a.id:a.selector,h=u.map(function(e){return e.name+": "+e.value+"; "}).join("\n");if(a.useStyleAttr)for(var d=0;d<s.length;d++)s[d].setAttribute("style",h);else r+=c+" { "+h+" } \n";a.after&&i.push({eles:s,fn:a.after})}t.textContent=r,setTimeout(function(){for(var e=0;e<i.length;e++)i[e].fn(i[e].eles,n)},1)},150);window.addEventListener("resize",n),window.addEventListener("orientationchanged",n),window.addEventListener("load",n),window.addEventListener("DOMContentLoaded",n);window.responsive={define:function(t){e.push(t)},defines:function(t){Array.prototype.push.apply(e,t)},restyle:function(){n()}}}(),function(){function e(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[r+i++]=h[e])});16>i;)t[r+i++]=0;return t}function t(e,t){var n=t||0,r=c;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function n(e,n,r){var i=n&&r||0,o=n||[];e=e||{};var a=null!=e.clockseq?e.clockseq:g,s=null!=e.msecs?e.msecs:(new Date).getTime(),u=null!=e.nsecs?e.nsecs:y+1,l=s-v+(u-y)/1e4;if(0>l&&null==e.clockseq&&(a=a+1&16383),(0>l||s>v)&&null==e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=s,y=u,g=a,s+=122192928e5;var c=(1e4*(268435455&s)+u)%4294967296;o[i++]=c>>>24&255,o[i++]=c>>>16&255,o[i++]=c>>>8&255,o[i++]=255&c;var h=s/4294967296*1e4&268435455;o[i++]=h>>>8&255,o[i++]=255&h,o[i++]=h>>>24&15|16,o[i++]=h>>>16&255,o[i++]=a>>>8|128,o[i++]=255&a;for(var d=e.node||f,p=0;6>p;p++)o[i+p]=d[p];return n?n:t(o)}function r(e,n,r){var o=n&&r||0;"string"==typeof e&&(n="binary"==e?new l(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var s=0;16>s;s++)n[o+s]=a[s];return n||t(a)}var i,o=this,a=o.crypto||o.msCrypto;if(!i&&a&&a.getRandomValues){var s=new Uint8Array(16);i=function(){return a.getRandomValues(s),s}}if(!i){var u=new Array(16);i=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),u[t]=e>>>((3&t)<<3)&255;return u}}for(var l="function"==typeof o.Buffer?o.Buffer:Array,c=[],h={},d=0;256>d;d++)c[d]=(d+256).toString(16).substr(1),h[c[d]]=d;var p=i(),f=[1|p[0],p[1],p[2],p[3],p[4],p[5]],g=16383&(p[6]<<8|p[7]),v=0,y=0,m=r;m.v1=n,m.v4=r,m.parse=e,m.unparse=t,m.BufferClass=l;var b=o.uuid;m.noConflict=function(){return o.uuid=b,m},o.uuid=m}.call(this);var config={debug:!!window.DEBUG||!!window.location.href.match(/\?debug/),service:{baseUrl:window.DEBUG_URL||"http://server4.baderlab.med.utoronto.ca:8080/genemania/json/",baseUrlProd:tomcatContextPath()+"/json/"},query:{genesValidationDelay:250,networkScrollDuration:150},attributes:{color:"#d0d0d0"},functionColors:["#c26661","#639bc7","#e9ae3d","#907cc7","#6fc17c","#d28bcc","#8dcbc3"],networks:{colors:[{code:"coexp",color:"#d0b7d5"},{code:"coloc",color:"#a0b3dc"},{code:"gi",color:"#90e190"},{code:"path",color:"#9bd8de"},{code:"pi",color:"#eaa2a2"},{code:"predict",color:"#f6c384"},{code:"spd",color:"#dad4a2"},{code:"spd_attr",color:"#D0D0D0"},{code:"reg",color:"#D0D0D0"},{code:"reg_attr",color:"#D0D0D0"},{code:"user",color:"#f0ec86"}],sourceName:{GEO:"GEO",PATHWAYCOMMONS:"Pathway Commons",BIOGRID:"BioGRID",I2D:"I2D",INTERPRO:"InterPro",DROID:"DroID",MOUSEFUNC:"MouseFunc",PFAM:"Pfam",SUPPLEMENTARY_MATERIAL:"supplementary material",COLLABORATOR:"collaborator",MICROCOSM:"MicroCOSM",IREF:"iRefIndex",NONE:"unknown"},weightings:[{name:"Automatically selected weighting method",value:"AUTOMATIC_SELECT"},{name:"Assigned based on query genes",value:"AUTOMATIC"},{name:"Biological process based",value:"BP"},{name:"Molecular function based",value:"MF"},{name:"Cellular component based",value:"CC"},{name:"Equal by network",value:"AVERAGE"},{name:"Equal by data type",value:"AVERAGE_CATEGORY"}],setters:[{name:"none",setter:function(e){return!1}},{name:"default",setter:function(e){return e.defaultSelected}},{name:"all",setter:function(e){return!0}}]},organisms:{icons:{1:"bio-plant",2:"bio-worm",3:"bio-fly",4:"bio-human",5:"bio-mouse",6:"bio-yeast",7:"bio-rat",8:"bio-fish",9:"bio-cells"}}};!function(){for(var e=config.networks.weightings,t=0;t<e.length;t++)e[e[t].value]=e[t];config.networks.weightingGroups=[{name:"Query-dependent weighting",weightings:[e.AUTOMATIC_SELECT,e.AUTOMATIC]},{name:"Gene Ontology (GO) weighting",weightings:[e.BP,e.MF,e.CC]},{name:"Equal weighting",weightings:[e.AVERAGE,e.AVERAGE_CATEGORY]}],config.networks.defaultWeighting=e.AUTOMATIC_SELECT}(),function(){var e=function(e,t){return e==t?0:e>t?1:-1};config.networks.sorters=[{name:"first author",sorter:function(t,n){var r=t.metadata.firstAuthor.toLowerCase(),i=n.metadata.firstAuthor.toLowerCase();return e(r,i)}},{name:"last author",sorter:function(t,n){var r=t.metadata.lastAuthor.toLowerCase(),i=n.metadata.lastAuthor.toLowerCase();return e(r,i)}},{name:"size",sorter:function(e,t){var n=e.metadata.interactionCount,r=t.metadata.interactionCount;return r-n}},{name:"date",sorter:function(e,t){var n=parseInt(e.metadata.yearPublished,10),r=parseInt(t.metadata.yearPublished,10);return r-n}}];for(var t=config.networks.colorsByCode={},n=config.networks.colors,r=0;r<n.length;r++){var i=n[r],o=i.color,a=i.code;t[a]=o}}(),function(){config.networks.postprocess=function(e){var t,n=e.metadata,r=n.authors.split(/\s*,\s*/);t=0===r.length?"":r.length<2?r[0]:r[0]+" et al",n.shortAuthors=t,n.firstAuthor=r[0],n.lastAuthor=r[r.length-1],n.networkType=n.networkType[0].toUpperCase()+n.networkType.substr(1);var i=config.networks.sourceName[n.source];"Uploaded"===n.networkType&&(i="a file",e.uploaded=!0),n.sourceName=i?i:"unknown",n.interactionCountFormatted=numeral(n.interactionCount).format("0,0");for(var o=e.tags,a=0;a<o.length;a++){var s=o[a];s.nameFormatted=s.name.toLowerCase()}o.sort(function(e,t){var n=e.nameFormatted,r=t.nameFormatted;return strcmp(n,r)})},config.debug,config.debug||(config.service.baseUrl=config.service.baseUrlProd),console.log("Init app with debug="+config.debug)}(),function(){var e;try{e=angular.module("templates")}catch(t){e=angular.module("templates",[])}}();var app=window.app=angular.module("app",["templates","pasvaz.bindonce","pragmatic-angular"]);PubSub.promise=function(e){return new Promise(function(t){PubSub.subscribe(e,function(e){t(e)})})},function(){var e=Promise.all([PubSub.promise("query.ready"),new Promise(function(e){window.addEventListener("load",function(){console.log("Window ready"),e()})})]).then(function(){console.log("GeneMANIA app ready"),PubSub.publish("ready")}),t=new Promise(function(t){e.then(function(){require(["js-build/lazy.js"],function(e){console.log("Lazy loaded libs pulled in"),t(e)})})});window.lazyLib=function(){return t}}(),window.scrollTo=window.scrollTo||function(){},app.factory("updateScope",["$timeout","$rootScope",function(e,t){var n;return function(){n||(n=setTimeout(function(){n=null,t.$apply()},16))}}]),app.controller("SplashCtrl",["$scope","updateScope",function(e,t){PubSub.promise("query.ready").then(function(){e.ready=!0,t()}),PubSub.promise("query.search").then(function(){e.splashed=!0,t()})}]),app.factory("$$attributes",["$http","util",function(e,t){var n,r=t.strcmp,i=window.$$attributes=function(){return n?Promise.resolve(n):t.nativePromise(e.get(config.service.baseUrl+"attribute_groups")).then(function(e){return e.data}).then(function(e){return _.forEach(e,function(e,t){e.sort(function(e,t){return r(e.name.toLowerCase(),t.name.toLowerCase())})}),e}).then(function(e){return n=e})};return i}]),app.factory("cyStylesheet",[function(){return window.cyStylesheet=function(){var e=[{selector:"core",css:{"selection-box-color":"#AAD8FF","selection-box-border-color":"#8BB0D0","selection-box-opacity":.5}},{selector:"node, edge",css:{"transition-property":"opacity","transition-duration":"200ms","transition-timing-function":"ease-in-out-quad"}},{selector:"node",css:{width:"mapData(normScore, 0, 1, 20, 60)",height:"mapData(normScore, 0, 1, 20, 60)",content:"data(name)","font-size":12,"text-valign":"center","text-halign":"center","background-color":"#555","text-outline-color":"#555","text-outline-width":2,color:"#fff","overlay-padding":6,"z-index":10}},{selector:"node[?gene]",css:function(){for(var e={},t=1;16>=t;t++)e["pie-"+t+"-background-size"]="data( css.pie_"+t+"_background_size )",e["pie-"+t+"-background-color"]="data( css.pie_"+t+"_background_color )",e["pie-"+t+"-background-opacity"]="data( css.pie_"+t+"_background_opacity )";return e}()},{selector:"node[?attr]",css:{shape:"rectangle","background-color":"#aaa","text-outline-color":"#aaa",width:16,height:16,"font-size":6,"z-index":1}},{selector:"node[?query]",css:{"background-clip":"none","background-fit":"contain","background-image":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBzdHlsZT0idmVjdG9yLWVmZmVjdDogbm9uLXNjYWxpbmctc3Ryb2tlOyIgc3Ryb2tlPSJudWxsIj4NCsKgPCEtLSBDcmVhdGVkIHdpdGggU1ZHLWVkaXQgLSBodHRwOi8vc3ZnLWVkaXQuZ29vZ2xlY29kZS5jb20vIC0tPg0KwqA8ZyBzdHJva2U9Im51bGwiPg0KwqAgPHRpdGxlIHN0cm9rZT0ibnVsbCI+TGF5ZXIgMTwvdGl0bGU+DQrCoCA8ZWxsaXBzZSBzdHJva2Utb3BhY2l0eT0iMCIgc3Ryb2tlPSIjMDAwMDAwIiB0cmFuc2Zvcm09InJvdGF0ZSg0NS4yNDA2MDgyMTUzMzIwMyA1NS42NjQxOTIxOTk3MDcwMSw1NS4xNzM5NzMwODM0OTYxKSAiIGZpbGwtb3BhY2l0eT0iMC4yIiBpZD0ic3ZnXzI3IiByeT0iNDIuMDkwMTY0IiByeD0iMS4zNjI3NTgiIGN5PSI1NS4xNzM5NzMiIGN4PSI1NS42NjQxOTEiIHN0cm9rZS1saW5lY2FwPSJudWxsIiBzdHJva2UtbGluZWpvaW49Im51bGwiIHN0cm9rZS1kYXNoYXJyYXk9Im51bGwiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iI2ZmZmZmZiIvPg0KwqAgPGVsbGlwc2Ugc3Ryb2tlLW9wYWNpdHk9IjAiIHN0cm9rZT0iIzAwMDAwMCIgaWQ9InN2Z18yOSIgdHJhbnNmb3JtPSJyb3RhdGUoNDUuMjQwNjA4MjE1MzMyMDMgNTAuMTY4ODQyMzE1NjczODE0LDQ5LjgyMTgzMDc0OTUxMTcyNikgIiBmaWxsLW9wYWNpdHk9IjAuMiIgcnk9IjQyLjg3OTM3NyIgcng9IjEuMzYyNzU4IiBjeT0iNDkuODIxODMxIiBjeD0iNTAuMTY4ODQxIiBzdHJva2UtbGluZWNhcD0ibnVsbCIgc3Ryb2tlLWxpbmVqb2luPSJudWxsIiBzdHJva2UtZGFzaGFycmF5PSJudWxsIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiNmZmZmZmYiLz4NCsKgIDxlbGxpcHNlIHN0cm9rZS1vcGFjaXR5PSIwIiBzdHJva2U9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4yIiByeT0iMC4yIiBpZD0ic3ZnXzciIGN5PSIyNS44IiBjeD0iNTMuOCIgc3Ryb2tlLWxpbmVjYXA9Im51bGwiIHN0cm9rZS1saW5lam9pbj0ibnVsbCIgc3Ryb2tlLWRhc2hhcnJheT0ibnVsbCIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjZmZmZmZmIi8+DQrCoCA8ZWxsaXBzZSBzdHJva2Utb3BhY2l0eT0iMCIgc3Ryb2tlPSIjMDAwMDAwIiBpZD0ic3ZnXzMwIiB0cmFuc2Zvcm09InJvdGF0ZSg0NS4yNDA2MDgyMTUzMzIwMyA0NC4yNDcyNjEwNDczNjMyOCw0My45NjQ0Mjc5NDc5OTgwNSkgIiBmaWxsLW9wYWNpdHk9IjAuMiIgcnk9IjQyLjE3ODM3OSIgcng9IjEuMzYyNzU4IiBjeT0iNDMuOTY0NDI2IiBjeD0iNDQuMjQ3MjYxIiBzdHJva2UtbGluZWNhcD0ibnVsbCIgc3Ryb2tlLWxpbmVqb2luPSJudWxsIiBzdHJva2UtZGFzaGFycmF5PSJudWxsIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiNmZmZmZmYiLz4NCsKgIDxlbGxpcHNlIHN0cm9rZS1vcGFjaXR5PSIwIiBzdHJva2U9IiMwMDAwMDAiIGlkPSJzdmdfMzQiIHRyYW5zZm9ybT0icm90YXRlKDQ1LjI0MDYwODIxNTMzMjAzIDY2LjI3NTgzMzEyOTg4Mjc4LDY2LjYwNDgyNzg4MDg1OTM5KSAiIGZpbGwtb3BhY2l0eT0iMC4yIiByeT0iMzYuMDUwNTU5IiByeD0iMS4zNjI3NTgiIGN5PSI2Ni42MDQ4MjYiIGN4PSI2Ni4yNzU4MzIiIHN0cm9rZS1saW5lY2FwPSJudWxsIiBzdHJva2UtbGluZWpvaW49Im51bGwiIHN0cm9rZS1kYXNoYXJyYXk9Im51bGwiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iI2ZmZmZmZiIvPg0KwqAgPGVsbGlwc2Ugc3Ryb2tlLW9wYWNpdHk9IjAiIHN0cm9rZT0iIzAwMDAwMCIgaWQ9InN2Z18zMyIgdHJhbnNmb3JtPSJyb3RhdGUoNDUuMjQwNjA4MjE1MzMyMDMgNjAuNTgyODkzMzcxNTgyMDIsNjEuMzcwODE5MDkxNzk2ODgpICIgZmlsbC1vcGFjaXR5PSIwLjIiIHJ5PSIzOS41MzE2NjgiIHJ4PSIxLjM2Mjc1OCIgY3k9IjYxLjM3MDgxNyIgY3g9IjYwLjU4Mjg4OSIgc3Ryb2tlLWxpbmVjYXA9Im51bGwiIHN0cm9rZS1saW5lam9pbj0ibnVsbCIgc3Ryb2tlLWRhc2hhcnJheT0ibnVsbCIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjZmZmZmZmIi8+DQrCoCA8ZWxsaXBzZSBzdHJva2Utb3BhY2l0eT0iMCIgc3Ryb2tlPSIjMDAwMDAwIiBpZD0ic3ZnXzM1IiB0cmFuc2Zvcm09InJvdGF0ZSg0NS4yNDA2MDgyMTUzMzIwMyAzMi43MDI4MDA3NTA3MzI0MywzMi43OTI5NDIwNDcxMTkxNSkgIiBmaWxsLW9wYWNpdHk9IjAuMiIgcnk9IjM1LjEyNzAzIiByeD0iMS4zNjI3NTgiIGN5PSIzMi43OTI5NDMiIGN4PSIzMi43MDI4MDEiIHN0cm9rZS1saW5lY2FwPSJudWxsIiBzdHJva2UtbGluZWpvaW49Im51bGwiIHN0cm9rZS1kYXNoYXJyYXk9Im51bGwiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iI2ZmZmZmZiIvPg0KwqAgPGVsbGlwc2Ugc3Ryb2tlLW9wYWNpdHk9IjAiIHN0cm9rZT0iIzAwMDAwMCIgaWQ9InN2Z18zNiIgdHJhbnNmb3JtPSJyb3RhdGUoNDUuMjQwNjA4MjE1MzMyMDMgMjYuODQ3MDk1NDg5NTAxOTUzLDI3LjQxMzA4NDAzMDE1MTM2NCkgIiBmaWxsLW9wYWNpdHk9IjAuMiIgcnk9IjI4LjIxODA2IiByeD0iMS4zNjI3NTgiIGN5PSIyNy40MTMwODUiIGN4PSIyNi44NDcwOTQiIHN0cm9rZS1saW5lY2FwPSJudWxsIiBzdHJva2UtbGluZWpvaW49Im51bGwiIHN0cm9rZS1kYXNoYXJyYXk9Im51bGwiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iI2ZmZmZmZiIvPg0KwqAgPGVsbGlwc2Ugc3Ryb2tlLW9wYWNpdHk9IjAiIHN0cm9rZT0iIzAwMDAwMCIgaWQ9InN2Z18zMSIgdHJhbnNmb3JtPSJyb3RhdGUoNDUuMjQwNjA4MjE1MzMyMDMgMzguMDY4MjY0MDA3NTY4MzcsMzkuMDA1NDM5NzU4MzAwNzgpICIgZmlsbC1vcGFjaXR5PSIwLjIiIHJ5PSIzOC45NTU1NjMiIHJ4PSIxLjM2Mjc1OCIgY3k9IjM5LjAwNTQzOSIgY3g9IjM4LjA2ODI2NSIgc3Ryb2tlLWxpbmVjYXA9Im51bGwiIHN0cm9rZS1saW5lam9pbj0ibnVsbCIgc3Ryb2tlLWRhc2hhcnJheT0ibnVsbCIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjZmZmZmZmIi8+DQrCoCA8ZWxsaXBzZSBzdHJva2Utb3BhY2l0eT0iMCIgc3Ryb2tlPSIjMDAwMDAwIiBpZD0ic3ZnXzM4IiB0cmFuc2Zvcm09InJvdGF0ZSg0NS4yNDA2MDgyMTUzMzIwMyA3Mi4yNTg0OTE1MTYxMTMyOCw3Mi4xNTU3NTQwODkzNTU0NykgIiBmaWxsLW9wYWNpdHk9IjAuMiIgcnk9IjI5LjQ3MTEzNyIgcng9IjEuMzYyNzU4IiBjeT0iNzIuMTU1NzU1IiBjeD0iNzIuMjU4NDkxIiBzdHJva2UtbGluZWNhcD0ibnVsbCIgc3Ryb2tlLWxpbmVqb2luPSJudWxsIiBzdHJva2UtZGFzaGFycmF5PSJudWxsIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiNmZmZmZmYiLz4NCsKgIDxlbGxpcHNlIHN0cm9rZS1vcGFjaXR5PSIwIiBzdHJva2U9IiMwMDAwMDAiIGlkPSJzdmdfMzciIHRyYW5zZm9ybT0icm90YXRlKDQ1LjI0MDYwODIxNTMzMjAzIDIyLjAwMTU3NzM3NzMxOTMzMiwyMS45NTI4NDQ2MTk3NTA5NzMpICIgZmlsbC1vcGFjaXR5PSIwLjIiIHJ5PSIxNi43OTcwMzciIHJ4PSIxLjM2Mjc1OCIgY3k9IjIxLjk1Mjg0MyIgY3g9IjIyLjAwMTU3NiIgc3Ryb2tlLWxpbmVjYXA9Im51bGwiIHN0cm9rZS1saW5lam9pbj0ibnVsbCIgc3Ryb2tlLWRhc2hhcnJheT0ibnVsbCIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjZmZmZmZmIi8+DQrCoCA8ZWxsaXBzZSBzdHJva2Utb3BhY2l0eT0iMCIgc3Ryb2tlPSIjMDAwMDAwIiBpZD0ic3ZnXzM5IiB0cmFuc2Zvcm09InJvdGF0ZSg0NS4yNDA2MDgyMTUzMzIwMyA3Ny4xNDE3NzcwMzg1NzQyMiw3Ny43NDE0MDE2NzIzNjMyOCkgIiBmaWxsLW9wYWNpdHk9IjAuMiIgcnk9IjE3Ljk5NTAzOSIgcng9IjEuMzYyNzU4IiBjeT0iNzcuNzQxNDAzIiBjeD0iNzcuMTQxNzc3IiBzdHJva2UtbGluZWNhcD0ibnVsbCIgc3Ryb2tlLWxpbmVqb2luPSJudWxsIiBzdHJva2UtZGFzaGFycmF5PSJudWxsIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiNmZmZmZmYiLz4NCsKgPC9nPg0KPC9zdmc+"}},{selector:"node:selected",css:{"border-width":6,"border-color":"#AAD8FF","border-opacity":.5,"background-color":"#77828C","text-outline-color":"#77828C"}},{selector:"edge",css:{"curve-style":"haystack","haystack-radius":.5,opacity:.4,"line-color":"#bbb",width:"mapData(weight, 0, 1, 1, 8)","overlay-padding":3}},{selector:"node.unhighlighted",css:{opacity:.2}},{selector:"edge.unhighlighted",css:{opacity:.05}},{selector:".highlighted",css:{"z-index":999999}},{selector:"node.highlighted",css:{"border-width":6,"border-color":"#AAD8FF","border-opacity":.5,"background-color":"#394855","text-outline-color":"#394855","shadow-blur":12,"shadow-color":"#000","shadow-opacity":.8,"shadow-offset-x":0,"shadow-offset-y":4}},{selector:"edge.filtered",css:{opacity:0}},{selector:"edge.collapsed",css:{opacity:0}}];return Array.prototype.push.apply(e,config.networks.colors.map(function(e){return{selector:'edge[group="'+e.code+'"]',css:{"line-color":e.color}}})),e}}]),app.factory("cy",["cyStylesheet",function(e){var t,n,r,i=window.cy=cytoscape({container:document.getElementById("cy"),style:e(),boxSelectionEnabled:!1,autounselectify:!0,motionBlur:!0,motionBlurOpacity:.075}),o=function(e){return e.map(function(e){return"#"+e}).join(", ")},a=16;i.on("tapstart",function(){var e=document.getElementById("query-genes-textarea");e&&document.activeElement===e&&e.blur()}).on("tap taphold","[?gene]",function(){query.result.selectGene(this.data("id"))}).on("tap taphold","[?attr]",function(){query.result.selectAttribute(this.data("id"))}).on("tap","edge[?attr]",function(){var e=this.connectedNodes("[?attr]");query.result.selectAttribute(e.data("id"))}).on("tap","edge[?intn]",function(){query.result.selectInteraction(this.data("rIntnId"))}).on("tap","edge[?metaintn]",function(){var e=this.data("edgeIds");i.$(o(e)).removeClass("collapsed"),this.addClass("collapsed")}).on("tap",function(e){e.cyTarget===i&&query.result.closeSelectedInfo()}).on("hoverover","[?gene]",function(){result.rateLimitedHighlight({genes:[this.data("idInt")]})}).on("hoverout","[?gene]",_.debounce(function(){result.rateLimitedUnhighlight({genes:[this.data("idInt")]})},a)).on("hoverover","[?attr]",function(){result.rateLimitedHighlight({attrs:[this.data("id")]})}).on("hoverout","[?attr]",_.debounce(function(){result.rateLimitedUnhighlight({attrs:[this.data("id")]})},a)).on("mouseover taphold","node",function(e){var i=this;t=setTimeout(function(){i.same(n)||(i.trigger("hoverover"),n=i,r="taphold"===e.type)},150)}).on("mouseout","node",function(){this.grabbed()||(clearTimeout(t),this.trigger("hoverout"),n=null)}).on("tapend","node",function(){(!this.same(n)||r)&&(clearTimeout(t),this.trigger("hoverout"),n=null)});return i}]),app.factory("$$email",["$http","util",function(e,t){var n=window.$$email=function(n){return n.message?t.nativePromise(e.post(config.service.baseUrl+"mail",n)).then(function(e){return e.data}):Promise.reject("A message must be specified to send an email")};return n}]),app.factory("$$features",["$http","util",function(e,t){var n,r=window.$$features=function(){return n?Promise.resolve(n):t.nativePromise(e.get(config.service.baseUrl+"feature_groups")).then(function(e){return e.data}).then(function(e){return n=e})};return r}]),app.factory("$$genes",["$http","util",function(e,t){var n=window.$$genes={};return n.validate=function(n){return t.nativePromise(e.post(config.service.baseUrl+"gene_validation",n).then(function(e){return e.data}))},n}]),app.factory("io",[function(){function e(e){return JSON.parse(JSON.stringify(e))}var t={},n=window.io=function(e,r){return t[e]?t[e]:this instanceof n?(this.ns=e,this.defaultJson=r||{},void(t[e]=this)):new n(e,r)};return n.prototype.read=function(){var t=this;return new Promise(function(n,r){return t.json?void n(t.json):void localforage.getItem(t.ns,function(i,o){i&&r(i);var a=o?JSON.parse(o):e(t.defaultJson);t.json=a,n(a)})})},n.prototype.write=function(e){var t=this;return new Promise(function(n,r){var i=e||t.json;void 0!==i?localforage.setItem(t.ns,JSON.stringify(i),function(e){return e?void r(e):void n(i)}):r("io::"+t.ns+" has undefined json and so can not be written")})},n.prototype["delete"]=function(){var e=this;return new Promise(function(t,n){delete e.json,localforage.removeItem(e.ns,function(e){return e?void n(e):void t()})})},n}]),app.directive("onTap",["$parse",function(e){return function(t,n,r){var i=e(r.onTap);n[0].addEventListener("click",function(e){t.$apply(function(){i(t,{$event:e})})})}}]),app.directive("onTapScroll",["$parse",function(e){return function(t,n,r){var i=e(r.onTapScroll);n[0].addEventListener("click",function(e){var o=r.onTapScrollParent,a=$(o),s=i(t,{$event:e});if(s){var u=n.offset().top-a.offset().top,l=a.scrollTop()+u;s&&a.animate({scrollTop:l},config.query.networkScrollDuration)}})}}]),app.directive("onTapPreventAll",["$parse",function(e){return function(t,n,r){e(r.onTap);n.on("touchstart touchend touchmove mousedown mouseup click",function(e){e.preventDefault(),e.stopPropagation()})}}]),app.directive("onSelfTapPreventDefault",["$parse",function(e){return function(t,n,r){e(r.onTap);n.on("touchstart touchend touchmove mousedown mouseup click",function(e){e.target===n[0]&&e.preventDefault()})}}]),app.directive("onCtrlEnter",["$parse",function(e){return function(t,n,r){var i=e(r.onCtrlEnter);n[0].addEventListener("keydown",function(e){10!=e.keyCode&&13!=e.keyCode||!(e.ctrlKey||e.metaKey||e.altKey)||(e.preventDefault(),i(t,{$event:e}))})}}]),app.directive("onCtrlEnterBlurAnd",["$parse",function(e){return function(t,n,r){var i=e(r.onCtrlEnterBlurAnd);n[0].addEventListener("keydown",function(e){10!=e.keyCode&&13!=e.keyCode||!(e.ctrlKey||e.metaKey||e.altKey)||(e.preventDefault(),i(t,{$event:e}),n.blur())})}}]),app.directive("onEscBlur",["$parse",function(e){return function(t,n,r){e(r.onCtrlEnter);n[0].addEventListener("keydown",function(e){27==e.keyCode&&n.blur()})}}]),app.directive("onSelectFile",["$parse",function(e){return function(t,n,r){var i=e(r.onSelectFile);n[0].addEventListener("change",function(e){var r=n[0].files[0];r&&i(t,{$file:r})})}}]),app.directive("onHoverover",["$parse",function(e){return function(t,n,r){var i,o=e(r.onHoverover),a=!0;n.parents().on("scroll",function(e){clearTimeout(i),a=!0,i=setTimeout(function(){a=!1},100)}),n[0].addEventListener("mouseenter",function(e){o(t,{$event:e})}),n[0].addEventListener("touchstart",function(e){1===e.touches.length&&(o(t,{$event:e}),e.preventDefault())})}}]),app.directive("onHoverout",["$parse",function(e){return function(t,n,r){var i=e(r.onHoverout);n[0].addEventListener("mouseleave",function(e){i(t,{$event:e})}),n[0].addEventListener("touchend",function(e){0===e.touches.length&&i(t,{$event:e})})}}]),app.directive("onLineSelect",["$parse",function(e){return function(t,n,r){var i=e(r.onLineSelect),o=n[0],a=function(e){for(var n=o.selectionStart,r=0,a=o.value,s=0;n>s;s++)"\n"===a[s]&&r++;i(t,{$event:e,$lineIndex:r,$charIndex:n})};o.addEventListener("change",a),o.addEventListener("selectstart",a),o.addEventListener("keydown",a),o.addEventListener("keypress",a),o.addEventListener("keyup",a),o.addEventListener("click",a)}}]),app.directive("onShortcutFocus",["$parse",function(e){return function(e,t,n){t[0];Mousetrap.bind(n.onShortcutFocus,function(e){setTimeout(function(){t.focus()},0)})}}]),app.directive("changeOnReady",[function(){return{link:function(e,t,n){var r=$(t);PubSub.subscribe("ready",function(){setTimeout(function(){r.change()},20)})}}}]),$(function(){FastClick.attach(document.body)}),app.factory("$$networks",["$http","util","$$user",function(e,t,n){var r,i=(t.strcmp,config.networks.postprocess),o=window.$$networks=function(){return r?Promise.resolve(r):n.read().then(function(n){return t.nativePromise(e.get(config.service.baseUrl+"network_groups?session_id="+n.localId)).then(function(e){return e.data})}).then(function(e){for(var t in e){var n=e[t];n.sort(function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return r>n?-1:n>r?1:0});for(var o=0;o<n.length;o++){var a=n[o],s=a.interactionNetworks;if(s)for(var u=0;u<s.length;u++){var l=s[u];i(l)}}}return r=e})};return o.add=function(e){return n.read().then(function(n){return t.nativePromise($.ajax({url:config.service.baseUrl+"upload_network",type:"POST",data:{organism_id:e.organismId,file:e.file,file_name:e.fileName,session_id:n.localId},dataType:"json"}))}).then(function(e){return e.error?Promise.reject(e.error):e.network})},o.testAdd=function(){return t.nativePromise($.get("http://localhost:8888/genemania/website/src/main/webapp/test/Networks/TxtNetworks/Human-small.txt")).then(function(e){return o.add({organismId:4,file:e,fileName:"Human-small.txt"})}).then(function(e){return console.log(e),e})},o.remove=function(e){return n.read().then(function(n){return t.nativePromise($.ajax({url:config.service.baseUrl+"delete_network",type:"POST",data:{organism_id:e.organismId,network_id:e.networkId,session_id:n.localId},dataType:"json"}))}).then(function(e){return e.error?Promise.reject(e.error):e.network})},o}]),app.factory("$$organisms",["$http","util",function(e,t){var n,r=config.organisms.icons,i=window.$$organisms=function(){return n?Promise.resolve(n):t.nativePromise(e.get(config.service.baseUrl+"organisms")).then(function(e){return e.data}).then(function(e){for(var t=0;t<e.length;t++){var n=e[t];n.icon=r[n.id]}return e.sort(function(e,t){return e.alias<t.alias?-1:t.alias<e.alias?1:0})}).then(function(e){return n=e})};return i}]),app.directive("popover",function(){return{restrict:"E",templateUrl:"templates/popover.html",transclude:!0,replace:!0,scope:{"class":"@"}}}),app.directive("qtip",function(){return{restrict:"E",templateUrl:"templates/qtip.html",transclude:!0,replace:!0,scope:{},link:function(e,t,n){{var r=n.qtipId,i=e.$parent,o=$("#"+n.qtipTarget),a=n.qtipPosTarget?$("#"+n.qtipPosTarget):void 0,s=n.qtipViewportTarget?$("#"+n.qtipViewportTarget):void 0,u=n.qtipContainer?$("#"+n.qtipContainer):void 0,l=n.showEvent||"click",c=n.hideEvent||"unfocus click",h=n.qtipAdjustMethod||"shift flipinvert flip",d="true"===n.qtipAdjustResize?!0:!1,p=n.title,f=n.qtipClass,g=(n.qtipShow,n.qtipPosMy||"top center"),v=n.qtipPosAt||"bottom center";n.qtipScopeId||Math.round(1e6*Math.random()),"true"===n.qtipDigestOnShow||n.qtipDigestOnShow===!0}"none"===n.showEvent&&(n.showEvent=""),"none"===n.hideEvent&&(n.hideEvent=""),n.qtipShow&&i.$watch(n.qtipShow,function(e){var t=o.qtip("api");if(t){var n=t.elements.tooltip,r=n&&n.is(":visible"),i=!r&&e,a=r&&!e;i?o.qtip("show"):a&&o.qtip("hide")}}),t.on("$destroy",function(){o.qtip("destroy")}),o.qtip({id:r?r:void 0,content:{text:t,title:{button:!1,text:p}},position:{container:u?u:$("body"),my:g,at:v,effect:!1,viewport:s?s:!0,adjust:{method:h,scroll:!1,resize:d},target:a},show:{event:l,delay:0,solo:!0,effect:function(e){$(this).css({opacity:0,display:"block"}).velocity({opacity:1},{duration:150})}},hide:{event:c,delay:0,fixed:!0,leave:!1,effect:function(e){var t=$(this);t.velocity({opacity:0},{duration:1,complete:function(){t.hide()}})}},style:{classes:"qtip-bootstrap "+f,tip:{height:10,width:20}},events:{show:function(){},hide:function(){}}})}}}),app.factory("Query_attributes",["util",function(e){return function(e){var t=e,n=t.prototype;n.toggleAttributesToMatchParams=function(e,t){for(var n=this,r=0;r<n.attributeGroups.length;r++){var i=n.attributeGroups[r];n.toggleAttributeGroupSelection(i.id,!1,!1)}for(var r=0;r<e.attributeGroupIds.length;r++){var o=e.attributeGroupIds[r],i=n.getAttributeGroup(o);n.toggleAttributeGroupSelection(i.id,!0,!1)}(t||void 0===t)&&PubSub.publish("query.toggleAttributesToMatchParams",{query:n,params:e})},n.updateAttributeGroupsSelection=function(){
var e=this.selectedAttributeGroupCount,t=this.attributeGroups.length;this.attributeGroupsSelected=0===e?!1:e===t?!0:"semi"},n.getAttributeGroup=function(e){if($.isPlainObject(e)){var t=e;return t}var n=e;return this.attributeGroupsById[n]},n.toggleAttributeGroupSelection=function(e,t,n){e=this.getAttributeGroup(e),t=void 0===t?!e.selected:t,e.selected!==t&&(e.selected=t,this.selectedAttributeGroupCount+=t?1:-1,this.updateAttributeGroupsSelection(),(n||void 0===n)&&(n={attributeGroup:e,query:this,selected:t},PubSub.publish(t?"query.selectAttributeGroup":"query.unselectAttributeGroup",n),PubSub.publish("query.toggleAttributeGroupSelection",n)))},n.selectAttributeGroup=function(e,t){this.toggleAttributeGroupSelection(e,!0,t)},n.unselectAttributeGroup=function(e,t){this.toggleAttributeGroupSelection(e,!1,t)},n.toggleAttributeGroupExpansion=function(e,t){if(e=this.getAttributeGroup(e),t=void 0===t?!e.expanded:t,e.expanded!==t){e.expanded=t;var n={attributeGroup:e,query:this,expanded:t};PubSub.publish(t?"query.expandAttributeGroup":"query.collapseAttributeGroup",n),PubSub.publish("query.toggleAttributeGroupExpansion",n)}},n.expandAttributeGroup=function(e){return this.toggleAttributeGroupExpansion(e,!0)},n.collapseAttributeGroup=function(e){return this.toggleAttributeGroupExpansion(e,!1)},n.toggleAttributeGroupsExpansion=function(e){e=void 0===e?!this.attributeGroupsExpanded:e,this.attributeGroupsExpanded=e;var t={query:this,expanded:e};PubSub.publish(e?"query.expandAttributeGroups":"query.collapseAttributeGroups",t),PubSub.publish("query.toggleAttributeGroupsExpansion",t)},n.expandAttributeGroups=function(){return this.toggleAttributeGroupsExpansion(!0)},n.collapseAttributeGroups=function(){return this.toggleAttributeGroupsExpansion(!1)},n.toggleAttributeGroupsSelection=function(e){void 0===e&&(e=this.attributeGroupsSelected&&"semi"!==this.attributeGroupsSelected?!1:!0);for(var t=this.attributeGroups,n=0;n<t.length;n++){var r=t[n];this.toggleAttributeGroupSelection(r.id,e)}var i={query:this,selected:e};PubSub.publish(e?"query.selectAttributeGroups":"query.unselectAttributeGroups",i),PubSub.publish("query.toggleAttributeGroupsSelection",i)},n.selectAttributeGroups=function(){this.toggleAttributeGroupsSelection(!0)},n.unselectAttributeGroups=function(){this.toggleAttributeGroupsSelection(!1)},n.setAttributeGroups=function(e){if(_.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];n.selected?this.selectAttributeGroup(n.id,!1):this.unselectAttributeGroup(n.id,!1)}else if(_.isString(e)){var r=_.find(this.setAttributeGroupOptions,{name:e});if(!r)return;r=r.setter;for(var t=0;t<this.attributeGroups.length;t++){var n=this.attributeGroups[t];r(n)?this.selectAttributeGroup(n,!1):this.unselectAttributeGroup(n,!1)}}PubSub.publish("query.setAttributeGroups",{query:this})}}}]),app.factory("Query_genes",["util",function(e){return function(e){var t=e,n=t.prototype;n.addGenes=function(e){var t=this;t.settingGenes=!0,t.genesText+="\n"+(_.isArray(e)?e.join("\n"):e),PubSub.publish("query.setGenes",t),t.validateGenesFromText()},n.removeGenes=function(e){var t=this;e=_.isArray(e)?e:[e],t.settingGenes=!0;for(var n=t.genesText.split("\n"),r={},i=0;i<e.length;i++){var o=e[i].toLowerCase();r[o]=!0}for(var a=function(e){return!!r[e]},i=0;i<n.length;i++){var s=n[i].trim().toLowerCase();a(s)&&(n.splice(i,1),i--)}t.genesText=n.join("\n"),PubSub.publish("query.setGenes",t),t.validateGenesFromText()},n.setGenes=function(e){var t=this;t.settingGenes=!0,t.genesText=_.isArray(e)?e.join("\n"):e,PubSub.publish("query.setGenes",t),t.validateGenesFromText()},n.describeGeneLine=function(e){null!=e&&(this.geneLineIndex=e),this.geneLineDescr=this.geneValidations?this.geneValidations[this.geneLineIndex]:null,PubSub.publish("query.describeGeneLine",self)},n.validateGenesFromText=_.debounce(function(){this.validateGenes()},config.query.genesValidationDelay,{leading:!1,trailing:!0}),n.setGenesFromText=function(){var e=this;e.settingGenes=!0,PubSub.publish("query.setGenesText",e),e.validateGenesFromText()},n.setExampleGenes=function(){var e=this;e.settingGenes=!0,e.genesText=e.organism.defaultGenes.map(function(e){return e.symbol}).join("\n"),PubSub.publish("query.setGenesTextFromCode",e),e.validateGenesFromText()},n.updateGenesArea=function(){$("#query-genes-textarea").trigger("autosize.resize")},n.openGenesArea=function(){return new Promise(function(e){var t=$("#query-genes-textarea").focus();setTimeout(function(){t.trigger("click"),e()},20)})},n.validateGenes=function(){var e,t=this,n=this.genesText,r=t.prevValidateGenes;return t.settingGenes=!1,t.validatingGenes=!0,PubSub.publish("query.validateGenesStart",t),r&&r.cancel("Cancelling stale gene validation query"),e=n&&!n.match(/^\s+$/)?$$genes.validate({organism:this.organism.id,genes:n}).cancellable().then(function(e){t.validatingGenes=!1;var n=t.geneValidations=e.genes;t.invalidGenesCount=0;for(var r="",i=0;i<n.length;i++){var o=n[i],a=i===n.length-1,s="";if("INVALID"===o.type)for(t.invalidGenesCount++;s.length<o.name.length;)s+="_";r+=s+(a?"":"\n")}t.geneSpellchecks=r,PubSub.publish("query.validateGenes",t)}):Promise.resolve().cancellable().then(function(){t.validatingGenes=!1,t.geneValidations=[],t.geneSpellchecks="",t.invalidGenesCount=0,PubSub.publish("query.validateGenes",t)}),e=e.then(function(){t.describeGeneLine()}),t.prevValidateGenes=e},n.expandGenes=function(){this.genesExpanded=!0,PubSub.publish("query.expandGenes",this)},n.collapseGenes=function(){this.genesExpanded=!1,PubSub.publish("query.collapseGenes",this)}}}]),app.factory("Query_history",["util","Result","io","cy",function(e,t,n,r){return function(i){var o=i,a=o.prototype,s=e.copy;a.store=function(){var e=this,t=n("queries");return Promise.delay(100).then(function(){return t.read()}).then(function(n){for(var i=n.history=n.history||[],o=r.elements().boundingBox(),a=Math.max(o.w,o.h),u=150,l=u/a,c=e.genesText.split("\n"),h=c.length-1;h>=0;h--)c[h].match(/^\s*$/)&&c.splice(h,1);return i.unshift({params:e.params(),image:r.png({scale:l,full:!0}),timestamp:Date.now(),genes:c,version:s(e.version),organismIcon:e.organism.icon}),t.write()}).then(function(){PubSub.publish("query.store",this)})},a.succeed=function(e){{var n=e,r=i.current=new i({params:n.params,version:n.version});r.result=new t({query:r,store:!1})}a.splashed=!0,this.collapseHistory(),PubSub.publish("query.succeed",r),PubSub.publish("query.search",r)},a.clearHistory=function(){return n("queries")["delete"]().then(function(){PubSub.publish("query.clearHistory",this)})},a.clearHistoryEntry=function(e){var t=n("queries");return t.read().then(function(t){for(var n=t.history=t.history||[],r=0;r<n.length;r++){var i=n[r];if(i.timestamp===e.timestamp){n.splice(r,1);break}}}).then(function(){return t.write()}).then(function(){PubSub.publish("query.clearHistory",this)})},a.search=function(){{var e=this;e.result=new t({query:e}),!a.splashed}a.splashed=!0,PubSub.publish("query.search",this),this.collapseHistory()},a.searchOrCancel=function(){var e=this;e.result&&e.result.cancellable()?e.result.cancel():e.search()},a.params=function(){for(var e=[],t=0;t<this.attributeGroups.length;t++){var n=this.attributeGroups[t];n.selected&&e.push(n.id)}for(var r=[],t=0;t<this.networks.length;t++){var i=this.networks[t];i.selected&&r.push(i.id)}return{organismId:this.organism.id,genesText:this.genesText,attributeGroupIds:e,networkIds:r,maxGenes:this.maxGenes,maxAttrs:this.maxAttrs,weighting:this.weighting.value||config.networks.defaultWeighting.value}},a.toggleHistoryExpansion=function(){this.historyExpanded?this.collapseHistory():this.expandHistory(),PubSub.publish("query.toggleHistoryExpansion",this)},a.expandHistory=function(){a.historyExpanded=!0,PubSub.publish("query.toggleHistoryExpansion",this)},a.collapseHistory=function(){a.historyExpanded=!1,PubSub.publish("query.collapseHistory",this)}}}]),app.controller("QueryHistoryCtrl",["$scope","updateScope","Query",function(e,t,n){function r(){io("queries").read().then(function(n){e.history=window.queryHistory=n.history,t()})}function i(){e.query=n.current,r(),t()}PubSub.subscribe("query.ready",i),PubSub.subscribe("query.store",r),PubSub.subscribe("query.succeed",i),PubSub.subscribe("query.clearHistory",r),PubSub.subscribe("query.historyLoaded",t),e.respRestyle=function(){responsive.restyle()}}]),app.factory("Query_networks",["util","$$networks",function(e,t){return function(e){var n=e,r=n.prototype;r.toggleNetworksToMatchParams=function(e,t){for(var n=this,r=0;r<n.networks.length;r++){var i=n.networks[r];n.toggleNetworkSelection(i.id,!1,!1)}for(var r=0;r<e.networkIds.length;r++){var o=e.networkIds[r],i=this.getNetwork(o);n.toggleNetworkSelection(i.id,!0,!1)}(t||void 0===t)&&PubSub.publish("query.toggleNetworksToMatchParams",{query:n,params:e})},r.updateNetworkGroupSelection=function(e){var t=e.selectedCount,n=e.interactionNetworks?e.interactionNetworks.length:0;e.selected=0===t?!1:t===n?!0:"semi"},r.getNetwork=function(e){if($.isPlainObject(e)){var t=e;return t}var n=e;return this.networksById[n]},r.getNetworkGroup=function(e){if($.isPlainObject(e)){var t=e;return t}var n=e;return this.networkGroupsById[n]},r.toggleNetworkSelection=function(e,t,n){e=this.getNetwork(e),t=void 0===t?!e.selected:t,e.selected!==t&&(e.selected=t,e.group.selectedCount+=t?1:-1,this.updateNetworkGroupSelection(e.group),(n||void 0===n)&&(n={network:e,query:this,selected:t},PubSub.publish(t?"query.selectNetwork":"query.unselectNetwork",n),PubSub.publish("query.toggleNetworkSelection",n)))},r.selectNetwork=function(e,t){this.toggleNetworkSelection(e,!0,t)},r.unselectNetwork=function(e,t){this.toggleNetworkSelection(e,!1,t)},r.toggleNetworkGroupSelection=function(e,t){e=this.getNetworkGroup(e),void 0===t&&(t=e.selected&&"semi"!==e.selected?!1:!0);for(var n=e.interactionNetworks,r=0;r<n.length;r++){var i=n[r];this.toggleNetworkSelection(i.id,t)}var o={query:this,group:e,selected:t};PubSub.publish(t?"query.selectNetworkGroup":"query.unselectNetworkGroup",o),PubSub.publish("query.toggleNetworkGroupSelection",o)},r.selectNetworkGroup=function(e){this.toggleNetworkGroupSelection(e,!0)},r.unselectNetworkGroup=function(e){this.toggleNetworkGroupSelection(e,!1)},r.toggleNetworkExpansion=function(e,t){if(e=this.getNetwork(e),t=void 0===t?!e.expanded:t,e.expanded===t)return e.expanded;e.expanded=t;var n={network:e,query:this,expanded:t};return PubSub.publish(t?"query.expandNetwork":"query.collapseNetwork",n),PubSub.publish("query.toggleNetworkExpansion",n),e.expanded},r.expandNetwork=function(e){return this.toggleNetworkExpansion(e,!0)},r.collapseNetwork=function(e){return this.toggleNetworkExpansion(e,!1)},r.toggleNetworkGroupExpansion=function(e,t){e=this.getNetworkGroup(e),t=void 0===t?!e.expanded:t,e.expanded=t;var n={group:e,query:this,expanded:t};return PubSub.publish(t?"query.expandNetworkGroup":"query.collapseNetworkGroup",n),PubSub.publish("query.toggleNetworkGroupExpansion",n),e.expanded},r.setNetworks=function(e){if(_.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];n.selected?this.selectNetwork(n.id,!1):this.unselectNetwork(n.id,!1)}else if(_.isString(e)){var r=_.find(this.setNetworkOptions,{name:e});if(!r)return;r=r.setter;for(var t=0;t<this.networks.length;t++){var i=this.networks[t];r(i)?this.selectNetwork(i,!1):this.unselectNetwork(i,!1)}}PubSub.publish("query.setNetworks",{query:this})},r.toggleNetworkCheckOptions=function(){this.showingNetworkCheckOptions=this.showingNetworkCheckOptions?!1:!0,PubSub.publish("query.toggleNetworkCheckOptions",{shown:this.showingNetworkCheckOptions,query:this})},r.toggleNetworkSortOptions=function(){this.showingNetworkSortOptions=this.showingNetworkSortOptions?!1:!0,PubSub.publish("query.toggleNetworkSortOptions",{shown:this.showingNetworkSortOptions,query:this})},r.sortNetworksBy=function(e){var t=this;if(e=_.find(t.networkSortFactors,function(t){return t.name===e||t===e})){this.selectedNetworkSortFactor=e;for(var n=0;n<this.networkGroups.length;n++){var r=this.networkGroups[n],i=r.interactionNetworks;i&&i.sort(e.sorter)}PubSub.publish("query.sortNetworksBy",{factor:e,query:this})}},r.addNetwork=function(e){var n=this,r=function(){return new Promise(function(t,n){var r=new FileReader;r.addEventListener("loadend",function(){t({name:e.name,contents:r.result})}),r.addEventListener("error",function(){n("File could not be read")}),r.readAsText(e)})};return n.addingNetwork=!0,PubSub.publish("query.addingNetwork",this),r().then(function(e){return t.add({organismId:n.organism.id,file:e.contents,fileName:e.name})}).then(function(e){config.networks.postprocess(e);var t=n.getUploadNetworkGroup();t.interactionNetworks||(t.interactionNetworks=[]),e.group=t,t.interactionNetworks.push(e),n.networks.push(e),n.networksById[e.id]=e,n.toggleNetworkSelection(e,e.defaultSelected,!1),n.addingNetwork=!1,PubSub.publish("query.addNetwork",this)})},r.getUploadNetworkGroup=function(){return this.networkGroups.filter(function(e){return"uploaded"===e.code})[0]},r.removeNetwork=function(e){var n=this;return e.removing=!0,PubSub.publish("query.removingNetwork",this),t.remove({organismId:n.organism.id,networkId:e.id}).then(function(){var t=function(t){for(var n=0;n<t.length;n++)if(t[n].id===e.id){t.splice(n,1);break}};n.toggleNetworkSelection(e,!1,!1),t(n.networks),n.networksById[e.id]=null;var r=n.getUploadNetworkGroup();t(r.interactionNetworks),PubSub.publish("query.removeNetwork",this)})}}}]),app.factory("Query",["$$organisms","$$networks","$$attributes","$$version","util","$$genes","Query_genes","Query_history","Query_networks","Query_attributes","Result","io",function(e,t,n,r,i,o,a,s,u,l,c,h){var d,p,f,g,v,y=i.copy,m=(i.strcmp,[a,s,u,l]);Promise.all([e().then(function(e){d=e}),t().then(function(e){p=e}),n().then(function(e){f=e}),r().then(function(e){g=e}),h("organism").read().then(function(e){v=e.lastOrgId})]).then(function(){w.current=new w,x.ready=!0,console.log("Query ready"),PubSub.publish("query.ready",w.current)}),PubSub.subscribe("ready",function(){x.appReady=!0});var b=window.Query=function(e){if(!(this instanceof b))return new b(e);e=e||{};var t=this;t.networkSortFactors=config.networks.sorters,t.setNetworkOptions=config.networks.setters,t.organisms=y(d),t.version=y(g);var n=e.params,r=e.copyParamsFrom;r&&(n=r.params()),n?(t.organism=_.find(t.organisms,function(e){return e.id===n.organismId}),t.weighting=config.networks.weightings[n.weighting]):(t.organism=_.find(t.organisms,function(e){return null!=v?e.id===v:4===e.id})||t.organisms[0],t.weighting=config.networks.defaultWeighting),n?(t.maxGenes=+n.maxGenes,t.maxAttrs=+n.maxAttrs):(t.maxGenes=20,t.maxAttrs=10),t.setOrganism(t.organism,!1),t.sortNetworksBy("first author"),n&&(e.version&&t.version.dbVersion===e.version.dbVersion?(t.toggleNetworksToMatchParams(n),t.toggleAttributesToMatchParams(n)):console.log("Unable to set nets and attrs from params, because param dbver `"+(e.version?e.version.dbVersion:null)+"` does not match current `"+t.version.dbVersion+"`"),t.setGenes(n.genesText)),x.historyInitLoaded||h("queries").read().then(function(e){x.historyExpanded=!0,x.historyInitLoaded=!0,PubSub.publish("query.historyLoaded")})},w=b,x=w.prototype;x.weightings=config.networks.weightings,x.weightingGroups=config.networks.weightingGroups,x.$$search=$$search,x.expanded=!0,x.collapse=function(){x.expanded=!1},x.expand=function(){x.expanded=!0},x.toggleExpand=function(){x.expanded=!x.expanded},x.setOrganism=function(e,t){var n=this;this.organism=e,n.networkGroups=y(p[n.organism.id]),n.organism.networkGroups=n.networkGroups,n.networkGroupsById={},n.networks=[],n.networksById={};for(var r=0;r<n.networkGroups.length;r++){var i=n.networkGroups[r],o=i.interactionNetworks,a=0;if(i.expanded=!1,n.networkGroupsById[i.id]=i,o)for(var s=0;s<o.length;s++){var u=o[s];n.networks.push(u),n.networksById[u.id]=u,u.group=i,u.selected=u.defaultSelected,u.expanded=!1,u.selected&&a++}i.selectedCount=a,n.updateNetworkGroupSelection(i)}n.attributeGroups=y(f[n.organism.id]),n.organism.attributeGroups=n.attributeGroups,n.attributeGroupsById={};for(var a=0,r=0;r<n.attributeGroups.length;r++){var i=n.attributeGroups[r];i.selected=i.defaultSelected,i.expanded=!1,i.selected&&a++,n.attributeGroupsById[i.id]=i}n.selectedAttributeGroupCount=a,n.attributeGroupsExpanded=!1,n.updateAttributeGroupsSelection();var l=h("organism");l.read().then(function(t){return v=t.lastOrgId=e.id,l.write()}),(void 0===t||t)&&PubSub.publish("query.setOrganism",n),this.validateGenes()},x.setWeighting=function(e){this.weighting=e},x.toggleEditAdvanced=function(){this.editingAdvanced=this.editingAdvanced?!1:!0},x.setMaxGenes=function(e){this.maxGenes=e},x.setMaxAttrs=function(e){this.maxAttrs=e};for(var E=0;E<m.length;E++)m[E](w);return w}]),app.controller("QueryCtrl",["$scope","updateScope","Query",function(e,t,n){function r(){window.query=e.query=n.current,t()}PubSub.subscribe("ready",r),PubSub.subscribe("query.searchResult",r),PubSub.subscribe("query.succeed",r),PubSub.subscribe("query.validateGenes",t),PubSub.subscribe("query.validateGenesStart",t),PubSub.subscribe("query.describeGeneLine",t),PubSub.subscribe("query.setGenesText",_.debounce(function(){t()},50,{leading:!0})),PubSub.subscribe("query.setGenesTextFromCode",_.debounce(function(){t(),e.query.updateGenesArea()},50,{leading:!0})),PubSub.subscribe("query.expandGenes",_.debounce(function(){e.query.updateGenesArea()},50,{trailing:!0})),PubSub.subscribe("query.toggleNetworkCheckOptions",t),PubSub.subscribe("query.toggleNetworkSortOptions",t),PubSub.subscribe("query.sortNetworksBy",t),PubSub.subscribe("query.setNetworks",t),PubSub.subscribe("query.removeNetwork",t),PubSub.subscribe("query.removingNetwork",t),PubSub.subscribe("query.addingNetwork",t),PubSub.subscribe("query.addNetwork",t),PubSub.subscribe("ready",t),PubSub.subscribe("result.search",t),PubSub.subscribe("result.searched",t),PubSub.subscribe("result.cancel",t),PubSub.subscribe("$$search.progress",t),e.respRestyle=function(){responsive.restyle()}}]),app.factory("Result_functions",["util",function(e){return function(e){var t=e,n=t.prototype;n.toggleFunctionColoring=function(e){e.colored?this.removeFunctionColoring(e):this.addFunctionColoring(e)},n.addFunctionColoring=function(e){0!==this.functionColors.length&&(e.colored=!0,e.color=this.functionColors.shift(),this.coloringFunctions.push(e),this.updateFunctionStylesheet(),PubSub.publish("result.addFunctionColoring",{"function":e,result:this}))},n.removeFunctionColoring=function(e){for(var t=this.coloringFunctions,n=0;n<t.length;n++){var r=t[n];if(r.id===e.id){e.colored=!1,this.functionColors.push(e.color),t.splice(n,1);break}}this.updateFunctionStylesheet(),PubSub.publish("result.removeFunctionColoring",{"function":e,result:this})},n.updateFunctionStylesheet=function(){var e=this.coloringFunctions,t=cy.nodes();cy.batch(function(){for(var n=0;n<t.length;n++){for(var r=t[n],i=r.data("css"),o=0;16>o;o++){var a=e[o],s=o+1;if(a){var u="fn"+a.id;i["pie_"+s+"_background_size"]=100/e.length,i["pie_"+s+"_background_color"]=a.color,i["pie_"+s+"_background_opacity"]=r.hasClass(u)?.4:0}else i["pie_"+s+"_background_size"]=0,i["pie_"+s+"_background_color"]="#000",i["pie_"+s+"_background_opacity"]=0}r.data("css",i)}})}}}]),app.controller("FunctionsCtrl",["$scope","updateScope","cy",function(e,t,n){function r(){e.query=Query.current,e.result=e.query.result,e.addedFunctions=e.result.coloringFunctions,e.functions=e.result.resultOntologyCategories,t()}PubSub.subscribe("result.searched",r),PubSub.subscribe("result.addFunctionColoring",t),PubSub.subscribe("result.removeFunctionColoring",t)}]),app.factory("Result_genes",["util",function(e){return function(e){var t=e,n=t.prototype;n.toggleGenesExpansion=function(){this.genesExpanded?this.collapseGenes():this.expandGenes(),PubSub.publish("result.toggleGenesExpansion",this)},n.expandGenes=function(){n.genesExpanded=!0,PubSub.publish("result.expandGenes",this)},n.collapseGenes=function(){n.genesExpanded=!1,PubSub.publish("result.collapseGenes",this)},n.toggleGeneExpansion=function(e){e.expanded=!e.expanded,PubSub.publish("result.toggleGeneExpansion",{result:this,gene:e})}}}]),app.controller("GenesCtrl",["$scope","updateScope","cy",function(e,t,n){function r(){e.query=Query.current,e.result=e.query.result,t()}PubSub.subscribe("result.searched",r)}]),app.factory("Result_highlight",["util",function(e){return function(e){var t=e,n=t.prototype;n.rateLimitedHighlightFn=function(e,t){if(t)clearTimeout(this.rlhTimeout),n=null,e();else{clearTimeout(this.rlhTimeout);var n=this.rlhTimeout=setTimeout(function(){n=null,e()},150)}},n.rateLimitedHighlight=function(e){var t=this;t.rateLimitedHighlightFn(function(){t.highlight(e)})},n.rateLimitedUnhighlight=function(e){var t=this;t.rateLimitedHighlightFn(function(){t.unhighlight(e)},!0)},n.highlight=function(e){function t(e,t,r){n[t]=[];for(var i=0;i<e.length;i++){var o=e[i];n[t].push(o),r&&r(o)}}e=e||{};var n=this.getHighlights();e.genes&&t(e.genes,"genes"),e.interactions&&t(e.interactions,"interactions"),e.attrs&&t(e.attrs,"attrs"),e.attributeGroups&&t(e.attributeGroups,"attributeGroups"),e.networkGroups&&t(e.networkGroups,"networkGroups"),e.networks&&t(e.networks,"networks"),this.updateHighlights()},n.unhighlight=function(e){function t(e,t,n){var i={};if("*"===e){if(n)for(var o=0;o<r[t].length;o++)n(r[t][o]);r[t]=[]}else{for(var o=0;o<e.length;o++){var a=e[o];i[a]=!0,n&&n(a)}r[t]=r[t].filter(function(e){return!i[e]})}}e=e||{};var n=this,r=this.getHighlights();e.genes&&t(e.genes,"genes"),e.interactions&&t(e.interactions,"interactions"),e.attrs&&t(e.attrs,"attrs"),e.attributeGroups&&t(e.attributeGroups,"attributeGroups",function(e){n.resultAttributeGroups.filter(function(t){return t.attributeGroup.id===e})[0].highlighted=!1}),e.networkGroups&&t(e.networkGroups,"networkGroups",function(e){n.resultNetworkGroups.filter(function(t){return t.networkGroup.id===e})[0].highlighted=!1}),e.networks&&t(e.networks,"networks",function(e){n.resultNetworksById[e].highlighted=!1}),this.updateHighlights()},n.getHighlights=function(){return this.highlights=this.highlights||{genes:[],interactions:[],attrs:[],attributeGroups:[],networkGroups:[],networks:[]}},n.updateHighlights=function(){var e=this,t=this.getHighlights(),n=cy.collection(),r=cy.collection(),i=function(e){n=n.add(e),r=r.not(e)},o=function(e){n=n.not(e),r=r.add(e)},a=function(e){r=r.not(e)};cy.batch(function(){function s(){u||(o(cy.elements()),u=!0,t.active=!0)}t.active=!1;var u=!1;if(t.genes.length>0){s();var l=cy.nodes(t.genes.map(function(e){return"#"+e}).join(", "));i(l),a(l.neighborhood())}if(t.interactions.length>0){s();var c=cy.edges(t.interactions.map(function(e){return"[rIntnId = "+e+"]"}).join(", "));i(c),a(c.connectedNodes())}if(t.attrs.length>0){s();var l=cy.nodes(t.attrs.map(function(e){return"#"+e}).join(", "));i(l),a(l.neighborhood())}if(t.networkGroups.length>0){s();var c=cy.edges(t.networkGroups.map(function(e){return"[networkGroupId = "+e+"]"}).join(", "));i(c),a(c.connectedNodes())}for(var h={},d=0;d<t.networkGroups.length;d++){var p=t.networkGroups[d];h[p]=!0}var f=e.resultNetworkGroups;if(f)for(var d=0;d<f.length;d++){var g=f[d];g.highlighted=h[g.networkGroup.id]}if(t.attributeGroups.length>0){s();var c=cy.edges(t.attributeGroups.map(function(e){return"[attributeGroupId = "+e+"]"}).join(", "));i(c),a(c.connectedNodes())}for(var h={},d=0;d<t.attributeGroups.length;d++){var p=t.attributeGroups[d];h[p]=!0}var f=e.resultAttributeGroups;if(f)for(var d=0;d<f.length;d++){var g=f[d];g.highlighted=h[g.attributeGroup.id]}if(t.networks.length>0){s();var c=cy.edges(t.networks.map(function(e){return"[networkId = "+e+"]"}).join(", "));i(c),a(c.connectedNodes())}for(var h={},d=0;d<t.networks.length;d++){var p=t.networks[d];h[p]=!0}var v=e.resultNetworks;if(v)for(var d=0;d<v.length;d++){var y=v[d];y.highlighted=h[y.network.id]}var m=cy.elements();m.not(n).removeClass("highlighted"),m.not(r).removeClass("unhighlighted"),n.removeClass("unhighlighted").addClass("highlighted"),r.removeClass("highlighted").addClass("unhighlighted")}),PubSub.publish("result.updateHighlights")}}}]),app.factory("Result_layouts",["util",function(e){return function(e){var t=e,n=t.prototype,r=50,i=function(e,t){return t.data("score")-e.data("score")};n.layoutResizeCyPre=function(){var e=this,t=cy.container();e.networksExpanded&&t.classList.add("cy-layouting-shift"),e.query.historyExpanded&&t.classList.add("cy-layouting-shift-history")},n.layoutResizeCyPost=function(){var e=this,t=cy.container();e.networksExpanded&&t.classList.remove("cy-layouting-shift"),e.query.historyExpanded&&t.classList.remove("cy-layouting-shift-history")},n.layoutDelay=function(e,t){var n=this,r=cy.container();n.cyLayout&&(cy.elements().stop(!0),n.cyLayout.stop(),n.cyLayout=null),setTimeout(function(){n.cyLayout=e,n.networksExpanded&&t.resizeCy&&r.classList.add("cy-layouting-shift"),n.query.historyExpanded&&t.resizeCy&&r.classList.add("cy-layouting-shift-history"),e.run()},0)},n.layoutPrepost=function(e,t){var n=this,r=cy.container();return n.layoutPromise&&n.layoutPromise.cancel(),n.layoutPromise=new Promise(function(t){e.one("layoutstop",function(){t()})}).then(function(){var e=r.classList;t.resizeCy&&(e.remove("cy-layouting-shift"),e.remove("cy-layouting-shift-history"))}).cancellable()},n.circleLayout=function(e){e=$.extend({animate:!0,resizeCy:!0},e);var t=cy.makeLayout({name:"concentric",animate:e.animate,animationDuration:500,concentric:function(){var e=this.data("query"),t=this.data("score")||0;return(e?100:0)+t},levelWidth:function(){return 1},sort:i,padding:r}),n=this.layoutPrepost(t,e);return this.layoutDelay(t,e),n},n.forceLayout=function(e){e=$.extend({fit:!0,randomize:!0,animate:!0,nodeSpacing:15,lengthFactor:75,maxSimulationTime:2e3,padding:r,resizeCy:!0},e);for(var t=cy.elements().stdFilter(function(e){return e.isNode()||!e.hasClass("filtered")}),n=0,i=1/0,o=-(1/0),a=t.edges(),s=0;s<a.length;s++){var u=a[s],l=u.data("weight");n+=l,i=Math.min(l,i),o=Math.max(l,o)}n/=a.length;for(var c=function(e){return(e-i)/(o-i)*9+1},s=0;s<a.length;s++){var u=a[s],l=u.data("weight");u.data("normWeight",c(l))}var h=(c(n),0),d=200,p=function(t){function r(t){var r=t.data("weight");null==r&&(r=n);var i=e.lengthFactor/r;return i}if("coexp"===t.data("group"))return 10*r(t);var i=r(t);return h>i?h:i>d?d:i},f=t.makeLayout({name:"cola",fit:e.fit,animate:e.animate,randomize:e.randomize,maxSimulationTime:e.maxSimulationTime,edgeLength:p,padding:r}),g=this.layoutPrepost(f,e);return this.layoutDelay(f,e),g},n.linearLayout=function(e){e=$.extend({animate:!0,resizeCy:!0},e);var t=cy.makeLayout({name:"grid",animate:e.animate,animationDuration:500,columns:1,position:function(e){return{col:e.data("query")?0:1}},sort:i,padding:r}),n=this.layoutPrepost(t,e);return this.layoutDelay(t,e),n},n.fitGraph=function(e){e=$.extend({duration:500,resizeCy:!0},e);var t=this,n=cy.container();return t.networksExpanded&&e.resizeCy&&n.classList.add("cy-layouting-shift"),t.query.historyExpanded&&e.resizeCy&&n.classList.add("cy-layouting-shift-history"),new Promise(function(t){e.resizeCy&&cy.resize(),cy.animate({fit:{eles:cy.elements(),padding:r}},{duration:e.duration,complete:function(){var r=n.classList;e.resizeCy&&(r.remove("cy-layouting-shift"),r.remove("cy-layouting-shift-history")),t()}})})}}}]),app.factory("Result_networks",["util",function(e){return function(e){var t=e,n=t.prototype;n.toggleNetworksExpansion=function(){this.networksExpanded?this.collapseNetworks():this.expandNetworks(),PubSub.publish("result.toggleNetworksExpansion",this)},n.expandNetworks=function(){n.networksExpanded=!0,PubSub.publish("result.expandNetworks",this)},n.collapseNetworks=function(){n.networksExpanded=!1,PubSub.publish("result.collapseNetworks",this)},n.toggleNetwork=function(e){for(var t=this.getFilterNetworksCache()[e.network.id]=e.enabled=!e.enabled,n=e.resultNetworkGroup,r=n.resultNetworks,i=t,o=t,a=0;a<r.length;a++){var s=r[a].enabled;i=i||s,o=o&&s}n.enabled=o?!0:i?"semi":!1,this.filterNetworksFromEnables(),PubSub.publish("result.toggleNetwork",{result:this,network:e})},n.toggleNetworkGroup=function(e){var t=e.enabled&&"semi"!==e.enabled?!1:!0;e.enabled=t;for(var n=e.resultNetworks,r=0;r<n.length;r++){var i=n[r];this.getFilterNetworksCache()[i.network.id]=i.enabled=e.enabled}this.filterNetworksFromEnables(),PubSub.publish("result.toggleNetworkGroup",{result:this,networkGroup:e})},n.getFilterNetworksCache=function(){return this.netEnabled||this.updateFilterNetworksCache(),this.netEnabled},n.updateFilterNetworksCache=function(){for(var e=this.netEnabled={},t=this.resultNetworkGroups,n=0;n<t.length;n++)for(var r=t[n],i=r.resultNetworks,o=0;o<i.length;o++){var a=i[o],s=a.network.id,u=""+s;e[u]=a.enabled}return e},n.filterNetworksFromEnables=function(e){e=e||{};var t=e.invalidateCache||!this.netEnabled,n=this.netEnabled;t&&(n=this.updateFilterNetworksCache());var r=cy.edges(),i=r.stdFilter(function(e){var t=""+e.data("networkId");return n[t]}),o=r.not(i);cy.batch(function(){r.removeClass("filtered"),o.addClass("filtered")}),PubSub.publish("result.filterNetworksFromEnables",{result:this})},n.toggleNetworkGroupExpansion=function(e){e.expanded=!e.expanded,PubSub.publish("result.toggleNetworkGroupExpansion",{result:this,networkGroup:e})},n.toggleNetworkExpansion=function(e){e.expanded=!e.expanded,PubSub.publish("result.toggleNetworkGroupExpansion",{result:this,network:e})},n.toggleNetworkListEnables=function(){this.showNetworkListEnables=!this.showNetworkListEnables},n.enableNetworksByEnum=function(e){for(var t=function(t){switch(e){case"all":t.enabled=!0;break;case"none":default:t.enabled=!1}},n=0;n<this.resultAllGroups.length;n++){var r=this.resultAllGroups[n];if(t(r),r.children)for(var i=0;i<r.children.length;i++){var o=r.children[i];t(o)}}this.filterNetworksFromEnables({invalidateCache:!0}),PubSub.publish("result.enableNetworksByEnum",{result:this})},n.toggleNetworkListExpands=function(){this.showNetworkListExpands=!this.showNetworkListExpands},n.expandNetworksByEnum=function(e){for(var t=function(t){switch(e){case"all":t.expanded=!0;break;case"top":t.expanded=null!=t.children;break;case"none":default:t.expanded=!1}},n=0;n<this.resultAllGroups.length;n++){var r=this.resultAllGroups[n];if(t(r),r.children)for(var i=0;i<r.children.length;i++){var o=r.children[i];t(o)}}PubSub.publish("result.expandNetworksByEnum",{result:this})}}}]),app.controller("NetworksCtrl",["$scope","updateScope","cy",function(e,t,n){function r(){e.query=Query.current,e.result=e.query.result,t()}PubSub.subscribe("result.searched",r),PubSub.subscribe("result.updateHighlights",r)}]),app.factory("Result_report",["util",function(e){return function(e){var t=e,n=t.prototype;n.report=function(){var e=this,t=e.parameters,n=e.query,r=function(e,t){var n={},r=[],i=function(e){if(!n[e]){var t=n[e]={id:e,els:[]};r.push(t)}return n[e]};return e.forEach(function(e){var n=t(e).toLowerCase(),r=i(n);r.els.push(e)}),r.sort(function(e,t){return e=e.id.toLowerCase(),t=t.id.toLowerCase(),t>e?-1:e>t?1:0})},i=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=1,t.height=1,n.fillStyle=e,n.fillRect(0,0,1,1),t.toDataURL("image/png")},o=new Date,a={content:[{text:"GeneMANIA report",style:"h1"},{text:["Created on : "+moment(o).format("D MMMM YYYY HH:mm:ss")+"\n","Last database update : "+n.version.dbVersion+"\n","Application version : "+n.version.webappVersion],style:"subtitle"},{image:cy.jpg({maxHeight:1e3,full:!0}),fit:[500,400],style:"figure"},{columns:[{width:"50%",table:{headerRows:1,widths:["auto","auto"],body:[[{text:"Networks",colSpan:2,style:"tableh"},{}]].concat(result.resultAllGroups.map(function(e){return[{image:i(e.color),width:6,height:6,margin:[0,4,0,4]},{text:e.ele.name,style:"legend"}]}))},layout:"noBorders"},{width:"50%",table:{headerRows:1,widths:["auto","auto"],body:[[{text:"Functions",colSpan:2,style:"tableh"},{}]].concat(0===result.coloringFunctions.length?[[{text:"N/A",colSpan:2,style:"legend"},{}]]:result.coloringFunctions.map(function(e){return[{image:i(e.color),width:6,height:6,
margin:[0,4,0,4]},{text:e.ontologyCategory.description,style:"legend"}]}))},layout:"noBorders"}]},{text:"Search parameters",style:"h2",pageBreak:"before"},{table:{headerRows:0,widths:["auto","*"],body:[[{text:"Organism",style:"tableh"},t.organism.alias+" ("+t.organism.description+")"],[{text:"Genes",style:"tableh"},t.genes.map(function(e){return e.symbol}).join(" , ")],[{text:"Network weighting",style:"tableh"},config.networks.weightings.filter(function(e){return e.value===t.weighting})[0].name],[{text:"Networks",style:"tableh"},r(t.networks.concat(t.attributeGroups).map(function(e){return e.name}).sort(function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),t>e?-1:e>t?1:0}),function(e){return e[0].toLowerCase()}).map(function(e){return{table:{headerRows:1,widths:["*"],body:[[{text:e.id.toUpperCase(),style:"tableh"}],[e.els.join(" , ")]]},layout:"lightHorizontalLines"}})]]},layout:"noBorders"},{text:"Genes",style:"h2",pageBreak:"before"},{table:{headerRows:1,widths:["auto","*","auto"],body:[[{text:"Gene",style:"tableh"},{text:"Description",style:"tableh"},{text:"Rank",style:"tablehnum"}]].concat(e.resultGenes.map(function(e){return[e.name,e.gene.node.geneData.description,{text:""+(0===e.rank?"N/A":e.rank),style:"tablenum"}]}))},layout:"lightHorizontalLines"},{text:"Networks",style:"h2",pageBreak:"before"}].concat(e.resultAllGroups.map(function(e){return{table:{headerRows:1,widths:["*",40],body:[[{text:e.ele.name,style:"tableh"},{text:e.displayWeight,style:"tablenum"}]].concat(e.children.map(function(e){var t=e.ele,n=t.metadata;return[{table:{headerRows:1,widths:["*"],body:[[t.name]].concat(n&&n.title?[[{text:[{text:n.title+" "+n.shortAuthors+" ("+n.yearPublished+"). ",style:"netdetails"},{text:n.publicationName,style:"netdetailspubname"}]}]]:[]).concat(n&&n.networkType?[[{text:n.networkType+" with "+n.interactionCountFormatted+" interactions from "+n.sourceName,style:"netdetails"}]]:[])},layout:"noBorders"},{text:e.displayWeight,style:"tablenum"}]}))},layout:"lightHorizontalLines"}})).concat([]),footer:function(e,t){return{text:e.toString()+" of "+t,alignment:"center"}},header:function(e,t){return""},defaultStyle:{font:"latin",fontSize:12},styles:{h1:{fontSize:36,margin:[0,18,0,4]},subtitle:{fontSize:8,margin:[0,0,0,8]},h2:{fontSize:24,margin:[0,12,0,6]},tableh:{bold:!0},tablehnum:{bold:!0,alignment:"right"},tablenum:{alignment:"right"},figure:{alignment:"center"},legend:{fontSize:8},netdetails:{fontSize:8},netdetailspubname:{fontSize:8,italics:!0},ref:{italics:!0}}};lazyLib().then(function(e){var t=e.pdfMake;t.createPdf(a).open()})}}}]),app.factory("Result_save",["util",function(e){return function(e){function t(e,t,n){var r=document.createElement("a");if(n&&(t="data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("href",t),r.setAttribute("download",e),r.setAttribute("target","_blank"),document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),r.dispatchEvent(i)}else r.click()}var n=e,r=n.prototype;r.saveImage=function(){var e=cy.jpg({full:!0,maxHeight:4e3});t("genemania-network.jpg",e)},r.saveText=function(){var e="",n=this.query,r=this;e+="# Organism: "+n.organism.name+"\n",e+="# Application version: "+n.version.webappVersion+"\n",e+="# Database version: "+n.version.dbVersion+"\n",e+="# Network generated on: "+moment().format("D MMMM YYYY")+"\n",e+="# Author: GeneMANIA (genemania.org)\n",e+="# Notes: Network weight reflects the data source relevance for predicting the function of interest\n",e+=["Entity 1","Entity 2","Weight","Network group","Network"].join("	")+"\n",e+=r.resultInteractions.map(function(e){return[e.fromGene.name,e.toGene.name,e.weight,e.resultNetwork.resultNetworkGroup.networkGroup.name,e.resultNetwork.network.name].join("	")}).join("\n")+"\n",r.resultGenes.forEach(function(t){e+=t.resultAttributes.map(function(e){return e=r.resultAttributesById[e.attribute.id],[t.name,e.attribute.description,0,"Attributes",e.resultAttributeGroup.attributeGroup.name].join("	")}).join("\n")}),t("genemania-network.txt",e,!0)},r.saveNetworks=function(){var e=this,n="";n+=["Group","Name","Weight","Reference","PubMed","Source","Note"].join("	")+"\n",n+=e.resultAllGroups.map(function(e){return e.children.map(function(t){var n=t.ele.metadata;return[e.ele.name,t.ele.name,t.weight,n&&n.title?n.title+" "+n.shortAuthors+". ("+n.yearPublished+"). "+n.publicationName:"",n?n.url:"",n?n.soruceName:"",n?n.comment:""].join("	")}).join("\n")}).join("\n"),t("genemania-networks.txt",n,!0)},r.saveAttributes=function(){var e=this,n="";n+=["Attribute","Gene"].join("	")+"\n",n+=e.resultGenes.map(function(e){return e.resultAttributes.map(function(t){return[t.attribute.name,e.name].join("	")}).join("\n")}).join("\n"),t("genemania-attributes.txt",n,!0)},r.saveGenes=function(){var e=this,n="";n+=["Symbol","Description","Score","Functions","Links"].join("	")+"\n",n+=e.resultGenes.map(function(e){return[e.name,e.gene.node.description,e.score,e.resultOntologyCategories.map(function(e){return e.ontologyCategory.description}).join(", "),e.links.map(function(e){return e.url}).join(", ")].join("	")}).join("\n"),t("genemania-genes.txt",n,!0)},r.saveFunctions=function(){var e=this,n="";n+=["Function","FDR","Genes in network","Genes in genome"].join("	")+"\n",n+=e.resultOntologyCategories.map(function(e){return[e.ontologyCategory.description,e.qValue,e.numAnnotatedInSample,e.numAnnotatedInTotal].join("	")}).join("\n"),t("genemania-functions.txt",n,!0)},r.saveInteractions=function(){var e=this,n="";n+=["Gene 1","Gene 2","Weight","Network group","Network"].join("	")+"\n",n+=e.resultNetworkGroups.map(function(e){return e.resultNetworks.map(function(t){return t.resultInteractions.map(function(n){return[n.fromGene.name,n.toGene.name,n.weight,e.networkGroup.name,t.network.name].join("	")+"\n"}).join("")}).join("")}).join(""),t("genemania-interactions.txt",n,!0)},r.saveParamsText=function(){var e=this,n=e.query,r="";r+="Organism	"+n.organism.name+"\n\n",r+="Genes	"+n.genesText.split("\n").map(function(e){return e.trim()}).join("	")+"\n\n",r+="Networks\n",r+=n.networkGroups.map(function(e){return e.name+"	"+(e.interactionNetworks||[]).filter(function(e){return e.selected}).map(function(e){return e.name}).join("	")})+"\n\n",r+="Network weighting	"+config.networks.weightings[n.weighting].name+"\n",r+="Network weighting code	"+n.weighting+"\n\n",r+="Attribute groups	"+n.attributeGroups.map(function(e){return e.name}).join("	")+"\n\n",r+="Number of gene results	"+n.maxGenes+"\n\n",r+="Number of attribute results	"+n.maxAttrs+"\n\n",r+="Version	"+n.version.dbVersion+"\n\n",t("genemania-parameters.txt",r,!0)},r.saveParamsJson=function(){var e=this,n=e.query,r={};r.version=n.version.dbVersion,r.organism=n.organism.name,r.genes=n.genesText.split("\n").map(function(e){return e.trim()}),r.networks={},n.networkGroups.forEach(function(e){r.networks[e.name]=(e.interactionNetworks||[]).filter(function(e){return e.selected}).map(function(e){return e.name})}),r.attributeGroups=n.attributeGroups.map(function(e){return e.name}),r.selectedWeighting=n.weighting,r.usedWeighting=e.weighting,r.numberOfResultGenes=n.maxGenes,r.numberOfResultAttributes=n.maxAttrs,t("genemania-parameters.json",JSON.stringify(r,null,2),!0)}}}]),app.factory("Result_selectedinfo",["util","cy",function(e,t){return function(e){var t=e,n=t.prototype;n.closeSelectedInfo=function(e){e=$.extend({publish:!0},e),this.selectedInfoOpen=!1,e.publish&&PubSub.publish("result.closeSelectedInfo",this)},n.openSelectedInfo=function(e){e=$.extend({publish:!0},e),this.selectedResultGene=e.rGene,this.selectedResultAttribute=e.rAttr,this.selectedResultInteraction=e.rIntn,this.selectedInfoOpen=!0,e.publish&&PubSub.publish("result.openSelectedInfo",this)},n.selectGene=function(e){var t=typeof e==typeof{}?e:this.resultGenesById[e];this.openSelectedInfo({rGene:t})},n.selectAttribute=function(e){var t=typeof e==typeof{}?e:this.resultAttributesById[e];this.openSelectedInfo({rAttr:t})},n.selectInteraction=function(e){var t=typeof e==typeof{}?e:this.resultInteractionsById[e];this.openSelectedInfo({rIntn:t})}}}]),app.controller("SelectedInfoCtrl",["$scope","updateScope","cy",function(e,t,n){function r(){e.query=Query.current,e.result=e.query.result,e.rGene=e.result.selectedResultGene,e.rAttr=e.result.selectedResultAttribute,e.rIntn=e.result.selectedResultInteraction,e.rIntn?(e.rNet=e.rIntn.resultNetwork,e.net=e.rNet.network):(e.rNet=null,e.net=null),t()}PubSub.subscribe("result.searched",r),PubSub.subscribe("result.openSelectedInfo",r),PubSub.subscribe("result.closeSelectedInfo",r),PubSub.subscribe("result.updateHighlights",r)}]),app.factory("Result",["$$search","$$user","cy","cyStylesheet","util","Result_genes","Result_networks","Result_layouts","Result_selectedinfo","Result_functions","Result_highlight","Result_report","Result_save",function(e,t,n,r,i,o,a,s,u,l,c,h,d){var p=[o,a,s,u,l,c,h,d],f=window.Result=function(e){if(!(this instanceof f))return new f(e);e.query?this.query=e.query:console.error("A result must have a query specified"),window.result=this,void 0!==v.networksExpanded||i.isSmallScreen()||(v.networksExpanded=!0),void 0!==v.genesExpanded||i.isSmallScreen()||(v.genesExpanded=!0),this.search({store:e.store||void 0===e.store?!0:!1})},g=f,v=f.prototype;v.search=function(t){var n=this.query,r=this;return r.searching=!0,r.searchPromise=Promise.resolve().cancellable().then(function(){for(var t=[],r=0;r<n.networks.length;r++){var i=n.networks[r];i.selected&&t.push(i.id)}for(var o=[],r=0;r<n.attributeGroups.length;r++){var a=n.attributeGroups[r];a.selected&&o.push(a.id)}return e({organism:n.organism.id,genes:n.genesText,weighting:n.weighting.value,networks:t,attrGroups:o,geneThreshold:n.maxGenes,attrThreshold:n.maxAttrs})}).then(function(e){for(var i in e)r[i]=e[i];r.updateNetworkData(),r.updateGenesData(),r.updateFunctionsData(),r.loadGraph().then(function(){t.store&&n.store()}),r.searching=!1,r.searchPromise=null,PubSub.publish("result.searched",r)})["catch"](function(e){throw r.searching=!1,r.searchPromise=null,r.error=!0,PubSub.publish("result.error"),e})},v.cancel=function(){var e=this;e.searchPromise&&(PubSub.publish("result.cancel",e),e.searchPromise.cancel("A search was cancelled"))},v.cancellable=function(){return null!=this.searchPromise},v.updateFunctionsData=function(){for(var e=this.resultOntologyCategories,t=0;t<e.length;t++){var n=e[t];n.qValueFormatted=new Number(n.qValue).toExponential(2),n.coverageFormatted=n.numAnnotatedInSample+" / "+n.numAnnotatedInTotal}this.coloringFunctions=[],this.functionColors=config.functionColors.slice()},v.updateGenesData=function(){var e=this,t=e.resultGenesById={},n=e.resultGenes.concat([]).sort(function(e,t){return t.score-e.score}),r=0;n.forEach(function(e){e.queryGene||r++,e.rank=r});for(var i=0;i<e.resultGenes.length;i++){var o=e.resultGenes[i];o.name=o.gene.name=o.typedName||o.gene.symbol,t[""+o.gene.id]=o}},v.makeResultInteractionId=function(){return this.lastRIntnId=this.lastRIntnId||1,++this.lastRIntnId},v.updateNetworkData=function(){var e=this,t=e.resultNetworkGroups,n=e.resultAttributeGroups,r=e.resultAllGroups=n.concat(t),i=e.resultAttributesById={},o=e.resultInteractionsById={},a=e.resultInteractions=[],s=e.resultNetworksById={};e.resultNetworks=[];for(var u=function(e,t){return t.weight-e.weight},l=function(e){return numeral(e).format("0.00%")},c=0;c<t.length;c++){for(var h=t[c],d=h.resultNetworks,p=config.networks.colorsByCode[h.networkGroup.code],f=0;f<d.length;f++){var g=d[f];g.color=p,g.displayWeight=l(g.weight),g.enabled=!0,g.expanded=!1,g.resultNetworkGroup=h,g.ele=g.network,null!=g.network.metadata&&null!=g.network.metadata.yearPublished&&(g.network.metadata.yearPublished=""+parseInt(g.network.metadata.yearPublished)),s[g.network.id]=g,e.resultNetworks.push(g);for(var v=g.resultInteractions,y=0;y<v.length;y++){var m=v[y];m.weight=m.interaction.weight,m.displayWeight=numeral(m.weight).format("0.00%"),m.absoluteWeight=m.interaction.weight*g.weight,m.absoluteDisplayWeight=numeral(m.absoluteWeight).format("0.00%"),m.id=e.makeResultInteractionId(),m.resultNetwork=g,m.fromGene.name=m.fromGene.gene.name=m.fromGene.typedName||m.fromGene.gene.symbol,m.toGene.name=m.toGene.gene.name=m.toGene.typedName||m.toGene.gene.symbol,o[m.id]=m,a.push(m)}config.networks.postprocess(g.network)}h.isResultNetworkGroup=!0,h.color=p,h.displayWeight=l(h.weight),h.enabled=!0,h.expanded=!1,h.children=d,h.ele=h.networkGroup,d.sort(u)}for(var c=0;c<n.length;c++){for(var h=n[c],b=h.resultAttributes,p=config.attributes.color,f=0;f<b.length;f++){var w=b[f];w.isResultAttribute=!0,w.color=p,w.displayWeight=l(w.weight),w.enabled=!0,w.expanded=!1,w.resultAttributeGroup=h,w.ele=w.attribute,i[w.attribute.id]=w}h.isResultAttributeGroup=!0,h.color=p,h.displayWeight=l(h.weight),h.enabled=!0,h.expanded=!1,h.children=b,h.ele=h.attributeGroup,b.sort(u)}r.sort(u)},v.loadGraph=function(){var e=this,t=[],r={};n.startBatch();for(var i=n.elements(),o={},a=!1,s=0;s<i.length;s++)o[i[s].id()]=i[s];for(var s=0;s<e.resultGenes.length;s++){var u,l=e.resultGenes[s],c=l.gene,h=o[c.id];h&&(a=!0);var d=l.rank;t.push(u={group:"nodes",position:h?h.position():void 0,data:{oldEle:!!h,id:""+c.id,idInt:c.id,name:(l.typedName||c.symbol)+(0!==d?" ("+d+")":""),score:l.score,query:l.queryGene,gene:!0,css:function(){for(var e={},t=1;16>=t;t++)e["pie_"+t+"_background_size"]=0,e["pie_"+t+"_background_color"]="#000",e["pie_"+t+"_background_opacity"]=0;return e}()},classes:l.resultOntologyCategories.map(function(e){return"fn"+e.id}).join(" ")});for(var p=l.resultAttributes,f=0;f<p.length;f++){var g,v=p[f],y=v.attribute,m=r[y.id];m||t.push(m={group:"nodes",data:{id:""+y.id,idInt:y.id,name:y.name,attr:!0}}),t.push(g={group:"edges",data:{source:""+c.id,target:""+y.id,group:"attr",attr:!0,attributeGroupId:e.resultAttributesById[v.attribute.id].resultAttributeGroup.attributeGroup.id}})}}for(var s=0;s<e.resultNetworkGroups.length;s++){for(var b=e.resultNetworkGroups[s],w=b.networkGroup,x=b.resultNetworks,_=[],f=0;f<x.length;f++)for(var E=x[f],k=E.resultInteractions,S=0;S<k.length;S++){var u,T=k[S],C=T.fromGene.gene.id,N=T.toGene.gene.id;t.push(u={group:"edges",data:{id:"intn-"+T.id,source:C,target:N,weight:T.interaction.weight,group:w.code,networkId:E.network.id,networkGroupId:b.networkGroup.id,intn:!0,rIntnId:T.id}})}for(var f=0;f<_.length;f++){break}}i.remove(),n.add(t);for(var A=n.nodes(),P=(A.filter("[?query]"),A.filter("[!query]")),D=P.max(function(e){return e.data("score")}).value,s=0;s<A.length;s++){var M=A[s],I=M.data("score");M.data("normScore",Math.min(I/D,1))}n.endBatch();var O=($("#network-list"),n.container(),A.filter("[?oldEle][?query]").lock());return e.layoutResizeCyPre(),e.forceLayout({animate:a,fit:!a,randomize:!a,resizeCy:!1}).then(function(){if(O.unlock(),a){var t=function(e){return new Promise(function(t){setTimeout(t,e)})};return t(25).then(function(){return e.fitGraph({duration:250,resizeCy:!1})}).then(function(){return t(25)}).then(function(){return e.forceLayout({animate:!0,fit:!0,randomize:!1,maxSimulationTime:1e3,resizeCy:!1})})}}).then(function(){e.layoutResizeCyPost()})};for(var y=0;y<p.length;y++)p[y](g);return g}]),app.controller("ResultCtrl",["$scope","updateScope","cy",function(e,t,n){function r(){e.query=Query.current,e.result=e.query.result,t()}PubSub.subscribe("result.searched",r),PubSub.subscribe("result.error",t)}]),app.factory("$$search",["$http","util","$$user",function(e,t,n){var r,i,o=window.$$search=function(e){return n.read().then(function(t){var n=t.localId;e.sessionId=n}).then(function(){return new Promise(function(t,n){function a(){i=setInterval(function(){var e=Date.now(),t=s-l,n=e-s,r=n/t*c;o.progress=c+r,o.progress=Math.min(o.progress,100),PubSub.publish("$$search.progress",o)},h)}var s,u=o.request=new XMLHttpRequest,l=Date.now(),c=1.5,h=100;clearTimeout(r),o.progress=0,u.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;o.progress=Math.round(c*t),1===t&&(s=Date.now(),a())}PubSub.publish("$$search.progress",o)},!1),u.addEventListener("load",function(e){o.progress=100,clearInterval(i),PubSub.publish("$$search.progress",o),clearTimeout(r),r=setTimeout(function(){o.progress=0,PubSub.publish("$$search.progress",o)},2*h),setTimeout(function(){var e=u.responseText;e?t(JSON.parse(e)):n("Empty result response")},h)},!1),u.addEventListener("error",n,!1),u.addEventListener("abort",n,!1),u.open("POST",config.service.baseUrl+"search_results",!0),u.setRequestHeader("Content-Type","application/json"),u.send(JSON.stringify(e))}).cancellable().then(function(e){return e.error?Promise.reject(e.error):e})["catch"](function(e){throw o.request&&o.request.abort(),o.progress=0,clearTimeout(r),clearInterval(i),e})})};return o}]),app.factory("$$user",["$http","util","io",function(e,t,n){var r=window.$$user=n("user",{localId:"local-user-"+uuid.v4()});return r.read().then(function(){return r.write()}),r}]),app.factory("util",[function(){return{copy:function(e){return JSON.parse(JSON.stringify(e))},nativePromise:function(e){return Promise.resolve().then(function(){return e})},timeoutPromise:function(e,t){return new Promise(function(n){setTimeout(function(){n(e)},t)})},strcmp:function(e,t){return e==t?0:e>t?1:-1},delayPromise:function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},isSmallScreen:function(){var e=550,t=$(document);return t.width()<e||t.height()<e}}}]),app.factory("$$version",["$http","util",function(e,t){var n=window.$$version=function(n){return t.nativePromise(e.get(config.service.baseUrl+"version",n).then(function(e){return e.data}))};return n}]),function(){function e(){var e=t();return[{name:"height",value:e+"px"},{name:"min-height",value:e+"px"}]}function t(){var e=document.getElementById("query-genes-textarea").clientHeight,t=document.getElementById("query-qtip-viewport").clientHeight,n=100,r=t-40;return n>e&&(e=n),e>r&&(e=r),e}function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=$(r).parents(".qtip:first");i.length>0&&i.is(":visible")&&i.qtip("api").reposition()}}var r=[{id:"query-network-groups",handler:function(){var e=document.getElementById("query-qtip-viewport");return[{name:"max-height",value:e.clientHeight-70+"px"}]},after:n},{id:"query-organism-select",handler:function(){var e=document.getElementById("query-qtip-viewport");return[{name:"max-height",value:e.clientHeight-30+"px"}]},after:n},{id:"query-adv-opts",handler:function(){var e=document.getElementById("query-qtip-viewport");return[{name:"max-height",value:e.clientHeight-50+"px"}]},after:n},{id:"functions-add-list",handler:function(){var e=document.body;return[{name:"max-height",value:e.clientHeight-60+"px"}]},after:n},{selector:[".query-genes-expander-expanded",".query-genes-expander-expanded .query-genes-validation",".query-genes-validation"].join(", "),getMatchingEles:!1,handler:e},{selector:".query-genes-expander-instr",getMatchingEles:!1,handler:function(){var e=t();return[{name:"top",value:e+"px"}]}}];responsive.defines(r),PubSub.subscribe("query.search",function(){responsive.restyle()})}();